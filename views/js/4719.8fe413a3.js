"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[4719],{7174:(e,t,s)=>{s.d(t,{Z:()=>p});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("grid-table",{staticClass:"color-settings",staticStyle:{width:"max-content"},attrs:{columns:e.columns,items:e.items},scopedSlots:e._u([{key:"header-key",fn:function(t){var n=t.label;return[s("span",{domProps:{textContent:e._s(n)}}),s("reset-button",{on:{reset:function(t){return e.$emit("reset")}}})]}},{key:"cell-key",fn:function(t){var n=t.value;return[s("div",{staticClass:"color-input",on:{click:function(t){e.$refs["colorInput-"+n].click()}}},[s("input",{ref:"colorInput-"+n,attrs:{type:"color"},domProps:{value:e.colors[n]},on:{change:function(t){return e.updateColor(n,t)}}}),s("div",{staticClass:"color-indicator",style:{background:e.colors[n]}}),s("span",{domProps:{textContent:e._s(e.labels[n])}})])]}}])})},o=[],a=s(655),r=s(4028),l=s(1799);let i=class extends r.w3{header;colors;labels;keys;get columns(){return[{key:"key",label:this.header,headerClass:"color-settings-header"}]}get items(){const e=this.keys??Object.keys(this.colors);return e.map((e=>({key:e})))}updateColor(e,t){t.target instanceof HTMLInputElement&&(this.colors={...this.colors,[e]:t.target.value})}};(0,a.gn)([(0,r.fI)({required:!0,type:String})],i.prototype,"header",void 0),(0,a.gn)([(0,r.Ey)({required:!0,type:Object})],i.prototype,"colors",void 0),(0,a.gn)([(0,r.fI)({required:!0,type:Object})],i.prototype,"labels",void 0),(0,a.gn)([(0,r.fI)({required:!1,type:Array,default:()=>null})],i.prototype,"keys",void 0),i=(0,a.gn)([(0,r.wA)({components:{ResetButton:l.Z}})],i);const u=i,c=u;var m=s(1001),d=(0,m.Z)(c,n,o,!1,null,"2f24a3e0",null);const p=d.exports},4898:(e,t,s)=>{s.d(t,{Z:()=>y});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("color-settings-table",{attrs:{header:e.$i18n.$t.extension.settings.colors.lifeformDiscoveries,labels:e.labels,keys:e.keys,value:e.colors},on:{input:function(t){return e.updateColors(t)},reset:function(t){return e.resetColors()}}})},o=[],a=s(655),r=s(9167),l=s(6105),i=s(4698),u=s(917),c=s(4028),m=s(7174);let d=class extends c.w3{get labels(){return{[l.y.nothing]:this.$i18n.$t.extension.empire.lifeforms.eventTypes.nothing,[l.y.lostShip]:this.$i18n.$t.extension.empire.lifeforms.eventTypes.lostShip,[l.y.knownLifeformFound]:this.$i18n.$t.extension.empire.lifeforms.lifeformFound,[l.y.artifacts]:this.$i18n.$t.extension.empire.lifeforms.eventTypes.artifacts}}keys=[l.y.nothing,l.y.lostShip,l.y.knownLifeformFound];get colors(){return u.V.settings.colors.lifeformDiscoveries.events}updateColors(e){u.V.updateSettings({...u.V.settings,colors:{...u.V.settings.colors,lifeformDiscoveries:{...u.V.settings.colors.lifeformDiscoveries,events:e}}})}resetColors(){const e=(0,i.O)(r.I.de).colors.lifeformDiscoveries.events;this.updateColors(e)}};d=(0,a.gn)([(0,c.wA)({components:{ColorSettingsTable:m.Z}})],d);const p=d,f=p;var g=s(1001),h=(0,g.Z)(f,n,o,!1,null,null,null);const y=h.exports},4310:(e,t,s)=>{s.d(t,{Z:()=>y});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("grid-table",{staticClass:"ranged-stats-table",attrs:{columns:e.columns,items:e.rows,"footer-items":e.footerRows,"cell-class-provider":function(t){return e.getCellClass(t)}},scopedSlots:e._u([e._l(e.columns,(function(t,n){return{key:"cell-"+t.key,fn:function(o){var a=o.value,r=o.item;return[s("span",{key:t.key,staticClass:"ranged-stats-table-cell"},["label"==t.key?[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:a}):s("span",{key:n,domProps:{textContent:e._s(a)}})]:"subLabel"==t.key?e._l(r.items,(function(n,o){return s("span",{key:o,class:n.labelClass},[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:n.label}):s("span",{domProps:{textContent:e._s(n.label)}})],2)})):e._l(r.items||[r],(function(n,o){return s("span",{key:o,class:[e.getCellClass(n[t.key]),n.class]},[null!=t.formatter?s("span",{domProps:{textContent:e._s(t.formatter(n[t.key]))}}):s("span",{domProps:{textContent:e._s(n[t.key])}})])}))],2)]}}})),e._l(e.$scopedSlots,(function(t,s){return{key:s,fn:function(t){return[e._t(s,null,null,t)]}}}))],null,!0)})},o=[],a=s(655),r=s(4028),l=s(9858),i=s(6538),u=s(4749),c=s.n(u),m=s(917);let d=class extends r.w3{showPercentage;showAverage;items;footerItems;numberFormatOptions;averageNumberFormatOptions;dataItems;get hasGroupedItems(){return this.items.some((e=>"items"in e))}get dateRanges(){return m.V.settings.dateRanges}get dataItemsByRange(){const e=this.dataItems,t=this.dateRanges.map((()=>[]));return e.forEach((e=>{this.dateRanges.forEach(((s,n)=>{(0,l.m)(e.date,s)&&t[n].push(e)}))})),t}get firstDay(){return this.dataItemsByRange.reduce(((e,t)=>Math.min(e,Math.min(...t.map((e=>e.date))))),Date.now())}get columns(){const e=[{key:"label",label:"",slotName:"label"}];return this.hasGroupedItems&&e.push({key:"subLabel",label:"",slotName:"subLabel"}),e.push(...this.dateRanges.map(((e,t)=>({key:t,label:e.label??this.$i18n.$t.extension.settings.dateRanges.since(this.$i18n.$d(this.firstDay,"date")),formatter:e=>this.$i18n.$n(e,this.numberFormatOptions)})))),this.showAverage&&e.push({key:"average",label:this.$i18n.$t.extension.common.averagePerDay,formatter:e=>this.$i18n.$n(e,this.averageNumberFormatOptions??this.numberFormatOptions)}),this.showPercentage&&e.push({key:"percentage",label:"%",formatter:e=>""!=e?this.$i18n.$n(e,{minimumFractionDigits:3,maximumFractionDigits:3}):e}),e}get rows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,i.A)("failed to find range 'all'"),s=e[t].map((e=>c()(e.date).getTime())),n=new Set(s).size,o=Math.max(1,this.items.map((s=>"getValue"in s?s.getValue(e[t]):s.items.reduce(((s,n)=>s+n.getValue(e[t])),0))).reduce(((e,t)=>e+t),0));return this.items.map((s=>this.mapItemToRow(s,e,t,n,o)))}mapItemToRow(e,t,s,n,o){if("getValue"in e){const a={label:e.label,class:e.class,labelClass:e.labelClass,...this.dateRanges.map(((s,n)=>e.getValue(t[n])))},r=a[s];return this.showAverage&&(a.average=r/Math.max(1,n)),this.showPercentage&&(a.percentage=100*r/o),a}return{label:e.label,items:e.items.map((e=>this.mapItemToRow(e,t,s,n,o)))}}get footerRows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,i.A)("failed to find range 'all'"),s=e[t].map((e=>c()(e.date).getTime())),n=new Set(s).size;return this.footerItems.map((s=>{const o={label:s.label,...this.dateRanges.map(((t,n)=>"getValue"in s?s.getValue(e[n]):s.items.reduce(((t,s)=>t+s.getValue(e[n])),0))),percentage:""};if(this.showAverage){const e=o[t];o.average=e/Math.max(1,n)}return o}))}getCellClass(e){return 0==e?"fade-value":""}};(0,a.gn)([(0,r.fI)({required:!1,type:Boolean})],d.prototype,"showPercentage",void 0),(0,a.gn)([(0,r.fI)({required:!1,type:Boolean})],d.prototype,"showAverage",void 0),(0,a.gn)([(0,r.fI)({required:!0,type:Array})],d.prototype,"items",void 0),(0,a.gn)([(0,r.fI)({required:!1,type:Array,default:()=>[]})],d.prototype,"footerItems",void 0),(0,a.gn)([(0,r.fI)({required:!1,type:Object,default:void 0})],d.prototype,"numberFormatOptions",void 0),(0,a.gn)([(0,r.fI)({required:!1,type:Object,default:void 0})],d.prototype,"averageNumberFormatOptions",void 0),(0,a.gn)([(0,r.fI)({required:!0,type:Array})],d.prototype,"dataItems",void 0),d=(0,a.gn)([(0,r.wA)({})],d);const p=d,f=p;var g=s(1001),h=(0,g.Z)(f,n,o,!1,null,"1526beca",null);const y=h.exports},6605:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table-container"},[s("ranged-stats-table",{attrs:{dataItems:e.missions,items:e.items,"show-percentage":""},scopedSlots:e._u([{key:"cell-label",fn:function(t){var n=t.value;return[s("span",{staticClass:"mr-2",domProps:{textContent:e._s(n)}}),s("span",{staticClass:"mdi mdi-pyramid",style:{color:e.color}})]}}])}),s("floating-menu",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(){return[s("button",{on:{click:function(t){e.showSettings=!e.showSettings}}},[s("span",{staticClass:"mdi mdi-cog"})])]},proxy:!0}]),model:{value:e.showSettings,callback:function(t){e.showSettings=t},expression:"showSettings"}},[s("date-range-settings"),s("LifeformDiscoveryColorSettings")],1)],1)},o=[],a=s(655),r=s(4028),l=s(4310),i=s(4329),u=s(917),c=s(4898),m=s(6903);let d=class extends r.w3{showSettings=!1;get color(){return u.V.settings.colors.lifeformDiscoveries.events.artifacts}get missions(){return m.F.dailyResultsArray}get items(){return[{label:this.$i18n.$t.extension.empire.lifeforms.artifacts,getValue:e=>e.reduce(((e,t)=>e+t.artifacts),0)}]}};d=(0,a.gn)([(0,r.wA)({components:{RangedStatsTable:l.Z,DateRangeSettings:i.Z,LifeformDiscoveryColorSettings:c.Z}})],d);const p=d,f=p;var g=s(1001),h=(0,g.Z)(f,n,o,!1,null,"0ae5e564",null);const y=h.exports},8734:(e,t)=>{function s(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s,e.exports=t.default},4749:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var n=a(s(1171)),o=a(s(8734));function a(e){return e&&e.__esModule?e:{default:e}}function r(e){(0,o.default)(1,arguments);var t=(0,n.default)(e);return t.setHours(0,0,0,0),t}e.exports=t.default},1171:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var n=o(s(8734));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){(0,n.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}e.exports=t.default}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UCxFQUFPRixTQUFTTyxHQUUvQixPQURBRSxFQUFLQyxTQUFTLEVBQUcsRUFBRyxFQUFHLEdBQ2hCRCxFQUdUVixFQUFPRCxRQUFVQSxFQUFRRSxTLGVDeEN6QkosT0FBT0MsZUFBZUMsRUFBUyxhQUFjLENBQzNDakQsT0FBTyxJQUVUaUQsRUFBQSxXQUFrQmEsRUFFbEIsSUFBSVQsRUFBU0MsRUFBdUIsRUFBUSxPQUU1QyxTQUFTQSxFQUF1QkUsR0FBTyxPQUFPQSxHQUFPQSxFQUFJQyxXQUFhRCxFQUFNLENBQUVMLFFBQVNLLEdBZ0N2RixTQUFTTSxFQUFPQyxJQUNkLEVBQUlWLEVBQU9GLFNBQVMsRUFBR1EsV0FDdkIsSUFBSUssRUFBU2pCLE9BQU9rQixVQUFVQyxTQUFTQyxLQUFLSixHQUU1QyxPQUFJQSxhQUFvQkssTUFBNEIsa0JBQWJMLEdBQW9DLGtCQUFYQyxFQUV2RCxJQUFJSSxLQUFLTCxFQUFTTSxXQUNJLGtCQUFiTixHQUFvQyxvQkFBWEMsRUFDbEMsSUFBSUksS0FBS0wsSUFFUyxrQkFBYkEsR0FBb0Msb0JBQVhDLEdBQW9ELHFCQUFaTSxVQUUzRUEsUUFBUUMsS0FBSyxvSkFFYkQsUUFBUUMsTUFBSyxJQUFJQyxPQUFRQyxRQUdwQixJQUFJTCxLQUFLTSxNQUlwQnhCLEVBQU9ELFFBQVVBLEVBQVFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc2V0dGluZ3MvY29sb3JzL0NvbG9yU2V0dGluZ3NUYWJsZS52dWU/YzA4ZCIsIndlYnBhY2s6Ly8vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc2V0dGluZ3MvY29sb3JzL0NvbG9yU2V0dGluZ3NUYWJsZS52dWU/Nzc1NiIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9jb2xvcnMvQ29sb3JTZXR0aW5nc1RhYmxlLnZ1ZT84M2UzIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3NldHRpbmdzL2NvbG9ycy9Db2xvclNldHRpbmdzVGFibGUudnVlPzhkZjkiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc2V0dGluZ3MvY29sb3JzL0xpZmVmb3JtRGlzY292ZXJ5Q29sb3JTZXR0aW5ncy52dWU/NGMwZCIsIndlYnBhY2s6Ly8vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc2V0dGluZ3MvY29sb3JzL0xpZmVmb3JtRGlzY292ZXJ5Q29sb3JTZXR0aW5ncy52dWU/YjZjYSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9jb2xvcnMvTGlmZWZvcm1EaXNjb3ZlcnlDb2xvclNldHRpbmdzLnZ1ZT9iZTA1Iiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3NldHRpbmdzL2NvbG9ycy9MaWZlZm9ybURpc2NvdmVyeUNvbG9yU2V0dGluZ3MudnVlP2Y1MGIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWU/ODFkYyIsIndlYnBhY2s6Ly8vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWU/NTc5NyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zdGF0cy9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT9mNzVhIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlPzcwYWMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2xpZmVmb3Jtcy9kaXNjb3Zlcmllcy9hcnRpZmFjdHMvYW1vdW50L1RhYmxlLnZ1ZT8yZjkzIiwid2VicGFjazovLy9zcmMvdmlld3Mvc3RhdHMvdmlld3MvbGlmZWZvcm1zL2Rpc2NvdmVyaWVzL2FydGlmYWN0cy9hbW91bnQvVGFibGUudnVlPzdjZTkiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2xpZmVmb3Jtcy9kaXNjb3Zlcmllcy9hcnRpZmFjdHMvYW1vdW50L1RhYmxlLnZ1ZT85YTlmIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy9saWZlZm9ybXMvZGlzY292ZXJpZXMvYXJ0aWZhY3RzL2Ftb3VudC9UYWJsZS52dWU/YTQ5OCIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanM/Mjk1YiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZkRheS9pbmRleC5qcz85MWExIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy90b0RhdGUvaW5kZXguanM/YWQ2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygnZ3JpZC10YWJsZScse3N0YXRpY0NsYXNzOlwiY29sb3Itc2V0dGluZ3NcIixzdGF0aWNTdHlsZTp7XCJ3aWR0aFwiOlwibWF4LWNvbnRlbnRcIn0sYXR0cnM6e1wiY29sdW1uc1wiOl92bS5jb2x1bW5zLFwiaXRlbXNcIjpfdm0uaXRlbXN9LHNjb3BlZFNsb3RzOl92bS5fdShbe2tleTpcImhlYWRlci1rZXlcIixmbjpmdW5jdGlvbihyZWYpe1xudmFyIGxhYmVsID0gcmVmLmxhYmVsO1xucmV0dXJuIFtfYygnc3Bhbicse2RvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKGxhYmVsKX19KSxfYygncmVzZXQtYnV0dG9uJyx7b246e1wicmVzZXRcIjpmdW5jdGlvbigkZXZlbnQpe3JldHVybiBfdm0uJGVtaXQoJ3Jlc2V0Jyl9fX0pXX19LHtrZXk6XCJjZWxsLWtleVwiLGZuOmZ1bmN0aW9uKHJlZil7XG52YXIga2V5ID0gcmVmLnZhbHVlO1xucmV0dXJuIFtfYygnZGl2Jyx7c3RhdGljQ2xhc3M6XCJjb2xvci1pbnB1dFwiLG9uOntcImNsaWNrXCI6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uJHJlZnNbKFwiY29sb3JJbnB1dC1cIiArIGtleSldLmNsaWNrKCl9fX0sW19jKCdpbnB1dCcse3JlZjooXCJjb2xvcklucHV0LVwiICsga2V5KSxhdHRyczp7XCJ0eXBlXCI6XCJjb2xvclwifSxkb21Qcm9wczp7XCJ2YWx1ZVwiOl92bS5jb2xvcnNba2V5XX0sb246e1wiY2hhbmdlXCI6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLnVwZGF0ZUNvbG9yKGtleSwgJGV2ZW50KX19fSksX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwiY29sb3ItaW5kaWNhdG9yXCIsc3R5bGU6KHsgYmFja2dyb3VuZDogX3ZtLmNvbG9yc1trZXldIH0pfSksX2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhfdm0ubGFiZWxzW2tleV0pfX0pXSldfX1dKX0pfVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCI8dGVtcGxhdGU+XHJcbiAgICA8Z3JpZC10YWJsZVxyXG4gICAgICAgIGNsYXNzPVwiY29sb3Itc2V0dGluZ3NcIlxyXG4gICAgICAgIDpjb2x1bW5zPVwiY29sdW1uc1wiXHJcbiAgICAgICAgOml0ZW1zPVwiaXRlbXNcIlxyXG4gICAgICAgIHN0eWxlPVwid2lkdGg6IG1heC1jb250ZW50XCJcclxuICAgID5cclxuICAgICAgICA8dGVtcGxhdGUgI2hlYWRlci1rZXk9XCJ7IGxhYmVsIH1cIj5cclxuICAgICAgICAgICAgPHNwYW4gdi10ZXh0PVwibGFiZWxcIiAvPlxyXG4gICAgICAgICAgICA8cmVzZXQtYnV0dG9uIEByZXNldD1cIiRlbWl0KCdyZXNldCcpXCIgLz5cclxuICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgIDx0ZW1wbGF0ZSAjY2VsbC1rZXk9XCJ7IHZhbHVlOiBrZXkgfVwiPlxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImNvbG9yLWlucHV0XCJcclxuICAgICAgICAgICAgICAgIEBjbGljaz1cIiRyZWZzW2Bjb2xvcklucHV0LSR7a2V5fWBdLmNsaWNrKClcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY29sb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgIDp2YWx1ZT1cImNvbG9yc1trZXldXCJcclxuICAgICAgICAgICAgICAgICAgICBAY2hhbmdlPVwidXBkYXRlQ29sb3Ioa2V5LCAkZXZlbnQpXCJcclxuICAgICAgICAgICAgICAgICAgICA6cmVmPVwiYGNvbG9ySW5wdXQtJHtrZXl9YFwiXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiY29sb3ItaW5kaWNhdG9yXCJcclxuICAgICAgICAgICAgICAgICAgICA6c3R5bGU9XCJ7IGJhY2tncm91bmQ6IGNvbG9yc1trZXldIH1cIlxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDxzcGFuIHYtdGV4dD1cImxhYmVsc1trZXldXCIgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgIDwvZ3JpZC10YWJsZT5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQgbGFuZz1cInRzXCI+XHJcbiAgICBpbXBvcnQgeyBQcm9wVHlwZSB9IGZyb20gJ3Z1ZSc7XHJcbiAgICBpbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSwgVk1vZGVsIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgeyBHcmlkVGFibGVDb2x1bW4gfSBmcm9tICcuLi8uLi9jb21tb24vR3JpZFRhYmxlLnZ1ZSc7XHJcbiAgICBpbXBvcnQgUmVzZXRCdXR0b24gZnJvbSAnLi4vUmVzZXRCdXR0b24udnVlJztcclxuXHJcbiAgICBAQ29tcG9uZW50KHtcclxuICAgICAgICBjb21wb25lbnRzOiB7XHJcbiAgICAgICAgICAgIFJlc2V0QnV0dG9uLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JTZXR0aW5nc1RhYmxlIGV4dGVuZHMgVnVlIHtcclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSlcclxuICAgICAgICBwcml2YXRlIGhlYWRlciE6IHN0cmluZztcclxuXHJcbiAgICAgICAgQFZNb2RlbCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBPYmplY3QgYXMgUHJvcFR5cGU8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4gfSlcclxuICAgICAgICBwcml2YXRlIGNvbG9ycyE6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6IE9iamVjdCBhcyBQcm9wVHlwZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiB9KVxyXG4gICAgICAgIHByaXZhdGUgbGFiZWxzITogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IEFycmF5IGFzIFByb3BUeXBlPHN0cmluZ1tdPiwgZGVmYXVsdDogKCkgPT4gbnVsbCB9KVxyXG4gICAgICAgIHByaXZhdGUga2V5cyE6IHN0cmluZ1tdIHwgbnVsbDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgY29sdW1ucygpOiBHcmlkVGFibGVDb2x1bW5bXSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbe1xyXG4gICAgICAgICAgICAgICAga2V5OiAna2V5JyxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmhlYWRlcixcclxuICAgICAgICAgICAgICAgIGhlYWRlckNsYXNzOiAnY29sb3Itc2V0dGluZ3MtaGVhZGVyJyxcclxuICAgICAgICAgICAgfV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBpdGVtcygpOiB7IGtleTogc3RyaW5nIH1bXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSB0aGlzLmtleXMgPz8gT2JqZWN0LmtleXModGhpcy5jb2xvcnMpO1xyXG4gICAgICAgICAgICByZXR1cm4ga2V5cy5tYXAoa2V5ID0+ICh7IGtleSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHVwZGF0ZUNvbG9yKGtleTogc3RyaW5nLCBldmVudDogSW5wdXRFdmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xvcnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5jb2xvcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgW2tleV06IGV2ZW50LnRhcmdldC52YWx1ZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuPC9zY3JpcHQ+XHJcbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cclxuICAgIC5jb2xvci1pbnB1dCB7XHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBmbGV4LWdyb3c6IDE7XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgY29sdW1uLWdhcDogNHB4O1xyXG5cclxuICAgICAgICA+IGlucHV0W3R5cGU9XCJjb2xvclwiXSB7XHJcbiAgICAgICAgICAgIHdpZHRoOiAwO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDA7XHJcbiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZTtcclxuICAgICAgICAgICAgcGFkZGluZzogMDtcclxuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgPiAuY29sb3ItaW5kaWNhdG9yIHtcclxuICAgICAgICAgICAgaGVpZ2h0OiAyNHB4O1xyXG4gICAgICAgICAgICB3aWR0aDogMjRweDtcclxuICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5jb2xvci1zZXR0aW5nczo6di1kZWVwIC5jb2xvci1zZXR0aW5ncy1oZWFkZXIge1xyXG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgfVxyXG48L3N0eWxlPiIsImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RocmVhZC1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9Db2xvclNldHRpbmdzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vQ29sb3JTZXR0aW5nc1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vQ29sb3JTZXR0aW5nc1RhYmxlLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD0yZjI0YTNlMCZzY29wZWQ9dHJ1ZSZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9Db2xvclNldHRpbmdzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9Db2xvclNldHRpbmdzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL0NvbG9yU2V0dGluZ3NUYWJsZS52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0yZjI0YTNlMCZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBcIjJmMjRhM2UwXCIsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2NvbG9yLXNldHRpbmdzLXRhYmxlJyx7YXR0cnM6e1wiaGVhZGVyXCI6X3ZtLiRpMThuLiR0LmV4dGVuc2lvbi5zZXR0aW5ncy5jb2xvcnMubGlmZWZvcm1EaXNjb3ZlcmllcyxcImxhYmVsc1wiOl92bS5sYWJlbHMsXCJrZXlzXCI6X3ZtLmtleXMsXCJ2YWx1ZVwiOl92bS5jb2xvcnN9LG9uOntcImlucHV0XCI6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLnVwZGF0ZUNvbG9ycygkZXZlbnQpfSxcInJlc2V0XCI6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLnJlc2V0Q29sb3JzKCl9fX0pfVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCI8dGVtcGxhdGU+XHJcbiAgICA8Y29sb3Itc2V0dGluZ3MtdGFibGVcclxuICAgICAgICA6aGVhZGVyPVwiJGkxOG4uJHQuZXh0ZW5zaW9uLnNldHRpbmdzLmNvbG9ycy5saWZlZm9ybURpc2NvdmVyaWVzXCJcclxuICAgICAgICA6bGFiZWxzPVwibGFiZWxzXCJcclxuICAgICAgICA6a2V5cz1cImtleXNcIlxyXG4gICAgICAgIDp2YWx1ZT1cImNvbG9yc1wiXHJcbiAgICAgICAgQGlucHV0PVwidXBkYXRlQ29sb3JzKCRldmVudClcIlxyXG4gICAgICAgIEByZXNldD1cInJlc2V0Q29sb3JzKClcIlxyXG4gICAgLz5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQgbGFuZz1cInRzXCI+XHJcbiAgICBpbXBvcnQgeyBMYW5ndWFnZUtleSB9IGZyb20gJ0Avc2hhcmVkL2kxOG4vTGFuZ3VhZ2VLZXknO1xyXG4gICAgaW1wb3J0IHsgTGlmZWZvcm1EaXNjb3ZlcnlFdmVudFR5cGUgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvbGlmZWZvcm0tZGlzY292ZXJpZXMvTGlmZWZvcm1EaXNjb3ZlcnlFdmVudFR5cGUnO1xyXG4gICAgaW1wb3J0IHsgZ2V0RGVmYXVsdFNldHRpbmdzIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL3NldHRpbmdzL2dldERlZmF1bHRTZXR0aW5ncyc7XHJcbiAgICBpbXBvcnQgeyBTZXR0aW5nc0RhdGFNb2R1bGUgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvU2V0dGluZ3NEYXRhTW9kdWxlJztcclxuICAgIGltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgQ29sb3JTZXR0aW5nc1RhYmxlIGZyb20gJy4vQ29sb3JTZXR0aW5nc1RhYmxlLnZ1ZSc7XHJcblxyXG4gICAgQENvbXBvbmVudCh7XHJcbiAgICAgICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICAgICBDb2xvclNldHRpbmdzVGFibGUsXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbiAgICBleHBvcnQgZGVmYXVsdCBjbGFzcyBMaWZlZm9ybURpc2NvdmVyeUNvbG9yU2V0dGluZ3MgZXh0ZW5kcyBWdWUge1xyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBsYWJlbHMoKTogUmVjb3JkPEV4Y2x1ZGU8TGlmZWZvcm1EaXNjb3ZlcnlFdmVudFR5cGUsIExpZmVmb3JtRGlzY292ZXJ5RXZlbnRUeXBlLm5ld0xpZmVmb3JtRm91bmQ+LCBzdHJpbmc+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIFtMaWZlZm9ybURpc2NvdmVyeUV2ZW50VHlwZS5ub3RoaW5nXTogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5ldmVudFR5cGVzLm5vdGhpbmcsXHJcbiAgICAgICAgICAgICAgICBbTGlmZWZvcm1EaXNjb3ZlcnlFdmVudFR5cGUubG9zdFNoaXBdOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLmV2ZW50VHlwZXMubG9zdFNoaXAsXHJcbiAgICAgICAgICAgICAgICBbTGlmZWZvcm1EaXNjb3ZlcnlFdmVudFR5cGUua25vd25MaWZlZm9ybUZvdW5kXTogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5saWZlZm9ybUZvdW5kLFxyXG4gICAgICAgICAgICAgICAgW0xpZmVmb3JtRGlzY292ZXJ5RXZlbnRUeXBlLmFydGlmYWN0c106IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmVtcGlyZS5saWZlZm9ybXMuZXZlbnRUeXBlcy5hcnRpZmFjdHMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGtleXM6IExpZmVmb3JtRGlzY292ZXJ5RXZlbnRUeXBlW10gPSBbXHJcbiAgICAgICAgICAgIExpZmVmb3JtRGlzY292ZXJ5RXZlbnRUeXBlLm5vdGhpbmcsXHJcbiAgICAgICAgICAgIExpZmVmb3JtRGlzY292ZXJ5RXZlbnRUeXBlLmxvc3RTaGlwLFxyXG4gICAgICAgICAgICBMaWZlZm9ybURpc2NvdmVyeUV2ZW50VHlwZS5rbm93bkxpZmVmb3JtRm91bmQsXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgY29sb3JzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NEYXRhTW9kdWxlLnNldHRpbmdzLmNvbG9ycy5saWZlZm9ybURpc2NvdmVyaWVzLmV2ZW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ29sb3JzKHZhbHVlOiBSZWNvcmQ8TGlmZWZvcm1EaXNjb3ZlcnlFdmVudFR5cGUsIHN0cmluZz4pIHtcclxuICAgICAgICAgICAgU2V0dGluZ3NEYXRhTW9kdWxlLnVwZGF0ZVNldHRpbmdzKHtcclxuICAgICAgICAgICAgICAgIC4uLlNldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgIGNvbG9yczoge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLlNldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncy5jb2xvcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlmZWZvcm1EaXNjb3Zlcmllczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5TZXR0aW5nc0RhdGFNb2R1bGUuc2V0dGluZ3MuY29sb3JzLmxpZmVmb3JtRGlzY292ZXJpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50czogdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZXNldENvbG9ycygpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdENvbG9ycyA9IGdldERlZmF1bHRTZXR0aW5ncyhMYW5ndWFnZUtleS5kZSkuY29sb3JzLmxpZmVmb3JtRGlzY292ZXJpZXMuZXZlbnRzO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbG9ycyhkZWZhdWx0Q29sb3JzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc2NyaXB0PiIsImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RocmVhZC1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9MaWZlZm9ybURpc2NvdmVyeUNvbG9yU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vTGlmZWZvcm1EaXNjb3ZlcnlDb2xvclNldHRpbmdzLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vTGlmZWZvcm1EaXNjb3ZlcnlDb2xvclNldHRpbmdzLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD0zODQ5OWIzYSZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9MaWZlZm9ybURpc2NvdmVyeUNvbG9yU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9MaWZlZm9ybURpc2NvdmVyeUNvbG9yU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5cblxuLyogbm9ybWFsaXplIGNvbXBvbmVudCAqL1xuaW1wb3J0IG5vcm1hbGl6ZXIgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvcnVudGltZS9jb21wb25lbnROb3JtYWxpemVyLmpzXCJcbnZhciBjb21wb25lbnQgPSBub3JtYWxpemVyKFxuICBzY3JpcHQsXG4gIHJlbmRlcixcbiAgc3RhdGljUmVuZGVyRm5zLFxuICBmYWxzZSxcbiAgbnVsbCxcbiAgbnVsbCxcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygnZ3JpZC10YWJsZScse3N0YXRpY0NsYXNzOlwicmFuZ2VkLXN0YXRzLXRhYmxlXCIsYXR0cnM6e1wiY29sdW1uc1wiOl92bS5jb2x1bW5zLFwiaXRlbXNcIjpfdm0ucm93cyxcImZvb3Rlci1pdGVtc1wiOl92bS5mb290ZXJSb3dzLFwiY2VsbC1jbGFzcy1wcm92aWRlclwiOmZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gX3ZtLmdldENlbGxDbGFzcyh2YWx1ZSk7IH19LHNjb3BlZFNsb3RzOl92bS5fdShbX3ZtLl9sKChfdm0uY29sdW1ucyksZnVuY3Rpb24oY29sdW1uLGkpe3JldHVybiB7a2V5OihcImNlbGwtXCIgKyAoY29sdW1uLmtleSkpLGZuOmZ1bmN0aW9uKHJlZil7XG52YXIgdmFsdWUgPSByZWYudmFsdWU7XG52YXIgaXRlbSA9IHJlZi5pdGVtO1xucmV0dXJuIFtfYygnc3Bhbicse2tleTpjb2x1bW4ua2V5LHN0YXRpY0NsYXNzOlwicmFuZ2VkLXN0YXRzLXRhYmxlLWNlbGxcIn0sWyhjb2x1bW4ua2V5ID09ICdsYWJlbCcpP1soY29sdW1uLnNsb3ROYW1lICE9IG51bGwgJiYgX3ZtLiRzY29wZWRTbG90c1tjb2x1bW4uc2xvdE5hbWVdICE9IG51bGwpP192bS5fdChjb2x1bW4uc2xvdE5hbWUsbnVsbCx7XCJ2YWx1ZVwiOnZhbHVlfSk6X2MoJ3NwYW4nLHtrZXk6aSxkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyh2YWx1ZSl9fSldOihjb2x1bW4ua2V5ID09ICdzdWJMYWJlbCcpP192bS5fbCgoaXRlbS5pdGVtcyksZnVuY3Rpb24oaXRlbSxpKXtyZXR1cm4gX2MoJ3NwYW4nLHtrZXk6aSxjbGFzczppdGVtLmxhYmVsQ2xhc3N9LFsoY29sdW1uLnNsb3ROYW1lICE9IG51bGwgJiYgX3ZtLiRzY29wZWRTbG90c1tjb2x1bW4uc2xvdE5hbWVdICE9IG51bGwpP192bS5fdChjb2x1bW4uc2xvdE5hbWUsbnVsbCx7XCJ2YWx1ZVwiOml0ZW0ubGFiZWx9KTpfYygnc3Bhbicse2RvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKGl0ZW0ubGFiZWwpfX0pXSwyKX0pOl92bS5fbCgoaXRlbS5pdGVtcyB8fCBbaXRlbV0pLGZ1bmN0aW9uKGl0ZW0saSl7cmV0dXJuIF9jKCdzcGFuJyx7a2V5OmksY2xhc3M6W192bS5nZXRDZWxsQ2xhc3MoaXRlbVtjb2x1bW4ua2V5XSksIGl0ZW0uY2xhc3NdfSxbKGNvbHVtbi5mb3JtYXR0ZXIgIT0gbnVsbCk/X2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhjb2x1bW4uZm9ybWF0dGVyKGl0ZW1bY29sdW1uLmtleV0pKX19KTpfYygnc3Bhbicse2RvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKGl0ZW1bY29sdW1uLmtleV0pfX0pXSl9KV0sMildfX19KSxfdm0uX2woKF92bS4kc2NvcGVkU2xvdHMpLGZ1bmN0aW9uKGluZGV4LG5hbWUpe3JldHVybiB7a2V5Om5hbWUsZm46ZnVuY3Rpb24oZGF0YSl7cmV0dXJuIFtfdm0uX3QobmFtZSxudWxsLG51bGwsZGF0YSldfX19KV0sbnVsbCx0cnVlKX0pfVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCI8dGVtcGxhdGU+XHJcbiAgICA8Z3JpZC10YWJsZSA6Y29sdW1ucz1cImNvbHVtbnNcIiA6aXRlbXM9XCJyb3dzXCIgOmZvb3Rlci1pdGVtcz1cImZvb3RlclJvd3NcIiA6Y2VsbC1jbGFzcy1wcm92aWRlcj1cIih2YWx1ZSkgPT4gZ2V0Q2VsbENsYXNzKHZhbHVlKVwiIGNsYXNzPVwicmFuZ2VkLXN0YXRzLXRhYmxlXCI+XHJcbiAgICAgICAgPCEtLSBvaCBnb2QgdGhpcyBpcyB1Z2x5IC0tPlxyXG4gICAgICAgIDx0ZW1wbGF0ZSB2LWZvcj1cIihjb2x1bW4sIGkpIGluIGNvbHVtbnNcIiB2LXNsb3Q6W2BjZWxsLSR7Y29sdW1uLmtleX1gXT1cInsgdmFsdWUsIGl0ZW0gfVwiPlxyXG4gICAgICAgICAgICA8c3BhbiA6a2V5PVwiY29sdW1uLmtleVwiIGNsYXNzPVwicmFuZ2VkLXN0YXRzLXRhYmxlLWNlbGxcIj5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwiY29sdW1uLmtleSA9PSAnbGFiZWwnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNsb3Qgdi1pZj1cImNvbHVtbi5zbG90TmFtZSAhPSBudWxsICYmICRzY29wZWRTbG90c1tjb2x1bW4uc2xvdE5hbWVdICE9IG51bGxcIiA6bmFtZT1cImNvbHVtbi5zbG90TmFtZVwiIDp2YWx1ZT1cInZhbHVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWVsc2UgOmtleT1cImlcIiB2LXRleHQ9XCJ2YWx1ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtZWxzZS1pZj1cImNvbHVtbi5rZXkgPT0gJ3N1YkxhYmVsJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtZm9yPVwiKGl0ZW0sIGkpIGluIGl0ZW0uaXRlbXNcIiA6a2V5PVwiaVwiIDpjbGFzcz1cIml0ZW0ubGFiZWxDbGFzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2xvdCB2LWlmPVwiY29sdW1uLnNsb3ROYW1lICE9IG51bGwgJiYgJHNjb3BlZFNsb3RzW2NvbHVtbi5zbG90TmFtZV0gIT0gbnVsbFwiIDpuYW1lPVwiY29sdW1uLnNsb3ROYW1lXCIgOnZhbHVlPVwiaXRlbS5sYWJlbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtZWxzZSB2LXRleHQ9XCJpdGVtLmxhYmVsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtZWxzZT5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWZvcj1cIihpdGVtLCBpKSBpbiBpdGVtLml0ZW1zIHx8IFtpdGVtXVwiIDprZXk9XCJpXCIgOmNsYXNzPVwiW2dldENlbGxDbGFzcyhpdGVtW2NvbHVtbi5rZXldKSwgaXRlbS5jbGFzc11cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1pZj1cImNvbHVtbi5mb3JtYXR0ZXIgIT0gbnVsbFwiIHYtdGV4dD1cImNvbHVtbi5mb3JtYXR0ZXIoaXRlbVtjb2x1bW4ua2V5XSlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWVsc2Ugdi10ZXh0PVwiaXRlbVtjb2x1bW4ua2V5XVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgIDwvdGVtcGxhdGU+XHJcblxyXG4gICAgICAgIDx0ZW1wbGF0ZSB2LWZvcj1cIihpbmRleCwgbmFtZSkgaW4gJHNjb3BlZFNsb3RzXCIgdi1zbG90OltuYW1lXT1cImRhdGFcIj5cclxuICAgICAgICAgICAgPHNsb3QgOm5hbWU9XCJuYW1lXCIgdi1iaW5kPVwiZGF0YVwiIC8+XHJcbiAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgIDwvZ3JpZC10YWJsZT5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQgbGFuZz1cInRzXCI+XHJcbiAgICBpbXBvcnQgeyBQcm9wVHlwZSB9IGZyb20gJ3Z1ZSc7XHJcbiAgICBpbXBvcnQgeyBQcm9wIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InO1xyXG4gICAgaW1wb3J0IHsgR3JpZFRhYmxlQ29sdW1uIH0gZnJvbSAnQHN0YXRzL2NvbXBvbmVudHMvY29tbW9uL0dyaWRUYWJsZS52dWUnO1xyXG4gICAgaW1wb3J0IHsgaXNJblJhbmdlIH0gZnJvbSAnQHN0YXRzL3V0aWxzL2RhdGVSYW5nZXMnO1xyXG4gICAgaW1wb3J0IHsgX3Rocm93IH0gZnJvbSAnQC9zaGFyZWQvdXRpbHMvX3Rocm93JztcclxuICAgIGltcG9ydCBzdGFydE9mRGF5IGZyb20gJ2RhdGUtZm5zL3N0YXJ0T2ZEYXkvaW5kZXgnO1xyXG4gICAgaW1wb3J0IHsgU2V0dGluZ3NEYXRhTW9kdWxlIH0gZnJvbSAnLi4vLi4vZGF0YS9TZXR0aW5nc0RhdGFNb2R1bGUnO1xyXG5cclxuICAgIGludGVyZmFjZSBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGUge1xyXG4gICAgICAgIGRhdGU6IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmZhY2UgU2luZ2xlUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VCBleHRlbmRzIFJhbmdlU3RhdHNUYWJsZUl0ZW1XaXRoRGF0ZT4ge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgZ2V0VmFsdWU6IChpdGVtczogVFtdKSA9PiBudW1iZXI7XHJcbiAgICAgICAgY2xhc3M/OiBzdHJpbmc7XHJcbiAgICAgICAgbGFiZWxDbGFzcz86IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmZhY2UgR3JvdXBlZFJhbmdlZFN0YXRzVGFibGVJdGVtPFQgZXh0ZW5kcyBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGU+IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIGl0ZW1zOiBTaW5nbGVSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCB0eXBlIFJhbmdlZFN0YXRzVGFibGVJdGVtPFQgZXh0ZW5kcyBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGU+ID0gU2luZ2xlUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD4gfCBHcm91cGVkUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD47XHJcblxyXG4gICAgaW50ZXJmYWNlIFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgcGVyY2VudGFnZT86IG51bWJlciB8ICcnO1xyXG4gICAgICAgIGF2ZXJhZ2U/OiBudW1iZXI7XHJcblxyXG4gICAgICAgIFtpbmRleDogbnVtYmVyXTogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBHcm91cGVkUmFuZ2VkU3RhdHNUYWJsZVJvdyB7XHJcbiAgICAgICAgbGFiZWw6IHN0cmluZztcclxuICAgICAgICBpdGVtczogU2ltcGxlUmFuZ2VkU3RhdHNUYWJsZVJvd1tdO1xyXG4gICAgfVxyXG5cclxuICAgIHR5cGUgUmFuZ2VkU3RhdHNUYWJsZVJvdyA9IFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cgfCBHcm91cGVkUmFuZ2VkU3RhdHNUYWJsZVJvdztcclxuXHJcbiAgICBpbnRlcmZhY2UgUmFuZ2VTdGF0c1RhYmxlQ29sdW1uIGV4dGVuZHMgR3JpZFRhYmxlQ29sdW1uPGtleW9mIFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cgfCAnc3ViTGFiZWwnIHwgbnVtYmVyPiB7XHJcbiAgICAgICAgc2xvdE5hbWU/OiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgQENvbXBvbmVudCh7fSlcclxuICAgIGV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhbmdlZFN0YXRzVGFibGU8VCBleHRlbmRzIFJhbmdlU3RhdHNUYWJsZUl0ZW1XaXRoRGF0ZT4gZXh0ZW5kcyBWdWUge1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogQm9vbGVhbiB9KVxyXG4gICAgICAgIHByaXZhdGUgc2hvd1BlcmNlbnRhZ2UhOiBib29sZWFuO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogQm9vbGVhbiB9KVxyXG4gICAgICAgIHByaXZhdGUgc2hvd0F2ZXJhZ2UhOiBib29sZWFuO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBBcnJheSBhcyBQcm9wVHlwZTxSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdPiB9KVxyXG4gICAgICAgIHByaXZhdGUgaXRlbXMhOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogQXJyYXkgYXMgUHJvcFR5cGU8UmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXT4sIGRlZmF1bHQ6ICgpID0+IFtdIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBmb290ZXJJdGVtcyE6IFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+W107XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiBPYmplY3QgYXMgUHJvcFR5cGU8SW50bC5OdW1iZXJGb3JtYXRPcHRpb25zPiwgZGVmYXVsdDogdW5kZWZpbmVkIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBudW1iZXJGb3JtYXRPcHRpb25zOiBJbnRsLk51bWJlckZvcm1hdE9wdGlvbnMgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiBPYmplY3QgYXMgUHJvcFR5cGU8SW50bC5OdW1iZXJGb3JtYXRPcHRpb25zPiwgZGVmYXVsdDogdW5kZWZpbmVkIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBhdmVyYWdlTnVtYmVyRm9ybWF0T3B0aW9uczogSW50bC5OdW1iZXJGb3JtYXRPcHRpb25zIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBBcnJheSBhcyBQcm9wVHlwZTxUW10+IH0pXHJcbiAgICAgICAgcHJpdmF0ZSBkYXRhSXRlbXMhOiBUW107XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGhhc0dyb3VwZWRJdGVtcygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuc29tZShpdGVtID0+ICdpdGVtcycgaW4gaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBkYXRlUmFuZ2VzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NEYXRhTW9kdWxlLnNldHRpbmdzLmRhdGVSYW5nZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBkYXRhSXRlbXNCeVJhbmdlKCk6IFRbXVtdIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1zID0gdGhpcy5kYXRhSXRlbXM7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtc0J5UmFuZ2U6IFRbXVtdID0gdGhpcy5kYXRlUmFuZ2VzLm1hcCgoKSA9PiBbXSk7XHJcblxyXG4gICAgICAgICAgICBkYXRhSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVJhbmdlcy5mb3JFYWNoKChyYW5nZSwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luUmFuZ2UoaXRlbS5kYXRlLCByYW5nZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUl0ZW1zQnlSYW5nZVtpXS5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhSXRlbXNCeVJhbmdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZmlyc3REYXkoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFJdGVtc0J5UmFuZ2UucmVkdWNlKChhY2MsIGN1cikgPT4gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICBhY2MsXHJcbiAgICAgICAgICAgICAgICBNYXRoLm1pbiguLi5jdXIubWFwKHQgPT4gdC5kYXRlKSksXHJcbiAgICAgICAgICAgICksIERhdGUubm93KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgY29sdW1ucygpOiBSYW5nZVN0YXRzVGFibGVDb2x1bW5bXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbnM6IFJhbmdlU3RhdHNUYWJsZUNvbHVtbltdID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2xhYmVsJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xvdE5hbWU6ICdsYWJlbCcsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0dyb3VwZWRJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdzdWJMYWJlbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsb3ROYW1lOiAnc3ViTGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbHVtbnMucHVzaCguLi50aGlzLmRhdGVSYW5nZXMubWFwKChyYW5nZSwgaSkgPT4gKHtcclxuICAgICAgICAgICAgICAgIGtleTogaSxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiByYW5nZS5sYWJlbCA/PyB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5zZXR0aW5ncy5kYXRlUmFuZ2VzLnNpbmNlKHRoaXMuJGkxOG4uJGQodGhpcy5maXJzdERheSwgJ2RhdGUnKSksXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICh2YWx1ZTogbnVtYmVyKSA9PiB0aGlzLiRpMThuLiRuKHZhbHVlLCB0aGlzLm51bWJlckZvcm1hdE9wdGlvbnMpLFxyXG4gICAgICAgICAgICB9KSkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0F2ZXJhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnYXZlcmFnZScsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmNvbW1vbi5hdmVyYWdlUGVyRGF5LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogKHZhbHVlOiBudW1iZXIpID0+IHRoaXMuJGkxOG4uJG4odmFsdWUsIHRoaXMuYXZlcmFnZU51bWJlckZvcm1hdE9wdGlvbnMgPz8gdGhpcy5udW1iZXJGb3JtYXRPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dQZXJjZW50YWdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3BlcmNlbnRhZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJScsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAodmFsdWU6IG51bWJlciB8ICcnKSA9PiB2YWx1ZSAhPSAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuJGkxOG4uJG4odmFsdWUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgcm93cygpOiAoUmFuZ2VkU3RhdHNUYWJsZVJvdyAmIHsgY2xhc3M/OiBzdHJpbmcgfSlbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtc0J5UmFuZ2UgPSB0aGlzLmRhdGFJdGVtc0J5UmFuZ2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbGxSYW5nZUluZGV4ID0gdGhpcy5kYXRlUmFuZ2VzLmZpbmRJbmRleChyYW5nZSA9PiByYW5nZS50eXBlID09ICdhbGwnKVxyXG4gICAgICAgICAgICAgICAgPz8gX3Rocm93KGBmYWlsZWQgdG8gZmluZCByYW5nZSAnYWxsJ2ApO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbURheXMgPSBkYXRhSXRlbXNCeVJhbmdlW2FsbFJhbmdlSW5kZXhdLm1hcChleHBvID0+IHN0YXJ0T2ZEYXkoZXhwby5kYXRlKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXlzV2l0aERhdGFJdGVtcyA9IG5ldyBTZXQoZGF0YUl0ZW1EYXlzKS5zaXplO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdG90YWxWYWx1ZSA9IE1hdGgubWF4KDEsIHRoaXMuaXRlbXNcclxuICAgICAgICAgICAgICAgIC5tYXAoaXRlbSA9PiAnZ2V0VmFsdWUnIGluIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICA/IGl0ZW0uZ2V0VmFsdWUoZGF0YUl0ZW1zQnlSYW5nZVthbGxSYW5nZUluZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICA6IGl0ZW0uaXRlbXMucmVkdWNlKChhY2MsIGkpID0+IGFjYyArIGkuZ2V0VmFsdWUoZGF0YUl0ZW1zQnlSYW5nZVthbGxSYW5nZUluZGV4XSksIDApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIGN1cikgPT4gYWNjICsgY3VyLCAwKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubWFwKGl0ZW0gPT4gdGhpcy5tYXBJdGVtVG9Sb3coaXRlbSwgZGF0YUl0ZW1zQnlSYW5nZSwgYWxsUmFuZ2VJbmRleCwgZGF5c1dpdGhEYXRhSXRlbXMsIHRvdGFsVmFsdWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgbWFwSXRlbVRvUm93KGl0ZW06IFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+LCBkYXRhSXRlbXNCeVJhbmdlOiBUW11bXSwgYWxsUmFuZ2VJbmRleDogbnVtYmVyLCBkYXlzV2l0aERhdGFJdGVtczogbnVtYmVyLCB0b3RhbFZhbHVlOiBudW1iZXIpOiAoUmFuZ2VkU3RhdHNUYWJsZVJvdyAmIHsgY2xhc3M/OiBzdHJpbmc7IGxhYmVsQ2xhc3M/OiBzdHJpbmcgfSkge1xyXG4gICAgICAgICAgICBpZiAoJ2dldFZhbHVlJyBpbiBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3c6IFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cgJiB7IGNsYXNzPzogc3RyaW5nOyBsYWJlbENsYXNzPzogc3RyaW5nIH0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IGl0ZW0uY2xhc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxDbGFzczogaXRlbS5sYWJlbENsYXNzLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmRhdGVSYW5nZXMubWFwKChfLCByYW5nZUluZGV4KSA9PiBpdGVtLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbcmFuZ2VJbmRleF0pKSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmFuZ2VWYWx1ZSA9IHJvd1thbGxSYW5nZUluZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93QXZlcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5hdmVyYWdlID0gYWxsUmFuZ2VWYWx1ZSAvIE1hdGgubWF4KDEsIGRheXNXaXRoRGF0YUl0ZW1zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93UGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5wZXJjZW50YWdlID0gMTAwICogYWxsUmFuZ2VWYWx1ZSAvIHRvdGFsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICBpdGVtczogaXRlbS5pdGVtcy5tYXAoc3ViaXRlbSA9PiB0aGlzLm1hcEl0ZW1Ub1JvdyhzdWJpdGVtLCBkYXRhSXRlbXNCeVJhbmdlLCBhbGxSYW5nZUluZGV4LCBkYXlzV2l0aERhdGFJdGVtcywgdG90YWxWYWx1ZSkgYXMgU2ltcGxlUmFuZ2VkU3RhdHNUYWJsZVJvdyAmIHsgY2xhc3M/OiBzdHJpbmc7IGxhYmVsQ2xhc3M/OiBzdHJpbmcgfSksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBmb290ZXJSb3dzKCk6IFJhbmdlZFN0YXRzVGFibGVSb3dbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtc0J5UmFuZ2UgPSB0aGlzLmRhdGFJdGVtc0J5UmFuZ2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbGxSYW5nZUluZGV4ID0gdGhpcy5kYXRlUmFuZ2VzLmZpbmRJbmRleChyYW5nZSA9PiByYW5nZS50eXBlID09ICdhbGwnKVxyXG4gICAgICAgICAgICAgICAgPz8gX3Rocm93KGBmYWlsZWQgdG8gZmluZCByYW5nZSAnYWxsJ2ApO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbURheXMgPSBkYXRhSXRlbXNCeVJhbmdlW2FsbFJhbmdlSW5kZXhdLm1hcChleHBvID0+IHN0YXJ0T2ZEYXkoZXhwby5kYXRlKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXlzV2l0aERhdGFJdGVtcyA9IG5ldyBTZXQoZGF0YUl0ZW1EYXlzKS5zaXplO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9vdGVySXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93OiBSYW5nZWRTdGF0c1RhYmxlUm93ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZGF0ZVJhbmdlcy5tYXAoKF8sIHJhbmdlSW5kZXgpID0+ICdnZXRWYWx1ZScgaW4gaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGl0ZW0uZ2V0VmFsdWUoZGF0YUl0ZW1zQnlSYW5nZVtyYW5nZUluZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpdGVtLml0ZW1zLnJlZHVjZSgoYWNjLCBpKSA9PiBhY2MgKyBpLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbcmFuZ2VJbmRleF0pLCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogJycsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dBdmVyYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsUmFuZ2VWYWx1ZSA9IHJvd1thbGxSYW5nZUluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICByb3cuYXZlcmFnZSA9IGFsbFJhbmdlVmFsdWUgLyBNYXRoLm1heCgxLCBkYXlzV2l0aERhdGFJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldENlbGxDbGFzcyh2YWx1ZTogYW55KTogc3RyaW5nIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZmFkZS12YWx1ZSc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc2NyaXB0PlxyXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XHJcbiAgICAuZ3JpZC10YWJsZSB7XHJcbiAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcblxyXG4gICAgICAgICY6OnYtZGVlcCAuZmFkZS12YWx1ZSB7XHJcbiAgICAgICAgICAgIGNvbG9yOiByZ2JhKHdoaXRlLCAwLjEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAucmFuZ2VkLXN0YXRzLXRhYmxlLWNlbGwge1xyXG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCIiLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTE1MjZiZWNhJnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuaW1wb3J0IHN0eWxlMCBmcm9tIFwiLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTE1MjZiZWNhJmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiMTUyNmJlY2FcIixcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygnZGl2Jyx7c3RhdGljQ2xhc3M6XCJ0YWJsZS1jb250YWluZXJcIn0sW19jKCdyYW5nZWQtc3RhdHMtdGFibGUnLHthdHRyczp7XCJkYXRhSXRlbXNcIjpfdm0ubWlzc2lvbnMsXCJpdGVtc1wiOl92bS5pdGVtcyxcInNob3ctcGVyY2VudGFnZVwiOlwiXCJ9LHNjb3BlZFNsb3RzOl92bS5fdShbe2tleTpcImNlbGwtbGFiZWxcIixmbjpmdW5jdGlvbihyZWYpe1xudmFyIHZhbHVlID0gcmVmLnZhbHVlO1xucmV0dXJuIFtfYygnc3Bhbicse3N0YXRpY0NsYXNzOlwibXItMlwiLGRvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKHZhbHVlKX19KSxfYygnc3Bhbicse3N0YXRpY0NsYXNzOlwibWRpIG1kaS1weXJhbWlkXCIsc3R5bGU6KHsgY29sb3I6IF92bS5jb2xvciB9KX0pXX19XSl9KSxfYygnZmxvYXRpbmctbWVudScse2F0dHJzOntcImxlZnRcIjpcIlwifSxzY29wZWRTbG90czpfdm0uX3UoW3trZXk6XCJhY3RpdmF0b3JcIixmbjpmdW5jdGlvbigpe3JldHVybiBbX2MoJ2J1dHRvbicse29uOntcImNsaWNrXCI6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc2hvd1NldHRpbmdzID0gIV92bS5zaG93U2V0dGluZ3N9fX0sW19jKCdzcGFuJyx7c3RhdGljQ2xhc3M6XCJtZGkgbWRpLWNvZ1wifSldKV19LHByb3h5OnRydWV9XSksbW9kZWw6e3ZhbHVlOihfdm0uc2hvd1NldHRpbmdzKSxjYWxsYmFjazpmdW5jdGlvbiAoJCR2KSB7X3ZtLnNob3dTZXR0aW5ncz0kJHZ9LGV4cHJlc3Npb246XCJzaG93U2V0dGluZ3NcIn19LFtfYygnZGF0ZS1yYW5nZS1zZXR0aW5ncycpLF9jKCdMaWZlZm9ybURpc2NvdmVyeUNvbG9yU2V0dGluZ3MnKV0sMSldLDEpfVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCI8dGVtcGxhdGU+XHJcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgPHJhbmdlZC1zdGF0cy10YWJsZSA6ZGF0YUl0ZW1zPVwibWlzc2lvbnNcIiA6aXRlbXM9XCJpdGVtc1wiIHNob3ctcGVyY2VudGFnZT5cclxuICAgICAgICAgICAgPHRlbXBsYXRlICNjZWxsLWxhYmVsPVwieyB2YWx1ZSB9XCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiB2LXRleHQ9XCJ2YWx1ZVwiIGNsYXNzPVwibXItMlwiIC8+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1kaSBtZGktcHlyYW1pZFwiIDpzdHlsZT1cInsgY29sb3I6IGNvbG9yIH1cIiAvPlxyXG4gICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgIDwvcmFuZ2VkLXN0YXRzLXRhYmxlPlxyXG5cclxuICAgICAgICA8ZmxvYXRpbmctbWVudSB2LW1vZGVsPVwic2hvd1NldHRpbmdzXCIgbGVmdD5cclxuICAgICAgICAgICAgPHRlbXBsYXRlICNhY3RpdmF0b3I+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cInNob3dTZXR0aW5ncyA9ICFzaG93U2V0dGluZ3NcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1kaSBtZGktY29nXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG5cclxuICAgICAgICAgICAgPGRhdGUtcmFuZ2Utc2V0dGluZ3MgLz5cclxuICAgICAgICAgICAgPExpZmVmb3JtRGlzY292ZXJ5Q29sb3JTZXR0aW5ncyAvPlxyXG4gICAgICAgIDwvZmxvYXRpbmctbWVudT5cclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgUmFuZ2VkU3RhdHNUYWJsZSwgeyBSYW5nZWRTdGF0c1RhYmxlSXRlbSB9IGZyb20gJ0BzdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlJztcclxuICAgIGltcG9ydCBEYXRlUmFuZ2VTZXR0aW5ncyBmcm9tICdAc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9EYXRlUmFuZ2VTZXR0aW5ncy52dWUnO1xyXG4gICAgaW1wb3J0IHsgU2V0dGluZ3NEYXRhTW9kdWxlIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9kYXRhL1NldHRpbmdzRGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgTGlmZWZvcm1EaXNjb3ZlcnlDb2xvclNldHRpbmdzIGZyb20gJ0Avdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9jb2xvcnMvTGlmZWZvcm1EaXNjb3ZlcnlDb2xvclNldHRpbmdzLnZ1ZSc7XHJcbiAgICBpbXBvcnQgeyBEYWlseUxpZmVmb3JtRGlzY292ZXJ5UmVzdWx0LCBMaWZlZm9ybURpc2NvdmVyeURhdGFNb2R1bGUgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvTGlmZWZvcm1EaXNjb3ZlcnlEYXRhTW9kdWxlJztcclxuICAgIGltcG9ydCB7IExpZmVmb3JtRGlzY292ZXJ5RXZlbnRBcnRpZmFjdEZpbmRpbmdTaXplcyB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9saWZlZm9ybS1kaXNjb3Zlcmllcy9MaWZlZm9ybURpc2NvdmVyeUV2ZW50QXJ0aWZhY3RGaW5kaW5nU2l6ZSc7XHJcblxyXG4gICAgQENvbXBvbmVudCh7XHJcbiAgICAgICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICAgICBSYW5nZWRTdGF0c1RhYmxlLFxyXG4gICAgICAgICAgICBEYXRlUmFuZ2VTZXR0aW5ncyxcclxuICAgICAgICAgICAgTGlmZWZvcm1EaXNjb3ZlcnlDb2xvclNldHRpbmdzLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFibGUgZXh0ZW5kcyBWdWUge1xyXG4gICAgICAgIHByaXZhdGUgc2hvd1NldHRpbmdzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGNvbG9yKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NEYXRhTW9kdWxlLnNldHRpbmdzLmNvbG9ycy5saWZlZm9ybURpc2NvdmVyaWVzLmV2ZW50cy5hcnRpZmFjdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBtaXNzaW9ucygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIExpZmVmb3JtRGlzY292ZXJ5RGF0YU1vZHVsZS5kYWlseVJlc3VsdHNBcnJheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGl0ZW1zKCk6IFJhbmdlZFN0YXRzVGFibGVJdGVtPERhaWx5TGlmZWZvcm1EaXNjb3ZlcnlSZXN1bHQ+W10ge1xyXG4gICAgICAgICAgICByZXR1cm4gW3tcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLmFydGlmYWN0cyxcclxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiBtaXNzaW9ucyA9PiBtaXNzaW9ucy5yZWR1Y2UoKGFjYywgZXhwbykgPT4gYWNjICsgZXhwby5hcnRpZmFjdHMsIDApLFxyXG4gICAgICAgICAgICB9XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc2NyaXB0PlxyXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XHJcbiAgICAucmFuZ2VkLXN0YXRzLXRhYmxlIC5tZGkge1xyXG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMzAlKSBzY2FsZSgxLjYpO1xyXG4gICAgICAgIHdpZHRoOiAyNHB4O1xyXG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIH1cclxuXHJcbiAgICAudGFibGUtY29udGFpbmVyIHtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGNvbHVtbi1nYXA6IDRweDtcclxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciBhdXRvO1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBzdGFydDtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTBhZTVlNTY0JnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTBhZTVlNTY0Jmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiMGFlNWU1NjRcIixcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHJlcXVpcmVkQXJncztcblxuZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gc3RhcnRPZkRheTtcblxudmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3RvRGF0ZS9pbmRleC5qc1wiKSk7XG5cbnZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5mdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdG9EYXRlO1xuXG52YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gICgwLCBfaW5kZXguZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdLCJuYW1lcyI6WyJyZW5kZXIiLCJfdm0iLCJ0aGlzIiwiX2giLCIkY3JlYXRlRWxlbWVudCIsIl9jIiwiX3NlbGYiLCJzdGF0aWNDbGFzcyIsInN0YXRpY1N0eWxlIiwiYXR0cnMiLCJjb2x1bW5zIiwiaXRlbXMiLCJzY29wZWRTbG90cyIsIl91Iiwia2V5IiwiZm4iLCJyZWYiLCJsYWJlbCIsImRvbVByb3BzIiwiX3MiLCJvbiIsIiRldmVudCIsIiRlbWl0IiwidmFsdWUiLCIkcmVmcyIsImNsaWNrIiwiY29sb3JzIiwidXBkYXRlQ29sb3IiLCJzdHlsZSIsImJhY2tncm91bmQiLCJsYWJlbHMiLCJzdGF0aWNSZW5kZXJGbnMiLCJjb21wb25lbnQiLCIkaTE4biIsIiR0IiwiZXh0ZW5zaW9uIiwic2V0dGluZ3MiLCJsaWZlZm9ybURpc2NvdmVyaWVzIiwia2V5cyIsInVwZGF0ZUNvbG9ycyIsInJlc2V0Q29sb3JzIiwicm93cyIsImZvb3RlclJvd3MiLCJnZXRDZWxsQ2xhc3MiLCJfbCIsImNvbHVtbiIsImkiLCJpdGVtIiwic2xvdE5hbWUiLCIkc2NvcGVkU2xvdHMiLCJfdCIsImNsYXNzIiwibGFiZWxDbGFzcyIsImZvcm1hdHRlciIsImluZGV4IiwibmFtZSIsImRhdGEiLCJtaXNzaW9ucyIsImNvbG9yIiwic2hvd1NldHRpbmdzIiwicHJveHkiLCJtb2RlbCIsImNhbGxiYWNrIiwiJCR2IiwiZXhwcmVzc2lvbiIsInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmF1bHQiLCJzdGFydE9mRGF5IiwiX2luZGV4IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9pbmRleDIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGlydHlEYXRlIiwiYXJndW1lbnRzIiwiZGF0ZSIsInNldEhvdXJzIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmdTdHIiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiJdLCJzb3VyY2VSb290IjoiIn0=