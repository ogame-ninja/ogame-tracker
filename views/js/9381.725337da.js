"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[9381],{9027:(e,t,a)=>{a.d(t,{Z:()=>d});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fake-table"},[a("div",{staticClass:"fake-table-header"},[a("span",{domProps:{textContent:e._s(e.$i18n.$t.extension.settings.combats.ignoreEspionageCombats.title)}})]),a("div",{staticClass:"fake-table-body"},[a("checkbox",{attrs:{value:e.ignoreEspionageCombats,label:e.$i18n.$t.extension.settings.combats.ignoreEspionageCombats.label},on:{input:function(t){return e.setIgnoreEspionageCombats(t)}}})],1)])},n=[],o=a(655),r=a(4028),i=a(917);let l=class extends r.w3{get ignoreEspionageCombats(){return i.V.settings.combatTracking.ignoreEspionageFights}setIgnoreEspionageCombats(e){i.V.updateSettings({...i.V.settings,combatTracking:{ignoreEspionageFights:e}})}};l=(0,o.gn)([(0,r.wA)({})],l);const u=l,m=u;var g=a(1001),c=(0,g.Z)(m,s,n,!1,null,"3b222f56",null);const d=c.exports},4310:(e,t,a)=>{a.d(t,{Z:()=>h});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("grid-table",{staticClass:"ranged-stats-table",attrs:{columns:e.columns,items:e.rows,"footer-items":e.footerRows,"cell-class-provider":function(t){return e.getCellClass(t)}},scopedSlots:e._u([e._l(e.columns,(function(t,s){return{key:"cell-"+t.key,fn:function(n){var o=n.value,r=n.item;return[a("span",{key:t.key,staticClass:"ranged-stats-table-cell"},["label"==t.key?[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:o}):a("span",{key:s,domProps:{textContent:e._s(o)}})]:"subLabel"==t.key?e._l(r.items,(function(s,n){return a("span",{key:n,class:s.labelClass},[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:s.label}):a("span",{domProps:{textContent:e._s(s.label)}})],2)})):e._l(r.items||[r],(function(s,n){return a("span",{key:n,class:[e.getCellClass(s[t.key]),s.class]},[null!=t.formatter?a("span",{domProps:{textContent:e._s(t.formatter(s[t.key]))}}):a("span",{domProps:{textContent:e._s(s[t.key])}})])}))],2)]}}})),e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}}))],null,!0)})},n=[],o=a(655),r=a(4028),i=a(9858),l=a(6538),u=a(4749),m=a.n(u),g=a(917);let c=class extends r.w3{showPercentage;showAverage;items;footerItems;numberFormatOptions;averageNumberFormatOptions;dataItems;get hasGroupedItems(){return this.items.some((e=>"items"in e))}get dateRanges(){return g.V.settings.dateRanges}get dataItemsByRange(){const e=this.dataItems,t=this.dateRanges.map((()=>[]));return e.forEach((e=>{this.dateRanges.forEach(((a,s)=>{(0,i.m)(e.date,a)&&t[s].push(e)}))})),t}get firstDay(){return this.dataItemsByRange.reduce(((e,t)=>Math.min(e,Math.min(...t.map((e=>e.date))))),Date.now())}get columns(){const e=[{key:"label",label:"",slotName:"label"}];return this.hasGroupedItems&&e.push({key:"subLabel",label:"",slotName:"subLabel"}),e.push(...this.dateRanges.map(((e,t)=>({key:t,label:e.label??this.$i18n.$t.extension.settings.dateRanges.since(this.$i18n.$d(this.firstDay,"date")),formatter:e=>this.$i18n.$n(e,this.numberFormatOptions)})))),this.showAverage&&e.push({key:"average",label:this.$i18n.$t.extension.common.averagePerDay,formatter:e=>this.$i18n.$n(e,this.averageNumberFormatOptions??this.numberFormatOptions)}),this.showPercentage&&e.push({key:"percentage",label:"%",formatter:e=>""!=e?this.$i18n.$n(e,{minimumFractionDigits:3,maximumFractionDigits:3}):e}),e}get rows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,l.A)("failed to find range 'all'"),a=e[t].map((e=>m()(e.date).getTime())),s=new Set(a).size,n=Math.max(1,this.items.map((a=>"getValue"in a?a.getValue(e[t]):a.items.reduce(((a,s)=>a+s.getValue(e[t])),0))).reduce(((e,t)=>e+t),0));return this.items.map((a=>this.mapItemToRow(a,e,t,s,n)))}mapItemToRow(e,t,a,s,n){if("getValue"in e){const o={label:e.label,class:e.class,labelClass:e.labelClass,...this.dateRanges.map(((a,s)=>e.getValue(t[s])))},r=o[a];return this.showAverage&&(o.average=r/Math.max(1,s)),this.showPercentage&&(o.percentage=100*r/n),o}return{label:e.label,items:e.items.map((e=>this.mapItemToRow(e,t,a,s,n)))}}get footerRows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,l.A)("failed to find range 'all'"),a=e[t].map((e=>m()(e.date).getTime())),s=new Set(a).size;return this.footerItems.map((a=>{const n={label:a.label,...this.dateRanges.map(((t,s)=>"getValue"in a?a.getValue(e[s]):a.items.reduce(((t,a)=>t+a.getValue(e[s])),0))),percentage:""};if(this.showAverage){const e=n[t];n.average=e/Math.max(1,s)}return n}))}getCellClass(e){return 0==e?"fade-value":""}};(0,o.gn)([(0,r.fI)({required:!1,type:Boolean})],c.prototype,"showPercentage",void 0),(0,o.gn)([(0,r.fI)({required:!1,type:Boolean})],c.prototype,"showAverage",void 0),(0,o.gn)([(0,r.fI)({required:!0,type:Array})],c.prototype,"items",void 0),(0,o.gn)([(0,r.fI)({required:!1,type:Array,default:()=>[]})],c.prototype,"footerItems",void 0),(0,o.gn)([(0,r.fI)({required:!1,type:Object,default:void 0})],c.prototype,"numberFormatOptions",void 0),(0,o.gn)([(0,r.fI)({required:!1,type:Object,default:void 0})],c.prototype,"averageNumberFormatOptions",void 0),(0,o.gn)([(0,r.fI)({required:!0,type:Array})],c.prototype,"dataItems",void 0),c=(0,o.gn)([(0,r.wA)({})],c);const d=c,p=d;var b=a(1001),f=(0,b.Z)(p,s,n,!1,null,"1526beca",null);const h=f.exports},157:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container"},[a("ranged-stats-table",{attrs:{dataItems:e.combats,items:e.items,footerItems:e.footerItems,"show-average":"",averageNumberFormatOptions:e.avgNumberFormat}}),a("floating-menu",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("button",{on:{click:function(t){e.showSettings=!e.showSettings}}},[a("span",{staticClass:"mdi mdi-cog"})])]},proxy:!0}]),model:{value:e.showSettings,callback:function(t){e.showSettings=t},expression:"showSettings"}},[a("combat-tracking-ignore-espionage-combats-settings"),a("hr"),a("date-range-settings")],1)],1)},n=[],o=a(655),r=a(4028),i=a(4310),l=a(4992),u=a(3347),m=a(4329),g=a(9027);let c=class extends r.w3{showSettings=!1;avgNumberFormat={minimumFractionDigits:1,maximumFractionDigits:1};get combats(){return l.t.dailyResultsArray}get items(){return u.F.map((e=>({label:this.$i18n.$t.extension.combats.combatResults[e],getValue:t=>t.reduce(((t,a)=>t+a.results.onExpeditions[e]),0)})))}get footerItems(){return[{label:this.$i18n.$t.extension.common.resourceUnits,getValue:e=>u.F.reduce(((t,a)=>t+e.reduce(((e,t)=>e+t.results.onExpeditions[a]),0)),0)}]}};c=(0,o.gn)([(0,r.wA)({components:{RangedStatsTable:i.Z,DateRangeSettings:m.Z,CombatTrackingIgnoreEspionageCombatsSettings:g.Z}})],c);const d=c,p=d;var b=a(1001),f=(0,b.Z)(p,s,n,!1,null,"173ddb12",null);const h=f.exports},8734:(e,t)=>{function a(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a,e.exports=t.default},4749:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var s=o(a(1171)),n=o(a(8734));function o(e){return e&&e.__esModule?e:{default:e}}function r(e){(0,n.default)(1,arguments);var t=(0,s.default)(e);return t.setHours(0,0,0,0),t}e.exports=t.default},1171:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var s=n(a(8734));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){(0,s.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}e.exports=t.default}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGFBQW9CSyxNQUE0QixrQkFBYkwsR0FBb0Msa0JBQVhDLEVBRXZELElBQUlJLEtBQUtMLEVBQVNNLFdBQ0ksa0JBQWJOLEdBQW9DLG9CQUFYQyxFQUNsQyxJQUFJSSxLQUFLTCxJQUVTLGtCQUFiQSxHQUFvQyxvQkFBWEMsR0FBb0QscUJBQVpNLFVBRTNFQSxRQUFRQyxLQUFLLG9KQUViRCxRQUFRQyxNQUFLLElBQUlDLE9BQVFDLFFBR3BCLElBQUlMLEtBQUtNLE1BSXBCeEIsRUFBT0QsUUFBVUEsRUFBUUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9Db21iYXRUcmFja2luZ0lnbm9yZUVzcGlvbmFnZUNvbWJhdHNTZXR0aW5ncy52dWU/ZmFkOCIsIndlYnBhY2s6Ly8vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc2V0dGluZ3MvQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlPzY1NjQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc2V0dGluZ3MvQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlPzM4YzUiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc2V0dGluZ3MvQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlPzJlYmMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWU/ODFkYyIsIndlYnBhY2s6Ly8vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWU/NTc5NyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zdGF0cy9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT9mNzVhIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlPzcwYWMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2NvbWJhdHMvb3ZlcnZpZXcvb24tZXhwZWRpdGlvbnMvVGFibGUudnVlPzVmZjUiLCJ3ZWJwYWNrOi8vL3NyYy92aWV3cy9zdGF0cy92aWV3cy9jb21iYXRzL292ZXJ2aWV3L29uLWV4cGVkaXRpb25zL1RhYmxlLnZ1ZT9jYmJlIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy9jb21iYXRzL292ZXJ2aWV3L29uLWV4cGVkaXRpb25zL1RhYmxlLnZ1ZT9kMWZhIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy9jb21iYXRzL292ZXJ2aWV3L29uLWV4cGVkaXRpb25zL1RhYmxlLnZ1ZT8wZTQ2Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qcz8yOTViIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9zdGFydE9mRGF5L2luZGV4LmpzPzkxYTEiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3RvRGF0ZS9pbmRleC5qcz9hZDZkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciByZW5kZXIgPSBmdW5jdGlvbiAoKSB7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCdkaXYnLHtzdGF0aWNDbGFzczpcImZha2UtdGFibGVcIn0sW19jKCdkaXYnLHtzdGF0aWNDbGFzczpcImZha2UtdGFibGUtaGVhZGVyXCJ9LFtfYygnc3Bhbicse2RvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKF92bS4kaTE4bi4kdC5leHRlbnNpb24uc2V0dGluZ3MuY29tYmF0cy5pZ25vcmVFc3Bpb25hZ2VDb21iYXRzLnRpdGxlKX19KV0pLF9jKCdkaXYnLHtzdGF0aWNDbGFzczpcImZha2UtdGFibGUtYm9keVwifSxbX2MoJ2NoZWNrYm94Jyx7YXR0cnM6e1widmFsdWVcIjpfdm0uaWdub3JlRXNwaW9uYWdlQ29tYmF0cyxcImxhYmVsXCI6X3ZtLiRpMThuLiR0LmV4dGVuc2lvbi5zZXR0aW5ncy5jb21iYXRzLmlnbm9yZUVzcGlvbmFnZUNvbWJhdHMubGFiZWx9LG9uOntcImlucHV0XCI6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLnNldElnbm9yZUVzcGlvbmFnZUNvbWJhdHMoJGV2ZW50KX19fSldLDEpXSl9XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIjx0ZW1wbGF0ZT5cclxuICAgIDxkaXYgY2xhc3M9XCJmYWtlLXRhYmxlXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZha2UtdGFibGUtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxzcGFuIHYtdGV4dD1cIiRpMThuLiR0LmV4dGVuc2lvbi5zZXR0aW5ncy5jb21iYXRzLmlnbm9yZUVzcGlvbmFnZUNvbWJhdHMudGl0bGVcIiAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmYWtlLXRhYmxlLWJvZHlcIj5cclxuICAgICAgICAgICAgPGNoZWNrYm94XHJcbiAgICAgICAgICAgICAgICA6dmFsdWU9XCJpZ25vcmVFc3Bpb25hZ2VDb21iYXRzXCJcclxuICAgICAgICAgICAgICAgIEBpbnB1dD1cInNldElnbm9yZUVzcGlvbmFnZUNvbWJhdHMoJGV2ZW50KVwiXHJcbiAgICAgICAgICAgICAgICA6bGFiZWw9XCIkaTE4bi4kdC5leHRlbnNpb24uc2V0dGluZ3MuY29tYmF0cy5pZ25vcmVFc3Bpb25hZ2VDb21iYXRzLmxhYmVsXCJcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgeyBTZXR0aW5nc0RhdGFNb2R1bGUgfSBmcm9tICcuLi8uLi9kYXRhL1NldHRpbmdzRGF0YU1vZHVsZSc7XHJcblxyXG4gICAgQENvbXBvbmVudCh7fSlcclxuICAgIGV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzIGV4dGVuZHMgVnVlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgaWdub3JlRXNwaW9uYWdlQ29tYmF0cygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncy5jb21iYXRUcmFja2luZy5pZ25vcmVFc3Bpb25hZ2VGaWdodHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldElnbm9yZUVzcGlvbmFnZUNvbWJhdHMoaWdub3JlRXNwaW9uYWdlRmlnaHRzOiBib29sZWFuKSB7XHJcbiAgICAgICAgICAgIFNldHRpbmdzRGF0YU1vZHVsZS51cGRhdGVTZXR0aW5ncyh7XHJcbiAgICAgICAgICAgICAgICAuLi5TZXR0aW5nc0RhdGFNb2R1bGUuc2V0dGluZ3MsXHJcbiAgICAgICAgICAgICAgICBjb21iYXRUcmFja2luZzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZUVzcGlvbmFnZUZpZ2h0cyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuPC9zY3JpcHQ+XHJcbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cclxuICAgIC5mYWtlLXRhYmxlIHtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKHZhcigtLWNvbG9yKSwgMC41KTtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcclxuICAgICAgICB3aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgICAgICAgbWF4LXdpZHRoOiA0MDBweDtcclxuXHJcbiAgICAgICAgJi1oZWFkZXIge1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBibGFjayBsaW5lYXItZ3JhZGllbnQoMGRlZywgcmdiYSh2YXIoLS1jb2xvciksIDAuNSksIHJnYmEodmFyKC0tY29sb3IpLCAwLjcpKTtcclxuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAmLWhlYWRlcixcclxuICAgICAgICAmLWJvZHkge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgIHBhZGRpbmc6IDhweDtcclxuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL0NvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL0NvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTNiMjIyZjU2JnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL0NvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL0NvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTNiMjIyZjU2Jmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiM2IyMjJmNTZcIixcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygnZ3JpZC10YWJsZScse3N0YXRpY0NsYXNzOlwicmFuZ2VkLXN0YXRzLXRhYmxlXCIsYXR0cnM6e1wiY29sdW1uc1wiOl92bS5jb2x1bW5zLFwiaXRlbXNcIjpfdm0ucm93cyxcImZvb3Rlci1pdGVtc1wiOl92bS5mb290ZXJSb3dzLFwiY2VsbC1jbGFzcy1wcm92aWRlclwiOmZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gX3ZtLmdldENlbGxDbGFzcyh2YWx1ZSk7IH19LHNjb3BlZFNsb3RzOl92bS5fdShbX3ZtLl9sKChfdm0uY29sdW1ucyksZnVuY3Rpb24oY29sdW1uLGkpe3JldHVybiB7a2V5OihcImNlbGwtXCIgKyAoY29sdW1uLmtleSkpLGZuOmZ1bmN0aW9uKHJlZil7XG52YXIgdmFsdWUgPSByZWYudmFsdWU7XG52YXIgaXRlbSA9IHJlZi5pdGVtO1xucmV0dXJuIFtfYygnc3Bhbicse2tleTpjb2x1bW4ua2V5LHN0YXRpY0NsYXNzOlwicmFuZ2VkLXN0YXRzLXRhYmxlLWNlbGxcIn0sWyhjb2x1bW4ua2V5ID09ICdsYWJlbCcpP1soY29sdW1uLnNsb3ROYW1lICE9IG51bGwgJiYgX3ZtLiRzY29wZWRTbG90c1tjb2x1bW4uc2xvdE5hbWVdICE9IG51bGwpP192bS5fdChjb2x1bW4uc2xvdE5hbWUsbnVsbCx7XCJ2YWx1ZVwiOnZhbHVlfSk6X2MoJ3NwYW4nLHtrZXk6aSxkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyh2YWx1ZSl9fSldOihjb2x1bW4ua2V5ID09ICdzdWJMYWJlbCcpP192bS5fbCgoaXRlbS5pdGVtcyksZnVuY3Rpb24oaXRlbSxpKXtyZXR1cm4gX2MoJ3NwYW4nLHtrZXk6aSxjbGFzczppdGVtLmxhYmVsQ2xhc3N9LFsoY29sdW1uLnNsb3ROYW1lICE9IG51bGwgJiYgX3ZtLiRzY29wZWRTbG90c1tjb2x1bW4uc2xvdE5hbWVdICE9IG51bGwpP192bS5fdChjb2x1bW4uc2xvdE5hbWUsbnVsbCx7XCJ2YWx1ZVwiOml0ZW0ubGFiZWx9KTpfYygnc3Bhbicse2RvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKGl0ZW0ubGFiZWwpfX0pXSwyKX0pOl92bS5fbCgoaXRlbS5pdGVtcyB8fCBbaXRlbV0pLGZ1bmN0aW9uKGl0ZW0saSl7cmV0dXJuIF9jKCdzcGFuJyx7a2V5OmksY2xhc3M6W192bS5nZXRDZWxsQ2xhc3MoaXRlbVtjb2x1bW4ua2V5XSksIGl0ZW0uY2xhc3NdfSxbKGNvbHVtbi5mb3JtYXR0ZXIgIT0gbnVsbCk/X2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhjb2x1bW4uZm9ybWF0dGVyKGl0ZW1bY29sdW1uLmtleV0pKX19KTpfYygnc3Bhbicse2RvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKGl0ZW1bY29sdW1uLmtleV0pfX0pXSl9KV0sMildfX19KSxfdm0uX2woKF92bS4kc2NvcGVkU2xvdHMpLGZ1bmN0aW9uKGluZGV4LG5hbWUpe3JldHVybiB7a2V5Om5hbWUsZm46ZnVuY3Rpb24oZGF0YSl7cmV0dXJuIFtfdm0uX3QobmFtZSxudWxsLG51bGwsZGF0YSldfX19KV0sbnVsbCx0cnVlKX0pfVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCI8dGVtcGxhdGU+XHJcbiAgICA8Z3JpZC10YWJsZSA6Y29sdW1ucz1cImNvbHVtbnNcIiA6aXRlbXM9XCJyb3dzXCIgOmZvb3Rlci1pdGVtcz1cImZvb3RlclJvd3NcIiA6Y2VsbC1jbGFzcy1wcm92aWRlcj1cIih2YWx1ZSkgPT4gZ2V0Q2VsbENsYXNzKHZhbHVlKVwiIGNsYXNzPVwicmFuZ2VkLXN0YXRzLXRhYmxlXCI+XHJcbiAgICAgICAgPCEtLSBvaCBnb2QgdGhpcyBpcyB1Z2x5IC0tPlxyXG4gICAgICAgIDx0ZW1wbGF0ZSB2LWZvcj1cIihjb2x1bW4sIGkpIGluIGNvbHVtbnNcIiB2LXNsb3Q6W2BjZWxsLSR7Y29sdW1uLmtleX1gXT1cInsgdmFsdWUsIGl0ZW0gfVwiPlxyXG4gICAgICAgICAgICA8c3BhbiA6a2V5PVwiY29sdW1uLmtleVwiIGNsYXNzPVwicmFuZ2VkLXN0YXRzLXRhYmxlLWNlbGxcIj5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwiY29sdW1uLmtleSA9PSAnbGFiZWwnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNsb3Qgdi1pZj1cImNvbHVtbi5zbG90TmFtZSAhPSBudWxsICYmICRzY29wZWRTbG90c1tjb2x1bW4uc2xvdE5hbWVdICE9IG51bGxcIiA6bmFtZT1cImNvbHVtbi5zbG90TmFtZVwiIDp2YWx1ZT1cInZhbHVlXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWVsc2UgOmtleT1cImlcIiB2LXRleHQ9XCJ2YWx1ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtZWxzZS1pZj1cImNvbHVtbi5rZXkgPT0gJ3N1YkxhYmVsJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtZm9yPVwiKGl0ZW0sIGkpIGluIGl0ZW0uaXRlbXNcIiA6a2V5PVwiaVwiIDpjbGFzcz1cIml0ZW0ubGFiZWxDbGFzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2xvdCB2LWlmPVwiY29sdW1uLnNsb3ROYW1lICE9IG51bGwgJiYgJHNjb3BlZFNsb3RzW2NvbHVtbi5zbG90TmFtZV0gIT0gbnVsbFwiIDpuYW1lPVwiY29sdW1uLnNsb3ROYW1lXCIgOnZhbHVlPVwiaXRlbS5sYWJlbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtZWxzZSB2LXRleHQ9XCJpdGVtLmxhYmVsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtZWxzZT5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWZvcj1cIihpdGVtLCBpKSBpbiBpdGVtLml0ZW1zIHx8IFtpdGVtXVwiIDprZXk9XCJpXCIgOmNsYXNzPVwiW2dldENlbGxDbGFzcyhpdGVtW2NvbHVtbi5rZXldKSwgaXRlbS5jbGFzc11cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1pZj1cImNvbHVtbi5mb3JtYXR0ZXIgIT0gbnVsbFwiIHYtdGV4dD1cImNvbHVtbi5mb3JtYXR0ZXIoaXRlbVtjb2x1bW4ua2V5XSlcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWVsc2Ugdi10ZXh0PVwiaXRlbVtjb2x1bW4ua2V5XVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgIDwvdGVtcGxhdGU+XHJcblxyXG4gICAgICAgIDx0ZW1wbGF0ZSB2LWZvcj1cIihpbmRleCwgbmFtZSkgaW4gJHNjb3BlZFNsb3RzXCIgdi1zbG90OltuYW1lXT1cImRhdGFcIj5cclxuICAgICAgICAgICAgPHNsb3QgOm5hbWU9XCJuYW1lXCIgdi1iaW5kPVwiZGF0YVwiIC8+XHJcbiAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgIDwvZ3JpZC10YWJsZT5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQgbGFuZz1cInRzXCI+XHJcbiAgICBpbXBvcnQgeyBQcm9wVHlwZSB9IGZyb20gJ3Z1ZSc7XHJcbiAgICBpbXBvcnQgeyBQcm9wIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InO1xyXG4gICAgaW1wb3J0IHsgR3JpZFRhYmxlQ29sdW1uIH0gZnJvbSAnQHN0YXRzL2NvbXBvbmVudHMvY29tbW9uL0dyaWRUYWJsZS52dWUnO1xyXG4gICAgaW1wb3J0IHsgaXNJblJhbmdlIH0gZnJvbSAnQHN0YXRzL3V0aWxzL2RhdGVSYW5nZXMnO1xyXG4gICAgaW1wb3J0IHsgX3Rocm93IH0gZnJvbSAnQC9zaGFyZWQvdXRpbHMvX3Rocm93JztcclxuICAgIGltcG9ydCBzdGFydE9mRGF5IGZyb20gJ2RhdGUtZm5zL3N0YXJ0T2ZEYXkvaW5kZXgnO1xyXG4gICAgaW1wb3J0IHsgU2V0dGluZ3NEYXRhTW9kdWxlIH0gZnJvbSAnLi4vLi4vZGF0YS9TZXR0aW5nc0RhdGFNb2R1bGUnO1xyXG5cclxuICAgIGludGVyZmFjZSBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGUge1xyXG4gICAgICAgIGRhdGU6IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmZhY2UgU2luZ2xlUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VCBleHRlbmRzIFJhbmdlU3RhdHNUYWJsZUl0ZW1XaXRoRGF0ZT4ge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgZ2V0VmFsdWU6IChpdGVtczogVFtdKSA9PiBudW1iZXI7XHJcbiAgICAgICAgY2xhc3M/OiBzdHJpbmc7XHJcbiAgICAgICAgbGFiZWxDbGFzcz86IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmZhY2UgR3JvdXBlZFJhbmdlZFN0YXRzVGFibGVJdGVtPFQgZXh0ZW5kcyBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGU+IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIGl0ZW1zOiBTaW5nbGVSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCB0eXBlIFJhbmdlZFN0YXRzVGFibGVJdGVtPFQgZXh0ZW5kcyBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGU+ID0gU2luZ2xlUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD4gfCBHcm91cGVkUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD47XHJcblxyXG4gICAgaW50ZXJmYWNlIFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgcGVyY2VudGFnZT86IG51bWJlciB8ICcnO1xyXG4gICAgICAgIGF2ZXJhZ2U/OiBudW1iZXI7XHJcblxyXG4gICAgICAgIFtpbmRleDogbnVtYmVyXTogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBHcm91cGVkUmFuZ2VkU3RhdHNUYWJsZVJvdyB7XHJcbiAgICAgICAgbGFiZWw6IHN0cmluZztcclxuICAgICAgICBpdGVtczogU2ltcGxlUmFuZ2VkU3RhdHNUYWJsZVJvd1tdO1xyXG4gICAgfVxyXG5cclxuICAgIHR5cGUgUmFuZ2VkU3RhdHNUYWJsZVJvdyA9IFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cgfCBHcm91cGVkUmFuZ2VkU3RhdHNUYWJsZVJvdztcclxuXHJcbiAgICBpbnRlcmZhY2UgUmFuZ2VTdGF0c1RhYmxlQ29sdW1uIGV4dGVuZHMgR3JpZFRhYmxlQ29sdW1uPGtleW9mIFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cgfCAnc3ViTGFiZWwnIHwgbnVtYmVyPiB7XHJcbiAgICAgICAgc2xvdE5hbWU/OiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgQENvbXBvbmVudCh7fSlcclxuICAgIGV4cG9ydCBkZWZhdWx0IGNsYXNzIFJhbmdlZFN0YXRzVGFibGU8VCBleHRlbmRzIFJhbmdlU3RhdHNUYWJsZUl0ZW1XaXRoRGF0ZT4gZXh0ZW5kcyBWdWUge1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogQm9vbGVhbiB9KVxyXG4gICAgICAgIHByaXZhdGUgc2hvd1BlcmNlbnRhZ2UhOiBib29sZWFuO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogQm9vbGVhbiB9KVxyXG4gICAgICAgIHByaXZhdGUgc2hvd0F2ZXJhZ2UhOiBib29sZWFuO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBBcnJheSBhcyBQcm9wVHlwZTxSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdPiB9KVxyXG4gICAgICAgIHByaXZhdGUgaXRlbXMhOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogQXJyYXkgYXMgUHJvcFR5cGU8UmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXT4sIGRlZmF1bHQ6ICgpID0+IFtdIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBmb290ZXJJdGVtcyE6IFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+W107XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiBPYmplY3QgYXMgUHJvcFR5cGU8SW50bC5OdW1iZXJGb3JtYXRPcHRpb25zPiwgZGVmYXVsdDogdW5kZWZpbmVkIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBudW1iZXJGb3JtYXRPcHRpb25zOiBJbnRsLk51bWJlckZvcm1hdE9wdGlvbnMgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiBPYmplY3QgYXMgUHJvcFR5cGU8SW50bC5OdW1iZXJGb3JtYXRPcHRpb25zPiwgZGVmYXVsdDogdW5kZWZpbmVkIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBhdmVyYWdlTnVtYmVyRm9ybWF0T3B0aW9uczogSW50bC5OdW1iZXJGb3JtYXRPcHRpb25zIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBBcnJheSBhcyBQcm9wVHlwZTxUW10+IH0pXHJcbiAgICAgICAgcHJpdmF0ZSBkYXRhSXRlbXMhOiBUW107XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGhhc0dyb3VwZWRJdGVtcygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuc29tZShpdGVtID0+ICdpdGVtcycgaW4gaXRlbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBkYXRlUmFuZ2VzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NEYXRhTW9kdWxlLnNldHRpbmdzLmRhdGVSYW5nZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBkYXRhSXRlbXNCeVJhbmdlKCk6IFRbXVtdIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1zID0gdGhpcy5kYXRhSXRlbXM7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtc0J5UmFuZ2U6IFRbXVtdID0gdGhpcy5kYXRlUmFuZ2VzLm1hcCgoKSA9PiBbXSk7XHJcblxyXG4gICAgICAgICAgICBkYXRhSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVJhbmdlcy5mb3JFYWNoKChyYW5nZSwgaSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luUmFuZ2UoaXRlbS5kYXRlLCByYW5nZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUl0ZW1zQnlSYW5nZVtpXS5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhSXRlbXNCeVJhbmdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZmlyc3REYXkoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFJdGVtc0J5UmFuZ2UucmVkdWNlKChhY2MsIGN1cikgPT4gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICBhY2MsXHJcbiAgICAgICAgICAgICAgICBNYXRoLm1pbiguLi5jdXIubWFwKHQgPT4gdC5kYXRlKSksXHJcbiAgICAgICAgICAgICksIERhdGUubm93KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgY29sdW1ucygpOiBSYW5nZVN0YXRzVGFibGVDb2x1bW5bXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbnM6IFJhbmdlU3RhdHNUYWJsZUNvbHVtbltdID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2xhYmVsJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xvdE5hbWU6ICdsYWJlbCcsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0dyb3VwZWRJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdzdWJMYWJlbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsb3ROYW1lOiAnc3ViTGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbHVtbnMucHVzaCguLi50aGlzLmRhdGVSYW5nZXMubWFwKChyYW5nZSwgaSkgPT4gKHtcclxuICAgICAgICAgICAgICAgIGtleTogaSxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiByYW5nZS5sYWJlbCA/PyB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5zZXR0aW5ncy5kYXRlUmFuZ2VzLnNpbmNlKHRoaXMuJGkxOG4uJGQodGhpcy5maXJzdERheSwgJ2RhdGUnKSksXHJcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICh2YWx1ZTogbnVtYmVyKSA9PiB0aGlzLiRpMThuLiRuKHZhbHVlLCB0aGlzLm51bWJlckZvcm1hdE9wdGlvbnMpLFxyXG4gICAgICAgICAgICB9KSkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0F2ZXJhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnYXZlcmFnZScsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmNvbW1vbi5hdmVyYWdlUGVyRGF5LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogKHZhbHVlOiBudW1iZXIpID0+IHRoaXMuJGkxOG4uJG4odmFsdWUsIHRoaXMuYXZlcmFnZU51bWJlckZvcm1hdE9wdGlvbnMgPz8gdGhpcy5udW1iZXJGb3JtYXRPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dQZXJjZW50YWdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3BlcmNlbnRhZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJScsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAodmFsdWU6IG51bWJlciB8ICcnKSA9PiB2YWx1ZSAhPSAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuJGkxOG4uJG4odmFsdWUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb2x1bW5zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgcm93cygpOiAoUmFuZ2VkU3RhdHNUYWJsZVJvdyAmIHsgY2xhc3M/OiBzdHJpbmcgfSlbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtc0J5UmFuZ2UgPSB0aGlzLmRhdGFJdGVtc0J5UmFuZ2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbGxSYW5nZUluZGV4ID0gdGhpcy5kYXRlUmFuZ2VzLmZpbmRJbmRleChyYW5nZSA9PiByYW5nZS50eXBlID09ICdhbGwnKVxyXG4gICAgICAgICAgICAgICAgPz8gX3Rocm93KGBmYWlsZWQgdG8gZmluZCByYW5nZSAnYWxsJ2ApO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbURheXMgPSBkYXRhSXRlbXNCeVJhbmdlW2FsbFJhbmdlSW5kZXhdLm1hcChleHBvID0+IHN0YXJ0T2ZEYXkoZXhwby5kYXRlKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXlzV2l0aERhdGFJdGVtcyA9IG5ldyBTZXQoZGF0YUl0ZW1EYXlzKS5zaXplO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdG90YWxWYWx1ZSA9IE1hdGgubWF4KDEsIHRoaXMuaXRlbXNcclxuICAgICAgICAgICAgICAgIC5tYXAoaXRlbSA9PiAnZ2V0VmFsdWUnIGluIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICA/IGl0ZW0uZ2V0VmFsdWUoZGF0YUl0ZW1zQnlSYW5nZVthbGxSYW5nZUluZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICA6IGl0ZW0uaXRlbXMucmVkdWNlKChhY2MsIGkpID0+IGFjYyArIGkuZ2V0VmFsdWUoZGF0YUl0ZW1zQnlSYW5nZVthbGxSYW5nZUluZGV4XSksIDApXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIGN1cikgPT4gYWNjICsgY3VyLCAwKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubWFwKGl0ZW0gPT4gdGhpcy5tYXBJdGVtVG9Sb3coaXRlbSwgZGF0YUl0ZW1zQnlSYW5nZSwgYWxsUmFuZ2VJbmRleCwgZGF5c1dpdGhEYXRhSXRlbXMsIHRvdGFsVmFsdWUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgbWFwSXRlbVRvUm93KGl0ZW06IFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+LCBkYXRhSXRlbXNCeVJhbmdlOiBUW11bXSwgYWxsUmFuZ2VJbmRleDogbnVtYmVyLCBkYXlzV2l0aERhdGFJdGVtczogbnVtYmVyLCB0b3RhbFZhbHVlOiBudW1iZXIpOiAoUmFuZ2VkU3RhdHNUYWJsZVJvdyAmIHsgY2xhc3M/OiBzdHJpbmc7IGxhYmVsQ2xhc3M/OiBzdHJpbmcgfSkge1xyXG4gICAgICAgICAgICBpZiAoJ2dldFZhbHVlJyBpbiBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3c6IFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cgJiB7IGNsYXNzPzogc3RyaW5nOyBsYWJlbENsYXNzPzogc3RyaW5nIH0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M6IGl0ZW0uY2xhc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxDbGFzczogaXRlbS5sYWJlbENsYXNzLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmRhdGVSYW5nZXMubWFwKChfLCByYW5nZUluZGV4KSA9PiBpdGVtLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbcmFuZ2VJbmRleF0pKSxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmFuZ2VWYWx1ZSA9IHJvd1thbGxSYW5nZUluZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93QXZlcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5hdmVyYWdlID0gYWxsUmFuZ2VWYWx1ZSAvIE1hdGgubWF4KDEsIGRheXNXaXRoRGF0YUl0ZW1zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93UGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5wZXJjZW50YWdlID0gMTAwICogYWxsUmFuZ2VWYWx1ZSAvIHRvdGFsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICBpdGVtczogaXRlbS5pdGVtcy5tYXAoc3ViaXRlbSA9PiB0aGlzLm1hcEl0ZW1Ub1JvdyhzdWJpdGVtLCBkYXRhSXRlbXNCeVJhbmdlLCBhbGxSYW5nZUluZGV4LCBkYXlzV2l0aERhdGFJdGVtcywgdG90YWxWYWx1ZSkgYXMgU2ltcGxlUmFuZ2VkU3RhdHNUYWJsZVJvdyAmIHsgY2xhc3M/OiBzdHJpbmc7IGxhYmVsQ2xhc3M/OiBzdHJpbmcgfSksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBmb290ZXJSb3dzKCk6IFJhbmdlZFN0YXRzVGFibGVSb3dbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtc0J5UmFuZ2UgPSB0aGlzLmRhdGFJdGVtc0J5UmFuZ2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbGxSYW5nZUluZGV4ID0gdGhpcy5kYXRlUmFuZ2VzLmZpbmRJbmRleChyYW5nZSA9PiByYW5nZS50eXBlID09ICdhbGwnKVxyXG4gICAgICAgICAgICAgICAgPz8gX3Rocm93KGBmYWlsZWQgdG8gZmluZCByYW5nZSAnYWxsJ2ApO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbURheXMgPSBkYXRhSXRlbXNCeVJhbmdlW2FsbFJhbmdlSW5kZXhdLm1hcChleHBvID0+IHN0YXJ0T2ZEYXkoZXhwby5kYXRlKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXlzV2l0aERhdGFJdGVtcyA9IG5ldyBTZXQoZGF0YUl0ZW1EYXlzKS5zaXplO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9vdGVySXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93OiBSYW5nZWRTdGF0c1RhYmxlUm93ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZGF0ZVJhbmdlcy5tYXAoKF8sIHJhbmdlSW5kZXgpID0+ICdnZXRWYWx1ZScgaW4gaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGl0ZW0uZ2V0VmFsdWUoZGF0YUl0ZW1zQnlSYW5nZVtyYW5nZUluZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpdGVtLml0ZW1zLnJlZHVjZSgoYWNjLCBpKSA9PiBhY2MgKyBpLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbcmFuZ2VJbmRleF0pLCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudGFnZTogJycsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dBdmVyYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsUmFuZ2VWYWx1ZSA9IHJvd1thbGxSYW5nZUluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICByb3cuYXZlcmFnZSA9IGFsbFJhbmdlVmFsdWUgLyBNYXRoLm1heCgxLCBkYXlzV2l0aERhdGFJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldENlbGxDbGFzcyh2YWx1ZTogYW55KTogc3RyaW5nIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZmFkZS12YWx1ZSc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc2NyaXB0PlxyXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XHJcbiAgICAuZ3JpZC10YWJsZSB7XHJcbiAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcblxyXG4gICAgICAgICY6OnYtZGVlcCAuZmFkZS12YWx1ZSB7XHJcbiAgICAgICAgICAgIGNvbG9yOiByZ2JhKHdoaXRlLCAwLjEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAucmFuZ2VkLXN0YXRzLXRhYmxlLWNlbGwge1xyXG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCIiLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTE1MjZiZWNhJnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuaW1wb3J0IHN0eWxlMCBmcm9tIFwiLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTE1MjZiZWNhJmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiMTUyNmJlY2FcIixcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygnZGl2Jyx7c3RhdGljQ2xhc3M6XCJ0YWJsZS1jb250YWluZXJcIn0sW19jKCdyYW5nZWQtc3RhdHMtdGFibGUnLHthdHRyczp7XCJkYXRhSXRlbXNcIjpfdm0uY29tYmF0cyxcIml0ZW1zXCI6X3ZtLml0ZW1zLFwiZm9vdGVySXRlbXNcIjpfdm0uZm9vdGVySXRlbXMsXCJzaG93LWF2ZXJhZ2VcIjpcIlwiLFwiYXZlcmFnZU51bWJlckZvcm1hdE9wdGlvbnNcIjpfdm0uYXZnTnVtYmVyRm9ybWF0fX0pLF9jKCdmbG9hdGluZy1tZW51Jyx7YXR0cnM6e1wibGVmdFwiOlwiXCJ9LHNjb3BlZFNsb3RzOl92bS5fdShbe2tleTpcImFjdGl2YXRvclwiLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIFtfYygnYnV0dG9uJyx7b246e1wiY2xpY2tcIjpmdW5jdGlvbigkZXZlbnQpe192bS5zaG93U2V0dGluZ3MgPSAhX3ZtLnNob3dTZXR0aW5nc319fSxbX2MoJ3NwYW4nLHtzdGF0aWNDbGFzczpcIm1kaSBtZGktY29nXCJ9KV0pXX0scHJveHk6dHJ1ZX1dKSxtb2RlbDp7dmFsdWU6KF92bS5zaG93U2V0dGluZ3MpLGNhbGxiYWNrOmZ1bmN0aW9uICgkJHYpIHtfdm0uc2hvd1NldHRpbmdzPSQkdn0sZXhwcmVzc2lvbjpcInNob3dTZXR0aW5nc1wifX0sW19jKCdjb21iYXQtdHJhY2tpbmctaWdub3JlLWVzcGlvbmFnZS1jb21iYXRzLXNldHRpbmdzJyksX2MoJ2hyJyksX2MoJ2RhdGUtcmFuZ2Utc2V0dGluZ3MnKV0sMSldLDEpfVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCI8dGVtcGxhdGU+XHJcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgPHJhbmdlZC1zdGF0cy10YWJsZVxyXG4gICAgICAgICAgICA6ZGF0YUl0ZW1zPVwiY29tYmF0c1wiXHJcbiAgICAgICAgICAgIDppdGVtcz1cIml0ZW1zXCJcclxuICAgICAgICAgICAgOmZvb3Rlckl0ZW1zPVwiZm9vdGVySXRlbXNcIlxyXG4gICAgICAgICAgICBzaG93LWF2ZXJhZ2VcclxuICAgICAgICAgICAgOmF2ZXJhZ2VOdW1iZXJGb3JtYXRPcHRpb25zPVwiYXZnTnVtYmVyRm9ybWF0XCJcclxuICAgICAgICAvPlxyXG5cclxuICAgICAgICA8ZmxvYXRpbmctbWVudSB2LW1vZGVsPVwic2hvd1NldHRpbmdzXCIgbGVmdD5cclxuICAgICAgICAgICAgPHRlbXBsYXRlICNhY3RpdmF0b3I+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cInNob3dTZXR0aW5ncyA9ICFzaG93U2V0dGluZ3NcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1kaSBtZGktY29nXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG5cclxuICAgICAgICAgICAgPGNvbWJhdC10cmFja2luZy1pZ25vcmUtZXNwaW9uYWdlLWNvbWJhdHMtc2V0dGluZ3MgLz5cclxuICAgICAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgICAgIDxkYXRlLXJhbmdlLXNldHRpbmdzIC8+XHJcbiAgICAgICAgPC9mbG9hdGluZy1tZW51PlxyXG4gICAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuICAgIGltcG9ydCBSYW5nZWRTdGF0c1RhYmxlLCB7IFJhbmdlZFN0YXRzVGFibGVJdGVtIH0gZnJvbSAnQHN0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWUnO1xyXG4gICAgaW1wb3J0IHsgQ29tYmF0UmVwb3J0RGF0YU1vZHVsZSwgRGFpbHlDb21iYXRSZXBvcnRSZXN1bHQgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvQ29tYmF0UmVwb3J0RGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgeyBDb21iYXRSZXN1bHRUeXBlcyB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9jb21iYXQtcmVwb3J0cy9Db21iYXRSZXN1bHRUeXBlJztcclxuICAgIGltcG9ydCBEYXRlUmFuZ2VTZXR0aW5ncyBmcm9tICdAc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9EYXRlUmFuZ2VTZXR0aW5ncy52dWUnO1xyXG4gICAgaW1wb3J0IENvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzIGZyb20gJ0BzdGF0cy9jb21wb25lbnRzL3NldHRpbmdzL0NvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzLnZ1ZSc7XHJcblxyXG4gICAgQENvbXBvbmVudCh7XHJcbiAgICAgICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICAgICBSYW5nZWRTdGF0c1RhYmxlLFxyXG4gICAgICAgICAgICBEYXRlUmFuZ2VTZXR0aW5ncyxcclxuICAgICAgICAgICAgQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MsXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbiAgICBleHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJsZSBleHRlbmRzIFZ1ZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBzaG93U2V0dGluZ3MgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGF2Z051bWJlckZvcm1hdDogSW50bC5OdW1iZXJGb3JtYXRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDEsXHJcbiAgICAgICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBjb21iYXRzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tYmF0UmVwb3J0RGF0YU1vZHVsZS5kYWlseVJlc3VsdHNBcnJheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGl0ZW1zKCk6IFJhbmdlZFN0YXRzVGFibGVJdGVtPERhaWx5Q29tYmF0UmVwb3J0UmVzdWx0PltdIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbWJhdFJlc3VsdFR5cGVzLm1hcChyZXN1bHQgPT4gKHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5jb21iYXRzLmNvbWJhdFJlc3VsdHNbcmVzdWx0XSxcclxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiBjb21iYXRzID0+IGNvbWJhdHMucmVkdWNlKChhY2MsIGN1cikgPT4gYWNjICsgY3VyLnJlc3VsdHMub25FeHBlZGl0aW9uc1tyZXN1bHRdLCAwKSxcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZm9vdGVySXRlbXMoKTogUmFuZ2VkU3RhdHNUYWJsZUl0ZW08RGFpbHlDb21iYXRSZXBvcnRSZXN1bHQ+W10ge1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5jb21tb24ucmVzb3VyY2VVbml0cyxcclxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZTogY29tYmF0cyA9PiBDb21iYXRSZXN1bHRUeXBlcy5yZWR1Y2UoKGFjYywgcmVzdWx0KSA9PiBhY2MgKyBjb21iYXRzLnJlZHVjZSgoYWNjLCBjdXIpID0+IGFjYyArIGN1ci5yZXN1bHRzLm9uRXhwZWRpdGlvbnNbcmVzdWx0XSwgMCksIDApLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc2NyaXB0PlxyXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XHJcbiAgICAudGFibGUtY29udGFpbmVyIHtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGNvbHVtbi1nYXA6IDRweDtcclxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciBhdXRvO1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBzdGFydDtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTE3M2RkYjEyJnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTE3M2RkYjEyJmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiMTczZGRiMTJcIixcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHJlcXVpcmVkQXJncztcblxuZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gc3RhcnRPZkRheTtcblxudmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3RvRGF0ZS9pbmRleC5qc1wiKSk7XG5cbnZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5mdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdG9EYXRlO1xuXG52YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gICgwLCBfaW5kZXguZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdLCJuYW1lcyI6WyJyZW5kZXIiLCJfdm0iLCJ0aGlzIiwiX2giLCIkY3JlYXRlRWxlbWVudCIsIl9jIiwiX3NlbGYiLCJzdGF0aWNDbGFzcyIsImRvbVByb3BzIiwiX3MiLCIkaTE4biIsIiR0IiwiZXh0ZW5zaW9uIiwic2V0dGluZ3MiLCJjb21iYXRzIiwiaWdub3JlRXNwaW9uYWdlQ29tYmF0cyIsInRpdGxlIiwiYXR0cnMiLCJsYWJlbCIsIm9uIiwiJGV2ZW50Iiwic2V0SWdub3JlRXNwaW9uYWdlQ29tYmF0cyIsInN0YXRpY1JlbmRlckZucyIsImNvbXBvbmVudCIsImNvbHVtbnMiLCJyb3dzIiwiZm9vdGVyUm93cyIsInZhbHVlIiwiZ2V0Q2VsbENsYXNzIiwic2NvcGVkU2xvdHMiLCJfdSIsIl9sIiwiY29sdW1uIiwiaSIsImtleSIsImZuIiwicmVmIiwiaXRlbSIsInNsb3ROYW1lIiwiJHNjb3BlZFNsb3RzIiwiX3QiLCJjbGFzcyIsImxhYmVsQ2xhc3MiLCJpdGVtcyIsImZvcm1hdHRlciIsImluZGV4IiwibmFtZSIsImRhdGEiLCJmb290ZXJJdGVtcyIsImF2Z051bWJlckZvcm1hdCIsInNob3dTZXR0aW5ncyIsInByb3h5IiwibW9kZWwiLCJjYWxsYmFjayIsIiQkdiIsImV4cHJlc3Npb24iLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZhdWx0Iiwic3RhcnRPZkRheSIsIl9pbmRleCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfaW5kZXgyIiwib2JqIiwiX19lc01vZHVsZSIsImRpcnR5RGF0ZSIsImFyZ3VtZW50cyIsImRhdGUiLCJzZXRIb3VycyIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJnU3RyIiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsImdldFRpbWUiLCJjb25zb2xlIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJOYU4iXSwic291cmNlUm9vdCI6IiJ9