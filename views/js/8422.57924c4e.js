"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[8422],{4263:(e,t,i)=>{var a;i.d(t,{O:()=>s}),function(e){e[e["total"]=0]="total",e[e["economy"]=1]="economy",e[e["research"]=2]="research",e[e["militaryAndNumberOfShips"]=3]="militaryAndNumberOfShips",e[e["militaryLost"]=4]="militaryLost",e[e["militaryBuilt"]=5]="militaryBuilt",e[e["militaryDestroyed"]=6]="militaryDestroyed",e[e["honor"]=7]="honor",e[e["lifeform"]=8]="lifeform",e[e["lifeformEconomy"]=9]="lifeformEconomy",e[e["lifeformTechnology"]=10]="lifeformTechnology",e[e["lifeformDiscoveries"]=11]="lifeformDiscoveries"}(a||(a={}));const s=["total","economy","research","military","militaryBuilt","militaryDestroyed","militaryLost","honor","numberOfShips","lifeform","lifeformEconomy","lifeformTechnology","lifeformDiscoveries"]},5593:(e,t,i)=>{i.d(t,{D:()=>m});var a=i(655),s=i(3768),l=i(4384),n=i(1936);function r(e,t){const i={...e};return Object.keys(t).forEach((e=>{const a=t[e];if(e in i){const t=i[e];if("object"===typeof t&&!(t instanceof Array))return void(i[e]=r(t,a))}i[e]=a})),i}const o={universeHistory:{alliances:{highscore:[]},players:{highscore:[]}}};async function c(e){const t=await(0,l._N)(e),i=r(o,await t.get("universeSpecificSettings",0)??{});return i}var h=i(3654),d=i(4028),u=i(8717);let y=class extends d.w3{settings=null;_ready;_resolveReady;updateSettings(e){console.debug("updating universe specific settings",e),this.settings=e,(async()=>{const t=await(0,l._N)(u.l);await t.put("universeSpecificSettings",e,0);const i={ogameMeta:u.l,senderUuid:u.g,type:n.C.NotifyUniverseSpecificSettingsUpdate};await(0,s.p)(i)})()}get ready(){return this._ready}async created(){this._ready=new Promise((e=>this._resolveReady=e)),this.initCommunication(),await this.loadData()}initCommunication(){chrome.runtime.onMessage.addListener((async e=>await this.onMessage(e)))}async loadData(){this.settings=await c(u.l),this._resolveReady()}async onMessage(e){const{type:t,ogameMeta:i}=e;if((0,h.i)(i,u.l)&&e.senderUuid!=u.g)switch(t){case n.C.NotifyUniverseSpecificSettingsUpdate:await this.loadData();break}}};y=(0,a.gn)([d.wA],y);const m=new y},8422:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"highscores"},[e.dataModuleLoading?i("loading-spinner"):[i("grid-table",{staticClass:"alliance-selection-table",attrs:{columns:e.tableColumns,items:e.tableItems},scopedSlots:e._u([{key:"cell-alliance",fn:function(t){var a=t.value;return[null==a?[i("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAllianceName,expression:"selectedAllianceName"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:e.$i18n.$t.extension.universeHistory.allianceSelection.search,list:"alliance-list"},domProps:{value:e.selectedAllianceName},on:{change:function(t){return e.onAllianceSelected(t.target.value)},input:function(t){t.target.composing||(e.selectedAllianceName=t.target.value)}}}),i("datalist",{attrs:{id:"alliance-list"}},e._l(e.allianceNames,(function(t,a){return i("option",{key:a},[e._v(" "+e._s(t)+" ")])})),0)]:i("div",{staticClass:"list-item"},[i("span",{staticClass:"mdi mdi-delete",on:{click:function(t){return e.removeAlliance(a.id)}}}),i("span",{domProps:{textContent:e._s(e.getAllianceString(a))}})])]}}])}),i("tabs",{attrs:{tabs:e.tabs}},[e._l(e.keys,(function(t){return[i("template",{slot:"tab-content-"+t},[e.allianceScoresLoading?i("span",{key:"score-"+t+"-loading",staticClass:"loading"}):e.allianceIds.length>0?i("scrollable-chart",{key:"score-"+t,attrs:{datasets:e.scoreDatasets[t],"continue-last-value":"","show-x-values-in-grid":"","tick-interval":864e5,ticks:30,"tick-list":e.days,"min-tick":e.firstDay,"max-tick":e.nextDay,"x-label-formatter":function(t){return e.$i18n.$d(t,"date")},"x-label-tooltip-formatter":function(t){return e.$i18n.$d(t,"datetime")}}}):e._e()],1)]}))],2)]],2)},s=[],l=i(655),n=i(4263),r=i(9751),o=i(7545),c=i(6538),h=i(7076),d=i(5038),u=i(5593),y=i(7349),m=i(9119),g=i(4028);let f=class extends g.w3{colors=["#F48FB1","#673AB7","#E53935","#3F51B5","#006064","#546E7A","#EF9A9A","#64B5F6","#FFE082","#E91E63","#BA68C8","#BF360C","#039BE5","#8E24AA","#9CCC65","#A1887F","#0097A7","#FFAB91","#009688","#43A047","#1A237E","#558B2F","#311B92","#880E4F","#01579B","#AFB42B","#1E88E5","#827717","#FFF176","#BDBDBD","#FFC107","#FFA726","#FF5722","#795548","#004D40","#81C784","#90A4AE","#757575","#FDD835"];leftX=0;rightX=1;dataModuleLoading=!0;allianceScoresLoading=!0;selectedAllianceName="";scoreDatasets={};firstDay=0;keys=n.O;get tabs(){const e=[{key:"total",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.total},{key:"economy",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.economy},{key:"research",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.research},{key:"military",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.military},{key:"militaryBuilt",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.militaryBuilt},{key:"militaryDestroyed",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.militaryDestroyed},{key:"militaryLost",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.militaryLost},{key:"honor",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.honor},{key:"numberOfShips",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.numberOfShips}];return h.s.serverSettings.lifeforms.enabled&&e.push({key:"lifeform",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.lifeform},{key:"lifeformEconomy",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.lifeformEconomy},{key:"lifeformTechnology",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.lifeformTechnology},{key:"lifeformDiscoveries",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.lifeformDiscoveries}),e}get tableColumns(){return[{key:"alliance",label:this.$i18n.$t.extension.universeHistory.allianceSelection.header,headerClass:"alliance-selection-table-cell",class:"alliance-selection-table-cell"}]}get tableItems(){return[{alliance:null},...this.selectedAlliances.map((e=>({alliance:e})))]}get allianceIds(){return(this.$route.query.alliances??"").split(",").filter((e=>e.length>0)).map((e=>(0,o.Y)(e,10)))}async mounted(){await u.D.ready,await this.redirectToDefault(),this.dataModuleLoading=!0,await d.z.ready,this.dataModuleLoading=!1,await this.loadAllianceScores()}async redirectToDefault(){if(0!=this.allianceIds.length)return;const e=u.D.settings.universeHistory.alliances.highscore;0!=e.length&&await this.updateAllianceIdRoute(e)}async loadAllianceScores(){this.allianceScoresLoading=!0,this.scoreDatasets={};const e={};this.allianceIds.forEach((t=>e[t]={})),this.keys.forEach((t=>{this.scoreDatasets[t]=[],this.allianceIds.forEach(((i,a)=>e[i][t]={key:`${i}-${t}`,values:[],color:this.colors[a%this.colors.length],label:this.getAllianceString(this.alliances.find((e=>e.id==i))??(0,c.A)(`no alliance with id '${i}' found`)),filled:!1,stack:!1,hidePoints:!1}))}));let t=Number.MAX_SAFE_INTEGER;const i=await d.z.getAllianceScoreHistory(this.allianceIds),a=n.O,s=(0,r.a)(this.allianceIds,(()=>(0,r.a)(a,null)));i.forEach(((i,l)=>{t=Math.min(t,i.date),s[i.allianceId][i.type]!=i.score&&a.includes(i.type)&&(e[i.allianceId][i.type].values.push({x:i.date,y:i.score}),s[i.allianceId][i.type]=i.score)})),this.keys.forEach((t=>{this.allianceIds.forEach((i=>{this.scoreDatasets[t].push(e[i][t])}))})),this.firstDay=(0,m.Z)(t).getTime(),this.allianceScoresLoading=!1}get nextDay(){return(0,y.Z)((0,m.Z)(Date.now()),1).getTime()}get days(){const e=[],t=this.nextDay;for(let i=this.firstDay;i<=t;i=(0,y.Z)(i,1).getTime())e.push(i);return e}get alliances(){return d.z.alliances}getAllianceString(e){return`[${e.tag}] ${e.name}`}get allianceNames(){return this.alliances.map((e=>this.getAllianceString(e))).sort()}get selectedAlliances(){return this.allianceIds.map((e=>this.alliances.find((t=>t.id==e))))}async onAllianceSelected(e){const t=this.alliances.find((t=>this.getAllianceString(t).toLowerCase()==e.toLowerCase()));if(null==t)return;await this.$nextTick(),this.selectedAllianceName="";const i=this.$route.query.alliances?.split(",")??[];await this.updateAllianceIdRoute([...i.filter((e=>e!=t.id.toString())),t.id]),await this.loadAllianceScores()}async removeAlliance(e){await this.updateAllianceIdRoute(this.allianceIds.filter((t=>t!=e))),await this.loadAllianceScores()}updateSettings(e){const t=u.D.settings;u.D.updateSettings({...t,universeHistory:{...t.universeHistory,alliances:{...t.universeHistory.alliances,highscore:e}}})}async updateAllianceIdRoute(e){this.updateSettings(e.map((e=>"string"===typeof e?(0,o.Y)(e,10):e))),await this.$router.replace({query:{alliances:e.join(",")}})}};f=(0,l.gn)([(0,g.wA)({})],f);const p=f,v=p;var b=i(1001),A=(0,b.Z)(v,a,s,!1,null,"7f9197cf",null);const $=A.exports},7349:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(3946),s=i(9013),l=i(3882);function n(e,t){(0,l.Z)(2,arguments);var i=(0,s.Z)(e),n=(0,a.Z)(t);return isNaN(n)?new Date(NaN):n?(i.setDate(i.getDate()+n),i):i}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDQSxnQkFDQSx5QkFFQSxnQ0FDQSxVQUNBLGdDQUVBLDBCQUdBLDBCQUNBLDhCQUNBLE9BR0EseURBQ0EsbUJBQ0EsOEJBS0EsMkJBQ0EsOEJBR0Esc0JBRUEsV0FDQSx1Q0FFQSx1QkFDQSx5QkFFQSwwQ0FDQSxnQkFDQSxVQUNBLHdDQUNBLDZHQUNBLFVBQ0EsU0FDQSxvQkFJQSw4QkFFQSw0REFDQSxNQUNBLGtEQUVBLG1CQUNBLHFCQUVBLGtDQUdBLHFCQUlBLHFDQUNBLFNBQ0EsWUFFQSxvQ0FHQSx1QkFDQSw4QkFDQSwwQ0FJQSxtQ0FFQSw4QkFHQSxjQUNBLCtDQUdBLFdBQ0EsV0FFQSxlQUNBLHNEQUNBLFVBR0EsU0FLQSxnQkFDQSxxQkFHQSxxQkFDQSw2QkFHQSxvQkFDQSxzQkFDQSxvQ0FDQSxPQUdBLHdCQUNBLG9FQUdBLDRCQUNBLDJGQUNBLFdBQ0EsYUFHQSxpQkFDQSw2QkFFQSwwREFDQSwrQkFDQSxrQ0FDQSxhQUVBLDBCQUdBLDhCQUNBLHFFQUVBLDBCQUlBLGtCQUNBLHFCQUNBLHVCQUNBLEVBQ0Esb0JBQ0Esa0JBQ0EsY0FDQSw0QkFDQSxnQkFNQSwrQkFDQSwyRUFFQSxzQkFDQSxPQUNBLDJCQTNTQSxhQURBLGFBQ0EsRyxVQ3ZFbWQsSSxjQ1EvY0MsR0FBWSxPQUNkLEVBQ0FwRCxFQUNBbUQsR0FDQSxFQUNBLEtBQ0EsV0FDQSxNQUlGLFFBQWVDLEVBQWlCLFMsa0VDT2pCLFNBQVNDLEVBQVFDLEVBQVdDLElBQ3pDLE9BQWEsRUFBR0MsV0FDaEIsSUFBSUMsR0FBTyxPQUFPSCxHQUNkSSxHQUFTLE9BQVVILEdBRXZCLE9BQUlJLE1BQU1ELEdBQ0QsSUFBSUUsS0FBS0MsS0FHYkgsR0FLTEQsRUFBS0ssUUFBUUwsRUFBS00sVUFBWUwsR0FDdkJELEdBSkVBIiwic291cmNlcyI6WyJvZ2FtZS10cmFja2VyOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvb2dhbWUvaGlnaHNjb3JlLnRzIiwib2dhbWUtdHJhY2tlcjovLy8uL3NyYy9zaGFyZWQvdXRpbHMvbWVyZ2VEZWVwLnRzIiwib2dhbWUtdHJhY2tlcjovLy8uL3NyYy9zaGFyZWQvbW9kZWxzL3VuaXZlcnNlLXNwZWNpZmljLXNldHRpbmdzL2xvYWRVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3MudHMiLCJvZ2FtZS10cmFja2VyOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2RhdGEvVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvdmlld3MvdW5pdmVyc2UtaGlzdG9yeS9hbGxpYW5jZXMvSGlnaHNjb3JlLnZ1ZT81YTFlIiwid2VicGFjazovLy9zcmMvdmlld3Mvc3RhdHMvdmlld3MvdW5pdmVyc2UtaGlzdG9yeS9hbGxpYW5jZXMvSGlnaHNjb3JlLnZ1ZT9iZTU4Iiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy91bml2ZXJzZS1oaXN0b3J5L2FsbGlhbmNlcy9IaWdoc2NvcmUudnVlPzQ3ZDEiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL3VuaXZlcnNlLWhpc3RvcnkvYWxsaWFuY2VzL0hpZ2hzY29yZS52dWU/ZWRjNiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2FkZERheXMvaW5kZXguanM/MDk2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZW51bSBIaWdoc2NvcmVUeXBlIHtcclxuICAgIHRvdGFsID0gMCxcclxuICAgIGVjb25vbXkgPSAxLFxyXG4gICAgcmVzZWFyY2ggPSAyLFxyXG4gICAgbWlsaXRhcnlBbmROdW1iZXJPZlNoaXBzID0gMyxcclxuICAgIG1pbGl0YXJ5TG9zdCA9IDQsXHJcbiAgICBtaWxpdGFyeUJ1aWx0ID0gNSxcclxuICAgIG1pbGl0YXJ5RGVzdHJveWVkID0gNixcclxuICAgIGhvbm9yID0gNyxcclxuXHJcbiAgICBsaWZlZm9ybSA9IDgsXHJcbiAgICBsaWZlZm9ybUVjb25vbXkgPSA5LFxyXG4gICAgbGlmZWZvcm1UZWNobm9sb2d5ID0gMTAsXHJcbiAgICBsaWZlZm9ybURpc2NvdmVyaWVzID0gMTEsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIEhpZ2hzY29yZVR5cGVOYW1lID1cclxuICAgICd0b3RhbCcgfCAnZWNvbm9teScgfCAncmVzZWFyY2gnXHJcbiAgICB8ICdtaWxpdGFyeScgfCAnbWlsaXRhcnlCdWlsdCcgfCAnbWlsaXRhcnlEZXN0cm95ZWQnIHwgJ21pbGl0YXJ5TG9zdCdcclxuICAgIHwgJ2hvbm9yJyB8ICdudW1iZXJPZlNoaXBzJ1xyXG4gICAgfCAnbGlmZWZvcm0nIHwgJ2xpZmVmb3JtRWNvbm9teScgfCAnbGlmZWZvcm1UZWNobm9sb2d5JyB8ICdsaWZlZm9ybURpc2NvdmVyaWVzJztcclxuXHJcbmV4cG9ydCBjb25zdCBIaWdoc2NvcmVUeXBlTmFtZXM6IEhpZ2hzY29yZVR5cGVOYW1lW10gPSBbXHJcbiAgICAndG90YWwnLCAnZWNvbm9teScsICdyZXNlYXJjaCcsXHJcbiAgICAnbWlsaXRhcnknLCAnbWlsaXRhcnlCdWlsdCcsICdtaWxpdGFyeURlc3Ryb3llZCcsICdtaWxpdGFyeUxvc3QnLFxyXG4gICAgJ2hvbm9yJywgJ251bWJlck9mU2hpcHMnLFxyXG4gICAgJ2xpZmVmb3JtJywgJ2xpZmVmb3JtRWNvbm9teScsICdsaWZlZm9ybVRlY2hub2xvZ3knLCAnbGlmZWZvcm1EaXNjb3ZlcmllcydcclxuXTsiLCIvKiogTWVyZ2VzIHR3byBvYmplY3RzIHJlY3Vyc2l2ZWx5LiBXaWxsIG92ZXJ3cml0ZSBleGlzdGluZyBwcm9wZXJ0aWVzIGluIGEgd2l0aCB0aGUgdmFsdWVzIGluIGIuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlZXA8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KGE6IFQsIGI6IFQpOiBUIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHsgLi4uYSB9IGFzIFJlY29yZDxzdHJpbmcsIGFueT47XHJcblxyXG4gICAgT2JqZWN0LmtleXMoYikuZm9yRWFjaChiS2V5ID0+IHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBiW2JLZXldO1xyXG4gICAgICAgIGlmKGJLZXkgaW4gcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1ciA9IHJlc3VsdFtiS2V5XTtcclxuXHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiBjdXIgPT09ICdvYmplY3QnICYmICEoY3VyIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRbYktleV0gPSBtZXJnZURlZXAoY3VyLCB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzdWx0W2JLZXldID0gdGFyZ2V0O1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdCBhcyBUO1xyXG59IiwiaW1wb3J0IHsgZ2V0UGxheWVyRGF0YWJhc2UgfSBmcm9tIFwiQC9zaGFyZWQvZGIvYWNjZXNzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VPZ2FtZU1ldGEgfSBmcm9tIFwiQC9zaGFyZWQvbWVzc2FnZXMvTWVzc2FnZVwiO1xyXG5pbXBvcnQgeyBtZXJnZURlZXAgfSBmcm9tIFwiQC9zaGFyZWQvdXRpbHMvbWVyZ2VEZWVwXCI7XHJcbmltcG9ydCB7IFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5ncyB9IGZyb20gXCIuL1VuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc1wiO1xyXG5cclxuY29uc3QgZGVmYXVsdFNldHRpbmdzOiBVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3MgPSB7XHJcbiAgICB1bml2ZXJzZUhpc3Rvcnk6IHtcclxuICAgICAgICBhbGxpYW5jZXM6IHtcclxuICAgICAgICAgICAgaGlnaHNjb3JlOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBsYXllcnM6IHtcclxuICAgICAgICAgICAgaGlnaHNjb3JlOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzKG1ldGE6IE1lc3NhZ2VPZ2FtZU1ldGEpOiBQcm9taXNlPFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5ncz4ge1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXRQbGF5ZXJEYXRhYmFzZShtZXRhKTtcclxuXHJcbiAgICBjb25zdCBzZXR0aW5ncyA9IG1lcmdlRGVlcDxVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3M+KFxyXG4gICAgICAgIGRlZmF1bHRTZXR0aW5ncyxcclxuICAgICAgICAoYXdhaXQgZGIuZ2V0KCd1bml2ZXJzZVNwZWNpZmljU2V0dGluZ3MnLCAwKSkgPz8ge30gYXMgVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzLFxyXG4gICAgKTtcclxuICAgIHJldHVybiBzZXR0aW5ncztcclxufSIsImltcG9ydCB7IGJyb2FkY2FzdE1lc3NhZ2UgfSBmcm9tIFwiQC9zaGFyZWQvY29tbXVuaWNhdGlvbi9icm9hZGNhc3RNZXNzYWdlXCI7XHJcbmltcG9ydCB7IGdldFBsYXllckRhdGFiYXNlIH0gZnJvbSBcIkAvc2hhcmVkL2RiL2FjY2Vzc1wiO1xyXG5pbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSBcIkAvc2hhcmVkL21lc3NhZ2VzL01lc3NhZ2VcIjtcclxuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiQC9zaGFyZWQvbWVzc2FnZXMvTWVzc2FnZVR5cGVcIjtcclxuaW1wb3J0IHsgTm90aWZ5VW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzVXBkYXRlTWVzc2FnZSB9IGZyb20gXCJAL3NoYXJlZC9tZXNzYWdlcy91bml2ZXJzZS1zcGVjaWZpYy1zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBsb2FkVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy91bml2ZXJzZS1zcGVjaWZpYy1zZXR0aW5ncy9sb2FkVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzXCI7XHJcbmltcG9ydCB7IFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5ncyB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvdW5pdmVyc2Utc3BlY2lmaWMtc2V0dGluZ3MvVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzXCI7XHJcbmltcG9ydCB7IG9nYW1lTWV0YXNFcXVhbCB9IGZyb20gXCJAL3NoYXJlZC9vZ2FtZS13ZWIvb2dhbWVNZXRhc0VxdWFsXCI7XHJcbmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbmltcG9ydCB7IEdsb2JhbE9nYW1lTWV0YURhdGEsIHN0YXRzVmlld1V1aWQgfSBmcm9tIFwiLi9nbG9iYWxcIjtcclxuXHJcbkBDb21wb25lbnRcclxuY2xhc3MgVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZUNsYXNzIGV4dGVuZHMgVnVlIHtcclxuICAgIHB1YmxpYyBzZXR0aW5nczogVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzID0gbnVsbCE7XHJcblxyXG4gICAgcHJpdmF0ZSBfcmVhZHkhOiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgcHJpdmF0ZSBfcmVzb2x2ZVJlYWR5ITogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5ncykge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0aW5nIHVuaXZlcnNlIHNwZWNpZmljIHNldHRpbmdzJywgc2V0dGluZ3MpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHJcbiAgICAgICAgdm9pZCAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldFBsYXllckRhdGFiYXNlKEdsb2JhbE9nYW1lTWV0YURhdGEpO1xyXG4gICAgICAgICAgICBhd2FpdCBkYi5wdXQoJ3VuaXZlcnNlU3BlY2lmaWNTZXR0aW5ncycsIHNldHRpbmdzLCAwKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1zZzogTm90aWZ5VW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzVXBkYXRlTWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgIG9nYW1lTWV0YTogR2xvYmFsT2dhbWVNZXRhRGF0YSxcclxuICAgICAgICAgICAgICAgIHNlbmRlclV1aWQ6IHN0YXRzVmlld1V1aWQsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBNZXNzYWdlVHlwZS5Ob3RpZnlVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NVcGRhdGUsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgYnJvYWRjYXN0TWVzc2FnZShtc2cpO1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCByZWFkeSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVhZHk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVkKCkge1xyXG4gICAgICAgIHRoaXMuX3JlYWR5ID0gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB0aGlzLl9yZXNvbHZlUmVhZHkgPSByZXNvbHZlKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbml0Q29tbXVuaWNhdGlvbigpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRDb21tdW5pY2F0aW9uKCkge1xyXG4gICAgICAgIGNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihhc3luYyBtZXNzYWdlID0+IGF3YWl0IHRoaXMub25NZXNzYWdlKG1lc3NhZ2UpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWREYXRhKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBhd2FpdCBsb2FkVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzKEdsb2JhbE9nYW1lTWV0YURhdGEpO1xyXG5cclxuICAgICAgICB0aGlzLl9yZXNvbHZlUmVhZHkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIG9uTWVzc2FnZShtc2c6IE1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCB7IHR5cGUsIG9nYW1lTWV0YSB9ID0gbXNnO1xyXG4gICAgICAgIGlmICghb2dhbWVNZXRhc0VxdWFsKG9nYW1lTWV0YSwgR2xvYmFsT2dhbWVNZXRhRGF0YSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1zZy5zZW5kZXJVdWlkID09IHN0YXRzVmlld1V1aWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTWVzc2FnZVR5cGUuTm90aWZ5VW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzVXBkYXRlOiB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUgPSBuZXcgVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZUNsYXNzKCk7IiwidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwiaGlnaHNjb3Jlc1wifSxbKF92bS5kYXRhTW9kdWxlTG9hZGluZyk/X2MoJ2xvYWRpbmctc3Bpbm5lcicpOltfYygnZ3JpZC10YWJsZScse3N0YXRpY0NsYXNzOlwiYWxsaWFuY2Utc2VsZWN0aW9uLXRhYmxlXCIsYXR0cnM6e1wiY29sdW1uc1wiOl92bS50YWJsZUNvbHVtbnMsXCJpdGVtc1wiOl92bS50YWJsZUl0ZW1zfSxzY29wZWRTbG90czpfdm0uX3UoW3trZXk6XCJjZWxsLWFsbGlhbmNlXCIsZm46ZnVuY3Rpb24ocmVmKXtcbnZhciBhbGxpYW5jZSA9IHJlZi52YWx1ZTtcbnJldHVybiBbKGFsbGlhbmNlID09IG51bGwpP1tfYygnaW5wdXQnLHtkaXJlY3RpdmVzOlt7bmFtZTpcIm1vZGVsXCIscmF3TmFtZTpcInYtbW9kZWxcIix2YWx1ZTooX3ZtLnNlbGVjdGVkQWxsaWFuY2VOYW1lKSxleHByZXNzaW9uOlwic2VsZWN0ZWRBbGxpYW5jZU5hbWVcIn1dLHN0YXRpY1N0eWxlOntcIndpZHRoXCI6XCIxMDAlXCJ9LGF0dHJzOntcInR5cGVcIjpcInRleHRcIixcInBsYWNlaG9sZGVyXCI6X3ZtLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuYWxsaWFuY2VTZWxlY3Rpb24uc2VhcmNoLFwibGlzdFwiOlwiYWxsaWFuY2UtbGlzdFwifSxkb21Qcm9wczp7XCJ2YWx1ZVwiOihfdm0uc2VsZWN0ZWRBbGxpYW5jZU5hbWUpfSxvbjp7XCJjaGFuZ2VcIjpmdW5jdGlvbigkZXZlbnQpe3JldHVybiBfdm0ub25BbGxpYW5jZVNlbGVjdGVkKCRldmVudC50YXJnZXQudmFsdWUpfSxcImlucHV0XCI6ZnVuY3Rpb24oJGV2ZW50KXtpZigkZXZlbnQudGFyZ2V0LmNvbXBvc2luZyl7IHJldHVybjsgfV92bS5zZWxlY3RlZEFsbGlhbmNlTmFtZT0kZXZlbnQudGFyZ2V0LnZhbHVlfX19KSxfYygnZGF0YWxpc3QnLHthdHRyczp7XCJpZFwiOlwiYWxsaWFuY2UtbGlzdFwifX0sX3ZtLl9sKChfdm0uYWxsaWFuY2VOYW1lcyksZnVuY3Rpb24obmFtZSxpKXtyZXR1cm4gX2MoJ29wdGlvbicse2tleTppfSxbX3ZtLl92KFwiIFwiK192bS5fcyhuYW1lKStcIiBcIildKX0pLDApXTpfYygnZGl2Jyx7c3RhdGljQ2xhc3M6XCJsaXN0LWl0ZW1cIn0sW19jKCdzcGFuJyx7c3RhdGljQ2xhc3M6XCJtZGkgbWRpLWRlbGV0ZVwiLG9uOntcImNsaWNrXCI6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLnJlbW92ZUFsbGlhbmNlKGFsbGlhbmNlLmlkKX19fSksX2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhfdm0uZ2V0QWxsaWFuY2VTdHJpbmcoYWxsaWFuY2UpKX19KV0pXX19XSl9KSxfYygndGFicycse2F0dHJzOntcInRhYnNcIjpfdm0udGFic319LFtfdm0uX2woKF92bS5rZXlzKSxmdW5jdGlvbihrZXkpe3JldHVybiBbX2MoJ3RlbXBsYXRlJyx7c2xvdDooXCJ0YWItY29udGVudC1cIiArIGtleSl9LFsoX3ZtLmFsbGlhbmNlU2NvcmVzTG9hZGluZyk/X2MoJ3NwYW4nLHtrZXk6KFwic2NvcmUtXCIgKyBrZXkgKyBcIi1sb2FkaW5nXCIpLHN0YXRpY0NsYXNzOlwibG9hZGluZ1wifSk6KF92bS5hbGxpYW5jZUlkcy5sZW5ndGggPiAwKT9fYygnc2Nyb2xsYWJsZS1jaGFydCcse2tleTooXCJzY29yZS1cIiArIGtleSksYXR0cnM6e1wiZGF0YXNldHNcIjpfdm0uc2NvcmVEYXRhc2V0c1trZXldLFwiY29udGludWUtbGFzdC12YWx1ZVwiOlwiXCIsXCJzaG93LXgtdmFsdWVzLWluLWdyaWRcIjpcIlwiLFwidGljay1pbnRlcnZhbFwiOjEwMDAgKiA2MCAqIDYwICogMjQsXCJ0aWNrc1wiOjMwLFwidGljay1saXN0XCI6X3ZtLmRheXMsXCJtaW4tdGlja1wiOl92bS5maXJzdERheSxcIm1heC10aWNrXCI6X3ZtLm5leHREYXksXCJ4LWxhYmVsLWZvcm1hdHRlclwiOmZ1bmN0aW9uICh4KSB7IHJldHVybiBfdm0uJGkxOG4uJGQoeCwgJ2RhdGUnKTsgfSxcIngtbGFiZWwtdG9vbHRpcC1mb3JtYXR0ZXJcIjpmdW5jdGlvbiAoeCkgeyByZXR1cm4gX3ZtLiRpMThuLiRkKHgsICdkYXRldGltZScpOyB9fX0pOl92bS5fZSgpXSwxKV19KV0sMildXSwyKX1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiPHRlbXBsYXRlPlxyXG4gICAgPGRpdiBjbGFzcz1cImhpZ2hzY29yZXNcIj5cclxuICAgICAgICA8bG9hZGluZy1zcGlubmVyIHYtaWY9XCJkYXRhTW9kdWxlTG9hZGluZ1wiIC8+XHJcbiAgICAgICAgPHRlbXBsYXRlIHYtZWxzZT5cclxuICAgICAgICAgICAgPGdyaWQtdGFibGUgOmNvbHVtbnM9XCJ0YWJsZUNvbHVtbnNcIiA6aXRlbXM9XCJ0YWJsZUl0ZW1zXCIgY2xhc3M9XCJhbGxpYW5jZS1zZWxlY3Rpb24tdGFibGVcIj5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSAjY2VsbC1hbGxpYW5jZT1cInsgdmFsdWU6IGFsbGlhbmNlIH1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cImFsbGlhbmNlID09IG51bGxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwic2VsZWN0ZWRBbGxpYW5jZU5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOnBsYWNlaG9sZGVyPVwiJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5hbGxpYW5jZVNlbGVjdGlvbi5zZWFyY2hcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdD1cImFsbGlhbmNlLWxpc3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNoYW5nZT1cIm9uQWxsaWFuY2VTZWxlY3RlZCgkZXZlbnQudGFyZ2V0LnZhbHVlKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT1cIndpZHRoOiAxMDAlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRhdGFsaXN0IGlkPVwiYWxsaWFuY2UtbGlzdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2LWZvcj1cIihuYW1lLCBpKSBpbiBhbGxpYW5jZU5hbWVzXCIgOmtleT1cImlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBuYW1lIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kYXRhbGlzdD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHYtZWxzZSBjbGFzcz1cImxpc3QtaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1kaSBtZGktZGVsZXRlXCIgQGNsaWNrPVwicmVtb3ZlQWxsaWFuY2UoYWxsaWFuY2UuaWQpXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi10ZXh0PVwiZ2V0QWxsaWFuY2VTdHJpbmcoYWxsaWFuY2UpXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgICAgIDwvZ3JpZC10YWJsZT5cclxuXHJcbiAgICAgICAgICAgIDx0YWJzIDp0YWJzPVwidGFic1wiPlxyXG4gICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtZm9yPVwia2V5IGluIGtleXNcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgOnNsb3Q9XCJgdGFiLWNvbnRlbnQtJHtrZXl9YFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWlmPVwiYWxsaWFuY2VTY29yZXNMb2FkaW5nXCIgOmtleT1cImBzY29yZS0ke2tleX0tbG9hZGluZ2BcIiBjbGFzcz1cImxvYWRpbmdcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2Nyb2xsYWJsZS1jaGFydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdi1lbHNlLWlmPVwiYWxsaWFuY2VJZHMubGVuZ3RoID4gMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6a2V5PVwiYHNjb3JlLSR7a2V5fWBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOmRhdGFzZXRzPVwic2NvcmVEYXRhc2V0c1trZXldXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlLWxhc3QtdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3cteC12YWx1ZXMtaW4tZ3JpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOnRpY2staW50ZXJ2YWw9XCIxMDAwICogNjAgKiA2MCAqIDI0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp0aWNrcz1cIjMwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp0aWNrLWxpc3Q9XCJkYXlzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDptaW4tdGljaz1cImZpcnN0RGF5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDptYXgtdGljaz1cIm5leHREYXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOngtbGFiZWwtZm9ybWF0dGVyPVwiKHgpID0+ICRpMThuLiRkKHgsICdkYXRlJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOngtbGFiZWwtdG9vbHRpcC1mb3JtYXR0ZXI9XCIoeCkgPT4gJGkxOG4uJGQoeCwgJ2RhdGV0aW1lJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICA8L3RhYnM+XHJcbiAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IERiVW5pdmVyc2VIaXN0b3J5U2NvcmVUeXBlIH0gZnJvbSAnQC9zaGFyZWQvZGIvc2NoZW1hL3VuaXZlcnNlLWhpc3RvcnknO1xyXG4gICAgaW1wb3J0IHsgSGlnaHNjb3JlVHlwZU5hbWVzIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2hpZ2hzY29yZSc7XHJcbiAgICBpbXBvcnQgeyBjcmVhdGVSZWNvcmQgfSBmcm9tICdAL3NoYXJlZC91dGlscy9jcmVhdGVSZWNvcmQnO1xyXG4gICAgaW1wb3J0IHsgcGFyc2VJbnRTYWZlIH0gZnJvbSAnQC9zaGFyZWQvdXRpbHMvcGFyc2VOdW1iZXJzJztcclxuICAgIGltcG9ydCB7IF90aHJvdyB9IGZyb20gJ0Avc2hhcmVkL3V0aWxzL190aHJvdyc7XHJcbiAgICBpbXBvcnQgeyBHcmlkVGFibGVDb2x1bW4gfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvY29tbW9uL0dyaWRUYWJsZS52dWUnO1xyXG4gICAgaW1wb3J0IHsgU2Nyb2xsYWJsZUNoYXJ0RGF0YXNldCB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvY29tcG9uZW50cy9jb21tb24vc2Nyb2xsYWJsZS1jaGFydC9TY3JvbGxhYmxlQ2hhcnQudnVlJztcclxuICAgIGltcG9ydCB7IFRhYiB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvY29tcG9uZW50cy9jb21tb24vVGFicy52dWUnO1xyXG4gICAgaW1wb3J0IHsgU2VydmVyU2V0dGluZ3NEYXRhTW9kdWxlIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9kYXRhL1NlcnZlclNldHRpbmdzRGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgeyBVbml2ZXJzZUhpc3RvcnlEYXRhTW9kdWxlLCBVbml2ZXJzZUhpc3RvcnlBbGxpYW5jZSB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvZGF0YS9Vbml2ZXJzZUhpc3RvcnlEYXRhTW9kdWxlJztcclxuICAgIGltcG9ydCB7IFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgeyBhZGREYXlzIH0gZnJvbSAnZGF0ZS1mbnMnO1xyXG4gICAgaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSAnZGF0ZS1mbnMvc3RhcnRPZkRheSc7XHJcbiAgICBpbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InO1xyXG5cclxuICAgIEBDb21wb25lbnQoe30pXHJcbiAgICBleHBvcnQgZGVmYXVsdCBjbGFzcyBIaWdoc2NvcmUgZXh0ZW5kcyBWdWUge1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgY29sb3JzID0gW1xyXG4gICAgICAgICAgICAnI0Y0OEZCMScsIC8vIHBpbmsgbGlnaHRlbi0zXHJcbiAgICAgICAgICAgICcjNjczQUI3JywgLy8gZGVlcC1wdXJwbGVcclxuICAgICAgICAgICAgJyNFNTM5MzUnLCAvLyByZWQgZGFya2VuLTFcclxuICAgICAgICAgICAgJyMzRjUxQjUnLCAvLyBpbmRpZ29cclxuICAgICAgICAgICAgJyMwMDYwNjQnLCAvLyBjeWFuIGRhcmtlbi00XHJcbiAgICAgICAgICAgICcjNTQ2RTdBJywgLy8gYmx1ZS1ncmV5IGRhcmtlbi0xXHJcbiAgICAgICAgICAgICcjRUY5QTlBJywgLy8gcmVkIGxpZ2h0ZW4tM1xyXG4gICAgICAgICAgICAnIzY0QjVGNicsIC8vIGJsdWUgbGlnaHRlbi0yXHJcbiAgICAgICAgICAgICcjRkZFMDgyJywgLy8gYW1iZXIgbGlnaHRlbi0zXHJcbiAgICAgICAgICAgICcjRTkxRTYzJywgLy8gcGlua1xyXG4gICAgICAgICAgICAnI0JBNjhDOCcsIC8vIHB1cnBsZSBsaWdodGVuLTJcclxuICAgICAgICAgICAgJyNCRjM2MEMnLCAvLyBkZWVwLW9yYW5nZSBkYXJrZW4tNFxyXG4gICAgICAgICAgICAnIzAzOUJFNScsIC8vIGxpZ2h0LWJsdWUgZGFya2VuLTFcclxuICAgICAgICAgICAgJyM4RTI0QUEnLCAvLyBwdXJwbGUgZGFya2VuLTFcclxuICAgICAgICAgICAgJyM5Q0NDNjUnLCAvLyBsaWdodC1ncmVlbiBsaWdodGVuLTFcclxuICAgICAgICAgICAgJyNBMTg4N0YnLCAvLyBicm93biBsaWdodGVuLTJcclxuICAgICAgICAgICAgJyMwMDk3QTcnLCAvLyBjeWFuIGRhcmtlbi0yXHJcbiAgICAgICAgICAgICcjRkZBQjkxJywgLy8gZGVlcC1vcmFuZ2UgbGlnaHRlbi0zXHJcbiAgICAgICAgICAgICcjMDA5Njg4JywgLy8gdGVhbFxyXG4gICAgICAgICAgICAnIzQzQTA0NycsIC8vIGdyZWVuIGRhcmtlbi0xXHJcbiAgICAgICAgICAgICcjMUEyMzdFJywgLy8gaW5kaWdvIGRhcmtlbi00XHJcbiAgICAgICAgICAgICcjNTU4QjJGJywgLy8gbGlnaHQtZ3JlZW4gZGFya2VuLTNcclxuICAgICAgICAgICAgJyMzMTFCOTInLCAvLyBkZWVwLXB1cnBsZSBkYXJrZW4tNFxyXG4gICAgICAgICAgICAnIzg4MEU0RicsIC8vIHBpbmsgZGFya2VuLTRcclxuICAgICAgICAgICAgJyMwMTU3OUInLCAvLyBsaWdodC1ibHVlIGRhcmtlbi00XHJcbiAgICAgICAgICAgICcjQUZCNDJCJywgLy8gbGltZSBkYXJrZW4tMlxyXG4gICAgICAgICAgICAnIzFFODhFNScsIC8vIGJsdWUgZGFya2VuLTFcclxuICAgICAgICAgICAgJyM4Mjc3MTcnLCAvLyBsaW1lIGRhcmtlbi00XHJcbiAgICAgICAgICAgICcjRkZGMTc2JywgLy8geWVsbG93IGxpZ2h0ZW4tMlxyXG4gICAgICAgICAgICAnI0JEQkRCRCcsIC8vIGdyZXkgbGlnaHRlbi0xXHJcbiAgICAgICAgICAgICcjRkZDMTA3JywgLy8gYW1iZXJcclxuICAgICAgICAgICAgJyNGRkE3MjYnLCAvLyBvcmFuZ2UgbGlnaHRlbi0xXHJcbiAgICAgICAgICAgICcjRkY1NzIyJywgLy8gZGVlcC1vcmFuZ2VcclxuICAgICAgICAgICAgJyM3OTU1NDgnLCAvLyBicm93blxyXG4gICAgICAgICAgICAnIzAwNEQ0MCcsIC8vIHRlYWwgZGFya2VuLTRcclxuICAgICAgICAgICAgJyM4MUM3ODQnLCAvLyBncmVlbiBsaWdodGVuLTJcclxuICAgICAgICAgICAgJyM5MEE0QUUnLCAvLyBibHVlLWdyZXkgbGlnaHRlbi0yXHJcbiAgICAgICAgICAgICcjNzU3NTc1JywgLy8gZ3JleSBkYXJrZW4tMVxyXG4gICAgICAgICAgICAnI0ZERDgzNScsIC8vIHllbGxvdyBkYXJrZW4tMVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHByaXZhdGUgbGVmdFggPSAwO1xyXG4gICAgICAgIHByaXZhdGUgcmlnaHRYID0gMTtcclxuICAgICAgICBwcml2YXRlIGRhdGFNb2R1bGVMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICBwcml2YXRlIGFsbGlhbmNlU2NvcmVzTG9hZGluZyA9IHRydWU7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2VsZWN0ZWRBbGxpYW5jZU5hbWUgPSAnJztcclxuICAgICAgICBwcml2YXRlIHNjb3JlRGF0YXNldHMgPSB7fSBhcyBSZWNvcmQ8RGJVbml2ZXJzZUhpc3RvcnlTY29yZVR5cGUsIFNjcm9sbGFibGVDaGFydERhdGFzZXRbXT47XHJcbiAgICAgICAgcHJpdmF0ZSBmaXJzdERheSA9IDA7XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkga2V5cyA9IEhpZ2hzY29yZVR5cGVOYW1lcztcclxuICAgICAgICBwcml2YXRlIGdldCB0YWJzKCk6IChUYWIgJiB7IGtleTogRGJVbml2ZXJzZUhpc3RvcnlTY29yZVR5cGUgfSlbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYnM6IChUYWIgJiB7IGtleTogRGJVbml2ZXJzZUhpc3RvcnlTY29yZVR5cGUgfSlbXSA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd0b3RhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5oaWdoc2NvcmVUYWJzLnRvdGFsLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdlY29ub215JyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LmhpZ2hzY29yZVRhYnMuZWNvbm9teSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncmVzZWFyY2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5yZXNlYXJjaCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnbWlsaXRhcnknLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5taWxpdGFyeSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnbWlsaXRhcnlCdWlsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5oaWdoc2NvcmVUYWJzLm1pbGl0YXJ5QnVpbHQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ21pbGl0YXJ5RGVzdHJveWVkJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LmhpZ2hzY29yZVRhYnMubWlsaXRhcnlEZXN0cm95ZWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ21pbGl0YXJ5TG9zdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5oaWdoc2NvcmVUYWJzLm1pbGl0YXJ5TG9zdCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnaG9ub3InLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5ob25vcixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnbnVtYmVyT2ZTaGlwcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5oaWdoc2NvcmVUYWJzLm51bWJlck9mU2hpcHMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgaWYgKFNlcnZlclNldHRpbmdzRGF0YU1vZHVsZS5zZXJ2ZXJTZXR0aW5ncy5saWZlZm9ybXMuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGFicy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnbGlmZWZvcm0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LmhpZ2hzY29yZVRhYnMubGlmZWZvcm0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2xpZmVmb3JtRWNvbm9teScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5saWZlZm9ybUVjb25vbXksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2xpZmVmb3JtVGVjaG5vbG9neScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5saWZlZm9ybVRlY2hub2xvZ3ksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2xpZmVmb3JtRGlzY292ZXJpZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LmhpZ2hzY29yZVRhYnMubGlmZWZvcm1EaXNjb3ZlcmllcyxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGFicztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHRhYmxlQ29sdW1ucygpOiBHcmlkVGFibGVDb2x1bW48J2FsbGlhbmNlJz5bXSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbe1xyXG4gICAgICAgICAgICAgICAga2V5OiAnYWxsaWFuY2UnLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5hbGxpYW5jZVNlbGVjdGlvbi5oZWFkZXIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJDbGFzczogJ2FsbGlhbmNlLXNlbGVjdGlvbi10YWJsZS1jZWxsJyxcclxuICAgICAgICAgICAgICAgIGNsYXNzOiAnYWxsaWFuY2Utc2VsZWN0aW9uLXRhYmxlLWNlbGwnLFxyXG4gICAgICAgICAgICB9XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHRhYmxlSXRlbXMoKTogeyBhbGxpYW5jZTogVW5pdmVyc2VIaXN0b3J5QWxsaWFuY2UgfCBudWxsIH1bXSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICB7IGFsbGlhbmNlOiBudWxsIH0sXHJcbiAgICAgICAgICAgICAgICAuLi50aGlzLnNlbGVjdGVkQWxsaWFuY2VzLm1hcChhbGxpYW5jZSA9PiAoeyBhbGxpYW5jZSB9KSksXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgYWxsaWFuY2VJZHMoKTogbnVtYmVyW10ge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuJHJvdXRlLnF1ZXJ5LmFsbGlhbmNlcyBhcyBzdHJpbmcgfCBudWxsID8/ICcnKVxyXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcsJylcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoaWQgPT4gaWQubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgICAgIC5tYXAoYWxsaWFuY2VJZCA9PiBwYXJzZUludFNhZmUoYWxsaWFuY2VJZCwgMTApKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYXN5bmMgbW91bnRlZCgpIHtcclxuICAgICAgICAgICAgYXdhaXQgVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZS5yZWFkeTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFRvRGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kYXRhTW9kdWxlTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGF3YWl0IFVuaXZlcnNlSGlzdG9yeURhdGFNb2R1bGUucmVhZHk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YU1vZHVsZUxvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZEFsbGlhbmNlU2NvcmVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFzeW5jIHJlZGlyZWN0VG9EZWZhdWx0KCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hbGxpYW5jZUlkcy5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0SWRzID0gVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncy51bml2ZXJzZUhpc3RvcnkuYWxsaWFuY2VzLmhpZ2hzY29yZTtcclxuICAgICAgICAgICAgaWYgKGRlZmF1bHRJZHMubGVuZ3RoICE9IDApIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQWxsaWFuY2VJZFJvdXRlKGRlZmF1bHRJZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBsb2FkQWxsaWFuY2VTY29yZXMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsaWFuY2VTY29yZXNMb2FkaW5nID0gdHJ1ZTtcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjb3JlRGF0YXNldHMgPSB7fSBhcyBSZWNvcmQ8RGJVbml2ZXJzZUhpc3RvcnlTY29yZVR5cGUsIFNjcm9sbGFibGVDaGFydERhdGFzZXRbXT47XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhc2V0c0J5QWxsaWFuY2U6IFJlY29yZDxudW1iZXIsIFJlY29yZDxEYlVuaXZlcnNlSGlzdG9yeVNjb3JlVHlwZSwgU2Nyb2xsYWJsZUNoYXJ0RGF0YXNldD4+ID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYWxsaWFuY2VJZHMuZm9yRWFjaChwID0+IGRhdGFzZXRzQnlBbGxpYW5jZVtwXSA9IHt9IGFzIFJlY29yZDxEYlVuaXZlcnNlSGlzdG9yeVNjb3JlVHlwZSwgU2Nyb2xsYWJsZUNoYXJ0RGF0YXNldD4pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5rZXlzLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NvcmVEYXRhc2V0c1trZXldID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxpYW5jZUlkcy5mb3JFYWNoKChwaWQsIGkpID0+IGRhdGFzZXRzQnlBbGxpYW5jZVtwaWRdW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiBgJHtwaWR9LSR7a2V5fWAsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb2xvcnNbaSAlIHRoaXMuY29sb3JzLmxlbmd0aF0sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuZ2V0QWxsaWFuY2VTdHJpbmcodGhpcy5hbGxpYW5jZXMuZmluZChwID0+IHAuaWQgPT0gcGlkKSA/PyBfdGhyb3coYG5vIGFsbGlhbmNlIHdpdGggaWQgJyR7cGlkfScgZm91bmRgKSksXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFjazogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVBvaW50czogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbWluRGF0ZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2NvcmVzID0gYXdhaXQgVW5pdmVyc2VIaXN0b3J5RGF0YU1vZHVsZS5nZXRBbGxpYW5jZVNjb3JlSGlzdG9yeSh0aGlzLmFsbGlhbmNlSWRzKTtcclxuICAgICAgICAgICAgY29uc3QgdHlwZXMgPSBIaWdoc2NvcmVUeXBlTmFtZXM7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RTY29yZXMgPSBjcmVhdGVSZWNvcmQodGhpcy5hbGxpYW5jZUlkcywgKCkgPT4gY3JlYXRlUmVjb3JkKHR5cGVzLCBudWxsKSkgYXMgUmVjb3JkPG51bWJlciwgUmVjb3JkPERiVW5pdmVyc2VIaXN0b3J5U2NvcmVUeXBlLCBudW1iZXIgfCBudWxsPj47XHJcblxyXG4gICAgICAgICAgICBzY29yZXMuZm9yRWFjaCgoc2NvcmUsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIG1pbkRhdGUgPSBNYXRoLm1pbihtaW5EYXRlLCBzY29yZS5kYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFNjb3Jlc1tzY29yZS5hbGxpYW5jZUlkXVtzY29yZS50eXBlXSA9PSBzY29yZS5zY29yZSkgeyAvL25vIGR1cGxpY2F0ZXMgaWYgb25seSBwb3NpdGlvbiBjaGFuZ2VkXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlcy5pbmNsdWRlcyhzY29yZS50eXBlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gaGFwcGVucyBpZiBiZXRhIGRhdGEgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGF0YXNldHNCeUFsbGlhbmNlW3Njb3JlLmFsbGlhbmNlSWRdW3Njb3JlLnR5cGVdLnZhbHVlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB4OiBzY29yZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHNjb3JlLnNjb3JlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2NvcmVzW3Njb3JlLmFsbGlhbmNlSWRdW3Njb3JlLnR5cGVdID0gc2NvcmUuc2NvcmU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5rZXlzLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsaWFuY2VJZHMuZm9yRWFjaChwaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NvcmVEYXRhc2V0c1trZXldLnB1c2goZGF0YXNldHNCeUFsbGlhbmNlW3BpZF1ba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZpcnN0RGF5ID0gc3RhcnRPZkRheShtaW5EYXRlKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFsbGlhbmNlU2NvcmVzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgbmV4dERheSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFkZERheXMoc3RhcnRPZkRheShEYXRlLm5vdygpKSwgMSkuZ2V0VGltZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZGF5cygpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF5czogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1heERheSA9IHRoaXMubmV4dERheTtcclxuICAgICAgICAgICAgZm9yIChsZXQgZGF5ID0gdGhpcy5maXJzdERheTsgZGF5IDw9IG1heERheTsgZGF5ID0gYWRkRGF5cyhkYXksIDEpLmdldFRpbWUoKSkge1xyXG4gICAgICAgICAgICAgICAgZGF5cy5wdXNoKGRheSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXlzO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBhbGxpYW5jZXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVbml2ZXJzZUhpc3RvcnlEYXRhTW9kdWxlLmFsbGlhbmNlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0QWxsaWFuY2VTdHJpbmcoYWxseTogVW5pdmVyc2VIaXN0b3J5QWxsaWFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGBbJHthbGx5LnRhZ31dICR7YWxseS5uYW1lfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBhbGxpYW5jZU5hbWVzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hbGxpYW5jZXNcclxuICAgICAgICAgICAgICAgIC5tYXAoYWxsaWFuY2UgPT4gdGhpcy5nZXRBbGxpYW5jZVN0cmluZyhhbGxpYW5jZSkpXHJcbiAgICAgICAgICAgICAgICAuc29ydCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgc2VsZWN0ZWRBbGxpYW5jZXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbGlhbmNlSWRzLm1hcChwaWQgPT4gdGhpcy5hbGxpYW5jZXMuZmluZChwID0+IHAuaWQgPT0gcGlkKSEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBvbkFsbGlhbmNlU2VsZWN0ZWQobmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbGlhbmNlID0gdGhpcy5hbGxpYW5jZXMuZmluZChhID0+IHRoaXMuZ2V0QWxsaWFuY2VTdHJpbmcoYSkudG9Mb3dlckNhc2UoKSA9PSBuYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICBpZiAoYWxsaWFuY2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLiRuZXh0VGljaygpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQWxsaWFuY2VOYW1lID0gJyc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhbGxpYW5jZUlkcyA9ICh0aGlzLiRyb3V0ZS5xdWVyeS5hbGxpYW5jZXMgYXMgc3RyaW5nIHwgbnVsbCk/LnNwbGl0KCcsJykgPz8gW107XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQWxsaWFuY2VJZFJvdXRlKFtcclxuICAgICAgICAgICAgICAgIC4uLmFsbGlhbmNlSWRzLmZpbHRlcihwaWQgPT4gcGlkICE9IGFsbGlhbmNlLmlkLnRvU3RyaW5nKCkpLFxyXG4gICAgICAgICAgICAgICAgYWxsaWFuY2UuaWQsXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRBbGxpYW5jZVNjb3JlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyByZW1vdmVBbGxpYW5jZShpZDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQWxsaWFuY2VJZFJvdXRlKHRoaXMuYWxsaWFuY2VJZHMuZmlsdGVyKHBpZCA9PiBwaWQgIT0gaWQpKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZEFsbGlhbmNlU2NvcmVzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVTZXR0aW5ncyhhbGx5SWRzOiBudW1iZXJbXSkge1xyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUuc2V0dGluZ3M7XHJcbiAgICAgICAgICAgIFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUudXBkYXRlU2V0dGluZ3Moe1xyXG4gICAgICAgICAgICAgICAgLi4uc2V0dGluZ3MsXHJcbiAgICAgICAgICAgICAgICB1bml2ZXJzZUhpc3Rvcnk6IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5zZXR0aW5ncy51bml2ZXJzZUhpc3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsaWFuY2VzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnNldHRpbmdzLnVuaXZlcnNlSGlzdG9yeS5hbGxpYW5jZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hzY29yZTogYWxseUlkcyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUFsbGlhbmNlSWRSb3V0ZShpZHM6IChzdHJpbmcgfCBudW1iZXIpW10pIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTZXR0aW5ncyhpZHMubWFwKGlkID0+IHR5cGVvZiBpZCA9PT0gJ3N0cmluZycgPyBwYXJzZUludFNhZmUoaWQsIDEwKSA6IGlkKSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7XHJcbiAgICAgICAgICAgICAgICBxdWVyeToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbGlhbmNlczogaWRzLmpvaW4oJywnKSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuPC9zY3JpcHQ+XHJcbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cclxuICAgIC5oaWdoc2NvcmVzIHtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMjAwcHggMWZyO1xyXG4gICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgIH1cclxuXHJcbiAgICAuYWxsaWFuY2Utc2VsZWN0aW9uIHtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XHJcblxyXG4gICAgICAgICYtdGFibGUge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IGZpdC1jb250ZW50O1xyXG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XHJcblxyXG4gICAgICAgICAgICAmOjp2LWRlZXAge1xyXG4gICAgICAgICAgICAgICAgLmFsbGlhbmNlLXNlbGVjdGlvbi10YWJsZS1jZWxsIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEodmFyKC0tY29sb3IpLCAwLjUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5saXN0IHtcclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcblxyXG4gICAgICAgICYtaXRlbSB7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogYXV0byAxZnI7XHJcbiAgICAgICAgICAgIGdhcDogMTJweDtcclxuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIC5tZGkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjUpO1xyXG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG48L3N0eWxlPiIsImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RocmVhZC1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9IaWdoc2NvcmUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vSGlnaHNjb3JlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vSGlnaHNjb3JlLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD03ZjkxOTdjZiZzY29wZWQ9dHJ1ZSZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9IaWdoc2NvcmUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9IaWdoc2NvcmUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL0hpZ2hzY29yZS52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD03ZjkxOTdjZiZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBcIjdmOTE5N2NmXCIsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwiaW1wb3J0IHRvSW50ZWdlciBmcm9tIFwiLi4vX2xpYi90b0ludGVnZXIvaW5kZXguanNcIjtcbmltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgYWRkRGF5c1xuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBZGQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZGF5cyB0byB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFkZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBkYXlzIHRvIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGJlIGNoYW5nZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIGRheXMgdG8gYmUgYWRkZWQuIFBvc2l0aXZlIGRlY2ltYWxzIHdpbGwgYmUgcm91bmRlZCB1c2luZyBgTWF0aC5mbG9vcmAsIGRlY2ltYWxzIGxlc3MgdGhhbiB6ZXJvIHdpbGwgYmUgcm91bmRlZCB1c2luZyBgTWF0aC5jZWlsYC5cbiAqIEByZXR1cm5zIHtEYXRlfSAtIHRoZSBuZXcgZGF0ZSB3aXRoIHRoZSBkYXlzIGFkZGVkXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IC0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQWRkIDEwIGRheXMgdG8gMSBTZXB0ZW1iZXIgMjAxNDpcbiAqIGNvbnN0IHJlc3VsdCA9IGFkZERheXMobmV3IERhdGUoMjAxNCwgOCwgMSksIDEwKVxuICogLy89PiBUaHUgU2VwIDExIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhZGREYXlzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBhbW91bnQgPSB0b0ludGVnZXIoZGlydHlBbW91bnQpO1xuXG4gIGlmIChpc05hTihhbW91bnQpKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cblxuICBpZiAoIWFtb3VudCkge1xuICAgIC8vIElmIDAgZGF5cywgbm8tb3AgdG8gYXZvaWQgY2hhbmdpbmcgdGltZXMgaW4gdGhlIGhvdXIgYmVmb3JlIGVuZCBvZiBEU1RcbiAgICByZXR1cm4gZGF0ZTtcbiAgfVxuXG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSArIGFtb3VudCk7XG4gIHJldHVybiBkYXRlO1xufSJdLCJuYW1lcyI6WyJIaWdoc2NvcmVUeXBlIiwiSGlnaHNjb3JlVHlwZU5hbWVzIiwibWVyZ2VEZWVwIiwiYSIsImIiLCJyZXN1bHQiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImJLZXkiLCJ0YXJnZXQiLCJjdXIiLCJBcnJheSIsImRlZmF1bHRTZXR0aW5ncyIsInVuaXZlcnNlSGlzdG9yeSIsImFsbGlhbmNlcyIsImhpZ2hzY29yZSIsInBsYXllcnMiLCJhc3luYyIsImxvYWRVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3MiLCJtZXRhIiwiZGIiLCJzZXR0aW5ncyIsImdldCIsIlVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGVDbGFzcyIsIl9yZWFkeSIsIl9yZXNvbHZlUmVhZHkiLCJ1cGRhdGVTZXR0aW5ncyIsImNvbnNvbGUiLCJkZWJ1ZyIsInRoaXMiLCJwdXQiLCJtc2ciLCJvZ2FtZU1ldGEiLCJzZW5kZXJVdWlkIiwidHlwZSIsIk1lc3NhZ2VUeXBlIiwiYnJvYWRjYXN0TWVzc2FnZSIsInJlYWR5IiwiUHJvbWlzZSIsInJlc29sdmUiLCJpbml0Q29tbXVuaWNhdGlvbiIsImxvYWREYXRhIiwiY2hyb21lIiwicnVudGltZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwibWVzc2FnZSIsIm9nYW1lTWV0YXNFcXVhbCIsIlVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUiLCJyZW5kZXIiLCJfdm0iLCJfaCIsIiRjcmVhdGVFbGVtZW50IiwiX2MiLCJfc2VsZiIsInN0YXRpY0NsYXNzIiwiYXR0cnMiLCJ0YWJsZUNvbHVtbnMiLCJ0YWJsZUl0ZW1zIiwic2NvcGVkU2xvdHMiLCJfdSIsImtleSIsImZuIiwicmVmIiwiYWxsaWFuY2UiLCJ2YWx1ZSIsImRpcmVjdGl2ZXMiLCJuYW1lIiwicmF3TmFtZSIsImV4cHJlc3Npb24iLCJzdGF0aWNTdHlsZSIsIiRpMThuIiwiJHQiLCJleHRlbnNpb24iLCJhbGxpYW5jZVNlbGVjdGlvbiIsInNlYXJjaCIsImRvbVByb3BzIiwib24iLCIkZXZlbnQiLCJvbkFsbGlhbmNlU2VsZWN0ZWQiLCJjb21wb3NpbmciLCJzZWxlY3RlZEFsbGlhbmNlTmFtZSIsIl9sIiwiaSIsIl92IiwiX3MiLCJyZW1vdmVBbGxpYW5jZSIsImlkIiwiZ2V0QWxsaWFuY2VTdHJpbmciLCJ0YWJzIiwic2xvdCIsImFsbGlhbmNlSWRzIiwibGVuZ3RoIiwic2NvcmVEYXRhc2V0cyIsImRheXMiLCJmaXJzdERheSIsIm5leHREYXkiLCJ4IiwiJGQiLCJfZSIsInN0YXRpY1JlbmRlckZucyIsImNvbXBvbmVudCIsImFkZERheXMiLCJkaXJ0eURhdGUiLCJkaXJ0eUFtb3VudCIsImFyZ3VtZW50cyIsImRhdGUiLCJhbW91bnQiLCJpc05hTiIsIkRhdGUiLCJOYU4iLCJzZXREYXRlIiwiZ2V0RGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=