"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[4985],{147:(o,e,t)=>{t.d(e,{g1:()=>s,g4:()=>n,_Z:()=>i});const r=.001;function s(o){const e=n(o);return e*r}function n(o){for(let e=0;;e++){const t=i(e+1);if(t>o)return e}}function i(o){return 900*o*(o+1)/2}},5546:(o,e,t)=>{function r(o,e){return 1+o+e}t.d(e,{q:()=>r})},2343:(o,e,t)=>{function r(o){return o.admiral&&o.commander&&o.engineer&&o.geologist&&o.technocrat}t.d(e,{J:()=>r})},4163:(o,e,t)=>{t.d(e,{F:()=>s});var r=t(602);function s(o,e,t,s){return o!=r.D0.collector?1:1*(1+s)+e*(1+t)}},9448:(o,e,t)=>{function r(o,e){switch(o){case 1:return e.pos1;case 2:return e.pos2;case 3:return e.pos3}return e.default}function s(o){const e=r(o.planetPosition,o.serverPositionBoost),t=15*o.serverEconomySpeed*(1+e);return Math.trunc(t)}t.d(e,{q:()=>s})},9452:(o,e,t)=>{t.d(e,{p:()=>n,E:()=>i});var r=t(1639),s=t(7331);function n(o,e){const t=Date.now(),n={[s._.metal]:[r.t.metalBooster_bronze_1day,r.t.metalBooster_bronze_7days],[s._.crystal]:[r.t.crystalBooster_bronze_1day,r.t.crystalBooster_bronze_7days],[s._.deuterium]:[r.t.deuteriumBooster_bronze_1day,r.t.deuteriumBooster_bronze_7days]}[o],l={[s._.metal]:[r.t.metalBooster_silver_7days,r.t.metalBooster_silver_30days,r.t.metalBooster_silver_90days],[s._.crystal]:[r.t.crystalBooster_silver_7days,r.t.crystalBooster_silver_30days,r.t.crystalBooster_silver_90days],[s._.deuterium]:[r.t.deuteriumBooster_silver_7days,r.t.deuteriumBooster_silver_30days,r.t.deuteriumBooster_silver_90days]}[o],a={[s._.metal]:[r.t.metalBooster_gold_7days,r.t.metalBooster_gold_30days,r.t.metalBooster_gold_90days],[s._.crystal]:[r.t.crystalBooster_gold_7days,r.t.crystalBooster_gold_30days,r.t.crystalBooster_gold_90days],[s._.deuterium]:[r.t.deuteriumBooster_gold_7days,r.t.deuteriumBooster_gold_30days,r.t.deuteriumBooster_gold_90days]}[o],c={[s._.metal]:[r.t.metalBooster_platinum_7days,r.t.metalBooster_platinum_30days,r.t.metalBooster_platinum_90days],[s._.crystal]:[r.t.crystalBooster_platinum_7days,r.t.crystalBooster_platinum_30days,r.t.crystalBooster_platinum_90days],[s._.deuterium]:[r.t.deuteriumBooster_platinum_7days,r.t.deuteriumBooster_platinum_30days,r.t.deuteriumBooster_platinum_90days]}[o];return n.some((o=>i(t,e[o])))?.1:l.some((o=>i(t,e[o])))?.2:a.some((o=>i(t,e[o])))?.3:c.some((o=>i(t,e[o])))?.4:0}function i(o,e){return null!=e&&("permanent"==e||e>o)}},7270:(o,e,t)=>{function r(o,e,t,r,s,n,i){const l=s&&r?1+n*(1+i):1,a=8,c=Math.floor((o+e+t)*a*l);return c}t.d(e,{Y:()=>r})},5148:(o,e,t)=>{function r(o){switch(o){case 8:return.35;case 7:case 9:return.23;case 6:case 10:return.17}return 0}function s(o){const e=r(o.planetPosition),t=30*o.serverEconomySpeed*(1+e);return Math.trunc(t)}t.d(e,{s:()=>s})},7053:(o,e,t)=>{t.d(e,{_:()=>h});var r=t(7545),s=t(9867),n=t(602),i=t(5546),l=t(7331);const a=.1,c=.02,u={[l._.metal]:.01,[l._.crystal]:.0066,[l._.deuterium]:.0033},d=.05;var m=t(4163),f=t(7270);function g(o){const e=(0,f.Y)(o.levelMetalMine,o.levelCrystalMine,o.levelDeuteriumSynthesizer,o.playerClass==n.D0.collector,o.hasGeologist,o.serverSettings.geologistActiveCrawlerFactorBonus,o.lifeformTechnologies.collectorClassBonus),t=Math.min(e,o.availableCrawlers),r=(0,m.F)(o.playerClass,o.serverSettings.collectorCrawlerProductionFactorBonus,o.lifeformTechnologies.collectorClassBonus,o.lifeformTechnologies.crawlerProductionBonus),s=o.serverSettings.crawlerProductionFactorPerUnit*t*r*o.crawlerProductionSetting/100;return Math.min(s,o.serverSettings.crawlerMaxProductionFactor)}var y=t(9681),p=t(4846);class h{#o;#e;plasmaTechnologyLevel;playerClass;allianceClass;geologist;commandStaff;planets;serverSettings;constructor(o,e,t,s,n,i,l,a){this.#e=o,this.plasmaTechnologyLevel=e,this.playerClass=t,this.allianceClass=s,this.geologist=n,this.commandStaff=i,this.serverSettings=l,this.planets=a,this.#o=Object.keys(a).map((o=>(0,r.Y)(o)))}getLifeformBonusFactors(){let o=0,e=0,t=0;return this.#o.forEach((r=>{const s=this.planets[r];o+=s.collectorClassBonusFactor*(0,i.q)(s.lifeformTechnologyBoost[y.Nw.rocktalCollectorEnhancement],s.lifeformExperienceBoost),p.rE.forEach((o=>{e+=s.lifeformTechnologyBonusProductionFactor[o.type]*(0,i.q)(s.lifeformTechnologyBoost[o.type],s.lifeformExperienceBoost)})),t+=s.lifeformTechnologyCrawlerProductionBonusFactor*(0,i.q)(s.lifeformTechnologyBoost[y.Nw.ionCrystalModules],s.lifeformExperienceBoost)})),{collectorClassBonusFactor:o,lifeformTechnologyProductionBonusFactor:e,lifeformTechnologyCrawlerProductionBonusFactor:t}}addPlanet(o,e){this.#o.push(o),this.planets[o]=e}getProductionBreakdown(o){return this.#t(o,this.getLifeformBonusFactors())}#t(o,e){const{collectorClassBonusFactor:t,lifeformTechnologyProductionBonusFactor:r,lifeformTechnologyCrawlerProductionBonusFactor:i}=e,l=this.planets[o].mineProduction,m=(this.playerClass==n.D0.collector?1:0)*this.serverSettings.collectorProductionFactor*(1+t),f=(this.allianceClass==s.Ck.trader?1:0)*d,y=this.geologist?a:0,p=this.commandStaff?c:0,h=this.planets[o].crawlers,B=g({hasGeologist:this.geologist,availableCrawlers:h.available,levelMetalMine:h.totalMineLevel,levelCrystalMine:0,levelDeuteriumSynthesizer:0,crawlerProductionSetting:h.percentage,lifeformTechnologies:{collectorClassBonus:t,crawlerProductionBonus:i},playerClass:this.playerClass,serverSettings:{collectorCrawlerProductionFactorBonus:this.serverSettings.collectorCrawlerProductionFactorBonus,crawlerMaxProductionFactor:this.serverSettings.crawlerMaxProductionFactor,crawlerProductionFactorPerUnit:this.serverSettings.crawlerProductionFactorPerUnit,geologistActiveCrawlerFactorBonus:this.serverSettings.geologistActiveCrawlerFactorBonus}}),P=this.planets[o].baseProduction,_=l*this.plasmaTechnologyLevel*u[this.#e],v=l*B,F=l*m,C=l*f,w=l*y,T=l*p,S=l*this.planets[o].itemBonusProductionFactor,b=l*this.planets[o].lifeformBuildingBonusProductionFactor,M=l*r,E=P+l+_+v+F+C+w+T+S+b+M;return{baseProduction:P,mineProduction:l,plasmaTechnologyProduction:_,crawlerProduction:v,playerClassProduction:F,allianceClassProduction:C,geologistProduction:w,commandStaffProduction:T,itemProduction:S,lifeformBuildingsProduction:b,lifeformTechnologiesProduction:M,total:E}}getTotal(o=!1){const e=this.getLifeformBonusFactors();return this.#o.reduce(((t,r)=>{const s=o?this.planets[r].fusionReactorConsumption:0;return t+this.#t(r,e).total-s}),0)}getAverage(o=!1){return this.getTotal(o)/this.#o.length}clone(){const o={};return this.#o.forEach((e=>{o[e]={...this.planets[e],lifeformTechnologyBonusProductionFactor:{...this.planets[e].lifeformTechnologyBonusProductionFactor},lifeformTechnologyBoost:{...this.planets[e].lifeformTechnologyBoost},crawlers:{...this.planets[e].crawlers}}})),new h(this.#e,this.plasmaTechnologyLevel,this.playerClass,this.allianceClass,this.geologist,this.commandStaff,this.serverSettings,o)}}},4985:(o,e,t)=>{t.d(e,{c:()=>C});var r=t(6864),s=t(6682),n=t(3987),i=t(7069),l=t(6532),a=t(147),c=t(3418),u=t(4846),d=t(2343),m=t(3738),f=t(9448),g=t(9452),y=t(5148),p=t(7053),h=t(7331),B=t(2057),P=t(9751),_=t(7076),v=t(1786);function F(o){return u.s5.filter((e=>o.activeLifeformTechnologies.includes(e.type))).reduce(((e,t)=>e+t.getCrawlerProductionBonus(o.lifeformTechnologies[t.type])),0)}function C(o,e){const t=Object.values(o.planets).filter((o=>!o.isMoon)),u=o.research[m.s.plasmaTechnology],C=_.s.serverSettings,w={collectorProductionFactor:C.playerClasses.collector.productionFactorBonus,geologistActiveCrawlerFactorBonus:C.playerClasses.collector.crawlers.geologistActiveCrawlerFactorBonus,collectorCrawlerProductionFactorBonus:C.playerClasses.collector.crawlers.productionFactorBonus,crawlerProductionFactorPerUnit:C.playerClasses.crawlers.productionBoostFactorPerUnit,crawlerMaxProductionFactor:C.playerClasses.crawlers.maxProductionFactor},T={metal:{},crystal:{},deuterium:{}},S=(0,P.a)(c.gN,(o=>o==c.e5.none?0:(0,a.g1)(e[o])));t.forEach((o=>{const e=o.buildings[r.A.metalMine],t=o.buildings[r.A.crystalMine],a=o.buildings[r.A.deuteriumSynthesizer],c=e+t+a,u=o.buildings[r.A.fusionReactor],d={available:o.ships[B.g.crawler],percentage:o.productionSettings[B.g.crawler],totalMineLevel:c},m={crawlers:d,lifeformExperienceBoost:S[o.activeLifeform],collectorClassBonusFactor:(0,v.I5)(o),lifeformBuildingBonusProductionFactor:(0,v.qH)(o),lifeformTechnologyBonusProductionFactor:(0,v.g5)(o),lifeformTechnologyCrawlerProductionBonusFactor:F(o),lifeformTechnologyBoost:(0,v.io)(o)},p={planet:{position:o.coordinates.position,temperature:o.maxTemperature},serverSettings:{economySpeed:C.speed.economy,crystalBoost:{default:C.resourceProduction.productionFactorBonus.crystal.default,pos1:C.resourceProduction.productionFactorBonus.crystal.pos1,pos2:C.resourceProduction.productionFactorBonus.crystal.pos2,pos3:C.resourceProduction.productionFactorBonus.crystal.pos3}},productionSettings:{metalMine:o.productionSettings[r.A.metalMine],crystalMine:o.productionSettings[r.A.crystalMine],deuteriumSynthesizer:o.productionSettings[r.A.deuteriumSynthesizer],fusionReactor:o.productionSettings[r.A.fusionReactor]}};T.metal[o.id]={baseProduction:(0,y.s)({planetPosition:o.coordinates.position,serverEconomySpeed:C.speed.economy}),mineProduction:l.H.getProduction(e,p),itemBonusProductionFactor:(0,g.p)(h._.metal,o.activeItems),...m,lifeformBuildingBonusProductionFactor:m.lifeformBuildingBonusProductionFactor.metal,lifeformTechnologyBonusProductionFactor:m.lifeformTechnologyBonusProductionFactor.metal,fusionReactorConsumption:0},T.crystal[o.id]={baseProduction:(0,f.q)({planetPosition:o.coordinates.position,serverEconomySpeed:C.speed.economy,serverPositionBoost:C.resourceProduction.productionFactorBonus.crystal}),mineProduction:s.g.getProduction(t,p),itemBonusProductionFactor:(0,g.p)(h._.crystal,o.activeItems),...m,lifeformBuildingBonusProductionFactor:m.lifeformBuildingBonusProductionFactor.crystal,lifeformTechnologyBonusProductionFactor:m.lifeformTechnologyBonusProductionFactor.crystal,fusionReactorConsumption:0},T.deuterium[o.id]={baseProduction:0,mineProduction:n.w.getProduction(a,p),itemBonusProductionFactor:(0,g.p)(h._.deuterium,o.activeItems),...m,lifeformBuildingBonusProductionFactor:m.lifeformBuildingBonusProductionFactor.deuterium,lifeformTechnologyBonusProductionFactor:m.lifeformTechnologyBonusProductionFactor.deuterium,fusionReactorConsumption:i.s.getConsumption(u,p).deuterium}}));const b={metal:new p._(h._.metal,u,o.playerClass,o.allianceClass,o.officers.geologist,(0,d.J)(o.officers),w,T.metal),crystal:new p._(h._.crystal,u,o.playerClass,o.allianceClass,o.officers.geologist,(0,d.J)(o.officers),w,T.crystal),deuterium:new p._(h._.deuterium,u,o.playerClass,o.allianceClass,o.officers.geologist,(0,d.J)(o.officers),w,T.deuterium),getTotal(o=!1){return{metal:this.metal.getTotal(o),crystal:this.crystal.getTotal(o),deuterium:this.deuterium.getTotal(o),energy:0}}};return b}},1786:(o,e,t)=>{t.d(e,{I5:()=>c,io:()=>u,qH:()=>d,g5:()=>m});var r=t(602),s=t(5128),n=t(6119),i=t(9681),l=t(4846),a=t(9751);function c(o){return l._i.filter((e=>o.activeLifeformTechnologies.includes(e.type))).reduce(((e,t)=>e+t.getClassBonus(r.D0.collector,o.lifeformTechnologies[t.type])),0)}function u(o){return(0,a.a)(i.Vs,(e=>n.cQ[o.activeLifeform].map((t=>t.getLifeformTechnologyBonus(e,o.lifeformBuildings[t.type]))).reduce(((o,e)=>o+e),0)))}function d(o){return n.wJ[o.activeLifeform].reduce(((e,t)=>(0,s.aV)(e,t.getProductionBonus(o.lifeformBuildings[t.type]))),{metal:0,crystal:0,deuterium:0,energy:0})}function m(o){return l.rE.filter((e=>o.activeLifeformTechnologies.includes(e.type))).reduce(((e,t)=>{const r=t.getProductionBonus(o.lifeformTechnologies[t.type]);return e.metal[t.type]+=r.metal,e.crystal[t.type]+=r.crystal,e.deuterium[t.type]+=r.deuterium,e.energy[t.type]+=r.energy,e}),{metal:(0,a.a)(i.Vs,0),crystal:(0,a.a)(i.Vs,0),deuterium:(0,a.a)(i.Vs,0),energy:(0,a.a)(i.Vs,0)})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxXQUFXLE9BQWEsS0FBeUIsR0FDakR1QixRQUFRLE9BQWEsS0FBeUIiLCJzb3VyY2VzIjpbIm9nYW1lLXRyYWNrZXI6Ly8vLi9zcmMvc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvZXhwZXJpZW5jZS50cyIsIm9nYW1lLXRyYWNrZXI6Ly8vLi9zcmMvc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvdXRpbHMudHMiLCJvZ2FtZS10cmFja2VyOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvb2dhbWUvcHJlbWl1bS9oYXNDb21tYW5kU3RhZmYudHMiLCJvZ2FtZS10cmFja2VyOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvb2dhbWUvcmVzb3VyY2UtcHJvZHVjdGlvbi9nZXRDcmF3bGVyUHJvZHVjdGlvbkZhY3Rvci50cyIsIm9nYW1lLXRyYWNrZXI6Ly8vLi9zcmMvc2hhcmVkL21vZGVscy9vZ2FtZS9yZXNvdXJjZS1wcm9kdWN0aW9uL2dldENyeXN0YWxQcm9kdWN0aW9uLnRzIiwib2dhbWUtdHJhY2tlcjovLy8uL3NyYy9zaGFyZWQvbW9kZWxzL29nYW1lL3Jlc291cmNlLXByb2R1Y3Rpb24vZ2V0SXRlbUJvbnVzLnRzIiwib2dhbWUtdHJhY2tlcjovLy8uL3NyYy9zaGFyZWQvbW9kZWxzL29nYW1lL3Jlc291cmNlLXByb2R1Y3Rpb24vZ2V0TWF4QWN0aXZlQ3Jhd2xlcnMudHMiLCJvZ2FtZS10cmFja2VyOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvb2dhbWUvcmVzb3VyY2UtcHJvZHVjdGlvbi9nZXRNZXRhbFByb2R1Y3Rpb24udHMiLCJvZ2FtZS10cmFja2VyOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvb2dhbWUvcmVzb3VyY2UtcHJvZHVjdGlvbi9jb25zdGFudHMudHMiLCJvZ2FtZS10cmFja2VyOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvb2dhbWUvcmVzb3VyY2UtcHJvZHVjdGlvbi9nZXRDcmF3bGVyQm9vc3QudHMiLCJvZ2FtZS10cmFja2VyOi8vLy4vc3JjL3NoYXJlZC9tb2RlbHMvb2dhbWUvcmVzb3VyY2UtcHJvZHVjdGlvbi90eXBlcy50cyIsIm9nYW1lLXRyYWNrZXI6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvbW9kZWxzL2VtcGlyZS9wcm9kdWN0aW9uL2luZGV4LnRzIiwib2dhbWUtdHJhY2tlcjovLy8uL3NyYy92aWV3cy9zdGF0cy9tb2RlbHMvbGlmZWZvcm1zL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGJvbnVzUGVyTGV2ZWwgPSAwLjAwXzE7IC8vMC4xJVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExpZmVmb3JtTGV2ZWxUZWNobm9sb2d5Qm9udXMoZXhwZXJpZW5jZTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGxldmVsID0gZ2V0TGlmZWZvcm1MZXZlbChleHBlcmllbmNlKTtcclxuICAgIHJldHVybiBsZXZlbCAqIGJvbnVzUGVyTGV2ZWw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMaWZlZm9ybUxldmVsKGV4cGVyaWVuY2U6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBmb3IobGV0IGxldmVsID0gMDsgOyBsZXZlbCsrKSB7XHJcbiAgICAgICAgY29uc3QgZXhwRm9yTGV2ZWwgPSBnZXRMaWZlZm9ybUV4cGVyaWVuY2VOZWVkZWRGb3JMZXZlbChsZXZlbCArIDEpO1xyXG4gICAgICAgIGlmKGV4cEZvckxldmVsID4gZXhwZXJpZW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbGV2ZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhwZXJpZW5jZU5lZWRlZEZvckxldmVsVXAobGV2ZWw6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gOTAwICogbGV2ZWw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMaWZlZm9ybUV4cGVyaWVuY2VOZWVkZWRGb3JMZXZlbChsZXZlbDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiA5MDAgKiBsZXZlbCAqIChsZXZlbCArIDEpIC8gMjsgLy8gZ2F1c3NpYW4gc3VtbWF0aW9uIGZvcm11bGFcclxufSIsImV4cG9ydCBmdW5jdGlvbiBnZXRUZWNobm9sb2d5Qm9udXNGYWN0b3IoYnVpbGRpbmdCb29zdDogbnVtYmVyLCBsZXZlbEJvb3N0OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuICgxICsgYnVpbGRpbmdCb29zdCArIGxldmVsQm9vc3QpOyAvLyB0aGlzIGlzIHRoZSBjb3JyZWN0IGZvcm11bGEgKGNoZWNrZWQgMjAyMy0wMi0xMSlcclxufSIsImltcG9ydCB7IFBsYXllck9mZmljZXJzIH0gZnJvbSBcIi4uLy4uL2VtcGlyZS9QbGF5ZXJPZmZpY2Vyc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0NvbW1hbmRTdGFmZihvZmZpY2VyczogUGxheWVyT2ZmaWNlcnMpIHtcclxuICAgIHJldHVybiBvZmZpY2Vycy5hZG1pcmFsXHJcbiAgICAgICAgJiYgb2ZmaWNlcnMuY29tbWFuZGVyXHJcbiAgICAgICAgJiYgb2ZmaWNlcnMuZW5naW5lZXJcclxuICAgICAgICAmJiBvZmZpY2Vycy5nZW9sb2dpc3RcclxuICAgICAgICAmJiBvZmZpY2Vycy50ZWNobm9jcmF0O1xyXG59IiwiaW1wb3J0IHsgUGxheWVyQ2xhc3MgfSBmcm9tIFwiLi4vY2xhc3Nlcy9QbGF5ZXJDbGFzc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENyYXdsZXJQcm9kdWN0aW9uRmFjdG9yKFxyXG4gICAgcGxheWVyQ2xhc3M6IFBsYXllckNsYXNzLFxyXG4gICAgY29sbGVjdG9yQ3Jhd2xlclByb2R1Y3Rpb25GYWN0b3JCb251czogbnVtYmVyLFxyXG4gICAgY29sbGVjdG9yQ2xhc3NCb251czogbnVtYmVyLFxyXG4gICAgY3Jhd2xlclByb2R1Y3Rpb25Cb251czogbnVtYmVyLFxyXG4pOiBudW1iZXIge1xyXG4gICAgaWYgKHBsYXllckNsYXNzICE9IFBsYXllckNsYXNzLmNvbGxlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAxICogKDEgKyBjcmF3bGVyUHJvZHVjdGlvbkJvbnVzKVxyXG4gICAgICAgICsgKGNvbGxlY3RvckNyYXdsZXJQcm9kdWN0aW9uRmFjdG9yQm9udXMgKiAoMSArIGNvbGxlY3RvckNsYXNzQm9udXMpKTtcclxufSIsImZ1bmN0aW9uIGdldENyeXN0YWxQcm9kdWN0aW9uQm9vc3QocG9zaXRpb246IG51bWJlciwgc2VydmVyUG9zaXRpb25Cb29zdDoge1xyXG4gICAgZGVmYXVsdDogbnVtYmVyO1xyXG4gICAgcG9zMTogbnVtYmVyO1xyXG4gICAgcG9zMjogbnVtYmVyO1xyXG4gICAgcG9zMzogbnVtYmVyO1xyXG59KSB7XHJcbiAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICByZXR1cm4gc2VydmVyUG9zaXRpb25Cb29zdC5wb3MxO1xyXG5cclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2ZXJQb3NpdGlvbkJvb3N0LnBvczI7XHJcblxyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZlclBvc2l0aW9uQm9vc3QucG9zMztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2VydmVyUG9zaXRpb25Cb29zdC5kZWZhdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3J5c3RhbEJhc2VQcm9kdWN0aW9uKGRlcGVuZGVuY2llczoge1xyXG4gICAgcGxhbmV0UG9zaXRpb246IG51bWJlcjtcclxuICAgIHNlcnZlckVjb25vbXlTcGVlZDogbnVtYmVyO1xyXG4gICAgc2VydmVyUG9zaXRpb25Cb29zdDoge1xyXG4gICAgICAgIGRlZmF1bHQ6IG51bWJlcjtcclxuICAgICAgICBwb3MxOiBudW1iZXI7XHJcbiAgICAgICAgcG9zMjogbnVtYmVyO1xyXG4gICAgICAgIHBvczM6IG51bWJlcjtcclxuICAgIH07XHJcbn0pIHtcclxuICAgIGNvbnN0IGJvb3N0ID0gZ2V0Q3J5c3RhbFByb2R1Y3Rpb25Cb29zdChkZXBlbmRlbmNpZXMucGxhbmV0UG9zaXRpb24sIGRlcGVuZGVuY2llcy5zZXJ2ZXJQb3NpdGlvbkJvb3N0KTtcclxuICAgIGNvbnN0IGJhc2VQcm9kdWN0aW9uID0gMTUgKiBkZXBlbmRlbmNpZXMuc2VydmVyRWNvbm9teVNwZWVkICogKDEgKyBib29zdCk7XHJcblxyXG4gICAgcmV0dXJuIE1hdGgudHJ1bmMoYmFzZVByb2R1Y3Rpb24pO1xyXG59IiwiaW1wb3J0IHsgUGxhbmV0QWN0aXZlSXRlbXMgfSBmcm9tIFwiLi4vLi4vZW1waXJlL1BsYW5ldEFjdGl2ZUl0ZW1zXCI7XHJcbmltcG9ydCB7IEl0ZW1IYXNoIH0gZnJvbSBcIi4uL2l0ZW1zL0l0ZW1IYXNoXCI7XHJcbmltcG9ydCB7IFJlc291cmNlVHlwZSB9IGZyb20gXCIuLi9yZXNvdXJjZXMvUmVzb3VyY2VUeXBlXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXRlbUJvbnVzKHJlc291cmNlOiBSZXNvdXJjZVR5cGUsIGFjdGl2ZUl0ZW1zOiBQbGFuZXRBY3RpdmVJdGVtcyk6IG51bWJlciB7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIGNvbnN0IGl0ZW1zMTAgPSB7XHJcbiAgICAgICAgW1Jlc291cmNlVHlwZS5tZXRhbF06IFtJdGVtSGFzaC5tZXRhbEJvb3N0ZXJfYnJvbnplXzFkYXksIEl0ZW1IYXNoLm1ldGFsQm9vc3Rlcl9icm9uemVfN2RheXNdLFxyXG4gICAgICAgIFtSZXNvdXJjZVR5cGUuY3J5c3RhbF06IFtJdGVtSGFzaC5jcnlzdGFsQm9vc3Rlcl9icm9uemVfMWRheSwgSXRlbUhhc2guY3J5c3RhbEJvb3N0ZXJfYnJvbnplXzdkYXlzXSxcclxuICAgICAgICBbUmVzb3VyY2VUeXBlLmRldXRlcml1bV06IFtJdGVtSGFzaC5kZXV0ZXJpdW1Cb29zdGVyX2Jyb256ZV8xZGF5LCBJdGVtSGFzaC5kZXV0ZXJpdW1Cb29zdGVyX2Jyb256ZV83ZGF5c10sXHJcbiAgICB9W3Jlc291cmNlXTtcclxuICAgIGNvbnN0IGl0ZW1zMjAgPSB7XHJcbiAgICAgICAgW1Jlc291cmNlVHlwZS5tZXRhbF06IFtJdGVtSGFzaC5tZXRhbEJvb3N0ZXJfc2lsdmVyXzdkYXlzLCBJdGVtSGFzaC5tZXRhbEJvb3N0ZXJfc2lsdmVyXzMwZGF5cywgSXRlbUhhc2gubWV0YWxCb29zdGVyX3NpbHZlcl85MGRheXNdLFxyXG4gICAgICAgIFtSZXNvdXJjZVR5cGUuY3J5c3RhbF06IFtJdGVtSGFzaC5jcnlzdGFsQm9vc3Rlcl9zaWx2ZXJfN2RheXMsIEl0ZW1IYXNoLmNyeXN0YWxCb29zdGVyX3NpbHZlcl8zMGRheXMsIEl0ZW1IYXNoLmNyeXN0YWxCb29zdGVyX3NpbHZlcl85MGRheXNdLFxyXG4gICAgICAgIFtSZXNvdXJjZVR5cGUuZGV1dGVyaXVtXTogW0l0ZW1IYXNoLmRldXRlcml1bUJvb3N0ZXJfc2lsdmVyXzdkYXlzLCBJdGVtSGFzaC5kZXV0ZXJpdW1Cb29zdGVyX3NpbHZlcl8zMGRheXMsIEl0ZW1IYXNoLmRldXRlcml1bUJvb3N0ZXJfc2lsdmVyXzkwZGF5c10sXHJcbiAgICB9W3Jlc291cmNlXTtcclxuICAgIGNvbnN0IGl0ZW1zMzAgPSB7XHJcbiAgICAgICAgW1Jlc291cmNlVHlwZS5tZXRhbF06IFtJdGVtSGFzaC5tZXRhbEJvb3N0ZXJfZ29sZF83ZGF5cywgSXRlbUhhc2gubWV0YWxCb29zdGVyX2dvbGRfMzBkYXlzLCBJdGVtSGFzaC5tZXRhbEJvb3N0ZXJfZ29sZF85MGRheXNdLFxyXG4gICAgICAgIFtSZXNvdXJjZVR5cGUuY3J5c3RhbF06IFtJdGVtSGFzaC5jcnlzdGFsQm9vc3Rlcl9nb2xkXzdkYXlzLCBJdGVtSGFzaC5jcnlzdGFsQm9vc3Rlcl9nb2xkXzMwZGF5cywgSXRlbUhhc2guY3J5c3RhbEJvb3N0ZXJfZ29sZF85MGRheXNdLFxyXG4gICAgICAgIFtSZXNvdXJjZVR5cGUuZGV1dGVyaXVtXTogW0l0ZW1IYXNoLmRldXRlcml1bUJvb3N0ZXJfZ29sZF83ZGF5cywgSXRlbUhhc2guZGV1dGVyaXVtQm9vc3Rlcl9nb2xkXzMwZGF5cywgSXRlbUhhc2guZGV1dGVyaXVtQm9vc3Rlcl9nb2xkXzkwZGF5c10sXHJcbiAgICB9W3Jlc291cmNlXTtcclxuICAgIGNvbnN0IGl0ZW1zNDAgPSB7XHJcbiAgICAgICAgW1Jlc291cmNlVHlwZS5tZXRhbF06IFtJdGVtSGFzaC5tZXRhbEJvb3N0ZXJfcGxhdGludW1fN2RheXMsIEl0ZW1IYXNoLm1ldGFsQm9vc3Rlcl9wbGF0aW51bV8zMGRheXMsIEl0ZW1IYXNoLm1ldGFsQm9vc3Rlcl9wbGF0aW51bV85MGRheXNdLFxyXG4gICAgICAgIFtSZXNvdXJjZVR5cGUuY3J5c3RhbF06IFtJdGVtSGFzaC5jcnlzdGFsQm9vc3Rlcl9wbGF0aW51bV83ZGF5cywgSXRlbUhhc2guY3J5c3RhbEJvb3N0ZXJfcGxhdGludW1fMzBkYXlzLCBJdGVtSGFzaC5jcnlzdGFsQm9vc3Rlcl9wbGF0aW51bV85MGRheXNdLFxyXG4gICAgICAgIFtSZXNvdXJjZVR5cGUuZGV1dGVyaXVtXTogW0l0ZW1IYXNoLmRldXRlcml1bUJvb3N0ZXJfcGxhdGludW1fN2RheXMsIEl0ZW1IYXNoLmRldXRlcml1bUJvb3N0ZXJfcGxhdGludW1fMzBkYXlzLCBJdGVtSGFzaC5kZXV0ZXJpdW1Cb29zdGVyX3BsYXRpbnVtXzkwZGF5c10sXHJcbiAgICB9W3Jlc291cmNlXTtcclxuXHJcbiAgICBpZiAoaXRlbXMxMC5zb21lKGhhc2ggPT4gaXNJdGVtQWN0aXZlKG5vdywgYWN0aXZlSXRlbXNbaGFzaF0pKSkge1xyXG4gICAgICAgIHJldHVybiAwLjE7XHJcbiAgICB9XHJcbiAgICBpZiAoaXRlbXMyMC5zb21lKGhhc2ggPT4gaXNJdGVtQWN0aXZlKG5vdywgYWN0aXZlSXRlbXNbaGFzaF0pKSkge1xyXG4gICAgICAgIHJldHVybiAwLjI7XHJcbiAgICB9XHJcbiAgICBpZiAoaXRlbXMzMC5zb21lKGhhc2ggPT4gaXNJdGVtQWN0aXZlKG5vdywgYWN0aXZlSXRlbXNbaGFzaF0pKSkge1xyXG4gICAgICAgIHJldHVybiAwLjM7XHJcbiAgICB9XHJcbiAgICBpZiAoaXRlbXM0MC5zb21lKGhhc2ggPT4gaXNJdGVtQWN0aXZlKG5vdywgYWN0aXZlSXRlbXNbaGFzaF0pKSkge1xyXG4gICAgICAgIHJldHVybiAwLjQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0l0ZW1BY3RpdmUobm93OiBudW1iZXIsIGl0ZW1FeHBpcmF0aW9uPzogbnVtYmVyIHwgJ3Blcm1hbmVudCcpIHtcclxuICAgIGlmKGl0ZW1FeHBpcmF0aW9uID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZihpdGVtRXhwaXJhdGlvbiA9PSAncGVybWFuZW50Jykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpdGVtRXhwaXJhdGlvbiA+IG5vdztcclxufSIsImV4cG9ydCBmdW5jdGlvbiBnZXRNYXhBY3RpdmVDcmF3bGVycyhcclxuICAgIG1ldGFsTWluZUxldmVsOiBudW1iZXIsXHJcbiAgICBjcnlzdGFsTWluZUxldmVsOiBudW1iZXIsXHJcbiAgICBkZXV0ZXJpdW1TeW50aGVzaXplckxldmVsOiBudW1iZXIsXHJcbiAgICBpc0NvbGxlY3RvcjogYm9vbGVhbixcclxuICAgIGhhc0dlb2xvZ2lzdDogYm9vbGVhbixcclxuICAgIHNlcnZlclNldHRpbmdzX2dlb2xvZ2lzdEFjdGl2ZUNyYXdsZXJGYWN0b3JCb251czogbnVtYmVyLFxyXG4gICAgY29sbGVjdG9yQ2xhc3NCb251czogbnVtYmVyXHJcbikge1xyXG4gICAgY29uc3QgbWF4Q3Jhd2xlckZhY3RvciA9IGhhc0dlb2xvZ2lzdCAmJiBpc0NvbGxlY3RvclxyXG4gICAgICAgID8gKDEgKyBzZXJ2ZXJTZXR0aW5nc19nZW9sb2dpc3RBY3RpdmVDcmF3bGVyRmFjdG9yQm9udXMgKiAoMSArIGNvbGxlY3RvckNsYXNzQm9udXMpKVxyXG4gICAgICAgIDogMTtcclxuXHJcbiAgICBjb25zdCBjcmF3bGVyc1BlckxldmVsID0gODtcclxuICAgIGNvbnN0IG1heENyYXdsZXJzID0gTWF0aC5mbG9vcihcclxuICAgICAgICAobWV0YWxNaW5lTGV2ZWwgKyBjcnlzdGFsTWluZUxldmVsICsgZGV1dGVyaXVtU3ludGhlc2l6ZXJMZXZlbClcclxuICAgICAgICAqIGNyYXdsZXJzUGVyTGV2ZWxcclxuICAgICAgICAqIG1heENyYXdsZXJGYWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIG1heENyYXdsZXJzO1xyXG59IiwiaW1wb3J0IHsgX3Rocm93IH0gZnJvbSBcIkAvc2hhcmVkL3V0aWxzL190aHJvd1wiO1xyXG5cclxuZnVuY3Rpb24gZ2V0TWV0YWxQcm9kdWN0aW9uQm9vc3QocG9zaXRpb246IG51bWJlcikge1xyXG4gICAgc3dpdGNoIChwb3NpdGlvbikge1xyXG4gICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgcmV0dXJuIDAuMzU7XHJcblxyXG4gICAgICAgIGNhc2UgNzpcclxuICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgIHJldHVybiAwLjIzO1xyXG5cclxuICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgcmV0dXJuIDAuMTc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRNZXRhbEJhc2VQcm9kdWN0aW9uKGRlcGVuZGVuY2llczoge1xyXG4gICAgcGxhbmV0UG9zaXRpb246IG51bWJlcjtcclxuICAgIHNlcnZlckVjb25vbXlTcGVlZDogbnVtYmVyO1xyXG59KSB7XHJcbiAgICBjb25zdCBib29zdCA9IGdldE1ldGFsUHJvZHVjdGlvbkJvb3N0KGRlcGVuZGVuY2llcy5wbGFuZXRQb3NpdGlvbik7XHJcbiAgICBjb25zdCBiYXNlUHJvZHVjdGlvbiA9IDMwICogZGVwZW5kZW5jaWVzLnNlcnZlckVjb25vbXlTcGVlZCAqICgxICsgYm9vc3QpO1xyXG5cclxuICAgIHJldHVybiBNYXRoLnRydW5jKGJhc2VQcm9kdWN0aW9uKTtcclxufSIsImltcG9ydCB7IFJlc291cmNlVHlwZSB9IGZyb20gXCIuLi9yZXNvdXJjZXMvUmVzb3VyY2VUeXBlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgR2VvbG9naXN0UHJvZHVjdGlvbkJvbnVzID0gMC4xOyAvLyAxMCVcclxuZXhwb3J0IGNvbnN0IENvbW1hbmRTdGFmZlByb2R1Y3Rpb25Cb251cyA9IDAuMDI7IC8vIDIlXHJcbmV4cG9ydCBjb25zdCBQbGFzbWFUZWNobm9sb2d5UHJvZHVjdGlvbkJvbnVzID0ge1xyXG4gICAgW1Jlc291cmNlVHlwZS5tZXRhbF06IDAuMDEsIC8vMSVcclxuICAgIFtSZXNvdXJjZVR5cGUuY3J5c3RhbF06IDAuMDA2NiwgLy8wLjY2JVxyXG4gICAgW1Jlc291cmNlVHlwZS5kZXV0ZXJpdW1dOiAwLjAwMzMsIC8vMC4zMyVcclxufTtcclxuZXhwb3J0IGNvbnN0IEFsbGlhbmNlQ2xhc3NUcmFkZXJQcm9kdWN0aW9uQm9udXMgPSAwLjA1OyAvLzUlIiwiaW1wb3J0IHsgQ3Jhd2xlclByb2R1Y3Rpb25QZXJjZW50YWdlIH0gZnJvbSBcIi4uLy4uL2VtcGlyZS9DcmF3bGVyUHJvZHVjdGlvblBlcmNlbnRhZ2VcIjtcclxuaW1wb3J0IHsgUGxheWVyQ2xhc3MgfSBmcm9tIFwiLi4vY2xhc3Nlcy9QbGF5ZXJDbGFzc1wiO1xyXG5pbXBvcnQgeyBnZXRDcmF3bGVyUHJvZHVjdGlvbkZhY3RvciB9IGZyb20gXCIuL2dldENyYXdsZXJQcm9kdWN0aW9uRmFjdG9yXCI7XHJcbmltcG9ydCB7IGdldE1heEFjdGl2ZUNyYXdsZXJzIH0gZnJvbSBcIi4vZ2V0TWF4QWN0aXZlQ3Jhd2xlcnNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ3Jhd2xlckJvb3N0Q2FsY3VsYXRpb25EYXRhIHtcclxuICAgIGF2YWlsYWJsZUNyYXdsZXJzOiBudW1iZXI7XHJcbiAgICBjcmF3bGVyUHJvZHVjdGlvblNldHRpbmc6IENyYXdsZXJQcm9kdWN0aW9uUGVyY2VudGFnZTtcclxuICAgIGxldmVsTWV0YWxNaW5lOiBudW1iZXI7XHJcbiAgICBsZXZlbENyeXN0YWxNaW5lOiBudW1iZXI7XHJcbiAgICBsZXZlbERldXRlcml1bVN5bnRoZXNpemVyOiBudW1iZXI7XHJcbiAgICBwbGF5ZXJDbGFzczogUGxheWVyQ2xhc3M7XHJcbiAgICBoYXNHZW9sb2dpc3Q6IGJvb2xlYW47XHJcbiAgICBsaWZlZm9ybVRlY2hub2xvZ2llczoge1xyXG4gICAgICAgIGNvbGxlY3RvckNsYXNzQm9udXM6IG51bWJlcjtcclxuICAgICAgICBjcmF3bGVyUHJvZHVjdGlvbkJvbnVzOiBudW1iZXI7XHJcbiAgICB9LFxyXG4gICAgc2VydmVyU2V0dGluZ3M6IHtcclxuICAgICAgICBnZW9sb2dpc3RBY3RpdmVDcmF3bGVyRmFjdG9yQm9udXM6IG51bWJlcjtcclxuICAgICAgICBjb2xsZWN0b3JDcmF3bGVyUHJvZHVjdGlvbkZhY3RvckJvbnVzOiBudW1iZXI7XHJcbiAgICAgICAgY3Jhd2xlclByb2R1Y3Rpb25GYWN0b3JQZXJVbml0OiBudW1iZXI7XHJcbiAgICAgICAgY3Jhd2xlck1heFByb2R1Y3Rpb25GYWN0b3I6IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDcmF3bGVyQm9vc3QoZGF0YTogQ3Jhd2xlckJvb3N0Q2FsY3VsYXRpb25EYXRhKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IG1heENyYXdsZXJzID0gZ2V0TWF4QWN0aXZlQ3Jhd2xlcnMoXHJcbiAgICAgICAgZGF0YS5sZXZlbE1ldGFsTWluZSxcclxuICAgICAgICBkYXRhLmxldmVsQ3J5c3RhbE1pbmUsXHJcbiAgICAgICAgZGF0YS5sZXZlbERldXRlcml1bVN5bnRoZXNpemVyLFxyXG4gICAgICAgIGRhdGEucGxheWVyQ2xhc3MgPT0gUGxheWVyQ2xhc3MuY29sbGVjdG9yLFxyXG4gICAgICAgIGRhdGEuaGFzR2VvbG9naXN0LFxyXG4gICAgICAgIGRhdGEuc2VydmVyU2V0dGluZ3MuZ2VvbG9naXN0QWN0aXZlQ3Jhd2xlckZhY3RvckJvbnVzLFxyXG4gICAgICAgIGRhdGEubGlmZWZvcm1UZWNobm9sb2dpZXMuY29sbGVjdG9yQ2xhc3NCb251cyxcclxuICAgICk7XHJcbiAgICBjb25zdCBjcmF3bGVyQ291bnQgPSBNYXRoLm1pbihtYXhDcmF3bGVycywgZGF0YS5hdmFpbGFibGVDcmF3bGVycyk7XHJcbiAgICBjb25zdCBjcmF3bGVyUHJvZHVjdGl2aXR5ID0gZ2V0Q3Jhd2xlclByb2R1Y3Rpb25GYWN0b3IoXHJcbiAgICAgICAgZGF0YS5wbGF5ZXJDbGFzcyxcclxuICAgICAgICBkYXRhLnNlcnZlclNldHRpbmdzLmNvbGxlY3RvckNyYXdsZXJQcm9kdWN0aW9uRmFjdG9yQm9udXMsXHJcbiAgICAgICAgZGF0YS5saWZlZm9ybVRlY2hub2xvZ2llcy5jb2xsZWN0b3JDbGFzc0JvbnVzLFxyXG4gICAgICAgIGRhdGEubGlmZWZvcm1UZWNobm9sb2dpZXMuY3Jhd2xlclByb2R1Y3Rpb25Cb251cyxcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgcG90ZW50aWFsQ3Jhd2xlckJvb3N0ID1cclxuICAgICAgICBkYXRhLnNlcnZlclNldHRpbmdzLmNyYXdsZXJQcm9kdWN0aW9uRmFjdG9yUGVyVW5pdFxyXG4gICAgICAgICogY3Jhd2xlckNvdW50XHJcbiAgICAgICAgKiBjcmF3bGVyUHJvZHVjdGl2aXR5XHJcbiAgICAgICAgKiBkYXRhLmNyYXdsZXJQcm9kdWN0aW9uU2V0dGluZyAvIDEwMDtcclxuXHJcbiAgICByZXR1cm4gTWF0aC5taW4ocG90ZW50aWFsQ3Jhd2xlckJvb3N0LCBkYXRhLnNlcnZlclNldHRpbmdzLmNyYXdsZXJNYXhQcm9kdWN0aW9uRmFjdG9yKTtcclxufSIsImltcG9ydCB7IHBhcnNlSW50U2FmZSB9IGZyb20gXCJAL3NoYXJlZC91dGlscy9wYXJzZU51bWJlcnNcIjtcclxuaW1wb3J0IHsgQ3Jhd2xlclByb2R1Y3Rpb25QZXJjZW50YWdlIH0gZnJvbSBcIi4uLy4uL2VtcGlyZS9DcmF3bGVyUHJvZHVjdGlvblBlcmNlbnRhZ2VcIjtcclxuaW1wb3J0IHsgQWxsaWFuY2VDbGFzcyB9IGZyb20gXCIuLi9jbGFzc2VzL0FsbGlhbmNlQ2xhc3NcIjtcclxuaW1wb3J0IHsgUGxheWVyQ2xhc3MgfSBmcm9tIFwiLi4vY2xhc3Nlcy9QbGF5ZXJDbGFzc1wiO1xyXG5pbXBvcnQgeyBnZXRUZWNobm9sb2d5Qm9udXNGYWN0b3IgfSBmcm9tIFwiLi4vbGlmZWZvcm1zL3V0aWxzXCI7XHJcbmltcG9ydCB7IFJlc291cmNlVHlwZSB9IGZyb20gXCIuLi9yZXNvdXJjZXMvUmVzb3VyY2VUeXBlXCI7XHJcbmltcG9ydCB7IEFsbGlhbmNlQ2xhc3NUcmFkZXJQcm9kdWN0aW9uQm9udXMsIENvbW1hbmRTdGFmZlByb2R1Y3Rpb25Cb251cywgR2VvbG9naXN0UHJvZHVjdGlvbkJvbnVzLCBQbGFzbWFUZWNobm9sb2d5UHJvZHVjdGlvbkJvbnVzIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IGdldENyYXdsZXJCb29zdCB9IGZyb20gXCIuL2dldENyYXdsZXJCb29zdFwiO1xyXG5pbXBvcnQgeyBMaWZlZm9ybVRlY2hub2xvZ3lUeXBlIH0gZnJvbSBcIi4uL2xpZmVmb3Jtcy9MaWZlZm9ybVRlY2hub2xvZ3lUeXBlXCI7XHJcbmltcG9ydCB7IExvd1RlbXBlcmF0dXJlRHJpdmVzIH0gZnJvbSBcIi4uL2xpZmVmb3Jtcy90ZWNobm9sb2dpZXMvaHVtYW5zL0xvd1RlbXBlcmF0dXJlRHJpdmVzXCI7XHJcbmltcG9ydCB7IFJlc291cmNlUHJvZHVjdGlvbkJvbnVzTGlmZWZvcm1UZWNobm9sb2dpZXMgfSBmcm9tIFwiLi4vbGlmZWZvcm1zL3RlY2hub2xvZ2llcy9MaWZlZm9ybVRlY2hub2xvZ2llc1wiO1xyXG5cclxuXHJcbmludGVyZmFjZSBHbG9iYWxQcm9kdWN0aW9uQm9udXNlcyB7XHJcbiAgICBjb2xsZWN0b3JDbGFzc0JvbnVzRmFjdG9yOiBudW1iZXI7XHJcbiAgICBsaWZlZm9ybVRlY2hub2xvZ3lQcm9kdWN0aW9uQm9udXNGYWN0b3I6IG51bWJlcjtcclxuICAgIGxpZmVmb3JtVGVjaG5vbG9neUNyYXdsZXJQcm9kdWN0aW9uQm9udXNGYWN0b3I6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQbGFuZXRQcm9kdWN0aW9uQnJlYWtkb3duIHtcclxuICAgIGJhc2VQcm9kdWN0aW9uOiBudW1iZXI7XHJcbiAgICBtaW5lUHJvZHVjdGlvbjogbnVtYmVyO1xyXG4gICAgcGxhc21hVGVjaG5vbG9neVByb2R1Y3Rpb246IG51bWJlcjtcclxuICAgIGNyYXdsZXJQcm9kdWN0aW9uOiBudW1iZXI7XHJcbiAgICBwbGF5ZXJDbGFzc1Byb2R1Y3Rpb246IG51bWJlcjtcclxuICAgIGFsbGlhbmNlQ2xhc3NQcm9kdWN0aW9uOiBudW1iZXI7XHJcbiAgICBnZW9sb2dpc3RQcm9kdWN0aW9uOiBudW1iZXI7XHJcbiAgICBjb21tYW5kU3RhZmZQcm9kdWN0aW9uOiBudW1iZXI7XHJcbiAgICBpdGVtUHJvZHVjdGlvbjogbnVtYmVyO1xyXG4gICAgbGlmZWZvcm1CdWlsZGluZ3NQcm9kdWN0aW9uOiBudW1iZXI7XHJcbiAgICBsaWZlZm9ybVRlY2hub2xvZ2llc1Byb2R1Y3Rpb246IG51bWJlcjtcclxuXHJcbiAgICB0b3RhbDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEVtcGlyZVByb2R1Y3Rpb25QbGFuZXRTdGF0ZSB7XHJcbiAgICBiYXNlUHJvZHVjdGlvbjogbnVtYmVyO1xyXG4gICAgbWluZVByb2R1Y3Rpb246IG51bWJlcjtcclxuICAgIGZ1c2lvblJlYWN0b3JDb25zdW1wdGlvbjogbnVtYmVyO1xyXG4gICAgY3Jhd2xlcnM6IHtcclxuICAgICAgICBhdmFpbGFibGU6IG51bWJlcjtcclxuICAgICAgICB0b3RhbE1pbmVMZXZlbDogbnVtYmVyO1xyXG4gICAgICAgIHBlcmNlbnRhZ2U6IENyYXdsZXJQcm9kdWN0aW9uUGVyY2VudGFnZTtcclxuICAgIH07XHJcblxyXG4gICAgaXRlbUJvbnVzUHJvZHVjdGlvbkZhY3RvcjogbnVtYmVyO1xyXG4gICAgbGlmZWZvcm1CdWlsZGluZ0JvbnVzUHJvZHVjdGlvbkZhY3RvcjogbnVtYmVyO1xyXG4gICAgbGlmZWZvcm1UZWNobm9sb2d5Qm9udXNQcm9kdWN0aW9uRmFjdG9yOiBSZWNvcmQ8TGlmZWZvcm1UZWNobm9sb2d5VHlwZSwgbnVtYmVyPjtcclxuICAgIGxpZmVmb3JtVGVjaG5vbG9neUNyYXdsZXJQcm9kdWN0aW9uQm9udXNGYWN0b3I6IG51bWJlcjtcclxuICAgIGNvbGxlY3RvckNsYXNzQm9udXNGYWN0b3I6IG51bWJlcjtcclxuXHJcbiAgICBsaWZlZm9ybVRlY2hub2xvZ3lCb29zdDogUmVjb3JkPExpZmVmb3JtVGVjaG5vbG9neVR5cGUsIG51bWJlcj47XHJcbiAgICBsaWZlZm9ybUV4cGVyaWVuY2VCb29zdDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW1waXJlUHJvZHVjdGlvbkJyZWFrZG93biB7XHJcbiAgICAjcGxhbmV0SWRzOiBudW1iZXJbXTtcclxuXHJcbiAgICAjcmVzb3VyY2U6IFJlc291cmNlVHlwZTtcclxuXHJcbiAgICBwbGFzbWFUZWNobm9sb2d5TGV2ZWw6IG51bWJlcjtcclxuICAgIHBsYXllckNsYXNzOiBQbGF5ZXJDbGFzcztcclxuICAgIGFsbGlhbmNlQ2xhc3M6IEFsbGlhbmNlQ2xhc3M7XHJcbiAgICBnZW9sb2dpc3Q6IGJvb2xlYW47XHJcbiAgICBjb21tYW5kU3RhZmY6IGJvb2xlYW47XHJcblxyXG4gICAgcGxhbmV0czogUmVjb3JkPG51bWJlciwgRW1waXJlUHJvZHVjdGlvblBsYW5ldFN0YXRlPjtcclxuXHJcbiAgICBzZXJ2ZXJTZXR0aW5nczoge1xyXG4gICAgICAgIGNvbGxlY3RvclByb2R1Y3Rpb25GYWN0b3I6IG51bWJlcjtcclxuICAgICAgICBnZW9sb2dpc3RBY3RpdmVDcmF3bGVyRmFjdG9yQm9udXM6IG51bWJlcjtcclxuICAgICAgICBjb2xsZWN0b3JDcmF3bGVyUHJvZHVjdGlvbkZhY3RvckJvbnVzOiBudW1iZXI7XHJcbiAgICAgICAgY3Jhd2xlclByb2R1Y3Rpb25GYWN0b3JQZXJVbml0OiBudW1iZXI7XHJcbiAgICAgICAgY3Jhd2xlck1heFByb2R1Y3Rpb25GYWN0b3I6IG51bWJlcjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcclxuICAgICAgICByZXNvdXJjZTogUmVzb3VyY2VUeXBlLFxyXG5cclxuICAgICAgICBwbGFzbWFUZWNobm9sb2d5TGV2ZWw6IG51bWJlcixcclxuICAgICAgICBwbGF5ZXJDbGFzczogUGxheWVyQ2xhc3MsXHJcbiAgICAgICAgYWxsaWFuY2VDbGFzczogQWxsaWFuY2VDbGFzcyxcclxuICAgICAgICBnZW9sb2dpc3Q6IGJvb2xlYW4sXHJcbiAgICAgICAgY29tbWFuZFN0YWZmOiBib29sZWFuLFxyXG5cclxuICAgICAgICBzZXJ2ZXJTZXR0aW5nczoge1xyXG4gICAgICAgICAgICBjb2xsZWN0b3JQcm9kdWN0aW9uRmFjdG9yOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGdlb2xvZ2lzdEFjdGl2ZUNyYXdsZXJGYWN0b3JCb251czogbnVtYmVyO1xyXG4gICAgICAgICAgICBjb2xsZWN0b3JDcmF3bGVyUHJvZHVjdGlvbkZhY3RvckJvbnVzOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGNyYXdsZXJQcm9kdWN0aW9uRmFjdG9yUGVyVW5pdDogbnVtYmVyO1xyXG4gICAgICAgICAgICBjcmF3bGVyTWF4UHJvZHVjdGlvbkZhY3RvcjogbnVtYmVyO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHBsYW5ldHM6IFJlY29yZDxudW1iZXIsIEVtcGlyZVByb2R1Y3Rpb25QbGFuZXRTdGF0ZT4sXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLiNyZXNvdXJjZSA9IHJlc291cmNlO1xyXG4gICAgICAgIHRoaXMucGxhc21hVGVjaG5vbG9neUxldmVsID0gcGxhc21hVGVjaG5vbG9neUxldmVsO1xyXG4gICAgICAgIHRoaXMucGxheWVyQ2xhc3MgPSBwbGF5ZXJDbGFzcztcclxuICAgICAgICB0aGlzLmFsbGlhbmNlQ2xhc3MgPSBhbGxpYW5jZUNsYXNzO1xyXG4gICAgICAgIHRoaXMuZ2VvbG9naXN0ID0gZ2VvbG9naXN0O1xyXG4gICAgICAgIHRoaXMuY29tbWFuZFN0YWZmID0gY29tbWFuZFN0YWZmO1xyXG5cclxuICAgICAgICB0aGlzLnNlcnZlclNldHRpbmdzID0gc2VydmVyU2V0dGluZ3M7XHJcblxyXG4gICAgICAgIHRoaXMucGxhbmV0cyA9IHBsYW5ldHM7XHJcbiAgICAgICAgdGhpcy4jcGxhbmV0SWRzID0gT2JqZWN0LmtleXMocGxhbmV0cykubWFwKGlkID0+IHBhcnNlSW50U2FmZShpZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExpZmVmb3JtQm9udXNGYWN0b3JzKCk6IEdsb2JhbFByb2R1Y3Rpb25Cb251c2VzIHtcclxuICAgICAgICBsZXQgY29sbGVjdG9yQ2xhc3NCb251c0ZhY3RvciA9IDA7XHJcbiAgICAgICAgbGV0IGxpZmVmb3JtVGVjaG5vbG9neVByb2R1Y3Rpb25Cb251c0ZhY3RvciA9IDA7XHJcbiAgICAgICAgbGV0IGxpZmVmb3JtVGVjaG5vbG9neUNyYXdsZXJQcm9kdWN0aW9uQm9udXNGYWN0b3IgPSAwO1xyXG5cclxuICAgICAgICB0aGlzLiNwbGFuZXRJZHMuZm9yRWFjaChwbGFuZXRJZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYW5ldCA9IHRoaXMucGxhbmV0c1twbGFuZXRJZF07XHJcblxyXG4gICAgICAgICAgICBjb2xsZWN0b3JDbGFzc0JvbnVzRmFjdG9yICs9IHBsYW5ldC5jb2xsZWN0b3JDbGFzc0JvbnVzRmFjdG9yICogZ2V0VGVjaG5vbG9neUJvbnVzRmFjdG9yKFxyXG4gICAgICAgICAgICAgICAgcGxhbmV0LmxpZmVmb3JtVGVjaG5vbG9neUJvb3N0W0xpZmVmb3JtVGVjaG5vbG9neVR5cGUucm9ja3RhbENvbGxlY3RvckVuaGFuY2VtZW50XSxcclxuICAgICAgICAgICAgICAgIHBsYW5ldC5saWZlZm9ybUV4cGVyaWVuY2VCb29zdCxcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIFJlc291cmNlUHJvZHVjdGlvbkJvbnVzTGlmZWZvcm1UZWNobm9sb2dpZXMuZm9yRWFjaChwcnVkY3Rpb25Cb251c1RlY2hub2xvZ3kgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGlmZWZvcm1UZWNobm9sb2d5UHJvZHVjdGlvbkJvbnVzRmFjdG9yICs9IHBsYW5ldC5saWZlZm9ybVRlY2hub2xvZ3lCb251c1Byb2R1Y3Rpb25GYWN0b3JbcHJ1ZGN0aW9uQm9udXNUZWNobm9sb2d5LnR5cGVdICogZ2V0VGVjaG5vbG9neUJvbnVzRmFjdG9yKFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5ldC5saWZlZm9ybVRlY2hub2xvZ3lCb29zdFtwcnVkY3Rpb25Cb251c1RlY2hub2xvZ3kudHlwZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbmV0LmxpZmVmb3JtRXhwZXJpZW5jZUJvb3N0LFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsaWZlZm9ybVRlY2hub2xvZ3lDcmF3bGVyUHJvZHVjdGlvbkJvbnVzRmFjdG9yICs9IHBsYW5ldC5saWZlZm9ybVRlY2hub2xvZ3lDcmF3bGVyUHJvZHVjdGlvbkJvbnVzRmFjdG9yICogZ2V0VGVjaG5vbG9neUJvbnVzRmFjdG9yKFxyXG4gICAgICAgICAgICAgICAgcGxhbmV0LmxpZmVmb3JtVGVjaG5vbG9neUJvb3N0W0xpZmVmb3JtVGVjaG5vbG9neVR5cGUuaW9uQ3J5c3RhbE1vZHVsZXNdLFxyXG4gICAgICAgICAgICAgICAgcGxhbmV0LmxpZmVmb3JtRXhwZXJpZW5jZUJvb3N0LFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb2xsZWN0b3JDbGFzc0JvbnVzRmFjdG9yLFxyXG4gICAgICAgICAgICBsaWZlZm9ybVRlY2hub2xvZ3lQcm9kdWN0aW9uQm9udXNGYWN0b3IsXHJcbiAgICAgICAgICAgIGxpZmVmb3JtVGVjaG5vbG9neUNyYXdsZXJQcm9kdWN0aW9uQm9udXNGYWN0b3IsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkUGxhbmV0KHBsYW5ldElkOiBudW1iZXIsIHBsYW5ldFN0YXRlOiBFbXBpcmVQcm9kdWN0aW9uUGxhbmV0U3RhdGUpIHtcclxuICAgICAgICB0aGlzLiNwbGFuZXRJZHMucHVzaChwbGFuZXRJZCk7XHJcbiAgICAgICAgdGhpcy5wbGFuZXRzW3BsYW5ldElkXSA9IHBsYW5ldFN0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQcm9kdWN0aW9uQnJlYWtkb3duKHBsYW5ldElkOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jZ2V0UGxhbmV0UHJvZHVjdGlvbkJyZWFrZG93bihwbGFuZXRJZCwgdGhpcy5nZXRMaWZlZm9ybUJvbnVzRmFjdG9ycygpKTtcclxuICAgIH1cclxuXHJcbiAgICAjZ2V0UGxhbmV0UHJvZHVjdGlvbkJyZWFrZG93bihwbGFuZXRJZDogbnVtYmVyLCBnbG9iYWxCb251c2VzOiBHbG9iYWxQcm9kdWN0aW9uQm9udXNlcykge1xyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgY29sbGVjdG9yQ2xhc3NCb251c0ZhY3RvcixcclxuICAgICAgICAgICAgbGlmZWZvcm1UZWNobm9sb2d5UHJvZHVjdGlvbkJvbnVzRmFjdG9yLFxyXG4gICAgICAgICAgICBsaWZlZm9ybVRlY2hub2xvZ3lDcmF3bGVyUHJvZHVjdGlvbkJvbnVzRmFjdG9yXHJcbiAgICAgICAgfSA9IGdsb2JhbEJvbnVzZXM7XHJcblxyXG4gICAgICAgIGNvbnN0IG1pbmVQcm9kdWN0aW9uID0gdGhpcy5wbGFuZXRzW3BsYW5ldElkXS5taW5lUHJvZHVjdGlvbjtcclxuXHJcbiAgICAgICAgY29uc3QgcGxheWVyQ2xhc3NGYWN0b3IgPSAodGhpcy5wbGF5ZXJDbGFzcyA9PSBQbGF5ZXJDbGFzcy5jb2xsZWN0b3IgPyAxIDogMClcclxuICAgICAgICAgICAgKiB0aGlzLnNlcnZlclNldHRpbmdzLmNvbGxlY3RvclByb2R1Y3Rpb25GYWN0b3JcclxuICAgICAgICAgICAgKiAoMSArIGNvbGxlY3RvckNsYXNzQm9udXNGYWN0b3IpO1xyXG4gICAgICAgIGNvbnN0IGFsbGlhbmNlQ2xhc3NGYWN0b3IgPSAodGhpcy5hbGxpYW5jZUNsYXNzID09IEFsbGlhbmNlQ2xhc3MudHJhZGVyID8gMSA6IDApICogQWxsaWFuY2VDbGFzc1RyYWRlclByb2R1Y3Rpb25Cb251cztcclxuICAgICAgICBjb25zdCBnZW9sb2dpc3RGYWN0b3IgPSB0aGlzLmdlb2xvZ2lzdCA/IEdlb2xvZ2lzdFByb2R1Y3Rpb25Cb251cyA6IDA7XHJcbiAgICAgICAgY29uc3QgY29tbWFuZFN0YWZmRmFjdG9yID0gdGhpcy5jb21tYW5kU3RhZmYgPyBDb21tYW5kU3RhZmZQcm9kdWN0aW9uQm9udXMgOiAwO1xyXG5cclxuICAgICAgICBjb25zdCBjcmF3bGVyQ29uZmlnID0gdGhpcy5wbGFuZXRzW3BsYW5ldElkXS5jcmF3bGVycztcclxuICAgICAgICBjb25zdCBjcmF3bGVyUHJvZHVjdGlvbkZhY3RvciA9IGdldENyYXdsZXJCb29zdCh7XHJcbiAgICAgICAgICAgIGhhc0dlb2xvZ2lzdDogdGhpcy5nZW9sb2dpc3QsXHJcbiAgICAgICAgICAgIGF2YWlsYWJsZUNyYXdsZXJzOiBjcmF3bGVyQ29uZmlnLmF2YWlsYWJsZSxcclxuICAgICAgICAgICAgbGV2ZWxNZXRhbE1pbmU6IGNyYXdsZXJDb25maWcudG90YWxNaW5lTGV2ZWwsXHJcbiAgICAgICAgICAgIGxldmVsQ3J5c3RhbE1pbmU6IDAsXHJcbiAgICAgICAgICAgIGxldmVsRGV1dGVyaXVtU3ludGhlc2l6ZXI6IDAsXHJcbiAgICAgICAgICAgIGNyYXdsZXJQcm9kdWN0aW9uU2V0dGluZzogY3Jhd2xlckNvbmZpZy5wZXJjZW50YWdlLFxyXG4gICAgICAgICAgICBsaWZlZm9ybVRlY2hub2xvZ2llczoge1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdG9yQ2xhc3NCb251czogY29sbGVjdG9yQ2xhc3NCb251c0ZhY3RvcixcclxuICAgICAgICAgICAgICAgIGNyYXdsZXJQcm9kdWN0aW9uQm9udXM6IGxpZmVmb3JtVGVjaG5vbG9neUNyYXdsZXJQcm9kdWN0aW9uQm9udXNGYWN0b3IsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBsYXllckNsYXNzOiB0aGlzLnBsYXllckNsYXNzLFxyXG4gICAgICAgICAgICBzZXJ2ZXJTZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdG9yQ3Jhd2xlclByb2R1Y3Rpb25GYWN0b3JCb251czogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5jb2xsZWN0b3JDcmF3bGVyUHJvZHVjdGlvbkZhY3RvckJvbnVzLFxyXG4gICAgICAgICAgICAgICAgY3Jhd2xlck1heFByb2R1Y3Rpb25GYWN0b3I6IHRoaXMuc2VydmVyU2V0dGluZ3MuY3Jhd2xlck1heFByb2R1Y3Rpb25GYWN0b3IsXHJcbiAgICAgICAgICAgICAgICBjcmF3bGVyUHJvZHVjdGlvbkZhY3RvclBlclVuaXQ6IHRoaXMuc2VydmVyU2V0dGluZ3MuY3Jhd2xlclByb2R1Y3Rpb25GYWN0b3JQZXJVbml0LFxyXG4gICAgICAgICAgICAgICAgZ2VvbG9naXN0QWN0aXZlQ3Jhd2xlckZhY3RvckJvbnVzOiB0aGlzLnNlcnZlclNldHRpbmdzLmdlb2xvZ2lzdEFjdGl2ZUNyYXdsZXJGYWN0b3JCb251cyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgYmFzZVByb2R1Y3Rpb24gPSB0aGlzLnBsYW5ldHNbcGxhbmV0SWRdLmJhc2VQcm9kdWN0aW9uOyAvLyBiYXNlIHByb2R1Y3Rpb25cclxuICAgICAgICBjb25zdCBwbGFzbWFUZWNobm9sb2d5UHJvZHVjdGlvbiA9IChtaW5lUHJvZHVjdGlvbiAqIHRoaXMucGxhc21hVGVjaG5vbG9neUxldmVsICogUGxhc21hVGVjaG5vbG9neVByb2R1Y3Rpb25Cb251c1t0aGlzLiNyZXNvdXJjZV0pOyAvLyBwbGFzbWEgdGVjaG5vbG9neSBib251cyBwcm9kdWN0aW9uXHJcbiAgICAgICAgY29uc3QgY3Jhd2xlclByb2R1Y3Rpb24gPSBtaW5lUHJvZHVjdGlvbiAqIGNyYXdsZXJQcm9kdWN0aW9uRmFjdG9yOyAvLyBjcmF3bGVyIGJvbnVzIHByb2R1Y3Rpb25cclxuICAgICAgICBjb25zdCBwbGF5ZXJDbGFzc1Byb2R1Y3Rpb24gPSBtaW5lUHJvZHVjdGlvbiAqIHBsYXllckNsYXNzRmFjdG9yOyAvLyBwbGF5ZXIgY2xhc3MgYm9udXMgcHJvZHVjdGlvblxyXG4gICAgICAgIGNvbnN0IGFsbGlhbmNlQ2xhc3NQcm9kdWN0aW9uID0gbWluZVByb2R1Y3Rpb24gKiBhbGxpYW5jZUNsYXNzRmFjdG9yOyAvLyBhbGxpYW5jZSBjbGFzcyBib251cyBwcm9kdWN0aW9uXHJcbiAgICAgICAgY29uc3QgZ2VvbG9naXN0UHJvZHVjdGlvbiA9IG1pbmVQcm9kdWN0aW9uICogZ2VvbG9naXN0RmFjdG9yOyAvLyBnZW9sb2dpc3QgYm9udXMgcHJvZHVjdGlvblxyXG4gICAgICAgIGNvbnN0IGNvbW1hbmRTdGFmZlByb2R1Y3Rpb24gPSBtaW5lUHJvZHVjdGlvbiAqIGNvbW1hbmRTdGFmZkZhY3RvcjsgLy8gY29tbWFuZCBzdGFmZiBib251cyBwcm9kdWN0aW9uXHJcbiAgICAgICAgY29uc3QgaXRlbVByb2R1Y3Rpb24gPSBtaW5lUHJvZHVjdGlvbiAqIHRoaXMucGxhbmV0c1twbGFuZXRJZF0uaXRlbUJvbnVzUHJvZHVjdGlvbkZhY3RvcjsgLy8gaXRlbSBib251cyBwcm9kdWN0aW9uXHJcbiAgICAgICAgY29uc3QgbGlmZWZvcm1CdWlsZGluZ3NQcm9kdWN0aW9uID0gbWluZVByb2R1Y3Rpb24gKiB0aGlzLnBsYW5ldHNbcGxhbmV0SWRdLmxpZmVmb3JtQnVpbGRpbmdCb251c1Byb2R1Y3Rpb25GYWN0b3I7IC8vIGxpZmVmb3JtIGJ1aWxkaW5ncyBib251cyBwcm9kdWN0aW9uXHJcbiAgICAgICAgY29uc3QgbGlmZWZvcm1UZWNobm9sb2dpZXNQcm9kdWN0aW9uID0gbWluZVByb2R1Y3Rpb24gKiBsaWZlZm9ybVRlY2hub2xvZ3lQcm9kdWN0aW9uQm9udXNGYWN0b3I7IC8vIGxpZmVmb3JtIHRlY2hub2xvZ3kgYm9udXMgcHJvZHVjdGlvblxyXG5cclxuICAgICAgICBjb25zdCB0b3RhbCA9XHJcbiAgICAgICAgICAgIGJhc2VQcm9kdWN0aW9uXHJcbiAgICAgICAgICAgICsgbWluZVByb2R1Y3Rpb25cclxuICAgICAgICAgICAgKyBwbGFzbWFUZWNobm9sb2d5UHJvZHVjdGlvblxyXG4gICAgICAgICAgICArIGNyYXdsZXJQcm9kdWN0aW9uXHJcbiAgICAgICAgICAgICsgcGxheWVyQ2xhc3NQcm9kdWN0aW9uXHJcbiAgICAgICAgICAgICsgYWxsaWFuY2VDbGFzc1Byb2R1Y3Rpb25cclxuICAgICAgICAgICAgKyBnZW9sb2dpc3RQcm9kdWN0aW9uXHJcbiAgICAgICAgICAgICsgY29tbWFuZFN0YWZmUHJvZHVjdGlvblxyXG4gICAgICAgICAgICArIGl0ZW1Qcm9kdWN0aW9uXHJcbiAgICAgICAgICAgICsgbGlmZWZvcm1CdWlsZGluZ3NQcm9kdWN0aW9uXHJcbiAgICAgICAgICAgICsgbGlmZWZvcm1UZWNobm9sb2dpZXNQcm9kdWN0aW9uXHJcbiAgICAgICAgICAgIDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmFzZVByb2R1Y3Rpb24sXHJcbiAgICAgICAgICAgIG1pbmVQcm9kdWN0aW9uLFxyXG4gICAgICAgICAgICBwbGFzbWFUZWNobm9sb2d5UHJvZHVjdGlvbixcclxuICAgICAgICAgICAgY3Jhd2xlclByb2R1Y3Rpb24sXHJcbiAgICAgICAgICAgIHBsYXllckNsYXNzUHJvZHVjdGlvbixcclxuICAgICAgICAgICAgYWxsaWFuY2VDbGFzc1Byb2R1Y3Rpb24sXHJcbiAgICAgICAgICAgIGdlb2xvZ2lzdFByb2R1Y3Rpb24sXHJcbiAgICAgICAgICAgIGNvbW1hbmRTdGFmZlByb2R1Y3Rpb24sXHJcbiAgICAgICAgICAgIGl0ZW1Qcm9kdWN0aW9uLFxyXG4gICAgICAgICAgICBsaWZlZm9ybUJ1aWxkaW5nc1Byb2R1Y3Rpb24sXHJcbiAgICAgICAgICAgIGxpZmVmb3JtVGVjaG5vbG9naWVzUHJvZHVjdGlvbixcclxuXHJcbiAgICAgICAgICAgIHRvdGFsLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRvdGFsKGluY2x1ZGVDb25zdW1wdGlvbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgZ2xvYmFsQm9udXNlcyA9IHRoaXMuZ2V0TGlmZWZvcm1Cb251c0ZhY3RvcnMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI3BsYW5ldElkcy5yZWR1Y2UoKHRvdGFsLCBwbGFuZXRJZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb25zdW1wdGlvbiA9IGluY2x1ZGVDb25zdW1wdGlvbiA/IHRoaXMucGxhbmV0c1twbGFuZXRJZF0uZnVzaW9uUmVhY3RvckNvbnN1bXB0aW9uIDogMDtcclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsICsgdGhpcy4jZ2V0UGxhbmV0UHJvZHVjdGlvbkJyZWFrZG93bihwbGFuZXRJZCwgZ2xvYmFsQm9udXNlcykudG90YWwgLSBjb25zdW1wdGlvbjtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0QXZlcmFnZShpbmNsdWRlQ29uc3VtcHRpb24gPSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRvdGFsKGluY2x1ZGVDb25zdW1wdGlvbikgLyB0aGlzLiNwbGFuZXRJZHMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgY2xvbmUoKTogRW1waXJlUHJvZHVjdGlvbkJyZWFrZG93biB7XHJcbiAgICAgICAgY29uc3QgcGxhbmV0U3RhdGVzQ2xvbmU6IFJlY29yZDxudW1iZXIsIEVtcGlyZVByb2R1Y3Rpb25QbGFuZXRTdGF0ZT4gPSB7fTtcclxuICAgICAgICB0aGlzLiNwbGFuZXRJZHMuZm9yRWFjaChwbGFuZXRJZCA9PiB7XHJcbiAgICAgICAgICAgIHBsYW5ldFN0YXRlc0Nsb25lW3BsYW5ldElkXSA9IHtcclxuICAgICAgICAgICAgICAgIC4uLnRoaXMucGxhbmV0c1twbGFuZXRJZF0sXHJcbiAgICAgICAgICAgICAgICBsaWZlZm9ybVRlY2hub2xvZ3lCb251c1Byb2R1Y3Rpb25GYWN0b3I6IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnBsYW5ldHNbcGxhbmV0SWRdLmxpZmVmb3JtVGVjaG5vbG9neUJvbnVzUHJvZHVjdGlvbkZhY3RvcixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBsaWZlZm9ybVRlY2hub2xvZ3lCb29zdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucGxhbmV0c1twbGFuZXRJZF0ubGlmZWZvcm1UZWNobm9sb2d5Qm9vc3QsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY3Jhd2xlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnBsYW5ldHNbcGxhbmV0SWRdLmNyYXdsZXJzLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbXBpcmVQcm9kdWN0aW9uQnJlYWtkb3duKFxyXG4gICAgICAgICAgICB0aGlzLiNyZXNvdXJjZSxcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGxhc21hVGVjaG5vbG9neUxldmVsLFxyXG4gICAgICAgICAgICB0aGlzLnBsYXllckNsYXNzLFxyXG4gICAgICAgICAgICB0aGlzLmFsbGlhbmNlQ2xhc3MsXHJcbiAgICAgICAgICAgIHRoaXMuZ2VvbG9naXN0LFxyXG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRTdGFmZixcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VydmVyU2V0dGluZ3MsXHJcblxyXG4gICAgICAgICAgICBwbGFuZXRTdGF0ZXNDbG9uZSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTG9jYWxQbGF5ZXJEYXRhIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9lbXBpcmUvTG9jYWxQbGF5ZXJEYXRhXCI7XHJcbmltcG9ydCB7IFBsYW5ldERhdGEgfSBmcm9tIFwiQC9zaGFyZWQvbW9kZWxzL2VtcGlyZS9QbGFuZXREYXRhXCI7XHJcbmltcG9ydCB7IEJ1aWxkaW5nVHlwZSB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvYnVpbGRpbmdzL0J1aWxkaW5nVHlwZVwiO1xyXG5pbXBvcnQgeyBDcnlzdGFsTWluZSB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvYnVpbGRpbmdzL0NyeXN0YWxNaW5lXCI7XHJcbmltcG9ydCB7IERldXRlcml1bVN5bnRoZXNpemVyIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9idWlsZGluZ3MvRGV1dGVyaXVtU3ludGhlc2l6ZXJcIjtcclxuaW1wb3J0IHsgRnVzaW9uUmVhY3RvciB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvYnVpbGRpbmdzL0Z1c2lvblJlYWN0b3JcIjtcclxuaW1wb3J0IHsgTWV0YWxNaW5lIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9idWlsZGluZ3MvTWV0YWxNaW5lXCI7XHJcbmltcG9ydCB7IFByb2R1Y3Rpb25CdWlsZGluZ0RlcGVuZGVuY2llcyB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvYnVpbGRpbmdzL1Byb2R1Y3Rpb25CdWlsZGluZ1wiO1xyXG5pbXBvcnQgeyBDb3N0IH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9jb21tb24vQ29zdFwiO1xyXG5pbXBvcnQgeyBnZXRMaWZlZm9ybUxldmVsVGVjaG5vbG9neUJvbnVzIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvZXhwZXJpZW5jZVwiO1xyXG5pbXBvcnQgeyBMaWZlZm9ybVR5cGUsIExpZmVmb3JtVHlwZXMsIFZhbGlkTGlmZWZvcm1UeXBlIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvTGlmZWZvcm1UeXBlXCI7XHJcbmltcG9ydCB7IENyYXdsZXJQcm9kdWN0aW9uQm9udXNBbmRDb25zdW1wdGlvblJlZHVjdGlvbkxpZmVmb3JtVGVjaG5vbG9naWVzIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvdGVjaG5vbG9naWVzL0xpZmVmb3JtVGVjaG5vbG9naWVzXCI7XHJcbmltcG9ydCB7IGhhc0NvbW1hbmRTdGFmZiB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvcHJlbWl1bS9oYXNDb21tYW5kU3RhZmZcIjtcclxuaW1wb3J0IHsgUmVzZWFyY2hUeXBlIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9yZXNlYXJjaC9SZXNlYXJjaFR5cGVcIjtcclxuaW1wb3J0IHsgZ2V0Q3J5c3RhbEJhc2VQcm9kdWN0aW9uIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9yZXNvdXJjZS1wcm9kdWN0aW9uL2dldENyeXN0YWxQcm9kdWN0aW9uXCI7XHJcbmltcG9ydCB7IGdldEl0ZW1Cb251cyB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvcmVzb3VyY2UtcHJvZHVjdGlvbi9nZXRJdGVtQm9udXNcIjtcclxuaW1wb3J0IHsgZ2V0TWV0YWxCYXNlUHJvZHVjdGlvbiB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvcmVzb3VyY2UtcHJvZHVjdGlvbi9nZXRNZXRhbFByb2R1Y3Rpb25cIjtcclxuaW1wb3J0IHsgRW1waXJlUHJvZHVjdGlvbkJyZWFrZG93biwgRW1waXJlUHJvZHVjdGlvblBsYW5ldFN0YXRlIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9yZXNvdXJjZS1wcm9kdWN0aW9uL3R5cGVzXCI7XHJcbmltcG9ydCB7IFJlc291cmNlVHlwZSB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvcmVzb3VyY2VzL1Jlc291cmNlVHlwZVwiO1xyXG5pbXBvcnQgeyBTaGlwVHlwZSB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvc2hpcHMvU2hpcFR5cGVcIjtcclxuaW1wb3J0IHsgY3JlYXRlUmVjb3JkIH0gZnJvbSBcIkAvc2hhcmVkL3V0aWxzL2NyZWF0ZVJlY29yZFwiO1xyXG5pbXBvcnQgeyBTZXJ2ZXJTZXR0aW5nc0RhdGFNb2R1bGUgfSBmcm9tIFwiQC92aWV3cy9zdGF0cy9kYXRhL1NlcnZlclNldHRpbmdzRGF0YU1vZHVsZVwiO1xyXG5pbXBvcnQgeyBnZXRQbGFuZXRDb2xsZWN0b3JDbGFzc0JvbnVzRmFjdG9yLCBnZXRQbGFuZXRMaWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yLCBnZXRQbGFuZXRMaWZlZm9ybVRlY2hub2xvZ3lCb251c1Byb2R1Y3Rpb25GYWN0b3IsIGdldFBsYW5ldExpZmVmb3JtVGVjaG5vbG9neUJvb3N0IH0gZnJvbSBcIi4uLy4uL2xpZmVmb3Jtc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbXBpcmVQcm9kdWN0aW9uQnJlYWtkb3ducyBleHRlbmRzIFJlY29yZDxSZXNvdXJjZVR5cGUsIEVtcGlyZVByb2R1Y3Rpb25CcmVha2Rvd24+IHtcclxuICAgIGdldFRvdGFsKCk6IENvc3Q7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBnZXRQbGFuZXRMaWZlZm9ybVRlY2hub2xvZ3lDcmF3bGVyUHJvZHVjdGlvbkJvbnVzRmFjdG9yKHBsYW5ldDogUGxhbmV0RGF0YSkge1xyXG4gICAgcmV0dXJuIENyYXdsZXJQcm9kdWN0aW9uQm9udXNBbmRDb25zdW1wdGlvblJlZHVjdGlvbkxpZmVmb3JtVGVjaG5vbG9naWVzXHJcbiAgICAgICAgLmZpbHRlcih0ZWNoID0+IHBsYW5ldC5hY3RpdmVMaWZlZm9ybVRlY2hub2xvZ2llcy5pbmNsdWRlcyh0ZWNoLnR5cGUpKVxyXG4gICAgICAgIC5yZWR1Y2UoXHJcbiAgICAgICAgICAgICh0b3RhbCwgdGVjaCkgPT4gdG90YWwgKyB0ZWNoLmdldENyYXdsZXJQcm9kdWN0aW9uQm9udXMocGxhbmV0LmxpZmVmb3JtVGVjaG5vbG9naWVzW3RlY2gudHlwZV0pLFxyXG4gICAgICAgICAgICAwXHJcbiAgICAgICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2R1Y3Rpb25CcmVha2Rvd25zKGVtcGlyZTogTG9jYWxQbGF5ZXJEYXRhLCBsaWZlZm9ybUV4cGVyaWVuY2U6IFJlY29yZDxWYWxpZExpZmVmb3JtVHlwZSwgbnVtYmVyPik6IEVtcGlyZVByb2R1Y3Rpb25CcmVha2Rvd25zIHtcclxuICAgIGNvbnN0IHBsYW5ldHMgPSBPYmplY3QudmFsdWVzKGVtcGlyZS5wbGFuZXRzKVxyXG4gICAgICAgIC5maWx0ZXIocGxhbmV0ID0+ICFwbGFuZXQuaXNNb29uKSBhcyBQbGFuZXREYXRhW107XHJcblxyXG4gICAgY29uc3QgcGxhc21hVGVjaExldmVsID0gZW1waXJlLnJlc2VhcmNoW1Jlc2VhcmNoVHlwZS5wbGFzbWFUZWNobm9sb2d5XTtcclxuXHJcbiAgICBjb25zdCBzZXJ2ZXJTZXR0aW5ncyA9IFNlcnZlclNldHRpbmdzRGF0YU1vZHVsZS5zZXJ2ZXJTZXR0aW5ncztcclxuICAgIGNvbnN0IHByb2R1Y3Rpb25TZXJ2ZXJTZXR0aW5ncyA9IHtcclxuICAgICAgICBjb2xsZWN0b3JQcm9kdWN0aW9uRmFjdG9yOiBzZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci5wcm9kdWN0aW9uRmFjdG9yQm9udXMsXHJcbiAgICAgICAgZ2VvbG9naXN0QWN0aXZlQ3Jhd2xlckZhY3RvckJvbnVzOiBzZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci5jcmF3bGVycy5nZW9sb2dpc3RBY3RpdmVDcmF3bGVyRmFjdG9yQm9udXMsXHJcbiAgICAgICAgY29sbGVjdG9yQ3Jhd2xlclByb2R1Y3Rpb25GYWN0b3JCb251czogc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5jb2xsZWN0b3IuY3Jhd2xlcnMucHJvZHVjdGlvbkZhY3RvckJvbnVzLFxyXG4gICAgICAgIGNyYXdsZXJQcm9kdWN0aW9uRmFjdG9yUGVyVW5pdDogc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5jcmF3bGVycy5wcm9kdWN0aW9uQm9vc3RGYWN0b3JQZXJVbml0LFxyXG4gICAgICAgIGNyYXdsZXJNYXhQcm9kdWN0aW9uRmFjdG9yOiBzZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmNyYXdsZXJzLm1heFByb2R1Y3Rpb25GYWN0b3IsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGVtcGlyZVByb2R1Y3Rpb25QbGFuZXRTdGF0ZXMgPSB7XHJcbiAgICAgICAgbWV0YWw6IHt9IGFzIFJlY29yZDxudW1iZXIsIEVtcGlyZVByb2R1Y3Rpb25QbGFuZXRTdGF0ZT4sXHJcbiAgICAgICAgY3J5c3RhbDoge30gYXMgUmVjb3JkPG51bWJlciwgRW1waXJlUHJvZHVjdGlvblBsYW5ldFN0YXRlPixcclxuICAgICAgICBkZXV0ZXJpdW06IHt9IGFzIFJlY29yZDxudW1iZXIsIEVtcGlyZVByb2R1Y3Rpb25QbGFuZXRTdGF0ZT4sXHJcbiAgICB9O1xyXG4gICAgY29uc3QgbGlmZWZvcm1YcEJvb3N0ID0gY3JlYXRlUmVjb3JkKExpZmVmb3JtVHlwZXMsIGxmID0+IGxmID09IExpZmVmb3JtVHlwZS5ub25lID8gMCA6IGdldExpZmVmb3JtTGV2ZWxUZWNobm9sb2d5Qm9udXMobGlmZWZvcm1FeHBlcmllbmNlW2xmXSkpO1xyXG5cclxuICAgIHBsYW5ldHMuZm9yRWFjaChwbGFuZXQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxldmVsTWV0YWxNaW5lID0gcGxhbmV0LmJ1aWxkaW5nc1tCdWlsZGluZ1R5cGUubWV0YWxNaW5lXTtcclxuICAgICAgICBjb25zdCBsZXZlbENyeXN0YWxNaW5lID0gcGxhbmV0LmJ1aWxkaW5nc1tCdWlsZGluZ1R5cGUuY3J5c3RhbE1pbmVdO1xyXG4gICAgICAgIGNvbnN0IGxldmVsRGV1dGVyaXVtU3ludGhlc2l6ZXIgPSBwbGFuZXQuYnVpbGRpbmdzW0J1aWxkaW5nVHlwZS5kZXV0ZXJpdW1TeW50aGVzaXplcl07XHJcbiAgICAgICAgY29uc3QgdG90YWxNaW5lTGV2ZWwgPSBsZXZlbE1ldGFsTWluZSArIGxldmVsQ3J5c3RhbE1pbmUgKyBsZXZlbERldXRlcml1bVN5bnRoZXNpemVyO1xyXG5cclxuICAgICAgICBjb25zdCBsZXZlbEZ1c2lvblJlYWN0b3IgPSBwbGFuZXQuYnVpbGRpbmdzW0J1aWxkaW5nVHlwZS5mdXNpb25SZWFjdG9yXTtcclxuXHJcbiAgICAgICAgY29uc3QgY3Jhd2xlckNvbmZpZyA9IHtcclxuICAgICAgICAgICAgYXZhaWxhYmxlOiBwbGFuZXQuc2hpcHNbU2hpcFR5cGUuY3Jhd2xlcl0sXHJcbiAgICAgICAgICAgIHBlcmNlbnRhZ2U6IHBsYW5ldC5wcm9kdWN0aW9uU2V0dGluZ3NbU2hpcFR5cGUuY3Jhd2xlcl0sXHJcbiAgICAgICAgICAgIHRvdGFsTWluZUxldmVsLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGJhc2VQcm9kdWN0aW9uQ29uZmlnID0ge1xyXG4gICAgICAgICAgICBjcmF3bGVyczogY3Jhd2xlckNvbmZpZyxcclxuICAgICAgICAgICAgbGlmZWZvcm1FeHBlcmllbmNlQm9vc3Q6IGxpZmVmb3JtWHBCb29zdFtwbGFuZXQuYWN0aXZlTGlmZWZvcm1dLFxyXG4gICAgICAgICAgICBjb2xsZWN0b3JDbGFzc0JvbnVzRmFjdG9yOiBnZXRQbGFuZXRDb2xsZWN0b3JDbGFzc0JvbnVzRmFjdG9yKHBsYW5ldCksXHJcbiAgICAgICAgICAgIGxpZmVmb3JtQnVpbGRpbmdCb251c1Byb2R1Y3Rpb25GYWN0b3I6IGdldFBsYW5ldExpZmVmb3JtQnVpbGRpbmdCb251c1Byb2R1Y3Rpb25GYWN0b3IocGxhbmV0KSxcclxuICAgICAgICAgICAgbGlmZWZvcm1UZWNobm9sb2d5Qm9udXNQcm9kdWN0aW9uRmFjdG9yOiBnZXRQbGFuZXRMaWZlZm9ybVRlY2hub2xvZ3lCb251c1Byb2R1Y3Rpb25GYWN0b3IocGxhbmV0KSxcclxuICAgICAgICAgICAgbGlmZWZvcm1UZWNobm9sb2d5Q3Jhd2xlclByb2R1Y3Rpb25Cb251c0ZhY3RvcjogZ2V0UGxhbmV0TGlmZWZvcm1UZWNobm9sb2d5Q3Jhd2xlclByb2R1Y3Rpb25Cb251c0ZhY3RvcihwbGFuZXQpLFxyXG4gICAgICAgICAgICBsaWZlZm9ybVRlY2hub2xvZ3lCb29zdDogZ2V0UGxhbmV0TGlmZWZvcm1UZWNobm9sb2d5Qm9vc3QocGxhbmV0KSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBwcm9kdWN0aW9uQnVpbGRpbmdEZXBlbmRlbmNpZXM6IFByb2R1Y3Rpb25CdWlsZGluZ0RlcGVuZGVuY2llcyA9IHtcclxuICAgICAgICAgICAgcGxhbmV0OiB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcGxhbmV0LmNvb3JkaW5hdGVzLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHBsYW5ldC5tYXhUZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2VydmVyU2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGVjb25vbXlTcGVlZDogc2VydmVyU2V0dGluZ3Muc3BlZWQuZWNvbm9teSxcclxuICAgICAgICAgICAgICAgIGNyeXN0YWxCb29zdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHNlcnZlclNldHRpbmdzLnJlc291cmNlUHJvZHVjdGlvbi5wcm9kdWN0aW9uRmFjdG9yQm9udXMuY3J5c3RhbC5kZWZhdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgIHBvczE6IHNlcnZlclNldHRpbmdzLnJlc291cmNlUHJvZHVjdGlvbi5wcm9kdWN0aW9uRmFjdG9yQm9udXMuY3J5c3RhbC5wb3MxLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvczI6IHNlcnZlclNldHRpbmdzLnJlc291cmNlUHJvZHVjdGlvbi5wcm9kdWN0aW9uRmFjdG9yQm9udXMuY3J5c3RhbC5wb3MyLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvczM6IHNlcnZlclNldHRpbmdzLnJlc291cmNlUHJvZHVjdGlvbi5wcm9kdWN0aW9uRmFjdG9yQm9udXMuY3J5c3RhbC5wb3MzLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJvZHVjdGlvblNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBtZXRhbE1pbmU6IHBsYW5ldC5wcm9kdWN0aW9uU2V0dGluZ3NbQnVpbGRpbmdUeXBlLm1ldGFsTWluZV0sXHJcbiAgICAgICAgICAgICAgICBjcnlzdGFsTWluZTogcGxhbmV0LnByb2R1Y3Rpb25TZXR0aW5nc1tCdWlsZGluZ1R5cGUuY3J5c3RhbE1pbmVdLFxyXG4gICAgICAgICAgICAgICAgZGV1dGVyaXVtU3ludGhlc2l6ZXI6IHBsYW5ldC5wcm9kdWN0aW9uU2V0dGluZ3NbQnVpbGRpbmdUeXBlLmRldXRlcml1bVN5bnRoZXNpemVyXSxcclxuICAgICAgICAgICAgICAgIGZ1c2lvblJlYWN0b3I6IHBsYW5ldC5wcm9kdWN0aW9uU2V0dGluZ3NbQnVpbGRpbmdUeXBlLmZ1c2lvblJlYWN0b3JdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBlbXBpcmVQcm9kdWN0aW9uUGxhbmV0U3RhdGVzLm1ldGFsW3BsYW5ldC5pZF0gPSB7XHJcbiAgICAgICAgICAgIGJhc2VQcm9kdWN0aW9uOiBnZXRNZXRhbEJhc2VQcm9kdWN0aW9uKHtcclxuICAgICAgICAgICAgICAgIHBsYW5ldFBvc2l0aW9uOiBwbGFuZXQuY29vcmRpbmF0ZXMucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJFY29ub215U3BlZWQ6IHNlcnZlclNldHRpbmdzLnNwZWVkLmVjb25vbXksXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtaW5lUHJvZHVjdGlvbjogTWV0YWxNaW5lLmdldFByb2R1Y3Rpb24obGV2ZWxNZXRhbE1pbmUsIHByb2R1Y3Rpb25CdWlsZGluZ0RlcGVuZGVuY2llcyksXHJcbiAgICAgICAgICAgIGl0ZW1Cb251c1Byb2R1Y3Rpb25GYWN0b3I6IGdldEl0ZW1Cb251cyhSZXNvdXJjZVR5cGUubWV0YWwsIHBsYW5ldC5hY3RpdmVJdGVtcyksXHJcbiAgICAgICAgICAgIC4uLmJhc2VQcm9kdWN0aW9uQ29uZmlnLFxyXG4gICAgICAgICAgICBsaWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yOiBiYXNlUHJvZHVjdGlvbkNvbmZpZy5saWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yLm1ldGFsLFxyXG4gICAgICAgICAgICBsaWZlZm9ybVRlY2hub2xvZ3lCb251c1Byb2R1Y3Rpb25GYWN0b3I6IGJhc2VQcm9kdWN0aW9uQ29uZmlnLmxpZmVmb3JtVGVjaG5vbG9neUJvbnVzUHJvZHVjdGlvbkZhY3Rvci5tZXRhbCxcclxuICAgICAgICAgICAgZnVzaW9uUmVhY3RvckNvbnN1bXB0aW9uOiAwLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGVtcGlyZVByb2R1Y3Rpb25QbGFuZXRTdGF0ZXMuY3J5c3RhbFtwbGFuZXQuaWRdID0ge1xyXG4gICAgICAgICAgICBiYXNlUHJvZHVjdGlvbjogZ2V0Q3J5c3RhbEJhc2VQcm9kdWN0aW9uKHtcclxuICAgICAgICAgICAgICAgIHBsYW5ldFBvc2l0aW9uOiBwbGFuZXQuY29vcmRpbmF0ZXMucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJFY29ub215U3BlZWQ6IHNlcnZlclNldHRpbmdzLnNwZWVkLmVjb25vbXksXHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJQb3NpdGlvbkJvb3N0OiBzZXJ2ZXJTZXR0aW5ncy5yZXNvdXJjZVByb2R1Y3Rpb24ucHJvZHVjdGlvbkZhY3RvckJvbnVzLmNyeXN0YWwsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBtaW5lUHJvZHVjdGlvbjogQ3J5c3RhbE1pbmUuZ2V0UHJvZHVjdGlvbihsZXZlbENyeXN0YWxNaW5lLCBwcm9kdWN0aW9uQnVpbGRpbmdEZXBlbmRlbmNpZXMpLFxyXG4gICAgICAgICAgICBpdGVtQm9udXNQcm9kdWN0aW9uRmFjdG9yOiBnZXRJdGVtQm9udXMoUmVzb3VyY2VUeXBlLmNyeXN0YWwsIHBsYW5ldC5hY3RpdmVJdGVtcyksXHJcbiAgICAgICAgICAgIC4uLmJhc2VQcm9kdWN0aW9uQ29uZmlnLFxyXG4gICAgICAgICAgICBsaWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yOiBiYXNlUHJvZHVjdGlvbkNvbmZpZy5saWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yLmNyeXN0YWwsXHJcbiAgICAgICAgICAgIGxpZmVmb3JtVGVjaG5vbG9neUJvbnVzUHJvZHVjdGlvbkZhY3RvcjogYmFzZVByb2R1Y3Rpb25Db25maWcubGlmZWZvcm1UZWNobm9sb2d5Qm9udXNQcm9kdWN0aW9uRmFjdG9yLmNyeXN0YWwsXHJcbiAgICAgICAgICAgIGZ1c2lvblJlYWN0b3JDb25zdW1wdGlvbjogMCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBlbXBpcmVQcm9kdWN0aW9uUGxhbmV0U3RhdGVzLmRldXRlcml1bVtwbGFuZXQuaWRdID0ge1xyXG4gICAgICAgICAgICBiYXNlUHJvZHVjdGlvbjogMCxcclxuICAgICAgICAgICAgbWluZVByb2R1Y3Rpb246IERldXRlcml1bVN5bnRoZXNpemVyLmdldFByb2R1Y3Rpb24obGV2ZWxEZXV0ZXJpdW1TeW50aGVzaXplciwgcHJvZHVjdGlvbkJ1aWxkaW5nRGVwZW5kZW5jaWVzKSxcclxuICAgICAgICAgICAgaXRlbUJvbnVzUHJvZHVjdGlvbkZhY3RvcjogZ2V0SXRlbUJvbnVzKFJlc291cmNlVHlwZS5kZXV0ZXJpdW0sIHBsYW5ldC5hY3RpdmVJdGVtcyksXHJcbiAgICAgICAgICAgIC4uLmJhc2VQcm9kdWN0aW9uQ29uZmlnLFxyXG4gICAgICAgICAgICBsaWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yOiBiYXNlUHJvZHVjdGlvbkNvbmZpZy5saWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yLmRldXRlcml1bSxcclxuICAgICAgICAgICAgbGlmZWZvcm1UZWNobm9sb2d5Qm9udXNQcm9kdWN0aW9uRmFjdG9yOiBiYXNlUHJvZHVjdGlvbkNvbmZpZy5saWZlZm9ybVRlY2hub2xvZ3lCb251c1Byb2R1Y3Rpb25GYWN0b3IuZGV1dGVyaXVtLFxyXG4gICAgICAgICAgICBmdXNpb25SZWFjdG9yQ29uc3VtcHRpb246IEZ1c2lvblJlYWN0b3IuZ2V0Q29uc3VtcHRpb24obGV2ZWxGdXNpb25SZWFjdG9yLCBwcm9kdWN0aW9uQnVpbGRpbmdEZXBlbmRlbmNpZXMpLmRldXRlcml1bSxcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZW1waXJlUHJvZHVjdGlvbkJyZWFrZG93bnM6IEVtcGlyZVByb2R1Y3Rpb25CcmVha2Rvd25zID0ge1xyXG4gICAgICAgIG1ldGFsOiBuZXcgRW1waXJlUHJvZHVjdGlvbkJyZWFrZG93bihcclxuICAgICAgICAgICAgUmVzb3VyY2VUeXBlLm1ldGFsLFxyXG4gICAgICAgICAgICBwbGFzbWFUZWNoTGV2ZWwsXHJcbiAgICAgICAgICAgIGVtcGlyZS5wbGF5ZXJDbGFzcyxcclxuICAgICAgICAgICAgZW1waXJlLmFsbGlhbmNlQ2xhc3MsXHJcbiAgICAgICAgICAgIGVtcGlyZS5vZmZpY2Vycy5nZW9sb2dpc3QsXHJcbiAgICAgICAgICAgIGhhc0NvbW1hbmRTdGFmZihlbXBpcmUub2ZmaWNlcnMpLFxyXG4gICAgICAgICAgICBwcm9kdWN0aW9uU2VydmVyU2V0dGluZ3MsXHJcbiAgICAgICAgICAgIGVtcGlyZVByb2R1Y3Rpb25QbGFuZXRTdGF0ZXMubWV0YWwsXHJcbiAgICAgICAgKSxcclxuICAgICAgICBjcnlzdGFsOiBuZXcgRW1waXJlUHJvZHVjdGlvbkJyZWFrZG93bihcclxuICAgICAgICAgICAgUmVzb3VyY2VUeXBlLmNyeXN0YWwsXHJcbiAgICAgICAgICAgIHBsYXNtYVRlY2hMZXZlbCxcclxuICAgICAgICAgICAgZW1waXJlLnBsYXllckNsYXNzLFxyXG4gICAgICAgICAgICBlbXBpcmUuYWxsaWFuY2VDbGFzcyxcclxuICAgICAgICAgICAgZW1waXJlLm9mZmljZXJzLmdlb2xvZ2lzdCxcclxuICAgICAgICAgICAgaGFzQ29tbWFuZFN0YWZmKGVtcGlyZS5vZmZpY2VycyksXHJcbiAgICAgICAgICAgIHByb2R1Y3Rpb25TZXJ2ZXJTZXR0aW5ncyxcclxuICAgICAgICAgICAgZW1waXJlUHJvZHVjdGlvblBsYW5ldFN0YXRlcy5jcnlzdGFsLFxyXG4gICAgICAgICksXHJcbiAgICAgICAgZGV1dGVyaXVtOiBuZXcgRW1waXJlUHJvZHVjdGlvbkJyZWFrZG93bihcclxuICAgICAgICAgICAgUmVzb3VyY2VUeXBlLmRldXRlcml1bSxcclxuICAgICAgICAgICAgcGxhc21hVGVjaExldmVsLFxyXG4gICAgICAgICAgICBlbXBpcmUucGxheWVyQ2xhc3MsXHJcbiAgICAgICAgICAgIGVtcGlyZS5hbGxpYW5jZUNsYXNzLFxyXG4gICAgICAgICAgICBlbXBpcmUub2ZmaWNlcnMuZ2VvbG9naXN0LFxyXG4gICAgICAgICAgICBoYXNDb21tYW5kU3RhZmYoZW1waXJlLm9mZmljZXJzKSxcclxuICAgICAgICAgICAgcHJvZHVjdGlvblNlcnZlclNldHRpbmdzLFxyXG4gICAgICAgICAgICBlbXBpcmVQcm9kdWN0aW9uUGxhbmV0U3RhdGVzLmRldXRlcml1bSxcclxuICAgICAgICApLFxyXG5cclxuICAgICAgICBnZXRUb3RhbChpbmNsdWRlQ29uc3VtcHRpb24gPSBmYWxzZSk6IENvc3Qge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbWV0YWw6IHRoaXMubWV0YWwuZ2V0VG90YWwoaW5jbHVkZUNvbnN1bXB0aW9uKSxcclxuICAgICAgICAgICAgICAgIGNyeXN0YWw6IHRoaXMuY3J5c3RhbC5nZXRUb3RhbChpbmNsdWRlQ29uc3VtcHRpb24pLFxyXG4gICAgICAgICAgICAgICAgZGV1dGVyaXVtOiB0aGlzLmRldXRlcml1bS5nZXRUb3RhbChpbmNsdWRlQ29uc3VtcHRpb24pLFxyXG4gICAgICAgICAgICAgICAgZW5lcmd5OiAwLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBlbXBpcmVQcm9kdWN0aW9uQnJlYWtkb3ducztcclxufSIsImltcG9ydCB7IFBsYW5ldERhdGEgfSBmcm9tIFwiQC9zaGFyZWQvbW9kZWxzL2VtcGlyZS9QbGFuZXREYXRhXCI7XHJcbmltcG9ydCB7IFBsYXllckNsYXNzIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9jbGFzc2VzL1BsYXllckNsYXNzXCI7XHJcbmltcG9ydCB7IGFkZENvc3QsIENvc3QgfSBmcm9tIFwiQC9zaGFyZWQvbW9kZWxzL29nYW1lL2NvbW1vbi9Db3N0XCI7XHJcbmltcG9ydCB7IExpZmVmb3JtVGVjaG5vbG9neUJvbnVzTGlmZWZvcm1CdWlsZGluZ3NCeUxpZmVmb3JtLCBSZXNvdXJjZVByb2R1Y3Rpb25Cb251c0xpZmVmb3JtQnVpbGRpbmdzQnlMaWZlZm9ybSB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL2J1aWxkaW5ncy9MaWZlZm9ybUJ1aWxkaW5nc1wiO1xyXG5pbXBvcnQgeyBMaWZlZm9ybVRlY2hub2xvZ3lUeXBlLCBMaWZlZm9ybVRlY2hub2xvZ3lUeXBlcyB9IGZyb20gXCJAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL0xpZmVmb3JtVGVjaG5vbG9neVR5cGVcIjtcclxuaW1wb3J0IHsgQ2xhc3NCb251c0xpZmVmb3JtVGVjaG5vbG9naWVzLCBSZXNvdXJjZVByb2R1Y3Rpb25Cb251c0xpZmVmb3JtVGVjaG5vbG9naWVzIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvdGVjaG5vbG9naWVzL0xpZmVmb3JtVGVjaG5vbG9naWVzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVJlY29yZCB9IGZyb20gXCJAL3NoYXJlZC91dGlscy9jcmVhdGVSZWNvcmRcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQbGFuZXRDb2xsZWN0b3JDbGFzc0JvbnVzRmFjdG9yKHBsYW5ldDogUGxhbmV0RGF0YSk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gQ2xhc3NCb251c0xpZmVmb3JtVGVjaG5vbG9naWVzXHJcbiAgICAgICAgLmZpbHRlcih0ZWNoID0+IHBsYW5ldC5hY3RpdmVMaWZlZm9ybVRlY2hub2xvZ2llcy5pbmNsdWRlcyh0ZWNoLnR5cGUpKVxyXG4gICAgICAgIC5yZWR1Y2UoXHJcbiAgICAgICAgICAgICh0b3RhbCwgdGVjaCkgPT4gdG90YWwgKyB0ZWNoLmdldENsYXNzQm9udXMoUGxheWVyQ2xhc3MuY29sbGVjdG9yLCBwbGFuZXQubGlmZWZvcm1UZWNobm9sb2dpZXNbdGVjaC50eXBlXSksXHJcbiAgICAgICAgICAgIDBcclxuICAgICAgICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGxhbmV0TGlmZWZvcm1UZWNobm9sb2d5Qm9vc3QocGxhbmV0OiBQbGFuZXREYXRhKTogUmVjb3JkPExpZmVmb3JtVGVjaG5vbG9neVR5cGUsIG51bWJlcj4ge1xyXG4gICAgcmV0dXJuIGNyZWF0ZVJlY29yZChMaWZlZm9ybVRlY2hub2xvZ3lUeXBlcyxcclxuICAgICAgICB0ZWNobm9sb2d5ID0+IExpZmVmb3JtVGVjaG5vbG9neUJvbnVzTGlmZWZvcm1CdWlsZGluZ3NCeUxpZmVmb3JtW3BsYW5ldC5hY3RpdmVMaWZlZm9ybV1cclxuICAgICAgICAgICAgLm1hcChidWlsZGluZyA9PiBidWlsZGluZy5nZXRMaWZlZm9ybVRlY2hub2xvZ3lCb251cyh0ZWNobm9sb2d5LCBwbGFuZXQubGlmZWZvcm1CdWlsZGluZ3NbYnVpbGRpbmcudHlwZV0pKVxyXG4gICAgICAgICAgICAucmVkdWNlKCh0b3RhbCwgY3VyKSA9PiB0b3RhbCArIGN1ciwgMClcclxuICAgICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQbGFuZXRMaWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yKHBsYW5ldDogUGxhbmV0RGF0YSk6IENvc3Qge1xyXG4gICAgcmV0dXJuIFJlc291cmNlUHJvZHVjdGlvbkJvbnVzTGlmZWZvcm1CdWlsZGluZ3NCeUxpZmVmb3JtW3BsYW5ldC5hY3RpdmVMaWZlZm9ybV0ucmVkdWNlPENvc3Q+KFxyXG4gICAgICAgICh0b3RhbCwgYnVpbGRpbmcpID0+IGFkZENvc3QodG90YWwsIGJ1aWxkaW5nLmdldFByb2R1Y3Rpb25Cb251cyhwbGFuZXQubGlmZWZvcm1CdWlsZGluZ3NbYnVpbGRpbmcudHlwZV0pKSxcclxuICAgICAgICB7IG1ldGFsOiAwLCBjcnlzdGFsOiAwLCBkZXV0ZXJpdW06IDAsIGVuZXJneTogMCB9LFxyXG4gICAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFBsYW5ldExpZmVmb3JtVGVjaG5vbG9neUJvbnVzUHJvZHVjdGlvbkZhY3RvcihwbGFuZXQ6IFBsYW5ldERhdGEpOiBSZWNvcmQ8a2V5b2YgQ29zdCwgUmVjb3JkPExpZmVmb3JtVGVjaG5vbG9neVR5cGUsIG51bWJlcj4+IHtcclxuICAgIHJldHVybiBSZXNvdXJjZVByb2R1Y3Rpb25Cb251c0xpZmVmb3JtVGVjaG5vbG9naWVzXHJcbiAgICAgICAgLmZpbHRlcih0ZWNoID0+IHBsYW5ldC5hY3RpdmVMaWZlZm9ybVRlY2hub2xvZ2llcy5pbmNsdWRlcyh0ZWNoLnR5cGUpKVxyXG4gICAgICAgIC5yZWR1Y2U8UmVjb3JkPGtleW9mIENvc3QsIFJlY29yZDxMaWZlZm9ybVRlY2hub2xvZ3lUeXBlLCBudW1iZXI+Pj4oXHJcbiAgICAgICAgICAgICh0b3RhbCwgdGVjaCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYm9udXMgPSB0ZWNoLmdldFByb2R1Y3Rpb25Cb251cyhwbGFuZXQubGlmZWZvcm1UZWNobm9sb2dpZXNbdGVjaC50eXBlXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdG90YWwubWV0YWxbdGVjaC50eXBlXSArPSBib251cy5tZXRhbDtcclxuICAgICAgICAgICAgICAgIHRvdGFsLmNyeXN0YWxbdGVjaC50eXBlXSArPSBib251cy5jcnlzdGFsO1xyXG4gICAgICAgICAgICAgICAgdG90YWwuZGV1dGVyaXVtW3RlY2gudHlwZV0gKz0gYm9udXMuZGV1dGVyaXVtO1xyXG4gICAgICAgICAgICAgICAgdG90YWwuZW5lcmd5W3RlY2gudHlwZV0gKz0gYm9udXMuZW5lcmd5O1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0YWw6IGNyZWF0ZVJlY29yZChMaWZlZm9ybVRlY2hub2xvZ3lUeXBlcywgMCksXHJcbiAgICAgICAgICAgICAgICBjcnlzdGFsOiBjcmVhdGVSZWNvcmQoTGlmZWZvcm1UZWNobm9sb2d5VHlwZXMsIDApLFxyXG4gICAgICAgICAgICAgICAgZGV1dGVyaXVtOiBjcmVhdGVSZWNvcmQoTGlmZWZvcm1UZWNobm9sb2d5VHlwZXMsIDApLFxyXG4gICAgICAgICAgICAgICAgZW5lcmd5OiBjcmVhdGVSZWNvcmQoTGlmZWZvcm1UZWNobm9sb2d5VHlwZXMsIDApLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbn0iXSwibmFtZXMiOlsiYm9udXNQZXJMZXZlbCIsImdldExpZmVmb3JtTGV2ZWxUZWNobm9sb2d5Qm9udXMiLCJleHBlcmllbmNlIiwibGV2ZWwiLCJnZXRMaWZlZm9ybUxldmVsIiwiZXhwRm9yTGV2ZWwiLCJnZXRMaWZlZm9ybUV4cGVyaWVuY2VOZWVkZWRGb3JMZXZlbCIsImdldFRlY2hub2xvZ3lCb251c0ZhY3RvciIsImJ1aWxkaW5nQm9vc3QiLCJsZXZlbEJvb3N0IiwiaGFzQ29tbWFuZFN0YWZmIiwib2ZmaWNlcnMiLCJhZG1pcmFsIiwiY29tbWFuZGVyIiwiZW5naW5lZXIiLCJnZW9sb2dpc3QiLCJ0ZWNobm9jcmF0IiwiZ2V0Q3Jhd2xlclByb2R1Y3Rpb25GYWN0b3IiLCJwbGF5ZXJDbGFzcyIsImNvbGxlY3RvckNyYXdsZXJQcm9kdWN0aW9uRmFjdG9yQm9udXMiLCJjb2xsZWN0b3JDbGFzc0JvbnVzIiwiY3Jhd2xlclByb2R1Y3Rpb25Cb251cyIsImdldENyeXN0YWxQcm9kdWN0aW9uQm9vc3QiLCJwb3NpdGlvbiIsInNlcnZlclBvc2l0aW9uQm9vc3QiLCJwb3MxIiwicG9zMiIsInBvczMiLCJkZWZhdWx0IiwiZ2V0Q3J5c3RhbEJhc2VQcm9kdWN0aW9uIiwiZGVwZW5kZW5jaWVzIiwiYm9vc3QiLCJwbGFuZXRQb3NpdGlvbiIsImJhc2VQcm9kdWN0aW9uIiwic2VydmVyRWNvbm9teVNwZWVkIiwiTWF0aCIsInRydW5jIiwiZ2V0SXRlbUJvbnVzIiwicmVzb3VyY2UiLCJhY3RpdmVJdGVtcyIsIm5vdyIsIkRhdGUiLCJpdGVtczEwIiwiaXRlbXMyMCIsIml0ZW1zMzAiLCJpdGVtczQwIiwic29tZSIsImhhc2giLCJpc0l0ZW1BY3RpdmUiLCJpdGVtRXhwaXJhdGlvbiIsImdldE1heEFjdGl2ZUNyYXdsZXJzIiwibWV0YWxNaW5lTGV2ZWwiLCJjcnlzdGFsTWluZUxldmVsIiwiZGV1dGVyaXVtU3ludGhlc2l6ZXJMZXZlbCIsImlzQ29sbGVjdG9yIiwiaGFzR2VvbG9naXN0Iiwic2VydmVyU2V0dGluZ3NfZ2VvbG9naXN0QWN0aXZlQ3Jhd2xlckZhY3RvckJvbnVzIiwibWF4Q3Jhd2xlckZhY3RvciIsImNyYXdsZXJzUGVyTGV2ZWwiLCJtYXhDcmF3bGVycyIsImZsb29yIiwiZ2V0TWV0YWxQcm9kdWN0aW9uQm9vc3QiLCJnZXRNZXRhbEJhc2VQcm9kdWN0aW9uIiwiR2VvbG9naXN0UHJvZHVjdGlvbkJvbnVzIiwiQ29tbWFuZFN0YWZmUHJvZHVjdGlvbkJvbnVzIiwiUGxhc21hVGVjaG5vbG9neVByb2R1Y3Rpb25Cb251cyIsIlJlc291cmNlVHlwZSIsIkFsbGlhbmNlQ2xhc3NUcmFkZXJQcm9kdWN0aW9uQm9udXMiLCJnZXRDcmF3bGVyQm9vc3QiLCJkYXRhIiwibGV2ZWxNZXRhbE1pbmUiLCJsZXZlbENyeXN0YWxNaW5lIiwibGV2ZWxEZXV0ZXJpdW1TeW50aGVzaXplciIsIlBsYXllckNsYXNzIiwic2VydmVyU2V0dGluZ3MiLCJnZW9sb2dpc3RBY3RpdmVDcmF3bGVyRmFjdG9yQm9udXMiLCJsaWZlZm9ybVRlY2hub2xvZ2llcyIsImNyYXdsZXJDb3VudCIsIm1pbiIsImF2YWlsYWJsZUNyYXdsZXJzIiwiY3Jhd2xlclByb2R1Y3Rpdml0eSIsInBvdGVudGlhbENyYXdsZXJCb29zdCIsImNyYXdsZXJQcm9kdWN0aW9uRmFjdG9yUGVyVW5pdCIsImNyYXdsZXJQcm9kdWN0aW9uU2V0dGluZyIsImNyYXdsZXJNYXhQcm9kdWN0aW9uRmFjdG9yIiwiRW1waXJlUHJvZHVjdGlvbkJyZWFrZG93biIsInBsYXNtYVRlY2hub2xvZ3lMZXZlbCIsImFsbGlhbmNlQ2xhc3MiLCJjb21tYW5kU3RhZmYiLCJwbGFuZXRzIiwidGhpcyIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJpZCIsImdldExpZmVmb3JtQm9udXNGYWN0b3JzIiwiY29sbGVjdG9yQ2xhc3NCb251c0ZhY3RvciIsImxpZmVmb3JtVGVjaG5vbG9neVByb2R1Y3Rpb25Cb251c0ZhY3RvciIsImxpZmVmb3JtVGVjaG5vbG9neUNyYXdsZXJQcm9kdWN0aW9uQm9udXNGYWN0b3IiLCJmb3JFYWNoIiwicGxhbmV0SWQiLCJwbGFuZXQiLCJsaWZlZm9ybVRlY2hub2xvZ3lCb29zdCIsIkxpZmVmb3JtVGVjaG5vbG9neVR5cGUiLCJsaWZlZm9ybUV4cGVyaWVuY2VCb29zdCIsInBydWRjdGlvbkJvbnVzVGVjaG5vbG9neSIsImxpZmVmb3JtVGVjaG5vbG9neUJvbnVzUHJvZHVjdGlvbkZhY3RvciIsInR5cGUiLCJhZGRQbGFuZXQiLCJwbGFuZXRTdGF0ZSIsInB1c2giLCJnZXRQcm9kdWN0aW9uQnJlYWtkb3duIiwiZ2xvYmFsQm9udXNlcyIsIm1pbmVQcm9kdWN0aW9uIiwicGxheWVyQ2xhc3NGYWN0b3IiLCJjb2xsZWN0b3JQcm9kdWN0aW9uRmFjdG9yIiwiYWxsaWFuY2VDbGFzc0ZhY3RvciIsIkFsbGlhbmNlQ2xhc3MiLCJnZW9sb2dpc3RGYWN0b3IiLCJjb21tYW5kU3RhZmZGYWN0b3IiLCJjcmF3bGVyQ29uZmlnIiwiY3Jhd2xlcnMiLCJjcmF3bGVyUHJvZHVjdGlvbkZhY3RvciIsImF2YWlsYWJsZSIsInRvdGFsTWluZUxldmVsIiwicGVyY2VudGFnZSIsInBsYXNtYVRlY2hub2xvZ3lQcm9kdWN0aW9uIiwiY3Jhd2xlclByb2R1Y3Rpb24iLCJwbGF5ZXJDbGFzc1Byb2R1Y3Rpb24iLCJhbGxpYW5jZUNsYXNzUHJvZHVjdGlvbiIsImdlb2xvZ2lzdFByb2R1Y3Rpb24iLCJjb21tYW5kU3RhZmZQcm9kdWN0aW9uIiwiaXRlbVByb2R1Y3Rpb24iLCJpdGVtQm9udXNQcm9kdWN0aW9uRmFjdG9yIiwibGlmZWZvcm1CdWlsZGluZ3NQcm9kdWN0aW9uIiwibGlmZWZvcm1CdWlsZGluZ0JvbnVzUHJvZHVjdGlvbkZhY3RvciIsImxpZmVmb3JtVGVjaG5vbG9naWVzUHJvZHVjdGlvbiIsInRvdGFsIiwiZ2V0VG90YWwiLCJpbmNsdWRlQ29uc3VtcHRpb24iLCJyZWR1Y2UiLCJjb25zdW1wdGlvbiIsImZ1c2lvblJlYWN0b3JDb25zdW1wdGlvbiIsImdldEF2ZXJhZ2UiLCJsZW5ndGgiLCJjbG9uZSIsInBsYW5ldFN0YXRlc0Nsb25lIiwiZ2V0UGxhbmV0TGlmZWZvcm1UZWNobm9sb2d5Q3Jhd2xlclByb2R1Y3Rpb25Cb251c0ZhY3RvciIsInRlY2giLCJhY3RpdmVMaWZlZm9ybVRlY2hub2xvZ2llcyIsImluY2x1ZGVzIiwiZ2V0Q3Jhd2xlclByb2R1Y3Rpb25Cb251cyIsImdldFByb2R1Y3Rpb25CcmVha2Rvd25zIiwiZW1waXJlIiwibGlmZWZvcm1FeHBlcmllbmNlIiwidmFsdWVzIiwiZmlsdGVyIiwiaXNNb29uIiwicGxhc21hVGVjaExldmVsIiwicmVzZWFyY2giLCJwcm9kdWN0aW9uU2VydmVyU2V0dGluZ3MiLCJwbGF5ZXJDbGFzc2VzIiwiY29sbGVjdG9yIiwicHJvZHVjdGlvbkZhY3RvckJvbnVzIiwicHJvZHVjdGlvbkJvb3N0RmFjdG9yUGVyVW5pdCIsIm1heFByb2R1Y3Rpb25GYWN0b3IiLCJlbXBpcmVQcm9kdWN0aW9uUGxhbmV0U3RhdGVzIiwibWV0YWwiLCJjcnlzdGFsIiwiZGV1dGVyaXVtIiwibGlmZWZvcm1YcEJvb3N0IiwibGYiLCJidWlsZGluZ3MiLCJsZXZlbEZ1c2lvblJlYWN0b3IiLCJzaGlwcyIsInByb2R1Y3Rpb25TZXR0aW5ncyIsImJhc2VQcm9kdWN0aW9uQ29uZmlnIiwiYWN0aXZlTGlmZWZvcm0iLCJwcm9kdWN0aW9uQnVpbGRpbmdEZXBlbmRlbmNpZXMiLCJjb29yZGluYXRlcyIsInRlbXBlcmF0dXJlIiwibWF4VGVtcGVyYXR1cmUiLCJlY29ub215U3BlZWQiLCJzcGVlZCIsImVjb25vbXkiLCJjcnlzdGFsQm9vc3QiLCJyZXNvdXJjZVByb2R1Y3Rpb24iLCJtZXRhbE1pbmUiLCJjcnlzdGFsTWluZSIsImRldXRlcml1bVN5bnRoZXNpemVyIiwiZnVzaW9uUmVhY3RvciIsImVtcGlyZVByb2R1Y3Rpb25CcmVha2Rvd25zIiwiZW5lcmd5IiwiZ2V0UGxhbmV0Q29sbGVjdG9yQ2xhc3NCb251c0ZhY3RvciIsImdldENsYXNzQm9udXMiLCJnZXRQbGFuZXRMaWZlZm9ybVRlY2hub2xvZ3lCb29zdCIsInRlY2hub2xvZ3kiLCJidWlsZGluZyIsImdldExpZmVmb3JtVGVjaG5vbG9neUJvbnVzIiwibGlmZWZvcm1CdWlsZGluZ3MiLCJjdXIiLCJnZXRQbGFuZXRMaWZlZm9ybUJ1aWxkaW5nQm9udXNQcm9kdWN0aW9uRmFjdG9yIiwiZ2V0UHJvZHVjdGlvbkJvbnVzIiwiZ2V0UGxhbmV0TGlmZWZvcm1UZWNobm9sb2d5Qm9udXNQcm9kdWN0aW9uRmFjdG9yIiwiYm9udXMiXSwic291cmNlUm9vdCI6IiJ9