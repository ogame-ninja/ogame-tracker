"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[604],{7757:(e,s,r)=>{r.r(s),r.d(s,{default:()=>$});var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",[r("select",{directives:[{name:"model",rawName:"v-model.number",value:e.playerClass,expression:"playerClass",modifiers:{number:!0}}],staticStyle:{display:"block","margin-bottom":"4px"},on:{change:function(s){var r=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(s){var r="_value"in s?s._value:s.value;return e._n(r)}));e.playerClass=s.target.multiple?r:r[0]}}},e._l(e.PlayerClasses,(function(s){return r("option",{key:s,domProps:{value:s,textContent:e._s(e.$i18n.$t.extension.playerClasses[s])}})})),0),r("grid-table",{attrs:{inline:"",columns:e.classBonusesColumns,items:e.classBonusesRows},scopedSlots:e._u([{key:"cell-base",fn:function(e){var s=e.value,t=e.item;return[t.isPercentage?r("decimal-number",{attrs:{value:100*s,suffix:"%",digits:3,"fade-decimals":!1}}):r("decimal-number",{attrs:{value:s,digits:s%1==0?0:3}})]}},{key:"cell-actual",fn:function(e){var s=e.value,t=e.item;return[t.isPercentage?r("decimal-number",{attrs:{value:100*s,suffix:"%",digits:3,"fade-decimals":!1}}):r("decimal-number",{attrs:{value:s,digits:s%1==0?0:3,"fade-decimals":!1}})]}}])}),r("hr"),r("lifeform-bonuses-breakdown",{attrs:{types:e.bonusTypes,technologies:e.techs,planets:e.planets,limits:e.limits}})],1)},a=[],l=r(655),i=r(147),n=r(3418),o=r(4846),c=r(9751),u=r(8395),p=r(1786),g=r(4028),h=r(7385),m=r(602),d=r(7076),y=r(7848),C=r(7377);let f=class extends g.w3{get serverSettings(){return d.s.serverSettings}get classBonusesRows(){const e=Object.values(this.planets).reduce(((e,s)=>e+s.reduce(((e,s)=>e+s.bonuses.classBonus.total),0)),0);switch(this.playerClass){case m.D0.collector:return this.getCollectorClassBonusesRows(e);case m.D0.discoverer:return this.getDiscovererClassBonusesRows(e);case m.D0.general:return this.getGeneralClassBonusesRows(e)}throw new Error("invalid player class")}get limits(){const e=(0,y.K)({type:C.f.PlayerClassBonus,playerClass:this.playerClass});return{classBonus:s=>null!=e?Math.min(s,e):s}}getCollectorClassBonusesRows(e){const s=1+e;return[{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.collector.productionBonus,base:this.serverSettings.playerClasses.collector.productionFactorBonus,actual:this.serverSettings.playerClasses.collector.productionFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.collector.energyProductionBonus,base:this.serverSettings.playerClasses.collector.energyProductionFactorBonus,actual:this.serverSettings.playerClasses.collector.energyProductionFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.collector.transporterSpeedBonus,base:this.serverSettings.playerClasses.collector.tradingShips.speedFactorBonus,actual:this.serverSettings.playerClasses.collector.tradingShips.speedFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.collector.transporterCargoBonus,base:this.serverSettings.playerClasses.collector.tradingShips.cargoCapacityFactorBonus,actual:this.serverSettings.playerClasses.collector.tradingShips.cargoCapacityFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.collector.crawlerProductionBonus,base:this.serverSettings.playerClasses.collector.crawlers.productionFactorBonus,actual:this.serverSettings.playerClasses.collector.crawlers.productionFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.collector.geologistCrawlerAmountBonus,base:this.serverSettings.playerClasses.collector.crawlers.geologistActiveCrawlerFactorBonus,actual:this.serverSettings.playerClasses.collector.crawlers.geologistActiveCrawlerFactorBonus*s,isPercentage:!0}]}getDiscovererClassBonusesRows(e){const s=1+e;return[{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.discoverer.researchDuration,base:-this.serverSettings.playerClasses.discoverer.researchSpeedFactor,actual:-this.serverSettings.playerClasses.discoverer.researchSpeedFactor*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.discoverer.increasedExpeditionFinds,base:this.serverSettings.playerClasses.discoverer.expeditions.outcomeFactorBonus,actual:this.serverSettings.playerClasses.discoverer.expeditions.outcomeFactorBonus*(1+3*e),isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.discoverer.largerPlanets,base:this.serverSettings.playerClasses.discoverer.planetSizeFactorBonus,actual:this.serverSettings.playerClasses.discoverer.planetSizeFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.discoverer.additionalExpeditionSlots,base:this.serverSettings.playerClasses.discoverer.bonusExpeditionSlots,actual:this.serverSettings.playerClasses.discoverer.bonusExpeditionSlots*s,isPercentage:!1},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.discoverer.reducedExpeditionCombatChance,base:-.5,actual:-.5*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.discoverer.phalanxRange,base:this.serverSettings.playerClasses.discoverer.phalanxRangeFactorBonus,actual:this.serverSettings.playerClasses.discoverer.phalanxRangeFactorBonus*s,isPercentage:!0}]}getGeneralClassBonusesRows(e){const s=1+e;return[{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.general.combatShipSpeed,base:this.serverSettings.playerClasses.general.combatShipSpeedFactorBonus,actual:this.serverSettings.playerClasses.general.combatShipSpeedFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.general.recyclerSpeed,base:this.serverSettings.playerClasses.general.recyclers.speedFactorBonus,actual:this.serverSettings.playerClasses.general.recyclers.speedFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.general.fuelConsumption,base:-this.serverSettings.playerClasses.general.deuteriumConsumptionFactorReduction,actual:-this.serverSettings.playerClasses.general.deuteriumConsumptionFactorReduction*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.general.increasedCargoRecyclersPathfinders,base:this.serverSettings.playerClasses.general.recyclers.cargoCapacityFactorBonus,actual:this.serverSettings.playerClasses.general.recyclers.cargoCapacityFactorBonus*s,isPercentage:!0},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.general.additionalCombatResearchLevels,base:2,actual:2*s,isPercentage:!1},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.general.additionalFleetSlots,base:this.serverSettings.playerClasses.general.bonusFleetSlots,actual:this.serverSettings.playerClasses.general.bonusFleetSlots*s,isPercentage:!1},{label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.general.additionalMoonFields,base:this.serverSettings.playerClasses.general.bonusMoonFields,actual:this.serverSettings.playerClasses.general.bonusMoonFields*s,isPercentage:!1}]}classBonusesColumns=[{key:"label",label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.bonus},{key:"base",label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.baseValue},{key:"actual",label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.valueWithBonuses}];playerClass=m.D0.collector;PlayerClasses=m.xU;mounted(){this.playerClass=u.p.empire.playerClass==m.D0.none?m.D0.collector:u.p.empire.playerClass}bonusTypes=[{key:"classBonus",label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.playerClasses.classBonus}];technologies=o._i;get techs(){return this.technologies.filter((e=>e.appliesTo(this.playerClass))).map((e=>e.type))}get planets(){return(0,c.r)(u.p.empire.planetOrder.map((e=>u.p.empire.planets[e])).filter((e=>!e.isMoon)),(e=>e.id),(e=>this.technologies.filter((e=>e.appliesTo(this.playerClass))).map((s=>{const r=this.getPlanetBonus(s,e);return{planet:e,technologyType:s.type,bonuses:(0,c.a)(["classBonus"],(e=>({base:r.base,buildings:r.buildings,level:r.level,total:r.total})))}}))))}get experience(){return u.p.lifeformExperience}getPlanetBonus(e,s){if(s.activeLifeform==n.e5.none||!s.activeLifeformTechnologies.includes(e.type))return{base:0,level:0,buildings:0,buildingsBoost:0,total:0};const r=Math.min((0,p.io)(s)[e.type],(0,y.K)({type:C.f.LifeformResearchBonusBoost})??Number.MAX_SAFE_INTEGER),t=e.getClassBonus(this.playerClass,s.lifeformTechnologies[e.type]),a=t*(0,i.g1)(this.experience[s.activeLifeform]),l=t*r;return{base:t,level:a,buildings:l,buildingsBoost:r,total:t+a+l}}};f=(0,l.gn)([(0,g.wA)({components:{LifeformBonusesBreakdown:h.Z}})],f);const b=f,v=b;var B=r(1001),S=(0,B.Z)(v,t,a,!1,null,null,null);const $=S.exports}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c3RhdHMvdmlld3MvbGlmZWZvcm1zL2JvbnVzLWJyZWFrZG93bi9QbGF5ZXItQ2xhc3MudnVlP2VmYmUiLCJ3ZWJwYWNrOi8vL3NyYy92aWV3cy9zdGF0cy92aWV3cy9saWZlZm9ybXMvYm9udXMtYnJlYWtkb3duL1BsYXllci1DbGFzcy52dWU/YjcwMyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvdmlld3MvbGlmZWZvcm1zL2JvbnVzLWJyZWFrZG93bi9QbGF5ZXItQ2xhc3MudnVlPzFhOWYiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2xpZmVmb3Jtcy9ib251cy1icmVha2Rvd24vUGxheWVyLUNsYXNzLnZ1ZT82ZWJmIl0sInNvdXJjZXNDb250ZW50IjpbInZhciByZW5kZXIgPSBmdW5jdGlvbiAoKSB7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCdkaXYnLFtfYygnc2VsZWN0Jyx7ZGlyZWN0aXZlczpbe25hbWU6XCJtb2RlbFwiLHJhd05hbWU6XCJ2LW1vZGVsLm51bWJlclwiLHZhbHVlOihfdm0ucGxheWVyQ2xhc3MpLGV4cHJlc3Npb246XCJwbGF5ZXJDbGFzc1wiLG1vZGlmaWVyczp7XCJudW1iZXJcIjp0cnVlfX1dLHN0YXRpY1N0eWxlOntcImRpc3BsYXlcIjpcImJsb2NrXCIsXCJtYXJnaW4tYm90dG9tXCI6XCI0cHhcIn0sb246e1wiY2hhbmdlXCI6ZnVuY3Rpb24oJGV2ZW50KXt2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9IFwiX3ZhbHVlXCIgaW4gbyA/IG8uX3ZhbHVlIDogby52YWx1ZTtyZXR1cm4gX3ZtLl9uKHZhbCl9KTsgX3ZtLnBsYXllckNsYXNzPSRldmVudC50YXJnZXQubXVsdGlwbGUgPyAkJHNlbGVjdGVkVmFsIDogJCRzZWxlY3RlZFZhbFswXX19fSxfdm0uX2woKF92bS5QbGF5ZXJDbGFzc2VzKSxmdW5jdGlvbihwbGF5ZXJDbGFzcyl7cmV0dXJuIF9jKCdvcHRpb24nLHtrZXk6cGxheWVyQ2xhc3MsZG9tUHJvcHM6e1widmFsdWVcIjpwbGF5ZXJDbGFzcyxcInRleHRDb250ZW50XCI6X3ZtLl9zKF92bS4kaTE4bi4kdC5leHRlbnNpb24ucGxheWVyQ2xhc3Nlc1twbGF5ZXJDbGFzc10pfX0pfSksMCksX2MoJ2dyaWQtdGFibGUnLHthdHRyczp7XCJpbmxpbmVcIjpcIlwiLFwiY29sdW1uc1wiOl92bS5jbGFzc0JvbnVzZXNDb2x1bW5zLFwiaXRlbXNcIjpfdm0uY2xhc3NCb251c2VzUm93c30sc2NvcGVkU2xvdHM6X3ZtLl91KFt7a2V5OlwiY2VsbC1iYXNlXCIsZm46ZnVuY3Rpb24ocmVmKXtcbnZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcbnZhciBpdGVtID0gcmVmLml0ZW07XG5yZXR1cm4gWyhpdGVtLmlzUGVyY2VudGFnZSk/X2MoJ2RlY2ltYWwtbnVtYmVyJyx7YXR0cnM6e1widmFsdWVcIjp2YWx1ZSAqIDEwMCxcInN1ZmZpeFwiOlwiJVwiLFwiZGlnaXRzXCI6MyxcImZhZGUtZGVjaW1hbHNcIjpmYWxzZX19KTpfYygnZGVjaW1hbC1udW1iZXInLHthdHRyczp7XCJ2YWx1ZVwiOnZhbHVlLFwiZGlnaXRzXCI6dmFsdWUgJSAxID09IDAgPyAwIDogM319KV19fSx7a2V5OlwiY2VsbC1hY3R1YWxcIixmbjpmdW5jdGlvbihyZWYpe1xudmFyIHZhbHVlID0gcmVmLnZhbHVlO1xudmFyIGl0ZW0gPSByZWYuaXRlbTtcbnJldHVybiBbKGl0ZW0uaXNQZXJjZW50YWdlKT9fYygnZGVjaW1hbC1udW1iZXInLHthdHRyczp7XCJ2YWx1ZVwiOnZhbHVlICogMTAwLFwic3VmZml4XCI6XCIlXCIsXCJkaWdpdHNcIjozLFwiZmFkZS1kZWNpbWFsc1wiOmZhbHNlfX0pOl9jKCdkZWNpbWFsLW51bWJlcicse2F0dHJzOntcInZhbHVlXCI6dmFsdWUsXCJkaWdpdHNcIjp2YWx1ZSAlIDEgPT0gMCA/IDAgOiAzLFwiZmFkZS1kZWNpbWFsc1wiOmZhbHNlfX0pXX19XSl9KSxfYygnaHInKSxfYygnbGlmZWZvcm0tYm9udXNlcy1icmVha2Rvd24nLHthdHRyczp7XCJ0eXBlc1wiOl92bS5ib251c1R5cGVzLFwidGVjaG5vbG9naWVzXCI6X3ZtLnRlY2hzLFwicGxhbmV0c1wiOl92bS5wbGFuZXRzLFwibGltaXRzXCI6X3ZtLmxpbWl0c319KV0sMSl9XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIjx0ZW1wbGF0ZT5cclxuICAgIDxkaXY+XHJcbiAgICAgICAgPHNlbGVjdCB2LW1vZGVsLm51bWJlcj1cInBsYXllckNsYXNzXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNHB4XCI+XHJcbiAgICAgICAgICAgIDxvcHRpb24gdi1mb3I9XCJwbGF5ZXJDbGFzcyBpbiBQbGF5ZXJDbGFzc2VzXCIgOmtleT1cInBsYXllckNsYXNzXCIgOnZhbHVlPVwicGxheWVyQ2xhc3NcIiB2LXRleHQ9XCIkaTE4bi4kdC5leHRlbnNpb24ucGxheWVyQ2xhc3Nlc1twbGF5ZXJDbGFzc11cIiAvPlxyXG4gICAgICAgIDwvc2VsZWN0PlxyXG5cclxuICAgICAgICA8Z3JpZC10YWJsZSBpbmxpbmUgOmNvbHVtbnM9XCJjbGFzc0JvbnVzZXNDb2x1bW5zXCIgOml0ZW1zPVwiY2xhc3NCb251c2VzUm93c1wiPlxyXG4gICAgICAgICAgICA8dGVtcGxhdGUgI2NlbGwtYmFzZT1cInsgdmFsdWUsIGl0ZW0gfVwiPlxyXG4gICAgICAgICAgICAgICAgPGRlY2ltYWwtbnVtYmVyIHYtaWY9XCJpdGVtLmlzUGVyY2VudGFnZVwiIDp2YWx1ZT1cInZhbHVlICogMTAwXCIgc3VmZml4PVwiJVwiIDpkaWdpdHM9XCIzXCIgOmZhZGUtZGVjaW1hbHM9XCJmYWxzZVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8ZGVjaW1hbC1udW1iZXIgdi1lbHNlIDp2YWx1ZT1cInZhbHVlXCIgOmRpZ2l0cz1cInZhbHVlICUgMSA9PSAwID8gMCA6IDNcIiAvPlxyXG4gICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICA8dGVtcGxhdGUgI2NlbGwtYWN0dWFsPVwieyB2YWx1ZSwgaXRlbSB9XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGVjaW1hbC1udW1iZXIgdi1pZj1cIml0ZW0uaXNQZXJjZW50YWdlXCIgOnZhbHVlPVwidmFsdWUgKiAxMDBcIiBzdWZmaXg9XCIlXCIgOmRpZ2l0cz1cIjNcIiA6ZmFkZS1kZWNpbWFscz1cImZhbHNlXCIgLz5cclxuICAgICAgICAgICAgICAgIDxkZWNpbWFsLW51bWJlciB2LWVsc2UgOnZhbHVlPVwidmFsdWVcIiA6ZGlnaXRzPVwidmFsdWUgJSAxID09IDAgPyAwIDogM1wiIDpmYWRlLWRlY2ltYWxzPVwiZmFsc2VcIiAvPlxyXG4gICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgIDwvZ3JpZC10YWJsZT5cclxuXHJcbiAgICAgICAgPGhyIC8+XHJcblxyXG4gICAgICAgIDxsaWZlZm9ybS1ib251c2VzLWJyZWFrZG93biA6dHlwZXM9XCJib251c1R5cGVzXCIgOnRlY2hub2xvZ2llcz1cInRlY2hzXCIgOnBsYW5ldHM9XCJwbGFuZXRzXCIgOmxpbWl0cz1cImxpbWl0c1wiIC8+XHJcbiAgICA8L2Rpdj5cclxuPC90ZW1wbGF0ZT5cclxuXHJcbjxzY3JpcHQgbGFuZz1cInRzXCI+XHJcbiAgICBpbXBvcnQgeyBQbGFuZXREYXRhIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL2VtcGlyZS9QbGFuZXREYXRhJztcclxuICAgIGltcG9ydCB7IGdldExpZmVmb3JtTGV2ZWxUZWNobm9sb2d5Qm9udXMgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL2V4cGVyaWVuY2UnO1xyXG4gICAgaW1wb3J0IHsgTGlmZWZvcm1UZWNobm9sb2d5VHlwZSB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvTGlmZWZvcm1UZWNobm9sb2d5VHlwZSc7XHJcbiAgICBpbXBvcnQgeyBMaWZlZm9ybVR5cGUgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL0xpZmVmb3JtVHlwZSc7XHJcbiAgICBpbXBvcnQgeyBDbGFzc0JvbnVzTGlmZWZvcm1UZWNobm9sb2d5IH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2xpZmVmb3Jtcy90ZWNobm9sb2dpZXMvaW50ZXJmYWNlcyc7XHJcbiAgICBpbXBvcnQgeyBDbGFzc0JvbnVzTGlmZWZvcm1UZWNobm9sb2dpZXMgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL3RlY2hub2xvZ2llcy9MaWZlZm9ybVRlY2hub2xvZ2llcyc7XHJcbiAgICBpbXBvcnQgeyBjcmVhdGVNYXBwZWRSZWNvcmQsIGNyZWF0ZVJlY29yZCB9IGZyb20gJ0Avc2hhcmVkL3V0aWxzL2NyZWF0ZVJlY29yZCc7XHJcbiAgICBpbXBvcnQgeyBFbXBpcmVEYXRhTW9kdWxlIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9kYXRhL0VtcGlyZURhdGFNb2R1bGUnO1xyXG4gICAgaW1wb3J0IHsgZ2V0UGxhbmV0TGlmZWZvcm1UZWNobm9sb2d5Qm9vc3QgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL21vZGVscy9saWZlZm9ybXMnO1xyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuICAgIGltcG9ydCBMaWZlZm9ybUJvbnVzZXNCcmVha2Rvd24sIHsgTGlmZWZvcm1Cb251c2VzQnJlYWtkb3duVHlwZSwgTGlmZWZvcm1Cb251c2VzUGxhbmV0QnJlYWtkb3duIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9jb21wb25lbnRzL2xpZmVmb3Jtcy9MaWZlZm9ybUJvbnVzZXNCcmVha2Rvd24udnVlJztcclxuICAgIGltcG9ydCB7IFBsYXllckNsYXNzLCBTZWxlY3RhYmxlUGxheWVyQ2xhc3NlcyB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9jbGFzc2VzL1BsYXllckNsYXNzJztcclxuICAgIGltcG9ydCB7IEdyaWRUYWJsZUNvbHVtbiB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvY29tcG9uZW50cy9jb21tb24vR3JpZFRhYmxlLnZ1ZSc7XHJcbiAgICBpbXBvcnQgeyBTZXJ2ZXJTZXR0aW5nc0RhdGFNb2R1bGUgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvU2VydmVyU2V0dGluZ3NEYXRhTW9kdWxlJztcclxuaW1wb3J0IHsgZ2V0TGlmZWZvcm1Cb251c0xpbWl0IH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2xpZmVmb3Jtcy9MaWZlZm9ybUJvbnVzTGltaXRzJztcclxuaW1wb3J0IHsgTGlmZWZvcm1Cb251c1R5cGVJZCB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvTGlmZWZvcm1Cb251c1R5cGUnO1xyXG5cclxuICAgIHR5cGUgQ2xhc3NCb251c0JyZWFrZG93biA9IHtcclxuICAgICAgICBiYXNlOiBudW1iZXI7XHJcbiAgICAgICAgbGV2ZWw6IG51bWJlcjtcclxuICAgICAgICBidWlsZGluZ3M6IG51bWJlcjtcclxuICAgICAgICBidWlsZGluZ3NCb29zdDogbnVtYmVyO1xyXG4gICAgICAgIHRvdGFsOiBudW1iZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHR5cGUgQ2xhc3NCb251c1ZhbHVlcyA9IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIGlzUGVyY2VudGFnZTogYm9vbGVhbjtcclxuICAgICAgICBiYXNlOiBudW1iZXI7XHJcbiAgICAgICAgYWN0dWFsOiBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgQENvbXBvbmVudCh7XHJcbiAgICAgICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICAgICBMaWZlZm9ybUJvbnVzZXNCcmVha2Rvd24sXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIGV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllckNsYXNzQm9udXNlcyBleHRlbmRzIFZ1ZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHNlcnZlclNldHRpbmdzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2VydmVyU2V0dGluZ3NEYXRhTW9kdWxlLnNlcnZlclNldHRpbmdzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgY2xhc3NCb251c2VzUm93cygpOiBDbGFzc0JvbnVzVmFsdWVzW10ge1xyXG4gICAgICAgICAgICBjb25zdCB0b3RhbEJvbnVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnBsYW5ldHMpLnJlZHVjZShcclxuICAgICAgICAgICAgICAgICh0b3RhbCwgY3VyKSA9PiB0b3RhbCArIGN1ci5yZWR1Y2UoXHJcbiAgICAgICAgICAgICAgICAgICAgKHRvdGFsLCBjdXIpID0+IHRvdGFsICsgY3VyLmJvbnVzZXMuY2xhc3NCb251cy50b3RhbCxcclxuICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgMCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMucGxheWVyQ2xhc3MpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgUGxheWVyQ2xhc3MuY29sbGVjdG9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbGxlY3RvckNsYXNzQm9udXNlc1Jvd3ModG90YWxCb251cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBQbGF5ZXJDbGFzcy5kaXNjb3ZlcmVyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldERpc2NvdmVyZXJDbGFzc0JvbnVzZXNSb3dzKHRvdGFsQm9udXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgUGxheWVyQ2xhc3MuZ2VuZXJhbDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRHZW5lcmFsQ2xhc3NCb251c2VzUm93cyh0b3RhbEJvbnVzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHBsYXllciBjbGFzcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgbGltaXRzKCk6IFJlY29yZDwnY2xhc3NCb251cycsICh2YWx1ZTogbnVtYmVyKSA9PiBudW1iZXI+IHtcclxuICAgICAgICAgICAgY29uc3QgbGltaXQgPSBnZXRMaWZlZm9ybUJvbnVzTGltaXQoeyB0eXBlOiBMaWZlZm9ybUJvbnVzVHlwZUlkLlBsYXllckNsYXNzQm9udXMsIHBsYXllckNsYXNzOiB0aGlzLnBsYXllckNsYXNzIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzQm9udXM6IHZhbHVlID0+IGxpbWl0ICE9IG51bGwgPyBNYXRoLm1pbih2YWx1ZSwgbGltaXQpIDogdmFsdWUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldENvbGxlY3RvckNsYXNzQm9udXNlc1Jvd3MoY2xhc3NCb251czogbnVtYmVyKTogQ2xhc3NCb251c1ZhbHVlc1tdIHtcclxuICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gMSArIGNsYXNzQm9udXM7XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmVtcGlyZS5saWZlZm9ybXMucmVzZWFyY2hCb251c2VzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLnByb2R1Y3Rpb25Cb251cyxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlOiB0aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLnByb2R1Y3Rpb25GYWN0b3JCb251cyxcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5jb2xsZWN0b3IucHJvZHVjdGlvbkZhY3RvckJvbnVzICogZmFjdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUGVyY2VudGFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmVtcGlyZS5saWZlZm9ybXMucmVzZWFyY2hCb251c2VzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLmVuZXJneVByb2R1Y3Rpb25Cb251cyxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlOiB0aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLmVuZXJneVByb2R1Y3Rpb25GYWN0b3JCb251cyxcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5jb2xsZWN0b3IuZW5lcmd5UHJvZHVjdGlvbkZhY3RvckJvbnVzICogZmFjdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUGVyY2VudGFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmVtcGlyZS5saWZlZm9ybXMucmVzZWFyY2hCb251c2VzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLnRyYW5zcG9ydGVyU3BlZWRCb251cyxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlOiB0aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLnRyYWRpbmdTaGlwcy5zcGVlZEZhY3RvckJvbnVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbDogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci50cmFkaW5nU2hpcHMuc3BlZWRGYWN0b3JCb251cyAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci50cmFuc3BvcnRlckNhcmdvQm9udXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci50cmFkaW5nU2hpcHMuY2FyZ29DYXBhY2l0eUZhY3RvckJvbnVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbDogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci50cmFkaW5nU2hpcHMuY2FyZ29DYXBhY2l0eUZhY3RvckJvbnVzICogZmFjdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUGVyY2VudGFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmVtcGlyZS5saWZlZm9ybXMucmVzZWFyY2hCb251c2VzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLmNyYXdsZXJQcm9kdWN0aW9uQm9udXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci5jcmF3bGVycy5wcm9kdWN0aW9uRmFjdG9yQm9udXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiB0aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLmNyYXdsZXJzLnByb2R1Y3Rpb25GYWN0b3JCb251cyAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci5nZW9sb2dpc3RDcmF3bGVyQW1vdW50Qm9udXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmNvbGxlY3Rvci5jcmF3bGVycy5nZW9sb2dpc3RBY3RpdmVDcmF3bGVyRmFjdG9yQm9udXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiB0aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuY29sbGVjdG9yLmNyYXdsZXJzLmdlb2xvZ2lzdEFjdGl2ZUNyYXdsZXJGYWN0b3JCb251cyAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXREaXNjb3ZlcmVyQ2xhc3NCb251c2VzUm93cyhjbGFzc0JvbnVzOiBudW1iZXIpOiBDbGFzc0JvbnVzVmFsdWVzW10ge1xyXG4gICAgICAgICAgICBjb25zdCBmYWN0b3IgPSAxICsgY2xhc3NCb251cztcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMucGxheWVyQ2xhc3Nlcy5kaXNjb3ZlcmVyLnJlc2VhcmNoRHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogLXRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5kaXNjb3ZlcmVyLnJlc2VhcmNoU3BlZWRGYWN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiAtdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmRpc2NvdmVyZXIucmVzZWFyY2hTcGVlZEZhY3RvciAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmRpc2NvdmVyZXIuaW5jcmVhc2VkRXhwZWRpdGlvbkZpbmRzLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5kaXNjb3ZlcmVyLmV4cGVkaXRpb25zLm91dGNvbWVGYWN0b3JCb251cyxcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5kaXNjb3ZlcmVyLmV4cGVkaXRpb25zLm91dGNvbWVGYWN0b3JCb251cyAqICgxICsgY2xhc3NCb251cyAqIDMpLCAvL1RPRE86IGZpeCBmb3JtdWxhIHdoZW4gZGlzY292ZXJlciBib251cyBmb3JtdWxhIGZpeGVkXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQZXJjZW50YWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMucGxheWVyQ2xhc3Nlcy5kaXNjb3ZlcmVyLmxhcmdlclBsYW5ldHMsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmRpc2NvdmVyZXIucGxhbmV0U2l6ZUZhY3RvckJvbnVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbDogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmRpc2NvdmVyZXIucGxhbmV0U2l6ZUZhY3RvckJvbnVzICogZmFjdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUGVyY2VudGFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmVtcGlyZS5saWZlZm9ybXMucmVzZWFyY2hCb251c2VzLnBsYXllckNsYXNzZXMuZGlzY292ZXJlci5hZGRpdGlvbmFsRXhwZWRpdGlvblNsb3RzLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5kaXNjb3ZlcmVyLmJvbnVzRXhwZWRpdGlvblNsb3RzLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbDogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmRpc2NvdmVyZXIuYm9udXNFeHBlZGl0aW9uU2xvdHMgKiBmYWN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQZXJjZW50YWdlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmVtcGlyZS5saWZlZm9ybXMucmVzZWFyY2hCb251c2VzLnBsYXllckNsYXNzZXMuZGlzY292ZXJlci5yZWR1Y2VkRXhwZWRpdGlvbkNvbWJhdENoYW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlOiAtMC41LCAvL1RPRE86IHZhbHVlIG5vdCBpbiBzZXJ2ZXIgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IC0wLjUgKiBmYWN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQZXJjZW50YWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMucGxheWVyQ2xhc3Nlcy5kaXNjb3ZlcmVyLnBoYWxhbnhSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlOiB0aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuZGlzY292ZXJlci5waGFsYW54UmFuZ2VGYWN0b3JCb251cyxcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5kaXNjb3ZlcmVyLnBoYWxhbnhSYW5nZUZhY3RvckJvbnVzICogZmFjdG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzUGVyY2VudGFnZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldEdlbmVyYWxDbGFzc0JvbnVzZXNSb3dzKGNsYXNzQm9udXM6IG51bWJlcik6IENsYXNzQm9udXNWYWx1ZXNbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IDEgKyBjbGFzc0JvbnVzO1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmdlbmVyYWwuY29tYmF0U2hpcFNwZWVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5nZW5lcmFsLmNvbWJhdFNoaXBTcGVlZEZhY3RvckJvbnVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbDogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmdlbmVyYWwuY29tYmF0U2hpcFNwZWVkRmFjdG9yQm9udXMgKiBmYWN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNQZXJjZW50YWdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMucGxheWVyQ2xhc3Nlcy5nZW5lcmFsLnJlY3ljbGVyU3BlZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmdlbmVyYWwucmVjeWNsZXJzLnNwZWVkRmFjdG9yQm9udXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiB0aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuZ2VuZXJhbC5yZWN5Y2xlcnMuc3BlZWRGYWN0b3JCb251cyAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmdlbmVyYWwuZnVlbENvbnN1bXB0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U6IC10aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuZ2VuZXJhbC5kZXV0ZXJpdW1Db25zdW1wdGlvbkZhY3RvclJlZHVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IC10aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuZ2VuZXJhbC5kZXV0ZXJpdW1Db25zdW1wdGlvbkZhY3RvclJlZHVjdGlvbiAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmdlbmVyYWwuaW5jcmVhc2VkQ2FyZ29SZWN5Y2xlcnNQYXRoZmluZGVycyxcclxuICAgICAgICAgICAgICAgICAgICBiYXNlOiB0aGlzLnNlcnZlclNldHRpbmdzLnBsYXllckNsYXNzZXMuZ2VuZXJhbC5yZWN5Y2xlcnMuY2FyZ29DYXBhY2l0eUZhY3RvckJvbnVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbDogdGhpcy5zZXJ2ZXJTZXR0aW5ncy5wbGF5ZXJDbGFzc2VzLmdlbmVyYWwucmVjeWNsZXJzLmNhcmdvQ2FwYWNpdHlGYWN0b3JCb251cyAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmdlbmVyYWwuYWRkaXRpb25hbENvbWJhdFJlc2VhcmNoTGV2ZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U6IDIsIC8vVE9ETzogbm90IGluIHNlcnZlciBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdHVhbDogMiAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMucGxheWVyQ2xhc3Nlcy5nZW5lcmFsLmFkZGl0aW9uYWxGbGVldFNsb3RzLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5nZW5lcmFsLmJvbnVzRmxlZXRTbG90cyxcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5nZW5lcmFsLmJvbnVzRmxlZXRTbG90cyAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMucGxheWVyQ2xhc3Nlcy5nZW5lcmFsLmFkZGl0aW9uYWxNb29uRmllbGRzLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2U6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5nZW5lcmFsLmJvbnVzTW9vbkZpZWxkcyxcclxuICAgICAgICAgICAgICAgICAgICBhY3R1YWw6IHRoaXMuc2VydmVyU2V0dGluZ3MucGxheWVyQ2xhc3Nlcy5nZW5lcmFsLmJvbnVzTW9vbkZpZWxkcyAqIGZhY3RvcixcclxuICAgICAgICAgICAgICAgICAgICBpc1BlcmNlbnRhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgY2xhc3NCb251c2VzQ29sdW1uczogR3JpZFRhYmxlQ29sdW1uPGtleW9mIENsYXNzQm9udXNWYWx1ZXM+W10gPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGtleTogJ2xhYmVsJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmJvbnVzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrZXk6ICdiYXNlJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLmJhc2VWYWx1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAga2V5OiAnYWN0dWFsJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5wbGF5ZXJDbGFzc2VzLnZhbHVlV2l0aEJvbnVzZXMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBwbGF5ZXJDbGFzcyA9IFBsYXllckNsYXNzLmNvbGxlY3RvcjtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IFBsYXllckNsYXNzZXMgPSBTZWxlY3RhYmxlUGxheWVyQ2xhc3NlcztcclxuXHJcbiAgICAgICAgbW91bnRlZCgpIHtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXJDbGFzcyA9IEVtcGlyZURhdGFNb2R1bGUuZW1waXJlLnBsYXllckNsYXNzID09IFBsYXllckNsYXNzLm5vbmVcclxuICAgICAgICAgICAgICAgID8gUGxheWVyQ2xhc3MuY29sbGVjdG9yXHJcbiAgICAgICAgICAgICAgICA6IEVtcGlyZURhdGFNb2R1bGUuZW1waXJlLnBsYXllckNsYXNzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBib251c1R5cGVzOiBMaWZlZm9ybUJvbnVzZXNCcmVha2Rvd25UeXBlPCdjbGFzc0JvbnVzJz5bXSA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAga2V5OiAnY2xhc3NCb251cycsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMucGxheWVyQ2xhc3Nlcy5jbGFzc0JvbnVzLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdGVjaG5vbG9naWVzOiBDbGFzc0JvbnVzTGlmZWZvcm1UZWNobm9sb2d5W10gPSBDbGFzc0JvbnVzTGlmZWZvcm1UZWNobm9sb2dpZXM7XHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgdGVjaHMoKTogTGlmZWZvcm1UZWNobm9sb2d5VHlwZVtdIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVjaG5vbG9naWVzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHRlY2ggPT4gdGVjaC5hcHBsaWVzVG8odGhpcy5wbGF5ZXJDbGFzcykpXHJcbiAgICAgICAgICAgICAgICAubWFwKHQgPT4gdC50eXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHBsYW5ldHMoKTogUmVjb3JkPG51bWJlciwgTGlmZWZvcm1Cb251c2VzUGxhbmV0QnJlYWtkb3duPCdjbGFzc0JvbnVzJz5bXT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTWFwcGVkUmVjb3JkKFxyXG4gICAgICAgICAgICAgICAgRW1waXJlRGF0YU1vZHVsZS5lbXBpcmUucGxhbmV0T3JkZXJcclxuICAgICAgICAgICAgICAgICAgICAubWFwKGlkID0+IEVtcGlyZURhdGFNb2R1bGUuZW1waXJlLnBsYW5ldHNbaWRdKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIocGxhbmV0ID0+ICFwbGFuZXQuaXNNb29uKSBhcyBQbGFuZXREYXRhW10sXHJcbiAgICAgICAgICAgICAgICBwbGFuZXQgPT4gcGxhbmV0LmlkLFxyXG4gICAgICAgICAgICAgICAgcGxhbmV0ID0+IHRoaXMudGVjaG5vbG9naWVzXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih0ZWNoID0+IHRlY2guYXBwbGllc1RvKHRoaXMucGxheWVyQ2xhc3MpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5tYXA8TGlmZWZvcm1Cb251c2VzUGxhbmV0QnJlYWtkb3duPCdjbGFzc0JvbnVzJz4+KHRlY2ggPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGFuZXRCb251c2VzID0gdGhpcy5nZXRQbGFuZXRCb251cyh0ZWNoLCBwbGFuZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYW5ldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlY2hub2xvZ3lUeXBlOiB0ZWNoLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib251c2VzOiBjcmVhdGVSZWNvcmQ8J2NsYXNzQm9udXMnLCBMaWZlZm9ybUJvbnVzZXNQbGFuZXRCcmVha2Rvd25bJ2JvbnVzZXMnXVtzdHJpbmddPihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2NsYXNzQm9udXMnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IHBsYW5ldEJvbnVzZXMuYmFzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdzOiBwbGFuZXRCb251c2VzLmJ1aWxkaW5ncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IHBsYW5ldEJvbnVzZXMubGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiBwbGFuZXRCb251c2VzLnRvdGFsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZXhwZXJpZW5jZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVtcGlyZURhdGFNb2R1bGUubGlmZWZvcm1FeHBlcmllbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRQbGFuZXRCb251cyh0ZWNoOiBDbGFzc0JvbnVzTGlmZWZvcm1UZWNobm9sb2d5LCBwbGFuZXQ6IFBsYW5ldERhdGEpOiBDbGFzc0JvbnVzQnJlYWtkb3duIHtcclxuICAgICAgICAgICAgaWYgKHBsYW5ldC5hY3RpdmVMaWZlZm9ybSA9PSBMaWZlZm9ybVR5cGUubm9uZSB8fCAhcGxhbmV0LmFjdGl2ZUxpZmVmb3JtVGVjaG5vbG9naWVzLmluY2x1ZGVzKHRlY2gudHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZTogMCxcclxuICAgICAgICAgICAgICAgICAgICBsZXZlbDogMCxcclxuICAgICAgICAgICAgICAgICAgICBidWlsZGluZ3M6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdzQm9vc3Q6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWw6IDAsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBidWlsZGluZ3NCb29zdCA9IE1hdGgubWluKFxyXG4gICAgICAgICAgICAgICAgZ2V0UGxhbmV0TGlmZWZvcm1UZWNobm9sb2d5Qm9vc3QocGxhbmV0KVt0ZWNoLnR5cGVdLFxyXG4gICAgICAgICAgICAgICAgZ2V0TGlmZWZvcm1Cb251c0xpbWl0KHsgdHlwZTogTGlmZWZvcm1Cb251c1R5cGVJZC5MaWZlZm9ybVJlc2VhcmNoQm9udXNCb29zdCB9KSA/PyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VCb251cyA9IHRlY2guZ2V0Q2xhc3NCb251cyh0aGlzLnBsYXllckNsYXNzLCBwbGFuZXQubGlmZWZvcm1UZWNobm9sb2dpZXNbdGVjaC50eXBlXSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpZmVmb3JtTGV2ZWxCb251cyA9IGJhc2VCb251cyAqIGdldExpZmVmb3JtTGV2ZWxUZWNobm9sb2d5Qm9udXModGhpcy5leHBlcmllbmNlW3BsYW5ldC5hY3RpdmVMaWZlZm9ybV0pO1xyXG4gICAgICAgICAgICBjb25zdCBsaWZlZm9ybUJ1aWxkaW5nQm9udXMgPSBiYXNlQm9udXMgKiBidWlsZGluZ3NCb29zdDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiBiYXNlQm9udXMsXHJcbiAgICAgICAgICAgICAgICBsZXZlbDogbGlmZWZvcm1MZXZlbEJvbnVzLFxyXG4gICAgICAgICAgICAgICAgYnVpbGRpbmdzOiBsaWZlZm9ybUJ1aWxkaW5nQm9udXMsXHJcbiAgICAgICAgICAgICAgICBidWlsZGluZ3NCb29zdCxcclxuICAgICAgICAgICAgICAgIHRvdGFsOiBiYXNlQm9udXMgKyBsaWZlZm9ybUxldmVsQm9udXMgKyBsaWZlZm9ybUJ1aWxkaW5nQm9udXMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG48L3NjcmlwdD4iLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vUGxheWVyLUNsYXNzLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1BsYXllci1DbGFzcy52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCIiLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL1BsYXllci1DbGFzcy52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MDlmZDcxMzgmXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vUGxheWVyLUNsYXNzLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vUGxheWVyLUNsYXNzLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIG51bGwsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIl0sIm5hbWVzIjpbInJlbmRlciIsIl92bSIsInRoaXMiLCJfaCIsIiRjcmVhdGVFbGVtZW50IiwiX2MiLCJfc2VsZiIsImRpcmVjdGl2ZXMiLCJuYW1lIiwicmF3TmFtZSIsInZhbHVlIiwiZXhwcmVzc2lvbiIsIm1vZGlmaWVycyIsInN0YXRpY1N0eWxlIiwib24iLCIkZXZlbnQiLCIkJHNlbGVjdGVkVmFsIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmaWx0ZXIiLCJjYWxsIiwidGFyZ2V0Iiwib3B0aW9ucyIsIm8iLCJzZWxlY3RlZCIsIm1hcCIsInZhbCIsIl92YWx1ZSIsIl9uIiwicGxheWVyQ2xhc3MiLCJtdWx0aXBsZSIsIl9sIiwia2V5IiwiZG9tUHJvcHMiLCJfcyIsIiRpMThuIiwiJHQiLCJleHRlbnNpb24iLCJwbGF5ZXJDbGFzc2VzIiwiYXR0cnMiLCJjbGFzc0JvbnVzZXNDb2x1bW5zIiwiY2xhc3NCb251c2VzUm93cyIsInNjb3BlZFNsb3RzIiwiX3UiLCJmbiIsInJlZiIsIml0ZW0iLCJib251c1R5cGVzIiwidGVjaHMiLCJwbGFuZXRzIiwibGltaXRzIiwic3RhdGljUmVuZGVyRm5zIiwiY29tcG9uZW50Il0sInNvdXJjZVJvb3QiOiIifQ==