"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[434],{7835:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("select",{directives:[{name:"model",rawName:"v-model.number",value:e.building,expression:"building",modifiers:{number:!0}}],staticStyle:{display:"block","margin-bottom":"4px"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var i="_value"in t?t._value:t.value;return e._n(i)}));e.building=t.target.multiple?i:i[0]}}},e._l(e.Buildings,(function(t){return i("option",{key:t,domProps:{value:t,textContent:e._s(e.$i18n.$t.ogame.buildings[t])}})})),0),i("lifeform-bonuses-breakdown",{attrs:{types:e.bonusTypes,technologies:e.techs,planets:e.planets,limits:e.limits},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"start"}},[i("span",[i("o-building",{staticClass:"mr-2",attrs:{building:e.building}}),i("span",{domProps:{textContent:e._s(e.$i18n.$t.ogame.buildings[e.building])}})],1)])]},proxy:!0}])})],1)},s=[],o=i(655),l=i(147),r=i(3418),a=i(4846),u=i(9751),c=i(8395),m=i(1786),p=i(4028),g=i(3894),d=i(6864),b=i(1913),f=i(7848),h=i(7377);let y=class extends p.w3{bonusTypes=[{key:"cost",label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.buildingCostTime.cost},{key:"time",label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.buildingCostTime.time}];technologies=a.zd;get techs(){return this.technologies.filter((e=>e.appliesTo(this.building))).map((e=>e.type))}get limits(){const e=(0,f.K)({type:h.f.TechCostReduction,tech:this.building}),t=(0,f.K)({type:h.f.TechTimeReduction,tech:this.building});return{cost:t=>null!=e?Math.max(t,-e):t,time:e=>null!=t?Math.max(e,-t):e}}building=d.A.allianceDepot;Buildings=b.a7.filter((e=>this.technologies.some((t=>t.appliesTo(e)))));get planets(){return(0,u.r)(c.p.empire.planetOrder.map((e=>c.p.empire.planets[e])).filter((e=>!e.isMoon)),(e=>e.id),(e=>this.technologies.map((t=>{const i=this.getPlanetBonus(t,e);return{planet:e,technologyType:t.type,bonuses:(0,u.a)(["cost","time"],(e=>({base:i.base[e],buildings:i.buildings[e],level:i.level[e],total:i.total[e]})))}}))))}get experience(){return c.p.lifeformExperience}getPlanetBonus(e,t){const i={base:{cost:0,time:0},level:{cost:0,time:0},buildings:{cost:0,time:0},buildingsBoost:0,total:{cost:0,time:0}};if(t.activeLifeform==r.e5.none||!t.activeLifeformTechnologies.includes(e.type)||!e.appliesTo(this.building))return i;const n=Math.min((0,m.io)(t),(0,f.K)({type:h.f.LifeformResearchBonusBoost})??Number.MAX_SAFE_INTEGER);i.buildingsBoost+=n;const s=e.getBuildingCostAndTimeReduction(this.building,t.lifeformTechnologies[e.type]),o={cost:"cost",time:"time"};return Object.entries(o).forEach((e=>{const[o,r]=e,a=-1*s[r],u=a*(0,l.g1)(this.experience[t.activeLifeform]),c=a*n,m=a+u+c;i.base[o]+=a,i.level[o]+=u,i.buildings[o]+=c,i.total[o]+=m})),i}};y=(0,o.gn)([(0,p.wA)({components:{LifeformBonusesBreakdown:g.Z}})],y);const v=y,T=v;var x=i(1001),k=(0,x.Z)(T,n,s,!1,null,null,null);const B=k.exports}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvNDM0LjMwYzZlOThlLmpzIiwibWFwcGluZ3MiOiI2SkFBQSxJQUFJQSxFQUFTLFdBQWEsSUFBSUMsRUFBSUMsS0FBU0MsRUFBR0YsRUFBSUcsZUFBbUJDLEVBQUdKLEVBQUlLLE1BQU1ELElBQUlGLEVBQUcsT0FBT0UsRUFBRyxNQUFNLENBQUNBLEVBQUcsU0FBUyxDQUFDRSxXQUFXLENBQUMsQ0FBQ0MsS0FBSyxRQUFRQyxRQUFRLGlCQUFpQkMsTUFBT1QsRUFBWSxTQUFFVSxXQUFXLFdBQVdDLFVBQVUsQ0FBQyxRQUFTLEtBQVFDLFlBQVksQ0FBQyxRQUFVLFFBQVEsZ0JBQWdCLE9BQU9DLEdBQUcsQ0FBQyxPQUFTLFNBQVNDLEdBQVEsSUFBSUMsRUFBZ0JDLE1BQU1DLFVBQVVDLE9BQU9DLEtBQUtMLEVBQU9NLE9BQU9DLFNBQVEsU0FBU0MsR0FBRyxPQUFPQSxFQUFFQyxZQUFXQyxLQUFJLFNBQVNGLEdBQUcsSUFBSUcsRUFBTSxXQUFZSCxFQUFJQSxFQUFFSSxPQUFTSixFQUFFYixNQUFNLE9BQU9ULEVBQUkyQixHQUFHRixNQUFRekIsRUFBSTRCLFNBQVNkLEVBQU9NLE9BQU9TLFNBQVdkLEVBQWdCQSxFQUFjLE1BQU1mLEVBQUk4QixHQUFJOUIsRUFBYSxXQUFFLFNBQVM0QixHQUFVLE9BQU94QixFQUFHLFNBQVMsQ0FBQzJCLElBQUlILEVBQVNJLFNBQVMsQ0FBQyxNQUFRSixFQUFTLFlBQWM1QixFQUFJaUMsR0FBR2pDLEVBQUlrQyxNQUFNQyxHQUFHQyxNQUFNQyxVQUFVVCxVQUFnQixHQUFHeEIsRUFBRyw2QkFBNkIsQ0FBQ2tDLE1BQU0sQ0FBQyxNQUFRdEMsRUFBSXVDLFdBQVcsYUFBZXZDLEVBQUl3QyxNQUFNLFFBQVV4QyxFQUFJeUMsUUFBUSxPQUFTekMsRUFBSTBDLFFBQVFDLFlBQVkzQyxFQUFJNEMsR0FBRyxDQUFDLENBQUNiLElBQUksU0FBU2MsR0FBRyxXQUFXLE1BQU8sQ0FBQ3pDLEVBQUcsTUFBTSxDQUFDUSxZQUFZLENBQUMsUUFBVSxPQUFPLGlCQUFpQixTQUFTLGNBQWMsVUFBVSxDQUFDUixFQUFHLE9BQU8sQ0FBQ0EsRUFBRyxhQUFhLENBQUMwQyxZQUFZLE9BQU9SLE1BQU0sQ0FBQyxTQUFXdEMsRUFBSTRCLFlBQVl4QixFQUFHLE9BQU8sQ0FBQzRCLFNBQVMsQ0FBQyxZQUFjaEMsRUFBSWlDLEdBQUdqQyxFQUFJa0MsTUFBTUMsR0FBR0MsTUFBTUMsVUFBVXJDLEVBQUk0QixlQUFlLE9BQU9tQixPQUFNLFFBQVcsSUFDeHNDQyxFQUFrQixHLGdJQ3NEdEIseUJBRUEsWUFDQSxDQUNBLFdBQ0Esc0ZBRUEsQ0FDQSxXQUNBLHVGQUlBLGtCQUVBLFlBQ0EseUJBQ0Esd0NBQ0EsaUJBR0EsYUFDQSxpRUFDQSwyREFFQSxPQUNBLGlDQUNBLGtDQUlBLDJCQUNBLHdFQUVBLGNBQ0EsY0FDQSw0QkFDQSwyQkFDQSx3QkFDQSxVQUNBLHFCQUNBLFNBQ0EsaUNBRUEsT0FDQSxTQUNBLHNCQUNBLGdCQUNBLGlCQUNBLEtBQ0EsZUFDQSx5QkFDQSxpQkFDQSwyQkFPQSxpQkFDQSw4QkFHQSxvQkFDQSxTQUNBLHFCQUNBLHNCQUNBLDBCQUNBLGlCQUNBLHVCQUdBLGlDQUNBLGdEQUNBLDJCQUVBLFNBSUEsa0JBQ0EsWUFDQSx3RUFFQSxvQkFFQSx3RkFFQSxHQUNBLFlBQ0EsYUFpQkEsT0FmQSwrQkFDQSxhQUVBLFVBQ0EsZ0RBQ0EsTUFFQSxRQUVBLGFBQ0EsY0FDQSxrQkFDQSxpQkFHQSxJQTVHQSxhQUxBLFNBQ0EsWUFDQSxpQ0FHQSxHLFVDdkQ0ZCxJLGNDT3hkQyxHQUFZLE9BQ2QsRUFDQWxELEVBQ0FpRCxHQUNBLEVBQ0EsS0FDQSxLQUNBLE1BSUYsUUFBZUMsRUFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvdmlld3MvbGlmZWZvcm1zL2JvbnVzLWJyZWFrZG93bi9CdWlsZGluZy1Db3N0LVRpbWUudnVlP2UxZGQiLCJ3ZWJwYWNrOi8vL3NyYy92aWV3cy9zdGF0cy92aWV3cy9saWZlZm9ybXMvYm9udXMtYnJlYWtkb3duL0J1aWxkaW5nLUNvc3QtVGltZS52dWU/YjZjOSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvdmlld3MvbGlmZWZvcm1zL2JvbnVzLWJyZWFrZG93bi9CdWlsZGluZy1Db3N0LVRpbWUudnVlP2ExYjAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2xpZmVmb3Jtcy9ib251cy1icmVha2Rvd24vQnVpbGRpbmctQ29zdC1UaW1lLnZ1ZT9lOGZiIl0sInNvdXJjZXNDb250ZW50IjpbInZhciByZW5kZXIgPSBmdW5jdGlvbiAoKSB7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCdkaXYnLFtfYygnc2VsZWN0Jyx7ZGlyZWN0aXZlczpbe25hbWU6XCJtb2RlbFwiLHJhd05hbWU6XCJ2LW1vZGVsLm51bWJlclwiLHZhbHVlOihfdm0uYnVpbGRpbmcpLGV4cHJlc3Npb246XCJidWlsZGluZ1wiLG1vZGlmaWVyczp7XCJudW1iZXJcIjp0cnVlfX1dLHN0YXRpY1N0eWxlOntcImRpc3BsYXlcIjpcImJsb2NrXCIsXCJtYXJnaW4tYm90dG9tXCI6XCI0cHhcIn0sb246e1wiY2hhbmdlXCI6ZnVuY3Rpb24oJGV2ZW50KXt2YXIgJCRzZWxlY3RlZFZhbCA9IEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCgkZXZlbnQudGFyZ2V0Lm9wdGlvbnMsZnVuY3Rpb24obyl7cmV0dXJuIG8uc2VsZWN0ZWR9KS5tYXAoZnVuY3Rpb24obyl7dmFyIHZhbCA9IFwiX3ZhbHVlXCIgaW4gbyA/IG8uX3ZhbHVlIDogby52YWx1ZTtyZXR1cm4gX3ZtLl9uKHZhbCl9KTsgX3ZtLmJ1aWxkaW5nPSRldmVudC50YXJnZXQubXVsdGlwbGUgPyAkJHNlbGVjdGVkVmFsIDogJCRzZWxlY3RlZFZhbFswXX19fSxfdm0uX2woKF92bS5CdWlsZGluZ3MpLGZ1bmN0aW9uKGJ1aWxkaW5nKXtyZXR1cm4gX2MoJ29wdGlvbicse2tleTpidWlsZGluZyxkb21Qcm9wczp7XCJ2YWx1ZVwiOmJ1aWxkaW5nLFwidGV4dENvbnRlbnRcIjpfdm0uX3MoX3ZtLiRpMThuLiR0Lm9nYW1lLmJ1aWxkaW5nc1tidWlsZGluZ10pfX0pfSksMCksX2MoJ2xpZmVmb3JtLWJvbnVzZXMtYnJlYWtkb3duJyx7YXR0cnM6e1widHlwZXNcIjpfdm0uYm9udXNUeXBlcyxcInRlY2hub2xvZ2llc1wiOl92bS50ZWNocyxcInBsYW5ldHNcIjpfdm0ucGxhbmV0cyxcImxpbWl0c1wiOl92bS5saW1pdHN9LHNjb3BlZFNsb3RzOl92bS5fdShbe2tleTpcImhlYWRlclwiLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIFtfYygnZGl2Jyx7c3RhdGljU3R5bGU6e1wiZGlzcGxheVwiOlwiZmxleFwiLFwiZmxleC1kaXJlY3Rpb25cIjpcImNvbHVtblwiLFwiYWxpZ24taXRlbXNcIjpcInN0YXJ0XCJ9fSxbX2MoJ3NwYW4nLFtfYygnby1idWlsZGluZycse3N0YXRpY0NsYXNzOlwibXItMlwiLGF0dHJzOntcImJ1aWxkaW5nXCI6X3ZtLmJ1aWxkaW5nfX0pLF9jKCdzcGFuJyx7ZG9tUHJvcHM6e1widGV4dENvbnRlbnRcIjpfdm0uX3MoX3ZtLiRpMThuLiR0Lm9nYW1lLmJ1aWxkaW5nc1tfdm0uYnVpbGRpbmddKX19KV0sMSldKV19LHByb3h5OnRydWV9XSl9KV0sMSl9XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIjx0ZW1wbGF0ZT5cclxuICAgIDxkaXY+XHJcbiAgICAgICAgPHNlbGVjdCB2LW1vZGVsLm51bWJlcj1cImJ1aWxkaW5nXCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogNHB4XCI+XHJcbiAgICAgICAgICAgIDxvcHRpb24gdi1mb3I9XCJidWlsZGluZyBpbiBCdWlsZGluZ3NcIiA6a2V5PVwiYnVpbGRpbmdcIiA6dmFsdWU9XCJidWlsZGluZ1wiIHYtdGV4dD1cIiRpMThuLiR0Lm9nYW1lLmJ1aWxkaW5nc1tidWlsZGluZ11cIiAvPlxyXG4gICAgICAgIDwvc2VsZWN0PlxyXG5cclxuICAgICAgICA8bGlmZWZvcm0tYm9udXNlcy1icmVha2Rvd24gOnR5cGVzPVwiYm9udXNUeXBlc1wiIDp0ZWNobm9sb2dpZXM9XCJ0ZWNoc1wiIDpwbGFuZXRzPVwicGxhbmV0c1wiIDpsaW1pdHM9XCJsaW1pdHNcIj5cclxuICAgICAgICAgICAgPHRlbXBsYXRlICNoZWFkZXI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IHN0YXJ0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvLWJ1aWxkaW5nIDpidWlsZGluZz1cImJ1aWxkaW5nXCIgY2xhc3M9XCJtci0yXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi10ZXh0PVwiJGkxOG4uJHQub2dhbWUuYnVpbGRpbmdzW2J1aWxkaW5nXVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgPC9saWZlZm9ybS1ib251c2VzLWJyZWFrZG93bj5cclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IFBsYW5ldERhdGEgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvZW1waXJlL1BsYW5ldERhdGEnO1xyXG4gICAgaW1wb3J0IHsgZ2V0TGlmZWZvcm1MZXZlbFRlY2hub2xvZ3lCb251cyB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvZXhwZXJpZW5jZSc7XHJcbiAgICBpbXBvcnQgeyBMaWZlZm9ybVRlY2hub2xvZ3lUeXBlIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2xpZmVmb3Jtcy9MaWZlZm9ybVRlY2hub2xvZ3lUeXBlJztcclxuICAgIGltcG9ydCB7IExpZmVmb3JtVHlwZSwgVmFsaWRMaWZlZm9ybVR5cGUgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL0xpZmVmb3JtVHlwZSc7XHJcbiAgICBpbXBvcnQgeyBCdWlsZGluZ0Nvc3RBbmRUaW1lUmVkdWN0aW9uTGlmZWZvcm1UZWNobm9sb2d5IH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2xpZmVmb3Jtcy90ZWNobm9sb2dpZXMvaW50ZXJmYWNlcyc7XHJcbiAgICBpbXBvcnQgeyBCdWlsZGluZ0Nvc3RBbmRUaW1lUmVkdWN0aW9uTGlmZWZvcm1UZWNobm9sb2dpZXMgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL3RlY2hub2xvZ2llcy9MaWZlZm9ybVRlY2hub2xvZ2llcyc7XHJcbiAgICBpbXBvcnQgeyBjcmVhdGVNYXBwZWRSZWNvcmQsIGNyZWF0ZVJlY29yZCB9IGZyb20gJ0Avc2hhcmVkL3V0aWxzL2NyZWF0ZVJlY29yZCc7XHJcbiAgICBpbXBvcnQgeyBFbXBpcmVEYXRhTW9kdWxlIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9kYXRhL0VtcGlyZURhdGFNb2R1bGUnO1xyXG4gICAgaW1wb3J0IHsgZ2V0UGxhbmV0TGlmZWZvcm1UZWNobm9sb2d5Qm9vc3QgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL21vZGVscy9saWZlZm9ybXMnO1xyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuICAgIGltcG9ydCBMaWZlZm9ybUJvbnVzZXNCcmVha2Rvd24sIHsgTGlmZWZvcm1Cb251c2VzQnJlYWtkb3duVHlwZSwgTGlmZWZvcm1Cb251c2VzUGxhbmV0QnJlYWtkb3duIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9jb21wb25lbnRzL2xpZmVmb3Jtcy9MaWZlZm9ybUJvbnVzZXNCcmVha2Rvd24udnVlJztcclxuICAgIGltcG9ydCB7IEJ1aWxkaW5nVHlwZSB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9idWlsZGluZ3MvQnVpbGRpbmdUeXBlJztcclxuICAgIGltcG9ydCB7IEJ1aWxkaW5nVHlwZXMgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvYnVpbGRpbmdzL0J1aWxkaW5nVHlwZXMnO1xyXG4gICAgaW1wb3J0IHsgQ29zdEFuZFRpbWVSZWR1Y3Rpb24gfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL2NvbW1vbi1pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgZ2V0TGlmZWZvcm1Cb251c0xpbWl0IH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2xpZmVmb3Jtcy9MaWZlZm9ybUJvbnVzTGltaXRzJztcclxuaW1wb3J0IHsgTGlmZWZvcm1Cb251c1R5cGVJZCB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvTGlmZWZvcm1Cb251c1R5cGUnO1xyXG5cclxuICAgIHR5cGUgQm9udXNlcyA9IHtcclxuICAgICAgICBjb3N0OiBudW1iZXI7XHJcbiAgICAgICAgdGltZTogbnVtYmVyO1xyXG4gICAgfTtcclxuXHJcbiAgICB0eXBlIEJvbnVzQnJlYWtkb3duID0ge1xyXG4gICAgICAgIGJhc2U6IEJvbnVzZXM7XHJcbiAgICAgICAgbGV2ZWw6IEJvbnVzZXM7XHJcbiAgICAgICAgYnVpbGRpbmdzOiBCb251c2VzO1xyXG4gICAgICAgIGJ1aWxkaW5nc0Jvb3N0OiBudW1iZXI7XHJcbiAgICAgICAgdG90YWw6IEJvbnVzZXM7XHJcbiAgICB9O1xyXG5cclxuICAgIEBDb21wb25lbnQoe1xyXG4gICAgICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAgICAgTGlmZWZvcm1Cb251c2VzQnJlYWtkb3duLFxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBleHBvcnQgZGVmYXVsdCBjbGFzcyBCdWlsZGluZ0Nvc3RUaW1lIGV4dGVuZHMgVnVlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBib251c1R5cGVzOiBMaWZlZm9ybUJvbnVzZXNCcmVha2Rvd25UeXBlPGtleW9mIEJvbnVzZXM+W10gPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGtleTogJ2Nvc3QnLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmVtcGlyZS5saWZlZm9ybXMucmVzZWFyY2hCb251c2VzLmJ1aWxkaW5nQ29zdFRpbWUuY29zdCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAga2V5OiAndGltZScsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMuYnVpbGRpbmdDb3N0VGltZS50aW1lLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdGVjaG5vbG9naWVzID0gQnVpbGRpbmdDb3N0QW5kVGltZVJlZHVjdGlvbkxpZmVmb3JtVGVjaG5vbG9naWVzO1xyXG5cclxuICAgICAgICBwcml2YXRlIGdldCB0ZWNocygpOiBMaWZlZm9ybVRlY2hub2xvZ3lUeXBlW10ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZWNobm9sb2dpZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIodGVjaCA9PiB0ZWNoLmFwcGxpZXNUbyh0aGlzLmJ1aWxkaW5nKSlcclxuICAgICAgICAgICAgICAgIC5tYXAodCA9PiB0LnR5cGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgbGltaXRzKCk6IFJlY29yZDxrZXlvZiBCb251c2VzLCAodmFsdWU6IG51bWJlcikgPT4gbnVtYmVyPiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvc3RMaW1pdCA9IGdldExpZmVmb3JtQm9udXNMaW1pdCh7IHR5cGU6IExpZmVmb3JtQm9udXNUeXBlSWQuVGVjaENvc3RSZWR1Y3Rpb24sIHRlY2g6IHRoaXMuYnVpbGRpbmcgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVMaW1pdCA9IGdldExpZmVmb3JtQm9udXNMaW1pdCh7IHR5cGU6IExpZmVmb3JtQm9udXNUeXBlSWQuVGVjaFRpbWVSZWR1Y3Rpb24sIHRlY2g6IHRoaXMuYnVpbGRpbmcgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY29zdDogdmFsdWUgPT4gY29zdExpbWl0ICE9IG51bGwgPyBNYXRoLm1heCh2YWx1ZSwgLWNvc3RMaW1pdCkgOiB2YWx1ZSxcclxuICAgICAgICAgICAgICAgIHRpbWU6IHZhbHVlID0+IHRpbWVMaW1pdCAhPSBudWxsID8gTWF0aC5tYXgodmFsdWUsIC10aW1lTGltaXQpIDogdmFsdWUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJ1aWxkaW5nID0gQnVpbGRpbmdUeXBlLmFsbGlhbmNlRGVwb3Q7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBCdWlsZGluZ3MgPSBCdWlsZGluZ1R5cGVzLmZpbHRlcihiID0+IHRoaXMudGVjaG5vbG9naWVzLnNvbWUodGVjaCA9PiB0ZWNoLmFwcGxpZXNUbyhiKSkpO1xyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBwbGFuZXRzKCk6IFJlY29yZDxudW1iZXIsIExpZmVmb3JtQm9udXNlc1BsYW5ldEJyZWFrZG93bjxrZXlvZiBCb251c2VzPltdPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVNYXBwZWRSZWNvcmQoXHJcbiAgICAgICAgICAgICAgICBFbXBpcmVEYXRhTW9kdWxlLmVtcGlyZS5wbGFuZXRPcmRlclxyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoaWQgPT4gRW1waXJlRGF0YU1vZHVsZS5lbXBpcmUucGxhbmV0c1tpZF0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihwbGFuZXQgPT4gIXBsYW5ldC5pc01vb24pIGFzIFBsYW5ldERhdGFbXSxcclxuICAgICAgICAgICAgICAgIHBsYW5ldCA9PiBwbGFuZXQuaWQsXHJcbiAgICAgICAgICAgICAgICBwbGFuZXQgPT4gdGhpcy50ZWNobm9sb2dpZXNcclxuICAgICAgICAgICAgICAgICAgICAubWFwPExpZmVmb3JtQm9udXNlc1BsYW5ldEJyZWFrZG93bjxrZXlvZiBCb251c2VzPj4odGVjaCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYW5ldEJvbnVzZXMgPSB0aGlzLmdldFBsYW5ldEJvbnVzKHRlY2gsIHBsYW5ldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhbmV0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVjaG5vbG9neVR5cGU6IHRlY2gudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbnVzZXM6IGNyZWF0ZVJlY29yZDxrZXlvZiBCb251c2VzLCBMaWZlZm9ybUJvbnVzZXNQbGFuZXRCcmVha2Rvd25bJ2JvbnVzZXMnXVtzdHJpbmddPihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2Nvc3QnLCAndGltZSddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlOiBwbGFuZXRCb251c2VzLmJhc2Vba2V5XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdzOiBwbGFuZXRCb251c2VzLmJ1aWxkaW5nc1trZXldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogcGxhbmV0Qm9udXNlcy5sZXZlbFtrZXldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbDogcGxhbmV0Qm9udXNlcy50b3RhbFtrZXldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZXhwZXJpZW5jZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEVtcGlyZURhdGFNb2R1bGUubGlmZWZvcm1FeHBlcmllbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRQbGFuZXRCb251cyh0ZWNoOiBCdWlsZGluZ0Nvc3RBbmRUaW1lUmVkdWN0aW9uTGlmZWZvcm1UZWNobm9sb2d5LCBwbGFuZXQ6IFBsYW5ldERhdGEpOiBCb251c0JyZWFrZG93biB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDogQm9udXNCcmVha2Rvd24gPSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlOiB7IGNvc3Q6IDAsIHRpbWU6IDAgfSxcclxuICAgICAgICAgICAgICAgIGxldmVsOiB7IGNvc3Q6IDAsIHRpbWU6IDAgfSxcclxuICAgICAgICAgICAgICAgIGJ1aWxkaW5nczogeyBjb3N0OiAwLCB0aW1lOiAwIH0sXHJcbiAgICAgICAgICAgICAgICBidWlsZGluZ3NCb29zdDogMCxcclxuICAgICAgICAgICAgICAgIHRvdGFsOiB7IGNvc3Q6IDAsIHRpbWU6IDAgfSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwbGFuZXQuYWN0aXZlTGlmZWZvcm0gPT0gTGlmZWZvcm1UeXBlLm5vbmVcclxuICAgICAgICAgICAgICAgIHx8ICFwbGFuZXQuYWN0aXZlTGlmZWZvcm1UZWNobm9sb2dpZXMuaW5jbHVkZXModGVjaC50eXBlKVxyXG4gICAgICAgICAgICAgICAgfHwgIXRlY2guYXBwbGllc1RvKHRoaXMuYnVpbGRpbmcpXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nc0Jvb3N0ID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgICAgICBnZXRQbGFuZXRMaWZlZm9ybVRlY2hub2xvZ3lCb29zdChwbGFuZXQpLFxyXG4gICAgICAgICAgICAgICAgZ2V0TGlmZWZvcm1Cb251c0xpbWl0KHsgdHlwZTogTGlmZWZvcm1Cb251c1R5cGVJZC5MaWZlZm9ybVJlc2VhcmNoQm9udXNCb29zdCB9KSA/PyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmVzdWx0LmJ1aWxkaW5nc0Jvb3N0ICs9IGJ1aWxkaW5nc0Jvb3N0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYm9udXNlcyA9IHRlY2guZ2V0QnVpbGRpbmdDb3N0QW5kVGltZVJlZHVjdGlvbih0aGlzLmJ1aWxkaW5nLCBwbGFuZXQubGlmZWZvcm1UZWNobm9sb2dpZXNbdGVjaC50eXBlXSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXBwaW5nOiBSZWNvcmQ8a2V5b2YgQm9udXNlcywga2V5b2YgQ29zdEFuZFRpbWVSZWR1Y3Rpb24+ID0ge1xyXG4gICAgICAgICAgICAgICAgY29zdDogJ2Nvc3QnLFxyXG4gICAgICAgICAgICAgICAgdGltZTogJ3RpbWUnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAoT2JqZWN0LmVudHJpZXMobWFwcGluZykgYXMgW2tleW9mIEJvbnVzZXMsIGtleW9mIENvc3RBbmRUaW1lUmVkdWN0aW9uXVtdKS5mb3JFYWNoKHBhaXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgW2JvbnVzVHlwZSwgc3RhdHNUeXBlXSA9IHBhaXI7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUJvbnVzID0gLTEgKiBib251c2VzW3N0YXRzVHlwZV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaWZlZm9ybUxldmVsQm9udXMgPSBiYXNlQm9udXMgKiBnZXRMaWZlZm9ybUxldmVsVGVjaG5vbG9neUJvbnVzKHRoaXMuZXhwZXJpZW5jZVtwbGFuZXQuYWN0aXZlTGlmZWZvcm0gYXMgVmFsaWRMaWZlZm9ybVR5cGVdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpZmVmb3JtQnVpbGRpbmdCb251cyA9IGJhc2VCb251cyAqIGJ1aWxkaW5nc0Jvb3N0O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsID0gYmFzZUJvbnVzICsgbGlmZWZvcm1MZXZlbEJvbnVzICsgbGlmZWZvcm1CdWlsZGluZ0JvbnVzO1xyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdC5iYXNlW2JvbnVzVHlwZV0gKz0gYmFzZUJvbnVzO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmxldmVsW2JvbnVzVHlwZV0gKz0gbGlmZWZvcm1MZXZlbEJvbnVzO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmJ1aWxkaW5nc1tib251c1R5cGVdICs9IGxpZmVmb3JtQnVpbGRpbmdCb251cztcclxuICAgICAgICAgICAgICAgIHJlc3VsdC50b3RhbFtib251c1R5cGVdICs9IHRvdGFsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG48L3NjcmlwdD4iLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vQnVpbGRpbmctQ29zdC1UaW1lLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL0J1aWxkaW5nLUNvc3QtVGltZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCIiLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL0J1aWxkaW5nLUNvc3QtVGltZS52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9OTk3OGE2MTYmXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vQnVpbGRpbmctQ29zdC1UaW1lLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vQnVpbGRpbmctQ29zdC1UaW1lLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIG51bGwsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIl0sIm5hbWVzIjpbInJlbmRlciIsIl92bSIsInRoaXMiLCJfaCIsIiRjcmVhdGVFbGVtZW50IiwiX2MiLCJfc2VsZiIsImRpcmVjdGl2ZXMiLCJuYW1lIiwicmF3TmFtZSIsInZhbHVlIiwiZXhwcmVzc2lvbiIsIm1vZGlmaWVycyIsInN0YXRpY1N0eWxlIiwib24iLCIkZXZlbnQiLCIkJHNlbGVjdGVkVmFsIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmaWx0ZXIiLCJjYWxsIiwidGFyZ2V0Iiwib3B0aW9ucyIsIm8iLCJzZWxlY3RlZCIsIm1hcCIsInZhbCIsIl92YWx1ZSIsIl9uIiwiYnVpbGRpbmciLCJtdWx0aXBsZSIsIl9sIiwia2V5IiwiZG9tUHJvcHMiLCJfcyIsIiRpMThuIiwiJHQiLCJvZ2FtZSIsImJ1aWxkaW5ncyIsImF0dHJzIiwiYm9udXNUeXBlcyIsInRlY2hzIiwicGxhbmV0cyIsImxpbWl0cyIsInNjb3BlZFNsb3RzIiwiX3UiLCJmbiIsInN0YXRpY0NsYXNzIiwicHJveHkiLCJzdGF0aWNSZW5kZXJGbnMiLCJjb21wb25lbnQiXSwic291cmNlUm9vdCI6IiJ9