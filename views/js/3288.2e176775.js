"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[3288],{9027:(e,t,s)=>{s.d(t,{Z:()=>c});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"fake-table"},[s("div",{staticClass:"fake-table-header"},[s("span",{domProps:{textContent:e._s(e.$i18n.$t.extension.settings.combats.ignoreEspionageCombats.title)}})]),s("div",{staticClass:"fake-table-body"},[s("checkbox",{attrs:{value:e.ignoreEspionageCombats,label:e.$i18n.$t.extension.settings.combats.ignoreEspionageCombats.label},on:{input:function(t){return e.setIgnoreEspionageCombats(t)}}})],1)])},n=[],o=s(655),i=s(4028),r=s(917);let l=class extends i.w3{get ignoreEspionageCombats(){return r.V.settings.combatTracking.ignoreEspionageFights}setIgnoreEspionageCombats(e){r.V.updateSettings({...r.V.settings,combatTracking:{ignoreEspionageFights:e}})}};l=(0,o.gn)([(0,i.wA)({})],l);const g=l,u=g;var m=s(1001),p=(0,m.Z)(u,a,n,!1,null,"3b222f56",null);const c=p.exports},4310:(e,t,s)=>{s.d(t,{Z:()=>f});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("grid-table",{staticClass:"ranged-stats-table",attrs:{columns:e.columns,items:e.rows,"footer-items":e.footerRows,"cell-class-provider":function(t){return e.getCellClass(t)}},scopedSlots:e._u([e._l(e.columns,(function(t,a){return{key:"cell-"+t.key,fn:function(n){var o=n.value,i=n.item;return[s("span",{key:t.key,staticClass:"ranged-stats-table-cell"},["label"==t.key?[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:o}):s("span",{key:a,domProps:{textContent:e._s(o)}})]:"subLabel"==t.key?e._l(i.items,(function(a,n){return s("span",{key:n,class:a.labelClass},[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:a.label}):s("span",{domProps:{textContent:e._s(a.label)}})],2)})):e._l(i.items||[i],(function(a,n){return s("span",{key:n,class:[e.getCellClass(a[t.key]),a.class]},[null!=t.formatter?s("span",{domProps:{textContent:e._s(t.formatter(a[t.key]))}}):s("span",{domProps:{textContent:e._s(a[t.key])}})])}))],2)]}}})),e._l(e.$scopedSlots,(function(t,s){return{key:s,fn:function(t){return[e._t(s,null,null,t)]}}}))],null,!0)})},n=[],o=s(655),i=s(4028),r=s(9858),l=s(6538),g=s(4749),u=s.n(g),m=s(917);let p=class extends i.w3{showPercentage;showAverage;items;footerItems;numberFormatOptions;averageNumberFormatOptions;dataItems;get hasGroupedItems(){return this.items.some((e=>"items"in e))}get dateRanges(){return m.V.settings.dateRanges}get dataItemsByRange(){const e=this.dataItems,t=this.dateRanges.map((()=>[]));return e.forEach((e=>{this.dateRanges.forEach(((s,a)=>{(0,r.m)(e.date,s)&&t[a].push(e)}))})),t}get firstDay(){return this.dataItemsByRange.reduce(((e,t)=>Math.min(e,Math.min(...t.map((e=>e.date))))),Date.now())}get columns(){const e=[{key:"label",label:"",slotName:"label"}];return this.hasGroupedItems&&e.push({key:"subLabel",label:"",slotName:"subLabel"}),e.push(...this.dateRanges.map(((e,t)=>({key:t,label:e.label??this.$i18n.$t.extension.settings.dateRanges.since(this.$i18n.$d(this.firstDay,"date")),formatter:e=>this.$i18n.$n(e,this.numberFormatOptions)})))),this.showAverage&&e.push({key:"average",label:this.$i18n.$t.extension.common.averagePerDay,formatter:e=>this.$i18n.$n(e,this.averageNumberFormatOptions??this.numberFormatOptions)}),this.showPercentage&&e.push({key:"percentage",label:"%",formatter:e=>""!=e?this.$i18n.$n(e,{minimumFractionDigits:3,maximumFractionDigits:3}):e}),e}get rows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,l.A)("failed to find range 'all'"),s=e[t].map((e=>u()(e.date).getTime())),a=new Set(s).size,n=Math.max(1,this.items.map((s=>"getValue"in s?s.getValue(e[t]):s.items.reduce(((s,a)=>s+a.getValue(e[t])),0))).reduce(((e,t)=>e+t),0));return this.items.map((s=>this.mapItemToRow(s,e,t,a,n)))}mapItemToRow(e,t,s,a,n){if("getValue"in e){const o={label:e.label,class:e.class,labelClass:e.labelClass,...this.dateRanges.map(((s,a)=>e.getValue(t[a])))},i=o[s];return this.showAverage&&(o.average=i/Math.max(1,a)),this.showPercentage&&(o.percentage=100*i/n),o}return{label:e.label,items:e.items.map((e=>this.mapItemToRow(e,t,s,a,n)))}}get footerRows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,l.A)("failed to find range 'all'"),s=e[t].map((e=>u()(e.date).getTime())),a=new Set(s).size;return this.footerItems.map((s=>{const n={label:s.label,...this.dateRanges.map(((t,a)=>"getValue"in s?s.getValue(e[a]):s.items.reduce(((t,s)=>t+s.getValue(e[a])),0))),percentage:""};if(this.showAverage){const e=n[t];n.average=e/Math.max(1,a)}return n}))}getCellClass(e){return 0==e?"fade-value":""}};(0,o.gn)([(0,i.fI)({required:!1,type:Boolean})],p.prototype,"showPercentage",void 0),(0,o.gn)([(0,i.fI)({required:!1,type:Boolean})],p.prototype,"showAverage",void 0),(0,o.gn)([(0,i.fI)({required:!0,type:Array})],p.prototype,"items",void 0),(0,o.gn)([(0,i.fI)({required:!1,type:Array,default:()=>[]})],p.prototype,"footerItems",void 0),(0,o.gn)([(0,i.fI)({required:!1,type:Object,default:void 0})],p.prototype,"numberFormatOptions",void 0),(0,o.gn)([(0,i.fI)({required:!1,type:Object,default:void 0})],p.prototype,"averageNumberFormatOptions",void 0),(0,o.gn)([(0,i.fI)({required:!0,type:Array})],p.prototype,"dataItems",void 0),p=(0,o.gn)([(0,i.wA)({})],p);const c=p,h=c;var d=s(1001),b=(0,d.Z)(h,a,n,!1,null,"1526beca",null);const f=b.exports},3129:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table-container"},[s("ranged-stats-table",{attrs:{dataItems:e.combats,items:e.items,footerItems:e.footerItems,"show-average":"",averageNumberFormatOptions:e.avgNumberFormat},scopedSlots:e._u([{key:"cell-label",fn:function(t){var a=t.value;return[s("span",{staticClass:"mr-2",domProps:{textContent:e._s(a)}}),s("o-ship",{attrs:{ship:e.shipTable[a],size:"24px"}})]}}])}),s("floating-menu",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(){return[s("button",{on:{click:function(t){e.showSettings=!e.showSettings}}},[s("span",{staticClass:"mdi mdi-cog"})])]},proxy:!0}]),model:{value:e.showSettings,callback:function(t){e.showSettings=t},expression:"showSettings"}},[s("combat-tracking-ignore-espionage-combats-settings"),s("hr"),s("date-range-settings")],1)],1)},n=[],o=s(655),i=s(4028),r=s(4310),l=s(4992),g=s(2057),u=s(248),m=s(4329),p=s(9027);let c=class extends i.w3{showSettings=!1;avgNumberFormat={minimumFractionDigits:1,maximumFractionDigits:1};get combats(){return l.t.dailyResultsArray}get items(){return u.GI.map((e=>({label:this.$i18n.$t.ogame.ships[e],getValue:t=>t.reduce(((t,s)=>t+s.lostShips.onExpeditions.ships[e]),0)})))}get footerItems(){return[{label:this.$i18n.$t.extension.common.sum,getValue:e=>u.GI.reduce(((t,s)=>t+e.reduce(((e,t)=>e+t.lostShips.onExpeditions.ships[s]),0)),0)}]}get shipTable(){return{[this.$i18n.$t.ogame.ships[g.g.lightFighter]]:g.g.lightFighter,[this.$i18n.$t.ogame.ships[g.g.heavyFighter]]:g.g.heavyFighter,[this.$i18n.$t.ogame.ships[g.g.cruiser]]:g.g.cruiser,[this.$i18n.$t.ogame.ships[g.g.battleship]]:g.g.battleship,[this.$i18n.$t.ogame.ships[g.g.bomber]]:g.g.bomber,[this.$i18n.$t.ogame.ships[g.g.battlecruiser]]:g.g.battlecruiser,[this.$i18n.$t.ogame.ships[g.g.destroyer]]:g.g.destroyer,[this.$i18n.$t.ogame.ships[g.g.reaper]]:g.g.reaper,[this.$i18n.$t.ogame.ships[g.g.pathfinder]]:g.g.pathfinder,[this.$i18n.$t.ogame.ships[g.g.smallCargo]]:g.g.smallCargo,[this.$i18n.$t.ogame.ships[g.g.largeCargo]]:g.g.largeCargo,[this.$i18n.$t.ogame.ships[g.g.espionageProbe]]:g.g.espionageProbe,[this.$i18n.$t.ogame.ships[g.g.recycler]]:g.g.recycler,[this.$i18n.$t.ogame.ships[g.g.deathStar]]:g.g.deathStar,[this.$i18n.$t.ogame.ships[g.g.crawler]]:g.g.crawler,[this.$i18n.$t.ogame.ships[g.g.solarSatellite]]:g.g.solarSatellite,[this.$i18n.$t.ogame.ships[g.g.colonyShip]]:g.g.colonyShip}}};c=(0,o.gn)([(0,i.wA)({components:{RangedStatsTable:r.Z,DateRangeSettings:m.Z,CombatTrackingIgnoreEspionageCombatsSettings:p.Z}})],c);const h=c,d=h;var b=s(1001),f=(0,b.Z)(d,a,n,!1,null,"18613fea",null);const y=f.exports},8734:(e,t)=>{function s(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s,e.exports=t.default},4749:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var a=o(s(1171)),n=o(s(8734));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){(0,n.default)(1,arguments);var t=(0,a.default)(e);return t.setHours(0,0,0,0),t}e.exports=t.default},1171:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(s(8734));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){(0,a.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}e.exports=t.default}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQU8sRUFBSVAsRUFBT0YsU0FBU08sR0FFL0IsT0FEQUUsRUFBS0MsU0FBUyxFQUFHLEVBQUcsRUFBRyxHQUNoQkQsRUFHVFYsRUFBT0QsUUFBVUEsRUFBUUUsUyxlQ3hDekJKLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUMzQ3JDLE9BQU8sSUFFVHFDLEVBQUEsV0FBa0JhLEVBRWxCLElBQUlULEVBQVNDLEVBQXVCLEVBQVEsT0FFNUMsU0FBU0EsRUFBdUJFLEdBQU8sT0FBT0EsR0FBT0EsRUFBSUMsV0FBYUQsRUFBTSxDQUFFTCxRQUFTSyxHQWdDdkYsU0FBU00sRUFBT0MsSUFDZCxFQUFJVixFQUFPRixTQUFTLEVBQUdRLFdBQ3ZCLElBQUlLLEVBQVNqQixPQUFPa0IsVUFBVUMsU0FBU0MsS0FBS0osR0FFNUMsT0FBSUEsYUFBb0JLLE1BQTRCLGtCQUFiTCxHQUFvQyxrQkFBWEMsRUFFdkQsSUFBSUksS0FBS0wsRUFBU00sV0FDSSxrQkFBYk4sR0FBb0Msb0JBQVhDLEVBQ2xDLElBQUlJLEtBQUtMLElBRVMsa0JBQWJBLEdBQW9DLG9CQUFYQyxHQUFvRCxxQkFBWk0sVUFFM0VBLFFBQVFDLEtBQUssb0pBRWJELFFBQVFDLE1BQUssSUFBSUMsT0FBUUMsUUFHcEIsSUFBSUwsS0FBS00sTUFJcEJ4QixFQUFPRCxRQUFVQSxFQUFRRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3NldHRpbmdzL0NvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzLnZ1ZT9mYWQ4Iiwid2VicGFjazovLy9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9Db21iYXRUcmFja2luZ0lnbm9yZUVzcGlvbmFnZUNvbWJhdHNTZXR0aW5ncy52dWU/NjU2NCIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9Db21iYXRUcmFja2luZ0lnbm9yZUVzcGlvbmFnZUNvbWJhdHNTZXR0aW5ncy52dWU/MzhjNSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9Db21iYXRUcmFja2luZ0lnbm9yZUVzcGlvbmFnZUNvbWJhdHNTZXR0aW5ncy52dWU/MmViYyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zdGF0cy9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT84MWRjIiwid2VicGFjazovLy9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zdGF0cy9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT81Nzk3Iiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlP2Y3NWEiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWU/NzBhYyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvdmlld3MvY29tYmF0cy9sb3N0LXNoaXBzL29uLWV4cGVkaXRpb25zL2Ftb3VudC9UYWJsZS52dWU/NDgyZSIsIndlYnBhY2s6Ly8vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2NvbWJhdHMvbG9zdC1zaGlwcy9vbi1leHBlZGl0aW9ucy9hbW91bnQvVGFibGUudnVlP2ZjNmIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2NvbWJhdHMvbG9zdC1zaGlwcy9vbi1leHBlZGl0aW9ucy9hbW91bnQvVGFibGUudnVlP2YwNDEiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2NvbWJhdHMvbG9zdC1zaGlwcy9vbi1leHBlZGl0aW9ucy9hbW91bnQvVGFibGUudnVlP2ZkMzIiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzPzI5NWIiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZEYXkvaW5kZXguanM/OTFhMSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvdG9EYXRlL2luZGV4LmpzP2FkNmQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwiZmFrZS10YWJsZVwifSxbX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwiZmFrZS10YWJsZS1oZWFkZXJcIn0sW19jKCdzcGFuJyx7ZG9tUHJvcHM6e1widGV4dENvbnRlbnRcIjpfdm0uX3MoX3ZtLiRpMThuLiR0LmV4dGVuc2lvbi5zZXR0aW5ncy5jb21iYXRzLmlnbm9yZUVzcGlvbmFnZUNvbWJhdHMudGl0bGUpfX0pXSksX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwiZmFrZS10YWJsZS1ib2R5XCJ9LFtfYygnY2hlY2tib3gnLHthdHRyczp7XCJ2YWx1ZVwiOl92bS5pZ25vcmVFc3Bpb25hZ2VDb21iYXRzLFwibGFiZWxcIjpfdm0uJGkxOG4uJHQuZXh0ZW5zaW9uLnNldHRpbmdzLmNvbWJhdHMuaWdub3JlRXNwaW9uYWdlQ29tYmF0cy5sYWJlbH0sb246e1wiaW5wdXRcIjpmdW5jdGlvbigkZXZlbnQpe3JldHVybiBfdm0uc2V0SWdub3JlRXNwaW9uYWdlQ29tYmF0cygkZXZlbnQpfX19KV0sMSldKX1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiPHRlbXBsYXRlPlxyXG4gICAgPGRpdiBjbGFzcz1cImZha2UtdGFibGVcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmFrZS10YWJsZS1oZWFkZXJcIj5cclxuICAgICAgICAgICAgPHNwYW4gdi10ZXh0PVwiJGkxOG4uJHQuZXh0ZW5zaW9uLnNldHRpbmdzLmNvbWJhdHMuaWdub3JlRXNwaW9uYWdlQ29tYmF0cy50aXRsZVwiIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZha2UtdGFibGUtYm9keVwiPlxyXG4gICAgICAgICAgICA8Y2hlY2tib3hcclxuICAgICAgICAgICAgICAgIDp2YWx1ZT1cImlnbm9yZUVzcGlvbmFnZUNvbWJhdHNcIlxyXG4gICAgICAgICAgICAgICAgQGlucHV0PVwic2V0SWdub3JlRXNwaW9uYWdlQ29tYmF0cygkZXZlbnQpXCJcclxuICAgICAgICAgICAgICAgIDpsYWJlbD1cIiRpMThuLiR0LmV4dGVuc2lvbi5zZXR0aW5ncy5jb21iYXRzLmlnbm9yZUVzcGlvbmFnZUNvbWJhdHMubGFiZWxcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuICAgIGltcG9ydCB7IFNldHRpbmdzRGF0YU1vZHVsZSB9IGZyb20gJy4uLy4uL2RhdGEvU2V0dGluZ3NEYXRhTW9kdWxlJztcclxuXHJcbiAgICBAQ29tcG9uZW50KHt9KVxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MgZXh0ZW5kcyBWdWUge1xyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBpZ25vcmVFc3Bpb25hZ2VDb21iYXRzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU2V0dGluZ3NEYXRhTW9kdWxlLnNldHRpbmdzLmNvbWJhdFRyYWNraW5nLmlnbm9yZUVzcGlvbmFnZUZpZ2h0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0SWdub3JlRXNwaW9uYWdlQ29tYmF0cyhpZ25vcmVFc3Bpb25hZ2VGaWdodHM6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgU2V0dGluZ3NEYXRhTW9kdWxlLnVwZGF0ZVNldHRpbmdzKHtcclxuICAgICAgICAgICAgICAgIC4uLlNldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgIGNvbWJhdFRyYWNraW5nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlRXNwaW9uYWdlRmlnaHRzLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG48L3NjcmlwdD5cclxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxyXG4gICAgLmZha2UtdGFibGUge1xyXG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEodmFyKC0tY29sb3IpLCAwLjUpO1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIHdpZHRoOiBmaXQtY29udGVudDtcclxuICAgICAgICBtYXgtd2lkdGg6IDQwMHB4O1xyXG5cclxuICAgICAgICAmLWhlYWRlciB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGJsYWNrIGxpbmVhci1ncmFkaWVudCgwZGVnLCByZ2JhKHZhcigtLWNvbG9yKSwgMC41KSwgcmdiYSh2YXIoLS1jb2xvciksIDAuNykpO1xyXG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICYtaGVhZGVyLFxyXG4gICAgICAgICYtYm9keSB7XHJcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICAgICAgcGFkZGluZzogOHB4O1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuPC9zdHlsZT4iLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiIiwiaW1wb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSBmcm9tIFwiLi9Db21iYXRUcmFja2luZ0lnbm9yZUVzcGlvbmFnZUNvbWJhdHNTZXR0aW5ncy52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9M2IyMjJmNTYmc2NvcGVkPXRydWUmXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9Db21iYXRUcmFja2luZ0lnbm9yZUVzcGlvbmFnZUNvbWJhdHNTZXR0aW5ncy52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCJcbmltcG9ydCBzdHlsZTAgZnJvbSBcIi4vQ29tYmF0VHJhY2tpbmdJZ25vcmVFc3Bpb25hZ2VDb21iYXRzU2V0dGluZ3MudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9M2IyMjJmNTYmbGFuZz1zY3NzJnNjb3BlZD10cnVlJlwiXG5cblxuLyogbm9ybWFsaXplIGNvbXBvbmVudCAqL1xuaW1wb3J0IG5vcm1hbGl6ZXIgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvcnVudGltZS9jb21wb25lbnROb3JtYWxpemVyLmpzXCJcbnZhciBjb21wb25lbnQgPSBub3JtYWxpemVyKFxuICBzY3JpcHQsXG4gIHJlbmRlcixcbiAgc3RhdGljUmVuZGVyRm5zLFxuICBmYWxzZSxcbiAgbnVsbCxcbiAgXCIzYjIyMmY1NlwiLFxuICBudWxsXG4gIFxuKVxuXG5leHBvcnQgZGVmYXVsdCBjb21wb25lbnQuZXhwb3J0cyIsInZhciByZW5kZXIgPSBmdW5jdGlvbiAoKSB7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCdncmlkLXRhYmxlJyx7c3RhdGljQ2xhc3M6XCJyYW5nZWQtc3RhdHMtdGFibGVcIixhdHRyczp7XCJjb2x1bW5zXCI6X3ZtLmNvbHVtbnMsXCJpdGVtc1wiOl92bS5yb3dzLFwiZm9vdGVyLWl0ZW1zXCI6X3ZtLmZvb3RlclJvd3MsXCJjZWxsLWNsYXNzLXByb3ZpZGVyXCI6ZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBfdm0uZ2V0Q2VsbENsYXNzKHZhbHVlKTsgfX0sc2NvcGVkU2xvdHM6X3ZtLl91KFtfdm0uX2woKF92bS5jb2x1bW5zKSxmdW5jdGlvbihjb2x1bW4saSl7cmV0dXJuIHtrZXk6KFwiY2VsbC1cIiArIChjb2x1bW4ua2V5KSksZm46ZnVuY3Rpb24ocmVmKXtcbnZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcbnZhciBpdGVtID0gcmVmLml0ZW07XG5yZXR1cm4gW19jKCdzcGFuJyx7a2V5OmNvbHVtbi5rZXksc3RhdGljQ2xhc3M6XCJyYW5nZWQtc3RhdHMtdGFibGUtY2VsbFwifSxbKGNvbHVtbi5rZXkgPT0gJ2xhYmVsJyk/Wyhjb2x1bW4uc2xvdE5hbWUgIT0gbnVsbCAmJiBfdm0uJHNjb3BlZFNsb3RzW2NvbHVtbi5zbG90TmFtZV0gIT0gbnVsbCk/X3ZtLl90KGNvbHVtbi5zbG90TmFtZSxudWxsLHtcInZhbHVlXCI6dmFsdWV9KTpfYygnc3Bhbicse2tleTppLGRvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKHZhbHVlKX19KV06KGNvbHVtbi5rZXkgPT0gJ3N1YkxhYmVsJyk/X3ZtLl9sKChpdGVtLml0ZW1zKSxmdW5jdGlvbihpdGVtLGkpe3JldHVybiBfYygnc3Bhbicse2tleTppLGNsYXNzOml0ZW0ubGFiZWxDbGFzc30sWyhjb2x1bW4uc2xvdE5hbWUgIT0gbnVsbCAmJiBfdm0uJHNjb3BlZFNsb3RzW2NvbHVtbi5zbG90TmFtZV0gIT0gbnVsbCk/X3ZtLl90KGNvbHVtbi5zbG90TmFtZSxudWxsLHtcInZhbHVlXCI6aXRlbS5sYWJlbH0pOl9jKCdzcGFuJyx7ZG9tUHJvcHM6e1widGV4dENvbnRlbnRcIjpfdm0uX3MoaXRlbS5sYWJlbCl9fSldLDIpfSk6X3ZtLl9sKChpdGVtLml0ZW1zIHx8IFtpdGVtXSksZnVuY3Rpb24oaXRlbSxpKXtyZXR1cm4gX2MoJ3NwYW4nLHtrZXk6aSxjbGFzczpbX3ZtLmdldENlbGxDbGFzcyhpdGVtW2NvbHVtbi5rZXldKSwgaXRlbS5jbGFzc119LFsoY29sdW1uLmZvcm1hdHRlciAhPSBudWxsKT9fYygnc3Bhbicse2RvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKGNvbHVtbi5mb3JtYXR0ZXIoaXRlbVtjb2x1bW4ua2V5XSkpfX0pOl9jKCdzcGFuJyx7ZG9tUHJvcHM6e1widGV4dENvbnRlbnRcIjpfdm0uX3MoaXRlbVtjb2x1bW4ua2V5XSl9fSldKX0pXSwyKV19fX0pLF92bS5fbCgoX3ZtLiRzY29wZWRTbG90cyksZnVuY3Rpb24oaW5kZXgsbmFtZSl7cmV0dXJuIHtrZXk6bmFtZSxmbjpmdW5jdGlvbihkYXRhKXtyZXR1cm4gW192bS5fdChuYW1lLG51bGwsbnVsbCxkYXRhKV19fX0pXSxudWxsLHRydWUpfSl9XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIjx0ZW1wbGF0ZT5cclxuICAgIDxncmlkLXRhYmxlIDpjb2x1bW5zPVwiY29sdW1uc1wiIDppdGVtcz1cInJvd3NcIiA6Zm9vdGVyLWl0ZW1zPVwiZm9vdGVyUm93c1wiIDpjZWxsLWNsYXNzLXByb3ZpZGVyPVwiKHZhbHVlKSA9PiBnZXRDZWxsQ2xhc3ModmFsdWUpXCIgY2xhc3M9XCJyYW5nZWQtc3RhdHMtdGFibGVcIj5cclxuICAgICAgICA8IS0tIG9oIGdvZCB0aGlzIGlzIHVnbHkgLS0+XHJcbiAgICAgICAgPHRlbXBsYXRlIHYtZm9yPVwiKGNvbHVtbiwgaSkgaW4gY29sdW1uc1wiIHYtc2xvdDpbYGNlbGwtJHtjb2x1bW4ua2V5fWBdPVwieyB2YWx1ZSwgaXRlbSB9XCI+XHJcbiAgICAgICAgICAgIDxzcGFuIDprZXk9XCJjb2x1bW4ua2V5XCIgY2xhc3M9XCJyYW5nZWQtc3RhdHMtdGFibGUtY2VsbFwiPlxyXG4gICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtaWY9XCJjb2x1bW4ua2V5ID09ICdsYWJlbCdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c2xvdCB2LWlmPVwiY29sdW1uLnNsb3ROYW1lICE9IG51bGwgJiYgJHNjb3BlZFNsb3RzW2NvbHVtbi5zbG90TmFtZV0gIT0gbnVsbFwiIDpuYW1lPVwiY29sdW1uLnNsb3ROYW1lXCIgOnZhbHVlPVwidmFsdWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtZWxzZSA6a2V5PVwiaVwiIHYtdGV4dD1cInZhbHVlXCIgLz5cclxuICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1lbHNlLWlmPVwiY29sdW1uLmtleSA9PSAnc3ViTGFiZWwnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1mb3I9XCIoaXRlbSwgaSkgaW4gaXRlbS5pdGVtc1wiIDprZXk9XCJpXCIgOmNsYXNzPVwiaXRlbS5sYWJlbENsYXNzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzbG90IHYtaWY9XCJjb2x1bW4uc2xvdE5hbWUgIT0gbnVsbCAmJiAkc2NvcGVkU2xvdHNbY29sdW1uLnNsb3ROYW1lXSAhPSBudWxsXCIgOm5hbWU9XCJjb2x1bW4uc2xvdE5hbWVcIiA6dmFsdWU9XCJpdGVtLmxhYmVsXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1lbHNlIHYtdGV4dD1cIml0ZW0ubGFiZWxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1lbHNlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtZm9yPVwiKGl0ZW0sIGkpIGluIGl0ZW0uaXRlbXMgfHwgW2l0ZW1dXCIgOmtleT1cImlcIiA6Y2xhc3M9XCJbZ2V0Q2VsbENsYXNzKGl0ZW1bY29sdW1uLmtleV0pLCBpdGVtLmNsYXNzXVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWlmPVwiY29sdW1uLmZvcm1hdHRlciAhPSBudWxsXCIgdi10ZXh0PVwiY29sdW1uLmZvcm1hdHRlcihpdGVtW2NvbHVtbi5rZXldKVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtZWxzZSB2LXRleHQ9XCJpdGVtW2NvbHVtbi5rZXldXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgPC90ZW1wbGF0ZT5cclxuXHJcbiAgICAgICAgPHRlbXBsYXRlIHYtZm9yPVwiKGluZGV4LCBuYW1lKSBpbiAkc2NvcGVkU2xvdHNcIiB2LXNsb3Q6W25hbWVdPVwiZGF0YVwiPlxyXG4gICAgICAgICAgICA8c2xvdCA6bmFtZT1cIm5hbWVcIiB2LWJpbmQ9XCJkYXRhXCIgLz5cclxuICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgPC9ncmlkLXRhYmxlPlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IFByb3BUeXBlIH0gZnJvbSAndnVlJztcclxuICAgIGltcG9ydCB7IFByb3AgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuICAgIGltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgeyBHcmlkVGFibGVDb2x1bW4gfSBmcm9tICdAc3RhdHMvY29tcG9uZW50cy9jb21tb24vR3JpZFRhYmxlLnZ1ZSc7XHJcbiAgICBpbXBvcnQgeyBpc0luUmFuZ2UgfSBmcm9tICdAc3RhdHMvdXRpbHMvZGF0ZVJhbmdlcyc7XHJcbiAgICBpbXBvcnQgeyBfdGhyb3cgfSBmcm9tICdAL3NoYXJlZC91dGlscy9fdGhyb3cnO1xyXG4gICAgaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSAnZGF0ZS1mbnMvc3RhcnRPZkRheS9pbmRleCc7XHJcbiAgICBpbXBvcnQgeyBTZXR0aW5nc0RhdGFNb2R1bGUgfSBmcm9tICcuLi8uLi9kYXRhL1NldHRpbmdzRGF0YU1vZHVsZSc7XHJcblxyXG4gICAgaW50ZXJmYWNlIFJhbmdlU3RhdHNUYWJsZUl0ZW1XaXRoRGF0ZSB7XHJcbiAgICAgICAgZGF0ZTogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBTaW5nbGVSYW5nZWRTdGF0c1RhYmxlSXRlbTxUIGV4dGVuZHMgUmFuZ2VTdGF0c1RhYmxlSXRlbVdpdGhEYXRlPiB7XHJcbiAgICAgICAgbGFiZWw6IHN0cmluZztcclxuICAgICAgICBnZXRWYWx1ZTogKGl0ZW1zOiBUW10pID0+IG51bWJlcjtcclxuICAgICAgICBjbGFzcz86IHN0cmluZztcclxuICAgICAgICBsYWJlbENsYXNzPzogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBHcm91cGVkUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VCBleHRlbmRzIFJhbmdlU3RhdHNUYWJsZUl0ZW1XaXRoRGF0ZT4ge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgaXRlbXM6IFNpbmdsZVJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+W107XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VCBleHRlbmRzIFJhbmdlU3RhdHNUYWJsZUl0ZW1XaXRoRGF0ZT4gPSBTaW5nbGVSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPiB8IEdyb3VwZWRSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPjtcclxuXHJcbiAgICBpbnRlcmZhY2UgU2ltcGxlUmFuZ2VkU3RhdHNUYWJsZVJvdyB7XHJcbiAgICAgICAgbGFiZWw6IHN0cmluZztcclxuICAgICAgICBwZXJjZW50YWdlPzogbnVtYmVyIHwgJyc7XHJcbiAgICAgICAgYXZlcmFnZT86IG51bWJlcjtcclxuXHJcbiAgICAgICAgW2luZGV4OiBudW1iZXJdOiBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJmYWNlIEdyb3VwZWRSYW5nZWRTdGF0c1RhYmxlUm93IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIGl0ZW1zOiBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93W107XHJcbiAgICB9XHJcblxyXG4gICAgdHlwZSBSYW5nZWRTdGF0c1RhYmxlUm93ID0gU2ltcGxlUmFuZ2VkU3RhdHNUYWJsZVJvdyB8IEdyb3VwZWRSYW5nZWRTdGF0c1RhYmxlUm93O1xyXG5cclxuICAgIGludGVyZmFjZSBSYW5nZVN0YXRzVGFibGVDb2x1bW4gZXh0ZW5kcyBHcmlkVGFibGVDb2x1bW48a2V5b2YgU2ltcGxlUmFuZ2VkU3RhdHNUYWJsZVJvdyB8ICdzdWJMYWJlbCcgfCBudW1iZXI+IHtcclxuICAgICAgICBzbG90TmFtZT86IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBAQ29tcG9uZW50KHt9KVxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFuZ2VkU3RhdHNUYWJsZTxUIGV4dGVuZHMgUmFuZ2VTdGF0c1RhYmxlSXRlbVdpdGhEYXRlPiBleHRlbmRzIFZ1ZSB7XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiBCb29sZWFuIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBzaG93UGVyY2VudGFnZSE6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiBCb29sZWFuIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBzaG93QXZlcmFnZSE6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6IEFycmF5IGFzIFByb3BUeXBlPFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+W10+IH0pXHJcbiAgICAgICAgcHJpdmF0ZSBpdGVtcyE6IFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+W107XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IGZhbHNlLCB0eXBlOiBBcnJheSBhcyBQcm9wVHlwZTxSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdPiwgZGVmYXVsdDogKCkgPT4gW10gfSlcclxuICAgICAgICBwcml2YXRlIGZvb3Rlckl0ZW1zITogUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXTtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IE9iamVjdCBhcyBQcm9wVHlwZTxJbnRsLk51bWJlckZvcm1hdE9wdGlvbnM+LCBkZWZhdWx0OiB1bmRlZmluZWQgfSlcclxuICAgICAgICBwcml2YXRlIG51bWJlckZvcm1hdE9wdGlvbnM6IEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucyB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IE9iamVjdCBhcyBQcm9wVHlwZTxJbnRsLk51bWJlckZvcm1hdE9wdGlvbnM+LCBkZWZhdWx0OiB1bmRlZmluZWQgfSlcclxuICAgICAgICBwcml2YXRlIGF2ZXJhZ2VOdW1iZXJGb3JtYXRPcHRpb25zOiBJbnRsLk51bWJlckZvcm1hdE9wdGlvbnMgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6IEFycmF5IGFzIFByb3BUeXBlPFRbXT4gfSlcclxuICAgICAgICBwcml2YXRlIGRhdGFJdGVtcyE6IFRbXTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgaGFzR3JvdXBlZEl0ZW1zKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5zb21lKGl0ZW0gPT4gJ2l0ZW1zJyBpbiBpdGVtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGRhdGVSYW5nZXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXR0aW5nc0RhdGFNb2R1bGUuc2V0dGluZ3MuZGF0ZVJhbmdlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGRhdGFJdGVtc0J5UmFuZ2UoKTogVFtdW10ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbXMgPSB0aGlzLmRhdGFJdGVtcztcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1zQnlSYW5nZTogVFtdW10gPSB0aGlzLmRhdGVSYW5nZXMubWFwKCgpID0+IFtdKTtcclxuXHJcbiAgICAgICAgICAgIGRhdGFJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlUmFuZ2VzLmZvckVhY2goKHJhbmdlLCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5SYW5nZShpdGVtLmRhdGUsIHJhbmdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhSXRlbXNCeVJhbmdlW2ldLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFJdGVtc0J5UmFuZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBmaXJzdERheSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YUl0ZW1zQnlSYW5nZS5yZWR1Y2UoKGFjYywgY3VyKSA9PiBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIGFjYyxcclxuICAgICAgICAgICAgICAgIE1hdGgubWluKC4uLmN1ci5tYXAodCA9PiB0LmRhdGUpKSxcclxuICAgICAgICAgICAgKSwgRGF0ZS5ub3coKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBjb2x1bW5zKCk6IFJhbmdlU3RhdHNUYWJsZUNvbHVtbltdIHtcclxuICAgICAgICAgICAgY29uc3QgY29sdW1uczogUmFuZ2VTdGF0c1RhYmxlQ29sdW1uW10gPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnbGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzbG90TmFtZTogJ2xhYmVsJyxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzR3JvdXBlZEl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3N1YkxhYmVsJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xvdE5hbWU6ICdzdWJMYWJlbCcsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29sdW1ucy5wdXNoKC4uLnRoaXMuZGF0ZVJhbmdlcy5tYXAoKHJhbmdlLCBpKSA9PiAoe1xyXG4gICAgICAgICAgICAgICAga2V5OiBpLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHJhbmdlLmxhYmVsID8/IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnNldHRpbmdzLmRhdGVSYW5nZXMuc2luY2UodGhpcy4kaTE4bi4kZCh0aGlzLmZpcnN0RGF5LCAnZGF0ZScpKSxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogKHZhbHVlOiBudW1iZXIpID0+IHRoaXMuJGkxOG4uJG4odmFsdWUsIHRoaXMubnVtYmVyRm9ybWF0T3B0aW9ucyksXHJcbiAgICAgICAgICAgIH0pKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93QXZlcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdhdmVyYWdlJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uY29tbW9uLmF2ZXJhZ2VQZXJEYXksXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAodmFsdWU6IG51bWJlcikgPT4gdGhpcy4kaTE4bi4kbih2YWx1ZSwgdGhpcy5hdmVyYWdlTnVtYmVyRm9ybWF0T3B0aW9ucyA/PyB0aGlzLm51bWJlckZvcm1hdE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1BlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGVyY2VudGFnZScsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICclJyxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICh2YWx1ZTogbnVtYmVyIHwgJycpID0+IHZhbHVlICE9ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy4kaTE4bi4kbih2YWx1ZSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCByb3dzKCk6IChSYW5nZWRTdGF0c1RhYmxlUm93ICYgeyBjbGFzcz86IHN0cmluZyB9KVtdIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1zQnlSYW5nZSA9IHRoaXMuZGF0YUl0ZW1zQnlSYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFJhbmdlSW5kZXggPSB0aGlzLmRhdGVSYW5nZXMuZmluZEluZGV4KHJhbmdlID0+IHJhbmdlLnR5cGUgPT0gJ2FsbCcpXHJcbiAgICAgICAgICAgICAgICA/PyBfdGhyb3coYGZhaWxlZCB0byBmaW5kIHJhbmdlICdhbGwnYCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtRGF5cyA9IGRhdGFJdGVtc0J5UmFuZ2VbYWxsUmFuZ2VJbmRleF0ubWFwKGV4cG8gPT4gc3RhcnRPZkRheShleHBvLmRhdGUpLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheXNXaXRoRGF0YUl0ZW1zID0gbmV3IFNldChkYXRhSXRlbURheXMpLnNpemU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0b3RhbFZhbHVlID0gTWF0aC5tYXgoMSwgdGhpcy5pdGVtc1xyXG4gICAgICAgICAgICAgICAgLm1hcChpdGVtID0+ICdnZXRWYWx1ZScgaW4gaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgID8gaXRlbS5nZXRWYWx1ZShkYXRhSXRlbXNCeVJhbmdlW2FsbFJhbmdlSW5kZXhdKVxyXG4gICAgICAgICAgICAgICAgICAgIDogaXRlbS5pdGVtcy5yZWR1Y2UoKGFjYywgaSkgPT4gYWNjICsgaS5nZXRWYWx1ZShkYXRhSXRlbXNCeVJhbmdlW2FsbFJhbmdlSW5kZXhdKSwgMClcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgY3VyKSA9PiBhY2MgKyBjdXIsIDApXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5tYXAoaXRlbSA9PiB0aGlzLm1hcEl0ZW1Ub1JvdyhpdGVtLCBkYXRhSXRlbXNCeVJhbmdlLCBhbGxSYW5nZUluZGV4LCBkYXlzV2l0aERhdGFJdGVtcywgdG90YWxWYWx1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBtYXBJdGVtVG9Sb3coaXRlbTogUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD4sIGRhdGFJdGVtc0J5UmFuZ2U6IFRbXVtdLCBhbGxSYW5nZUluZGV4OiBudW1iZXIsIGRheXNXaXRoRGF0YUl0ZW1zOiBudW1iZXIsIHRvdGFsVmFsdWU6IG51bWJlcik6IChSYW5nZWRTdGF0c1RhYmxlUm93ICYgeyBjbGFzcz86IHN0cmluZzsgbGFiZWxDbGFzcz86IHN0cmluZyB9KSB7XHJcbiAgICAgICAgICAgIGlmICgnZ2V0VmFsdWUnIGluIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdzogU2ltcGxlUmFuZ2VkU3RhdHNUYWJsZVJvdyAmIHsgY2xhc3M/OiBzdHJpbmc7IGxhYmVsQ2xhc3M/OiBzdHJpbmcgfSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzczogaXRlbS5jbGFzcyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbENsYXNzOiBpdGVtLmxhYmVsQ2xhc3MsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZGF0ZVJhbmdlcy5tYXAoKF8sIHJhbmdlSW5kZXgpID0+IGl0ZW0uZ2V0VmFsdWUoZGF0YUl0ZW1zQnlSYW5nZVtyYW5nZUluZGV4XSkpLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxSYW5nZVZhbHVlID0gcm93W2FsbFJhbmdlSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dBdmVyYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LmF2ZXJhZ2UgPSBhbGxSYW5nZVZhbHVlIC8gTWF0aC5tYXgoMSwgZGF5c1dpdGhEYXRhSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dQZXJjZW50YWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LnBlcmNlbnRhZ2UgPSAxMDAgKiBhbGxSYW5nZVZhbHVlIC8gdG90YWxWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiBpdGVtLml0ZW1zLm1hcChzdWJpdGVtID0+IHRoaXMubWFwSXRlbVRvUm93KHN1Yml0ZW0sIGRhdGFJdGVtc0J5UmFuZ2UsIGFsbFJhbmdlSW5kZXgsIGRheXNXaXRoRGF0YUl0ZW1zLCB0b3RhbFZhbHVlKSBhcyBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93ICYgeyBjbGFzcz86IHN0cmluZzsgbGFiZWxDbGFzcz86IHN0cmluZyB9KSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGZvb3RlclJvd3MoKTogUmFuZ2VkU3RhdHNUYWJsZVJvd1tdIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1zQnlSYW5nZSA9IHRoaXMuZGF0YUl0ZW1zQnlSYW5nZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFJhbmdlSW5kZXggPSB0aGlzLmRhdGVSYW5nZXMuZmluZEluZGV4KHJhbmdlID0+IHJhbmdlLnR5cGUgPT0gJ2FsbCcpXHJcbiAgICAgICAgICAgICAgICA/PyBfdGhyb3coYGZhaWxlZCB0byBmaW5kIHJhbmdlICdhbGwnYCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtRGF5cyA9IGRhdGFJdGVtc0J5UmFuZ2VbYWxsUmFuZ2VJbmRleF0ubWFwKGV4cG8gPT4gc3RhcnRPZkRheShleHBvLmRhdGUpLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheXNXaXRoRGF0YUl0ZW1zID0gbmV3IFNldChkYXRhSXRlbURheXMpLnNpemU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb290ZXJJdGVtcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3c6IFJhbmdlZFN0YXRzVGFibGVSb3cgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5kYXRlUmFuZ2VzLm1hcCgoXywgcmFuZ2VJbmRleCkgPT4gJ2dldFZhbHVlJyBpbiBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gaXRlbS5nZXRWYWx1ZShkYXRhSXRlbXNCeVJhbmdlW3JhbmdlSW5kZXhdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGl0ZW0uaXRlbXMucmVkdWNlKChhY2MsIGkpID0+IGFjYyArIGkuZ2V0VmFsdWUoZGF0YUl0ZW1zQnlSYW5nZVtyYW5nZUluZGV4XSksIDApXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICBwZXJjZW50YWdlOiAnJyxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0F2ZXJhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxSYW5nZVZhbHVlID0gcm93W2FsbFJhbmdlSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdy5hdmVyYWdlID0gYWxsUmFuZ2VWYWx1ZSAvIE1hdGgubWF4KDEsIGRheXNXaXRoRGF0YUl0ZW1zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm93O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0Q2VsbENsYXNzKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdmYWRlLXZhbHVlJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuPC9zY3JpcHQ+XHJcbjxzdHlsZSBsYW5nPVwic2Nzc1wiIHNjb3BlZD5cclxuICAgIC5ncmlkLXRhYmxlIHtcclxuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuXHJcbiAgICAgICAgJjo6di1kZWVwIC5mYWRlLXZhbHVlIHtcclxuICAgICAgICAgICAgY29sb3I6IHJnYmEod2hpdGUsIDAuMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC5yYW5nZWQtc3RhdHMtdGFibGUtY2VsbCB7XHJcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIH1cclxuPC9zdHlsZT4iLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCI7IGV4cG9ydCBkZWZhdWx0IG1vZDsgZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RocmVhZC1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9MTUyNmJlY2Emc2NvcGVkPXRydWUmXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCJcbmV4cG9ydCAqIGZyb20gXCIuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9MTUyNmJlY2EmbGFuZz1zY3NzJnNjb3BlZD10cnVlJlwiXG5cblxuLyogbm9ybWFsaXplIGNvbXBvbmVudCAqL1xuaW1wb3J0IG5vcm1hbGl6ZXIgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvcnVudGltZS9jb21wb25lbnROb3JtYWxpemVyLmpzXCJcbnZhciBjb21wb25lbnQgPSBub3JtYWxpemVyKFxuICBzY3JpcHQsXG4gIHJlbmRlcixcbiAgc3RhdGljUmVuZGVyRm5zLFxuICBmYWxzZSxcbiAgbnVsbCxcbiAgXCIxNTI2YmVjYVwiLFxuICBudWxsXG4gIFxuKVxuXG5leHBvcnQgZGVmYXVsdCBjb21wb25lbnQuZXhwb3J0cyIsInZhciByZW5kZXIgPSBmdW5jdGlvbiAoKSB7dmFyIF92bT10aGlzO3ZhciBfaD1fdm0uJGNyZWF0ZUVsZW1lbnQ7dmFyIF9jPV92bS5fc2VsZi5fY3x8X2g7cmV0dXJuIF9jKCdkaXYnLHtzdGF0aWNDbGFzczpcInRhYmxlLWNvbnRhaW5lclwifSxbX2MoJ3JhbmdlZC1zdGF0cy10YWJsZScse2F0dHJzOntcImRhdGFJdGVtc1wiOl92bS5jb21iYXRzLFwiaXRlbXNcIjpfdm0uaXRlbXMsXCJmb290ZXJJdGVtc1wiOl92bS5mb290ZXJJdGVtcyxcInNob3ctYXZlcmFnZVwiOlwiXCIsXCJhdmVyYWdlTnVtYmVyRm9ybWF0T3B0aW9uc1wiOl92bS5hdmdOdW1iZXJGb3JtYXR9LHNjb3BlZFNsb3RzOl92bS5fdShbe2tleTpcImNlbGwtbGFiZWxcIixmbjpmdW5jdGlvbihyZWYpe1xudmFyIHZhbHVlID0gcmVmLnZhbHVlO1xucmV0dXJuIFtfYygnc3Bhbicse3N0YXRpY0NsYXNzOlwibXItMlwiLGRvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKHZhbHVlKX19KSxfYygnby1zaGlwJyx7YXR0cnM6e1wic2hpcFwiOl92bS5zaGlwVGFibGVbdmFsdWVdLFwic2l6ZVwiOlwiMjRweFwifX0pXX19XSl9KSxfYygnZmxvYXRpbmctbWVudScse2F0dHJzOntcImxlZnRcIjpcIlwifSxzY29wZWRTbG90czpfdm0uX3UoW3trZXk6XCJhY3RpdmF0b3JcIixmbjpmdW5jdGlvbigpe3JldHVybiBbX2MoJ2J1dHRvbicse29uOntcImNsaWNrXCI6ZnVuY3Rpb24oJGV2ZW50KXtfdm0uc2hvd1NldHRpbmdzID0gIV92bS5zaG93U2V0dGluZ3N9fX0sW19jKCdzcGFuJyx7c3RhdGljQ2xhc3M6XCJtZGkgbWRpLWNvZ1wifSldKV19LHByb3h5OnRydWV9XSksbW9kZWw6e3ZhbHVlOihfdm0uc2hvd1NldHRpbmdzKSxjYWxsYmFjazpmdW5jdGlvbiAoJCR2KSB7X3ZtLnNob3dTZXR0aW5ncz0kJHZ9LGV4cHJlc3Npb246XCJzaG93U2V0dGluZ3NcIn19LFtfYygnY29tYmF0LXRyYWNraW5nLWlnbm9yZS1lc3Bpb25hZ2UtY29tYmF0cy1zZXR0aW5ncycpLF9jKCdocicpLF9jKCdkYXRlLXJhbmdlLXNldHRpbmdzJyldLDEpXSwxKX1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiPHRlbXBsYXRlPlxyXG4gICAgPGRpdiBjbGFzcz1cInRhYmxlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxyYW5nZWQtc3RhdHMtdGFibGVcclxuICAgICAgICAgICAgOmRhdGFJdGVtcz1cImNvbWJhdHNcIlxyXG4gICAgICAgICAgICA6aXRlbXM9XCJpdGVtc1wiXHJcbiAgICAgICAgICAgIDpmb290ZXJJdGVtcz1cImZvb3Rlckl0ZW1zXCJcclxuICAgICAgICAgICAgc2hvdy1hdmVyYWdlXHJcbiAgICAgICAgICAgIDphdmVyYWdlTnVtYmVyRm9ybWF0T3B0aW9ucz1cImF2Z051bWJlckZvcm1hdFwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgICA8dGVtcGxhdGUgI2NlbGwtbGFiZWw9XCJ7IHZhbHVlIH1cIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIHYtdGV4dD1cInZhbHVlXCIgY2xhc3M9XCJtci0yXCIgLz5cclxuXHJcbiAgICAgICAgICAgICAgICA8by1zaGlwIDpzaGlwPVwic2hpcFRhYmxlW3ZhbHVlXVwiIHNpemU9XCIyNHB4XCIgLz5cclxuICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICA8L3JhbmdlZC1zdGF0cy10YWJsZT5cclxuXHJcbiAgICAgICAgPGZsb2F0aW5nLW1lbnUgdi1tb2RlbD1cInNob3dTZXR0aW5nc1wiIGxlZnQ+XHJcbiAgICAgICAgICAgIDx0ZW1wbGF0ZSAjYWN0aXZhdG9yPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9XCJzaG93U2V0dGluZ3MgPSAhc2hvd1NldHRpbmdzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZGkgbWRpLWNvZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuXHJcbiAgICAgICAgICAgIDxjb21iYXQtdHJhY2tpbmctaWdub3JlLWVzcGlvbmFnZS1jb21iYXRzLXNldHRpbmdzIC8+XHJcbiAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICA8ZGF0ZS1yYW5nZS1zZXR0aW5ncyAvPlxyXG4gICAgICAgIDwvZmxvYXRpbmctbWVudT5cclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgUmFuZ2VkU3RhdHNUYWJsZSwgeyBSYW5nZWRTdGF0c1RhYmxlSXRlbSB9IGZyb20gJ0BzdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlJztcclxuICAgIGltcG9ydCB7IENvbWJhdFJlcG9ydERhdGFNb2R1bGUsIERhaWx5Q29tYmF0UmVwb3J0UmVzdWx0IH0gZnJvbSAnQC92aWV3cy9zdGF0cy9kYXRhL0NvbWJhdFJlcG9ydERhdGFNb2R1bGUnO1xyXG4gICAgaW1wb3J0IHsgU2hpcFR5cGUgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvc2hpcHMvU2hpcFR5cGUnO1xyXG4gICAgaW1wb3J0IHsgU2hpcFR5cGVzIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL3NoaXBzL1NoaXBUeXBlcyc7XHJcbiAgICBpbXBvcnQgRGF0ZVJhbmdlU2V0dGluZ3MgZnJvbSAnQHN0YXRzL2NvbXBvbmVudHMvc2V0dGluZ3MvRGF0ZVJhbmdlU2V0dGluZ3MudnVlJztcclxuICAgIGltcG9ydCBDb21iYXRUcmFja2luZ0lnbm9yZUVzcGlvbmFnZUNvbWJhdHNTZXR0aW5ncyBmcm9tICdAc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9Db21iYXRUcmFja2luZ0lnbm9yZUVzcGlvbmFnZUNvbWJhdHNTZXR0aW5ncy52dWUnO1xyXG5cclxuICAgIEBDb21wb25lbnQoe1xyXG4gICAgICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAgICAgUmFuZ2VkU3RhdHNUYWJsZSxcclxuICAgICAgICAgICAgRGF0ZVJhbmdlU2V0dGluZ3MsXHJcbiAgICAgICAgICAgIENvbWJhdFRyYWNraW5nSWdub3JlRXNwaW9uYWdlQ29tYmF0c1NldHRpbmdzLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFibGUgZXh0ZW5kcyBWdWUge1xyXG4gICAgICAgIHByaXZhdGUgc2hvd1NldHRpbmdzID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBhdmdOdW1iZXJGb3JtYXQ6IEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAxLFxyXG4gICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDEsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgY29tYmF0cygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbWJhdFJlcG9ydERhdGFNb2R1bGUuZGFpbHlSZXN1bHRzQXJyYXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBpdGVtcygpOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxEYWlseUNvbWJhdFJlcG9ydFJlc3VsdD5bXSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTaGlwVHlwZXMubWFwKHNoaXAgPT4gKHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0Lm9nYW1lLnNoaXBzW3NoaXBdLFxyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGNvbWJhdHMgPT4gY29tYmF0cy5yZWR1Y2UoKGFjYywgY29tYmF0KSA9PiBhY2MgKyBjb21iYXQubG9zdFNoaXBzLm9uRXhwZWRpdGlvbnMuc2hpcHNbc2hpcF0sIDApLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBmb290ZXJJdGVtcygpOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxEYWlseUNvbWJhdFJlcG9ydFJlc3VsdD5bXSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLmNvbW1vbi5zdW0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGNvbWJhdHMgPT4gU2hpcFR5cGVzLnJlZHVjZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRvdGFsLCBzaGlwKSA9PiB0b3RhbCArIGNvbWJhdHMucmVkdWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjYywgY29tYmF0KSA9PiBhY2MgKyBjb21iYXQubG9zdFNoaXBzLm9uRXhwZWRpdGlvbnMuc2hpcHNbc2hpcF0sIDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBzaGlwVGFibGUoKTogUmVjb3JkPHN0cmluZywgU2hpcFR5cGU+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIFt0aGlzLiRpMThuLiR0Lm9nYW1lLnNoaXBzW1NoaXBUeXBlLmxpZ2h0RmlnaHRlcl1dOiBTaGlwVHlwZS5saWdodEZpZ2h0ZXIsXHJcbiAgICAgICAgICAgICAgICBbdGhpcy4kaTE4bi4kdC5vZ2FtZS5zaGlwc1tTaGlwVHlwZS5oZWF2eUZpZ2h0ZXJdXTogU2hpcFR5cGUuaGVhdnlGaWdodGVyLFxyXG4gICAgICAgICAgICAgICAgW3RoaXMuJGkxOG4uJHQub2dhbWUuc2hpcHNbU2hpcFR5cGUuY3J1aXNlcl1dOiBTaGlwVHlwZS5jcnVpc2VyLFxyXG4gICAgICAgICAgICAgICAgW3RoaXMuJGkxOG4uJHQub2dhbWUuc2hpcHNbU2hpcFR5cGUuYmF0dGxlc2hpcF1dOiBTaGlwVHlwZS5iYXR0bGVzaGlwLFxyXG4gICAgICAgICAgICAgICAgW3RoaXMuJGkxOG4uJHQub2dhbWUuc2hpcHNbU2hpcFR5cGUuYm9tYmVyXV06IFNoaXBUeXBlLmJvbWJlcixcclxuICAgICAgICAgICAgICAgIFt0aGlzLiRpMThuLiR0Lm9nYW1lLnNoaXBzW1NoaXBUeXBlLmJhdHRsZWNydWlzZXJdXTogU2hpcFR5cGUuYmF0dGxlY3J1aXNlcixcclxuICAgICAgICAgICAgICAgIFt0aGlzLiRpMThuLiR0Lm9nYW1lLnNoaXBzW1NoaXBUeXBlLmRlc3Ryb3llcl1dOiBTaGlwVHlwZS5kZXN0cm95ZXIsXHJcbiAgICAgICAgICAgICAgICBbdGhpcy4kaTE4bi4kdC5vZ2FtZS5zaGlwc1tTaGlwVHlwZS5yZWFwZXJdXTogU2hpcFR5cGUucmVhcGVyLFxyXG4gICAgICAgICAgICAgICAgW3RoaXMuJGkxOG4uJHQub2dhbWUuc2hpcHNbU2hpcFR5cGUucGF0aGZpbmRlcl1dOiBTaGlwVHlwZS5wYXRoZmluZGVyLFxyXG4gICAgICAgICAgICAgICAgW3RoaXMuJGkxOG4uJHQub2dhbWUuc2hpcHNbU2hpcFR5cGUuc21hbGxDYXJnb11dOiBTaGlwVHlwZS5zbWFsbENhcmdvLFxyXG4gICAgICAgICAgICAgICAgW3RoaXMuJGkxOG4uJHQub2dhbWUuc2hpcHNbU2hpcFR5cGUubGFyZ2VDYXJnb11dOiBTaGlwVHlwZS5sYXJnZUNhcmdvLFxyXG4gICAgICAgICAgICAgICAgW3RoaXMuJGkxOG4uJHQub2dhbWUuc2hpcHNbU2hpcFR5cGUuZXNwaW9uYWdlUHJvYmVdXTogU2hpcFR5cGUuZXNwaW9uYWdlUHJvYmUsXHJcbiAgICAgICAgICAgICAgICBbdGhpcy4kaTE4bi4kdC5vZ2FtZS5zaGlwc1tTaGlwVHlwZS5yZWN5Y2xlcl1dOiBTaGlwVHlwZS5yZWN5Y2xlcixcclxuICAgICAgICAgICAgICAgIFt0aGlzLiRpMThuLiR0Lm9nYW1lLnNoaXBzW1NoaXBUeXBlLmRlYXRoU3Rhcl1dOiBTaGlwVHlwZS5kZWF0aFN0YXIsXHJcbiAgICAgICAgICAgICAgICBbdGhpcy4kaTE4bi4kdC5vZ2FtZS5zaGlwc1tTaGlwVHlwZS5jcmF3bGVyXV06IFNoaXBUeXBlLmNyYXdsZXIsXHJcbiAgICAgICAgICAgICAgICBbdGhpcy4kaTE4bi4kdC5vZ2FtZS5zaGlwc1tTaGlwVHlwZS5zb2xhclNhdGVsbGl0ZV1dOiBTaGlwVHlwZS5zb2xhclNhdGVsbGl0ZSxcclxuICAgICAgICAgICAgICAgIFt0aGlzLiRpMThuLiR0Lm9nYW1lLnNoaXBzW1NoaXBUeXBlLmNvbG9ueVNoaXBdXTogU2hpcFR5cGUuY29sb255U2hpcCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc2NyaXB0PlxyXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XHJcbiAgICAudGFibGUtY29udGFpbmVyIHtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGNvbHVtbi1nYXA6IDRweDtcclxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciBhdXRvO1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBzdGFydDtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTE4NjEzZmVhJnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTE4NjEzZmVhJmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiMTg2MTNmZWFcIixcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHJlcXVpcmVkQXJncztcblxuZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gc3RhcnRPZkRheTtcblxudmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3RvRGF0ZS9pbmRleC5qc1wiKSk7XG5cbnZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5mdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdG9EYXRlO1xuXG52YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gICgwLCBfaW5kZXguZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdLCJuYW1lcyI6WyJyZW5kZXIiLCJfdm0iLCJ0aGlzIiwiX2giLCIkY3JlYXRlRWxlbWVudCIsIl9jIiwiX3NlbGYiLCJzdGF0aWNDbGFzcyIsImRvbVByb3BzIiwiX3MiLCIkaTE4biIsIiR0IiwiZXh0ZW5zaW9uIiwic2V0dGluZ3MiLCJjb21iYXRzIiwiaWdub3JlRXNwaW9uYWdlQ29tYmF0cyIsInRpdGxlIiwiYXR0cnMiLCJsYWJlbCIsIm9uIiwiJGV2ZW50Iiwic2V0SWdub3JlRXNwaW9uYWdlQ29tYmF0cyIsInN0YXRpY1JlbmRlckZucyIsImNvbXBvbmVudCIsImNvbHVtbnMiLCJyb3dzIiwiZm9vdGVyUm93cyIsInZhbHVlIiwiZ2V0Q2VsbENsYXNzIiwic2NvcGVkU2xvdHMiLCJfdSIsIl9sIiwiY29sdW1uIiwiaSIsImtleSIsImZuIiwicmVmIiwiaXRlbSIsInNsb3ROYW1lIiwiJHNjb3BlZFNsb3RzIiwiX3QiLCJjbGFzcyIsImxhYmVsQ2xhc3MiLCJpdGVtcyIsImZvcm1hdHRlciIsImluZGV4IiwibmFtZSIsImRhdGEiLCJmb290ZXJJdGVtcyIsImF2Z051bWJlckZvcm1hdCIsInNoaXBUYWJsZSIsInNob3dTZXR0aW5ncyIsInByb3h5IiwibW9kZWwiLCJjYWxsYmFjayIsIiQkdiIsImV4cHJlc3Npb24iLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZhdWx0Iiwic3RhcnRPZkRheSIsIl9pbmRleCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfaW5kZXgyIiwib2JqIiwiX19lc01vZHVsZSIsImRpcnR5RGF0ZSIsImFyZ3VtZW50cyIsImRhdGUiLCJzZXRIb3VycyIsInRvRGF0ZSIsImFyZ3VtZW50IiwiYXJnU3RyIiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiRGF0ZSIsImdldFRpbWUiLCJjb25zb2xlIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJOYU4iXSwic291cmNlUm9vdCI6IiJ9