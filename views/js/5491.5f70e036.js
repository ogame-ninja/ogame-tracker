"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[5491],{4263:(e,t,s)=>{var i;s.d(t,{O:()=>a}),function(e){e[e["total"]=0]="total",e[e["economy"]=1]="economy",e[e["research"]=2]="research",e[e["militaryAndNumberOfShips"]=3]="militaryAndNumberOfShips",e[e["militaryLost"]=4]="militaryLost",e[e["militaryBuilt"]=5]="militaryBuilt",e[e["militaryDestroyed"]=6]="militaryDestroyed",e[e["honor"]=7]="honor",e[e["lifeform"]=8]="lifeform",e[e["lifeformEconomy"]=9]="lifeformEconomy",e[e["lifeformTechnology"]=10]="lifeformTechnology",e[e["lifeformDiscoveries"]=11]="lifeformDiscoveries"}(i||(i={}));const a=["total","economy","research","military","militaryBuilt","militaryDestroyed","militaryLost","honor","numberOfShips","lifeform","lifeformEconomy","lifeformTechnology","lifeformDiscoveries"]},5593:(e,t,s)=>{s.d(t,{D:()=>m});var i=s(655),a=s(3768),r=s(4384),o=s(1936);function l(e,t){const s={...e};return Object.keys(t).forEach((e=>{const i=t[e];if(e in s){const t=s[e];if("object"===typeof t&&!(t instanceof Array))return void(s[e]=l(t,i))}s[e]=i})),s}const n={universeHistory:{alliances:{highscore:[]},players:{highscore:[]}}};async function y(e){const t=await(0,r._N)(e),s=l(n,await t.get("universeSpecificSettings",0)??{});return s}var c=s(3654),h=s(4028),d=s(8717);let u=class extends h.w3{settings=null;_ready;_resolveReady;updateSettings(e){console.debug("updating universe specific settings",e),this.settings=e,(async()=>{const t=await(0,r._N)(d.l);await t.put("universeSpecificSettings",e,0);const s={ogameMeta:d.l,senderUuid:d.g,type:o.C.NotifyUniverseSpecificSettingsUpdate};await(0,a.p)(s)})()}get ready(){return this._ready}async created(){this._ready=new Promise((e=>this._resolveReady=e)),this.initCommunication(),await this.loadData()}initCommunication(){chrome.runtime.onMessage.addListener((async e=>await this.onMessage(e)))}async loadData(){this.settings=await y(d.l),this._resolveReady()}async onMessage(e){const{type:t,ogameMeta:s}=e;if((0,c.i)(s,d.l)&&e.senderUuid!=d.g)switch(t){case o.C.NotifyUniverseSpecificSettingsUpdate:await this.loadData();break}}};u=(0,i.gn)([h.wA],u);const m=new u},5491:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"highscores"},[e.dataModuleLoading?s("loading-spinner"):[s("grid-table",{staticClass:"player-selection-table",attrs:{columns:e.tableColumns,items:e.tableItems},scopedSlots:e._u([{key:"cell-player",fn:function(t){var i=t.value;return[null==i?[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedPlayerName,expression:"selectedPlayerName"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:e.$i18n.$t.extension.universeHistory.playerSelection.search,list:"player-list"},domProps:{value:e.selectedPlayerName},on:{change:function(t){return e.onPlayerSelected(t.target.value)},input:function(t){t.target.composing||(e.selectedPlayerName=t.target.value)}}}),s("datalist",{attrs:{id:"player-list"}},e._l(e.playerNames,(function(t,i){return s("option",{key:i},[e._v(" "+e._s(t)+" ")])})),0)]:s("div",{staticClass:"list-item"},[s("span",{staticClass:"mdi mdi-delete",on:{click:function(t){return e.removePlayer(i.id)}}}),s("span",{domProps:{textContent:e._s(i.name)}})])]}}])}),s("tabs",{attrs:{tabs:e.tabs}},[e._l(e.keys,(function(t){return[s("template",{slot:"tab-content-"+t},[e.playerScoresLoading?s("span",{key:"score-"+t+"-loading",staticClass:"loading"}):e.playerIds.length>0?s("scrollable-chart",{key:"score-"+t,attrs:{datasets:e.scoreDatasets[t],"continue-last-value":"","show-x-values-in-grid":"","tick-interval":864e5,ticks:30,"tick-list":e.days,"min-tick":e.firstDay,"max-tick":e.nextDay,"x-label-formatter":function(t){return e.$i18n.$d(t,"date")},"x-label-tooltip-formatter":function(t){return e.$i18n.$d(t,"datetime")}}}):e._e()],1)]}))],2)]],2)},a=[],r=s(655),o=s(4263),l=s(9751),n=s(7545),y=s(6538),c=s(8717),h=s(7076),d=s(5038),u=s(5593),m=s(7349),p=s(9119),f=s(4028);let g=class extends f.w3{colors=["#F48FB1","#673AB7","#E53935","#3F51B5","#006064","#546E7A","#EF9A9A","#64B5F6","#FFE082","#E91E63","#BA68C8","#BF360C","#039BE5","#8E24AA","#9CCC65","#A1887F","#0097A7","#FFAB91","#009688","#43A047","#1A237E","#558B2F","#311B92","#880E4F","#01579B","#AFB42B","#1E88E5","#827717","#FFF176","#BDBDBD","#FFC107","#FFA726","#FF5722","#795548","#004D40","#81C784","#90A4AE","#757575","#FDD835"];leftX=0;rightX=1;dataModuleLoading=!0;playerScoresLoading=!0;selectedPlayerName="";scoreDatasets={};firstDay=0;keys=o.O;get tabs(){const e=[{key:"total",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.total},{key:"economy",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.economy},{key:"research",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.research},{key:"military",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.military},{key:"militaryBuilt",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.militaryBuilt},{key:"militaryDestroyed",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.militaryDestroyed},{key:"militaryLost",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.militaryLost},{key:"honor",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.honor},{key:"numberOfShips",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.numberOfShips}];return h.s.serverSettings.lifeforms.enabled&&e.push({key:"lifeform",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.lifeform},{key:"lifeformEconomy",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.lifeformEconomy},{key:"lifeformTechnology",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.lifeformTechnology},{key:"lifeformDiscoveries",label:this.$i18n.$t.extension.universeHistory.highscoreTabs.lifeformDiscoveries}),e}get tableColumns(){return[{key:"player",label:this.$i18n.$t.extension.universeHistory.playerSelection.header,headerClass:"player-selection-table-cell",class:"player-selection-table-cell"}]}get tableItems(){return[{player:null},...this.selectedPlayers.map((e=>({player:e})))]}get playerIds(){return(this.$route.query.players??"").split(",").filter((e=>e.length>0)).map((e=>(0,n.Y)(e,10))).filter((e=>this.players.some((t=>t.id==e))))}async mounted(){await u.D.ready,await this.redirectToDefault(),this.dataModuleLoading=!0,await d.z.ready,this.dataModuleLoading=!1,await this.loadPlayerScores()}async redirectToDefault(){if(0!=this.playerIds.length)return;let e=u.D.settings.universeHistory.players.highscore;0==e.length&&(e=[c.l.playerId]),await this.updatePlayerIdRoute(e)}async loadPlayerScores(){this.playerScoresLoading=!0,this.scoreDatasets={};const e={};this.playerIds.forEach((t=>e[t]={})),this.keys.forEach((t=>{this.scoreDatasets[t]=[],this.playerIds.forEach(((s,i)=>e[s][t]={key:`${s}-${t}`,values:[],color:this.colors[i%this.colors.length],label:this.players.find((e=>e.id==s))?.name??(0,y.A)(`no player with id '${s}' found`),filled:!1,stack:!1,hidePoints:!1}))}));let t=Number.MAX_SAFE_INTEGER;const s=await d.z.getPlayerScoreHistory(this.playerIds),i=o.O,a=(0,l.a)(this.playerIds,(()=>(0,l.a)(i,null)));s.forEach(((s,r)=>{t=Math.min(t,s.date),a[s.playerId][s.type]!=s.score&&i.includes(s.type)&&(e[s.playerId][s.type].values.push({x:s.date,y:s.score}),a[s.playerId][s.type]=s.score)})),this.keys.forEach((t=>{this.playerIds.forEach((s=>{this.scoreDatasets[t].push(e[s][t])}))})),this.firstDay=(0,p.Z)(t).getTime(),this.playerScoresLoading=!1}get nextDay(){return(0,m.Z)((0,p.Z)(Date.now()),1).getTime()}get days(){const e=[],t=this.nextDay;for(let s=this.firstDay;s<=t;s=(0,m.Z)(s,1).getTime())e.push(s);return e}get players(){return d.z.players}get playerNames(){return this.players.map((e=>e.name)).sort()}get selectedPlayers(){return this.playerIds.map((e=>this.players.find((t=>t.id==e))))}async onPlayerSelected(e){const t=this.players.find((t=>t.name.toLowerCase()==e.toLowerCase()));if(null==t)return;await this.$nextTick(),this.selectedPlayerName="";const s=this.$route.query.players?.split(",")??[];await this.updatePlayerIdRoute([...s.filter((e=>e!=t.id.toString())),t.id]),await this.loadPlayerScores()}async removePlayer(e){await this.updatePlayerIdRoute(this.playerIds.filter((t=>t!=e))),await this.loadPlayerScores()}updateSettings(e){const t=u.D.settings;u.D.updateSettings({...t,universeHistory:{...t.universeHistory,players:{...t.universeHistory.players,highscore:e}}})}async updatePlayerIdRoute(e){this.updateSettings(e.map((e=>"string"===typeof e?(0,n.Y)(e,10):e))),await this.$router.replace({query:{players:e.join(",")}}),await this.redirectToDefault()}};g=(0,r.gn)([(0,f.wA)({})],g);const b=g,v=b;var D=s(1001),$=(0,D.Z)(v,i,a,!1,null,"b1b6ec5e",null);const k=$.exports},7349:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(3946),a=s(9013),r=s(3882);function o(e,t){(0,r.Z)(2,arguments);var s=(0,a.Z)(e),o=(0,i.Z)(t);return isNaN(o)?new Date(NaN):o?(s.setDate(s.getDate()+o),s):s}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvNTQ5MS41ZjcwZTAzNi5qcyIsIm1hcHBpbmdzIjoiZ0lBQUEsSUFBWUEsRSxpQkFBWixTQUFZQSxHQUNSLHdCQUNBLDRCQUNBLDhCQUNBLDhEQUNBLHNDQUNBLHdDQUNBLGdEQUNBLHdCQUVBLDhCQUNBLDRDQUNBLG1EQUNBLHFEQWJKLENBQVlBLElBQUFBLEVBQWEsS0FzQmxCLE1BQU1DLEVBQTBDLENBQ25ELFFBQVMsVUFBVyxXQUNwQixXQUFZLGdCQUFpQixvQkFBcUIsZUFDbEQsUUFBUyxnQkFDVCxXQUFZLGtCQUFtQixxQkFBc0Isd0IsMkVDekJsRCxTQUFTQyxFQUF5Q0MsRUFBTUMsR0FDM0QsTUFBTUMsRUFBUyxJQUFLRixHQWdCcEIsT0FkQUcsT0FBT0MsS0FBS0gsR0FBR0ksU0FBUUMsSUFDbkIsTUFBTUMsRUFBU04sRUFBRUssR0FDakIsR0FBR0EsS0FBUUosRUFBUSxDQUNmLE1BQU1NLEVBQU1OLEVBQU9JLEdBRW5CLEdBQWtCLGtCQUFSRSxLQUFzQkEsYUFBZUMsT0FFM0MsWUFEQVAsRUFBT0ksR0FBUVAsRUFBVVMsRUFBS0QsSUFLdENMLEVBQU9JLEdBQVFDLEtBR1pMLEVDYlgsTUFBTVEsRUFBNEMsQ0FDOUNDLGdCQUFpQixDQUNiQyxVQUFXLENBQ1BDLFVBQVcsSUFFZkMsUUFBUyxDQUNMRCxVQUFXLE1BS2hCRSxlQUFlQyxFQUE2QkMsR0FDL0MsTUFBTUMsUUFBVyxRQUFrQkQsR0FFN0JFLEVBQVdwQixFQUNiVyxRQUNPUSxFQUFHRSxJQUFJLDJCQUE0QixJQUFPLElBRXJELE9BQU9ELEUsa0NDWFgsSUFBTUUsRUFBTixjQUFzRCxLQUMzQ0YsU0FBcUMsS0FFcENHLE9BQ0FDLGNBRURDLGVBQWVMLEdBQ2xCTSxRQUFRQyxNQUFNLHNDQUF1Q1AsR0FDckRRLEtBQUtSLFNBQVdBLEVBRVgsV0FDRCxNQUFNRCxRQUFXLFFBQWtCLFdBQzdCQSxFQUFHVSxJQUFJLDJCQUE0QlQsRUFBVSxHQUVuRCxNQUFNVSxFQUFtRCxDQUNyREMsVUFBVyxJQUNYQyxXQUFZLElBQ1pDLEtBQU1DLEVBQUEsOENBRUosRUFBQUMsRUFBQSxHQUFpQkwsSUFUdEIsR0FhRU0sWUFDUCxPQUFPUixLQUFLTCxPQUdSUCxnQkFDSlksS0FBS0wsT0FBUyxJQUFJYyxTQUFjQyxHQUFXVixLQUFLSixjQUFnQmMsSUFFaEVWLEtBQUtXLDBCQUNDWCxLQUFLWSxXQUdQRCxvQkFDSkUsT0FBT0MsUUFBUUMsVUFBVUMsYUFBWTVCLE1BQU02QixTQUFpQmpCLEtBQUtlLFVBQVVFLEtBR3ZFN0IsaUJBQ0pZLEtBQUtSLGVBQWlCSCxFQUE2QixLQUVuRFcsS0FBS0osZ0JBR0RSLGdCQUFnQmMsR0FDcEIsTUFBTSxLQUFFRyxFQUFJLFVBQUVGLEdBQWNELEVBQzVCLElBQUssRUFBQWdCLEVBQUEsR0FBZ0JmLEVBQVcsTUFJNUJELEVBQUlFLFlBQWMsSUFJdEIsT0FBUUMsR0FDSixLQUFLQyxFQUFBLDZDQUNLTixLQUFLWSxXQUNYLFNBekRWbEIsR0FBdUMsU0FENUMsTUFDS0EsR0ErREMsTUFBTXlCLEVBQXFDLElBQUl6QixHLDZDQzNFdEQsSUFBSTBCLEVBQVMsV0FBYSxJQUFJQyxFQUFJckIsS0FBU3NCLEVBQUdELEVBQUlFLGVBQW1CQyxFQUFHSCxFQUFJSSxNQUFNRCxJQUFJRixFQUFHLE9BQU9FLEVBQUcsTUFBTSxDQUFDRSxZQUFZLGNBQWMsQ0FBRUwsRUFBcUIsa0JBQUVHLEVBQUcsbUJBQW1CLENBQUNBLEVBQUcsYUFBYSxDQUFDRSxZQUFZLHlCQUF5QkMsTUFBTSxDQUFDLFFBQVVOLEVBQUlPLGFBQWEsTUFBUVAsRUFBSVEsWUFBWUMsWUFBWVQsRUFBSVUsR0FBRyxDQUFDLENBQUNDLElBQUksY0FBY0MsR0FBRyxTQUFTQyxHQUN2VixJQUFJQyxFQUFTRCxFQUFJRSxNQUNqQixNQUFPLENBQVksTUFBVkQsRUFBZ0IsQ0FBQ1gsRUFBRyxRQUFRLENBQUNhLFdBQVcsQ0FBQyxDQUFDQyxLQUFLLFFBQVFDLFFBQVEsVUFBVUgsTUFBT2YsRUFBc0IsbUJBQUVtQixXQUFXLHVCQUF1QkMsWUFBWSxDQUFDLE1BQVEsUUFBUWQsTUFBTSxDQUFDLEtBQU8sT0FBTyxZQUFjTixFQUFJcUIsTUFBTUMsR0FBR0MsVUFBVTVELGdCQUFnQjZELGdCQUFnQkMsT0FBTyxLQUFPLGVBQWVDLFNBQVMsQ0FBQyxNQUFTMUIsRUFBc0Isb0JBQUcyQixHQUFHLENBQUMsT0FBUyxTQUFTQyxHQUFRLE9BQU81QixFQUFJNkIsaUJBQWlCRCxFQUFPckUsT0FBT3dELFFBQVEsTUFBUSxTQUFTYSxHQUFXQSxFQUFPckUsT0FBT3VFLFlBQXFCOUIsRUFBSStCLG1CQUFtQkgsRUFBT3JFLE9BQU93RCxXQUFVWixFQUFHLFdBQVcsQ0FBQ0csTUFBTSxDQUFDLEdBQUssZ0JBQWdCTixFQUFJZ0MsR0FBSWhDLEVBQWUsYUFBRSxTQUFTaUIsRUFBS2dCLEdBQUcsT0FBTzlCLEVBQUcsU0FBUyxDQUFDUSxJQUFJc0IsR0FBRyxDQUFDakMsRUFBSWtDLEdBQUcsSUFBSWxDLEVBQUltQyxHQUFHbEIsR0FBTSxVQUFTLElBQUlkLEVBQUcsTUFBTSxDQUFDRSxZQUFZLGFBQWEsQ0FBQ0YsRUFBRyxPQUFPLENBQUNFLFlBQVksaUJBQWlCc0IsR0FBRyxDQUFDLE1BQVEsU0FBU0MsR0FBUSxPQUFPNUIsRUFBSW9DLGFBQWF0QixFQUFPdUIsUUFBUWxDLEVBQUcsT0FBTyxDQUFDdUIsU0FBUyxDQUFDLFlBQWMxQixFQUFJbUMsR0FBR3JCLEVBQU9HLGtCQUFrQmQsRUFBRyxPQUFPLENBQUNHLE1BQU0sQ0FBQyxLQUFPTixFQUFJc0MsT0FBTyxDQUFDdEMsRUFBSWdDLEdBQUloQyxFQUFRLE1BQUUsU0FBU1csR0FBSyxNQUFPLENBQUNSLEVBQUcsV0FBVyxDQUFDb0MsS0FBTSxlQUFpQjVCLEdBQU0sQ0FBRVgsRUFBdUIsb0JBQUVHLEVBQUcsT0FBTyxDQUFDUSxJQUFLLFNBQVdBLEVBQU0sV0FBWU4sWUFBWSxZQUFhTCxFQUFJd0MsVUFBVUMsT0FBUyxFQUFHdEMsRUFBRyxtQkFBbUIsQ0FBQ1EsSUFBSyxTQUFXQSxFQUFLTCxNQUFNLENBQUMsU0FBV04sRUFBSTBDLGNBQWMvQixHQUFLLHNCQUFzQixHQUFHLHdCQUF3QixHQUFHLGdCQUFnQixNQUFvQixNQUFRLEdBQUcsWUFBWVgsRUFBSTJDLEtBQUssV0FBVzNDLEVBQUk0QyxTQUFTLFdBQVc1QyxFQUFJNkMsUUFBUSxvQkFBb0IsU0FBVUMsR0FBSyxPQUFPOUMsRUFBSXFCLE1BQU0wQixHQUFHRCxFQUFHLFNBQVcsNEJBQTRCLFNBQVVBLEdBQUssT0FBTzlDLEVBQUlxQixNQUFNMEIsR0FBR0QsRUFBRyxnQkFBa0I5QyxFQUFJZ0QsTUFBTSxRQUFPLEtBQUssSUFDcmhEQyxFQUFrQixHLHVIQ3VFdEIseUJBQ0EsUUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsVUFDQSxVQUNBLFVBQ0EsV0FHQSxRQUNBLFNBQ0EscUJBQ0EsdUJBRUEsc0JBQ0EsaUJBQ0EsV0FFQSxTQUNBLFdBQ0EsU0FDQSxDQUNBLFlBQ0EsbUVBRUEsQ0FDQSxjQUNBLHFFQUVBLENBQ0EsZUFDQSxzRUFFQSxDQUNBLGVBQ0Esc0VBRUEsQ0FDQSxvQkFDQSwyRUFFQSxDQUNBLHdCQUNBLCtFQUVBLENBQ0EsbUJBQ0EsMEVBRUEsQ0FDQSxZQUNBLG1FQUVBLENBQ0Esb0JBQ0EsNEVBeUJBLE9BckJBLHNDQUNBLE9BQ0EsQ0FDQSxlQUNBLHNFQUVBLENBQ0Esc0JBQ0EsNkVBRUEsQ0FDQSx5QkFDQSxnRkFFQSxDQUNBLDBCQUNBLGtGQUtBLEVBR0EsbUJBQ0EsUUFDQSxhQUNBLHFFQUNBLDBDQUNBLHNDQUlBLGlCQUNBLE9BQ0EsaUJBQ0EsNkNBS0EsZ0JBQ0Esc0NBQ0EsV0FDQSx3QkFDQSx3QkFDQSw2Q0FHQSxzQkFDQSxnQkFDQSx5QkFFQSxnQ0FDQSxVQUNBLGdDQUVBLHdCQUdBLDBCQUNBLDRCQUNBLE9BR0EscURBQ0EsY0FDQSx3QkFHQSw0QkFJQSx5QkFDQSw0QkFHQSxzQkFFQSxXQUNBLHFDQUVBLHVCQUNBLHlCQUVBLHdDQUNBLGdCQUNBLFVBQ0Esd0NBQ0EsdUZBQ0EsVUFDQSxTQUNBLG9CQUlBLDhCQUVBLHdEQUNBLE1BQ0EsZ0RBRUEsbUJBQ0EscUJBRUEsZ0NBR0EscUJBSUEsbUNBQ0EsU0FDQSxZQUVBLGtDQUdBLHVCQUNBLDRCQUNBLDBDQUlBLG1DQUVBLDRCQUdBLGNBQ0EsK0NBR0EsV0FDQSxXQUVBLGVBQ0Esc0RBQ0EsVUFHQSxTQUtBLGNBQ0EsbUJBR0Esa0JBQ0Esb0JBQ0EsaUJBQ0EsT0FHQSxzQkFDQSxnRUFHQSwwQkFDQSxzRUFDQSxXQUNBLGFBR0EsaUJBQ0EsMkJBRUEsd0RBQ0EsNkJBQ0Esa0NBQ0EsYUFFQSx3QkFHQSw0QkFDQSxpRUFFQSx3QkFHQSxrQkFDQSxxQkFDQSx1QkFDQSxFQUNBLG9CQUNBLGtCQUNBLFlBQ0EsMEJBQ0EsZ0JBTUEsNkJBQ0EsMkVBRUEsc0JBQ0EsT0FDQSw2QkFHQSwyQkE1U0EsYUFEQSxhQUNBLEcsVUMxRW1kLEksY0NRL2NDLEdBQVksT0FDZCxFQUNBbkQsRUFDQWtELEdBQ0EsRUFDQSxLQUNBLFdBQ0EsTUFJRixRQUFlQyxFQUFpQixTLGtFQ09qQixTQUFTQyxFQUFRQyxFQUFXQyxJQUN6QyxPQUFhLEVBQUdDLFdBQ2hCLElBQUlDLEdBQU8sT0FBT0gsR0FDZEksR0FBUyxPQUFVSCxHQUV2QixPQUFJSSxNQUFNRCxHQUNELElBQUlFLEtBQUtDLEtBR2JILEdBS0xELEVBQUtLLFFBQVFMLEVBQUtNLFVBQVlMLEdBQ3ZCRCxHQUpFQSIsInNvdXJjZXMiOlsib2dhbWUtdHJhY2tlcjovLy8uL3NyYy9zaGFyZWQvbW9kZWxzL29nYW1lL2hpZ2hzY29yZS50cyIsIm9nYW1lLXRyYWNrZXI6Ly8vLi9zcmMvc2hhcmVkL3V0aWxzL21lcmdlRGVlcC50cyIsIm9nYW1lLXRyYWNrZXI6Ly8vLi9zcmMvc2hhcmVkL21vZGVscy91bml2ZXJzZS1zcGVjaWZpYy1zZXR0aW5ncy9sb2FkVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzLnRzIiwib2dhbWUtdHJhY2tlcjovLy8uL3NyYy92aWV3cy9zdGF0cy9kYXRhL1VuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL3VuaXZlcnNlLWhpc3RvcnkvcGxheWVycy9IaWdoc2NvcmUudnVlP2NlZmMiLCJ3ZWJwYWNrOi8vL3NyYy92aWV3cy9zdGF0cy92aWV3cy91bml2ZXJzZS1oaXN0b3J5L3BsYXllcnMvSGlnaHNjb3JlLnZ1ZT8wOGE5Iiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy91bml2ZXJzZS1oaXN0b3J5L3BsYXllcnMvSGlnaHNjb3JlLnZ1ZT8xMDliIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy91bml2ZXJzZS1oaXN0b3J5L3BsYXllcnMvSGlnaHNjb3JlLnZ1ZT8wOTc0Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vYWRkRGF5cy9pbmRleC5qcz8wOTY1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBlbnVtIEhpZ2hzY29yZVR5cGUge1xyXG4gICAgdG90YWwgPSAwLFxyXG4gICAgZWNvbm9teSA9IDEsXHJcbiAgICByZXNlYXJjaCA9IDIsXHJcbiAgICBtaWxpdGFyeUFuZE51bWJlck9mU2hpcHMgPSAzLFxyXG4gICAgbWlsaXRhcnlMb3N0ID0gNCxcclxuICAgIG1pbGl0YXJ5QnVpbHQgPSA1LFxyXG4gICAgbWlsaXRhcnlEZXN0cm95ZWQgPSA2LFxyXG4gICAgaG9ub3IgPSA3LFxyXG5cclxuICAgIGxpZmVmb3JtID0gOCxcclxuICAgIGxpZmVmb3JtRWNvbm9teSA9IDksXHJcbiAgICBsaWZlZm9ybVRlY2hub2xvZ3kgPSAxMCxcclxuICAgIGxpZmVmb3JtRGlzY292ZXJpZXMgPSAxMSxcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSGlnaHNjb3JlVHlwZU5hbWUgPVxyXG4gICAgJ3RvdGFsJyB8ICdlY29ub215JyB8ICdyZXNlYXJjaCdcclxuICAgIHwgJ21pbGl0YXJ5JyB8ICdtaWxpdGFyeUJ1aWx0JyB8ICdtaWxpdGFyeURlc3Ryb3llZCcgfCAnbWlsaXRhcnlMb3N0J1xyXG4gICAgfCAnaG9ub3InIHwgJ251bWJlck9mU2hpcHMnXHJcbiAgICB8ICdsaWZlZm9ybScgfCAnbGlmZWZvcm1FY29ub215JyB8ICdsaWZlZm9ybVRlY2hub2xvZ3knIHwgJ2xpZmVmb3JtRGlzY292ZXJpZXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEhpZ2hzY29yZVR5cGVOYW1lczogSGlnaHNjb3JlVHlwZU5hbWVbXSA9IFtcclxuICAgICd0b3RhbCcsICdlY29ub215JywgJ3Jlc2VhcmNoJyxcclxuICAgICdtaWxpdGFyeScsICdtaWxpdGFyeUJ1aWx0JywgJ21pbGl0YXJ5RGVzdHJveWVkJywgJ21pbGl0YXJ5TG9zdCcsXHJcbiAgICAnaG9ub3InLCAnbnVtYmVyT2ZTaGlwcycsXHJcbiAgICAnbGlmZWZvcm0nLCAnbGlmZWZvcm1FY29ub215JywgJ2xpZmVmb3JtVGVjaG5vbG9neScsICdsaWZlZm9ybURpc2NvdmVyaWVzJ1xyXG5dOyIsIi8qKiBNZXJnZXMgdHdvIG9iamVjdHMgcmVjdXJzaXZlbHkuIFdpbGwgb3ZlcndyaXRlIGV4aXN0aW5nIHByb3BlcnRpZXMgaW4gYSB3aXRoIHRoZSB2YWx1ZXMgaW4gYi4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGVlcDxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55Pj4oYTogVCwgYjogVCk6IFQge1xyXG4gICAgY29uc3QgcmVzdWx0ID0geyAuLi5hIH0gYXMgUmVjb3JkPHN0cmluZywgYW55PjtcclxuXHJcbiAgICBPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGJLZXkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGJbYktleV07XHJcbiAgICAgICAgaWYoYktleSBpbiByZXN1bHQpIHtcclxuICAgICAgICAgICAgY29uc3QgY3VyID0gcmVzdWx0W2JLZXldO1xyXG5cclxuICAgICAgICAgICAgaWYodHlwZW9mIGN1ciA9PT0gJ29iamVjdCcgJiYgIShjdXIgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtiS2V5XSA9IG1lcmdlRGVlcChjdXIsIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXN1bHRbYktleV0gPSB0YXJnZXQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0IGFzIFQ7XHJcbn0iLCJpbXBvcnQgeyBnZXRQbGF5ZXJEYXRhYmFzZSB9IGZyb20gXCJAL3NoYXJlZC9kYi9hY2Nlc3NcIjtcclxuaW1wb3J0IHsgTWVzc2FnZU9nYW1lTWV0YSB9IGZyb20gXCJAL3NoYXJlZC9tZXNzYWdlcy9NZXNzYWdlXCI7XHJcbmltcG9ydCB7IG1lcmdlRGVlcCB9IGZyb20gXCJAL3NoYXJlZC91dGlscy9tZXJnZURlZXBcIjtcclxuaW1wb3J0IHsgVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzIH0gZnJvbSBcIi4vVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzXCI7XHJcblxyXG5jb25zdCBkZWZhdWx0U2V0dGluZ3M6IFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5ncyA9IHtcclxuICAgIHVuaXZlcnNlSGlzdG9yeToge1xyXG4gICAgICAgIGFsbGlhbmNlczoge1xyXG4gICAgICAgICAgICBoaWdoc2NvcmU6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGxheWVyczoge1xyXG4gICAgICAgICAgICBoaWdoc2NvcmU6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3MobWV0YTogTWVzc2FnZU9nYW1lTWV0YSk6IFByb21pc2U8VW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzPiB7XHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldFBsYXllckRhdGFiYXNlKG1ldGEpO1xyXG5cclxuICAgIGNvbnN0IHNldHRpbmdzID0gbWVyZ2VEZWVwPFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5ncz4oXHJcbiAgICAgICAgZGVmYXVsdFNldHRpbmdzLFxyXG4gICAgICAgIChhd2FpdCBkYi5nZXQoJ3VuaXZlcnNlU3BlY2lmaWNTZXR0aW5ncycsIDApKSA/PyB7fSBhcyBVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3MsXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHNldHRpbmdzO1xyXG59IiwiaW1wb3J0IHsgYnJvYWRjYXN0TWVzc2FnZSB9IGZyb20gXCJAL3NoYXJlZC9jb21tdW5pY2F0aW9uL2Jyb2FkY2FzdE1lc3NhZ2VcIjtcclxuaW1wb3J0IHsgZ2V0UGxheWVyRGF0YWJhc2UgfSBmcm9tIFwiQC9zaGFyZWQvZGIvYWNjZXNzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiQC9zaGFyZWQvbWVzc2FnZXMvTWVzc2FnZVwiO1xyXG5pbXBvcnQgeyBNZXNzYWdlVHlwZSB9IGZyb20gXCJAL3NoYXJlZC9tZXNzYWdlcy9NZXNzYWdlVHlwZVwiO1xyXG5pbXBvcnQgeyBOb3RpZnlVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NVcGRhdGVNZXNzYWdlIH0gZnJvbSBcIkAvc2hhcmVkL21lc3NhZ2VzL3VuaXZlcnNlLXNwZWNpZmljLXNldHRpbmdzXCI7XHJcbmltcG9ydCB7IGxvYWRVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3MgfSBmcm9tIFwiQC9zaGFyZWQvbW9kZWxzL3VuaXZlcnNlLXNwZWNpZmljLXNldHRpbmdzL2xvYWRVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzIH0gZnJvbSBcIkAvc2hhcmVkL21vZGVscy91bml2ZXJzZS1zcGVjaWZpYy1zZXR0aW5ncy9Vbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgb2dhbWVNZXRhc0VxdWFsIH0gZnJvbSBcIkAvc2hhcmVkL29nYW1lLXdlYi9vZ2FtZU1ldGFzRXF1YWxcIjtcclxuaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuaW1wb3J0IHsgR2xvYmFsT2dhbWVNZXRhRGF0YSwgc3RhdHNWaWV3VXVpZCB9IGZyb20gXCIuL2dsb2JhbFwiO1xyXG5cclxuQENvbXBvbmVudFxyXG5jbGFzcyBVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NEYXRhTW9kdWxlQ2xhc3MgZXh0ZW5kcyBWdWUge1xyXG4gICAgcHVibGljIHNldHRpbmdzOiBVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3MgPSBudWxsITtcclxuXHJcbiAgICBwcml2YXRlIF9yZWFkeSE6IFByb21pc2U8dm9pZD47XHJcbiAgICBwcml2YXRlIF9yZXNvbHZlUmVhZHkhOiAoKSA9PiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzKSB7XHJcbiAgICAgICAgY29uc29sZS5kZWJ1ZygndXBkYXRpbmcgdW5pdmVyc2Ugc3BlY2lmaWMgc2V0dGluZ3MnLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cclxuICAgICAgICB2b2lkIChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0UGxheWVyRGF0YWJhc2UoR2xvYmFsT2dhbWVNZXRhRGF0YSk7XHJcbiAgICAgICAgICAgIGF3YWl0IGRiLnB1dCgndW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzJywgc2V0dGluZ3MsIDApO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbXNnOiBOb3RpZnlVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NVcGRhdGVNZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgb2dhbWVNZXRhOiBHbG9iYWxPZ2FtZU1ldGFEYXRhLFxyXG4gICAgICAgICAgICAgICAgc2VuZGVyVXVpZDogc3RhdHNWaWV3VXVpZCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IE1lc3NhZ2VUeXBlLk5vdGlmeVVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc1VwZGF0ZSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBicm9hZGNhc3RNZXNzYWdlKG1zZyk7XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHJlYWR5KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZWFkeTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZWQoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVhZHkgPSBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+IHRoaXMuX3Jlc29sdmVSZWFkeSA9IHJlc29sdmUpO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRDb21tdW5pY2F0aW9uKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdENvbW11bmljYXRpb24oKSB7XHJcbiAgICAgICAgY2hyb21lLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGFzeW5jIG1lc3NhZ2UgPT4gYXdhaXQgdGhpcy5vbk1lc3NhZ2UobWVzc2FnZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgbG9hZERhdGEoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IGF3YWl0IGxvYWRVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3MoR2xvYmFsT2dhbWVNZXRhRGF0YSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3Jlc29sdmVSZWFkeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgb25NZXNzYWdlKG1zZzogTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IHsgdHlwZSwgb2dhbWVNZXRhIH0gPSBtc2c7XHJcbiAgICAgICAgaWYgKCFvZ2FtZU1ldGFzRXF1YWwob2dhbWVNZXRhLCBHbG9iYWxPZ2FtZU1ldGFEYXRhKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobXNnLnNlbmRlclV1aWQgPT0gc3RhdHNWaWV3VXVpZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5Ob3RpZnlVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NVcGRhdGU6IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZERhdGEoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZSA9IG5ldyBVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NEYXRhTW9kdWxlQ2xhc3MoKTsiLCJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygnZGl2Jyx7c3RhdGljQ2xhc3M6XCJoaWdoc2NvcmVzXCJ9LFsoX3ZtLmRhdGFNb2R1bGVMb2FkaW5nKT9fYygnbG9hZGluZy1zcGlubmVyJyk6W19jKCdncmlkLXRhYmxlJyx7c3RhdGljQ2xhc3M6XCJwbGF5ZXItc2VsZWN0aW9uLXRhYmxlXCIsYXR0cnM6e1wiY29sdW1uc1wiOl92bS50YWJsZUNvbHVtbnMsXCJpdGVtc1wiOl92bS50YWJsZUl0ZW1zfSxzY29wZWRTbG90czpfdm0uX3UoW3trZXk6XCJjZWxsLXBsYXllclwiLGZuOmZ1bmN0aW9uKHJlZil7XG52YXIgcGxheWVyID0gcmVmLnZhbHVlO1xucmV0dXJuIFsocGxheWVyID09IG51bGwpP1tfYygnaW5wdXQnLHtkaXJlY3RpdmVzOlt7bmFtZTpcIm1vZGVsXCIscmF3TmFtZTpcInYtbW9kZWxcIix2YWx1ZTooX3ZtLnNlbGVjdGVkUGxheWVyTmFtZSksZXhwcmVzc2lvbjpcInNlbGVjdGVkUGxheWVyTmFtZVwifV0sc3RhdGljU3R5bGU6e1wid2lkdGhcIjpcIjEwMCVcIn0sYXR0cnM6e1widHlwZVwiOlwidGV4dFwiLFwicGxhY2Vob2xkZXJcIjpfdm0uJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5wbGF5ZXJTZWxlY3Rpb24uc2VhcmNoLFwibGlzdFwiOlwicGxheWVyLWxpc3RcIn0sZG9tUHJvcHM6e1widmFsdWVcIjooX3ZtLnNlbGVjdGVkUGxheWVyTmFtZSl9LG9uOntcImNoYW5nZVwiOmZ1bmN0aW9uKCRldmVudCl7cmV0dXJuIF92bS5vblBsYXllclNlbGVjdGVkKCRldmVudC50YXJnZXQudmFsdWUpfSxcImlucHV0XCI6ZnVuY3Rpb24oJGV2ZW50KXtpZigkZXZlbnQudGFyZ2V0LmNvbXBvc2luZyl7IHJldHVybjsgfV92bS5zZWxlY3RlZFBsYXllck5hbWU9JGV2ZW50LnRhcmdldC52YWx1ZX19fSksX2MoJ2RhdGFsaXN0Jyx7YXR0cnM6e1wiaWRcIjpcInBsYXllci1saXN0XCJ9fSxfdm0uX2woKF92bS5wbGF5ZXJOYW1lcyksZnVuY3Rpb24obmFtZSxpKXtyZXR1cm4gX2MoJ29wdGlvbicse2tleTppfSxbX3ZtLl92KFwiIFwiK192bS5fcyhuYW1lKStcIiBcIildKX0pLDApXTpfYygnZGl2Jyx7c3RhdGljQ2xhc3M6XCJsaXN0LWl0ZW1cIn0sW19jKCdzcGFuJyx7c3RhdGljQ2xhc3M6XCJtZGkgbWRpLWRlbGV0ZVwiLG9uOntcImNsaWNrXCI6ZnVuY3Rpb24oJGV2ZW50KXtyZXR1cm4gX3ZtLnJlbW92ZVBsYXllcihwbGF5ZXIuaWQpfX19KSxfYygnc3Bhbicse2RvbVByb3BzOntcInRleHRDb250ZW50XCI6X3ZtLl9zKHBsYXllci5uYW1lKX19KV0pXX19XSl9KSxfYygndGFicycse2F0dHJzOntcInRhYnNcIjpfdm0udGFic319LFtfdm0uX2woKF92bS5rZXlzKSxmdW5jdGlvbihrZXkpe3JldHVybiBbX2MoJ3RlbXBsYXRlJyx7c2xvdDooXCJ0YWItY29udGVudC1cIiArIGtleSl9LFsoX3ZtLnBsYXllclNjb3Jlc0xvYWRpbmcpP19jKCdzcGFuJyx7a2V5OihcInNjb3JlLVwiICsga2V5ICsgXCItbG9hZGluZ1wiKSxzdGF0aWNDbGFzczpcImxvYWRpbmdcIn0pOihfdm0ucGxheWVySWRzLmxlbmd0aCA+IDApP19jKCdzY3JvbGxhYmxlLWNoYXJ0Jyx7a2V5OihcInNjb3JlLVwiICsga2V5KSxhdHRyczp7XCJkYXRhc2V0c1wiOl92bS5zY29yZURhdGFzZXRzW2tleV0sXCJjb250aW51ZS1sYXN0LXZhbHVlXCI6XCJcIixcInNob3cteC12YWx1ZXMtaW4tZ3JpZFwiOlwiXCIsXCJ0aWNrLWludGVydmFsXCI6MTAwMCAqIDYwICogNjAgKiAyNCxcInRpY2tzXCI6MzAsXCJ0aWNrLWxpc3RcIjpfdm0uZGF5cyxcIm1pbi10aWNrXCI6X3ZtLmZpcnN0RGF5LFwibWF4LXRpY2tcIjpfdm0ubmV4dERheSxcIngtbGFiZWwtZm9ybWF0dGVyXCI6ZnVuY3Rpb24gKHgpIHsgcmV0dXJuIF92bS4kaTE4bi4kZCh4LCAnZGF0ZScpOyB9LFwieC1sYWJlbC10b29sdGlwLWZvcm1hdHRlclwiOmZ1bmN0aW9uICh4KSB7IHJldHVybiBfdm0uJGkxOG4uJGQoeCwgJ2RhdGV0aW1lJyk7IH19fSk6X3ZtLl9lKCldLDEpXX0pXSwyKV1dLDIpfVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCI8dGVtcGxhdGU+XHJcbiAgICA8ZGl2IGNsYXNzPVwiaGlnaHNjb3Jlc1wiPlxyXG4gICAgICAgIDxsb2FkaW5nLXNwaW5uZXIgdi1pZj1cImRhdGFNb2R1bGVMb2FkaW5nXCIgLz5cclxuICAgICAgICA8dGVtcGxhdGUgdi1lbHNlPlxyXG4gICAgICAgICAgICA8Z3JpZC10YWJsZSA6Y29sdW1ucz1cInRhYmxlQ29sdW1uc1wiIDppdGVtcz1cInRhYmxlSXRlbXNcIiBjbGFzcz1cInBsYXllci1zZWxlY3Rpb24tdGFibGVcIj5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSAjY2VsbC1wbGF5ZXI9XCJ7IHZhbHVlOiBwbGF5ZXIgfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwicGxheWVyID09IG51bGxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LW1vZGVsPVwic2VsZWN0ZWRQbGF5ZXJOYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpwbGFjZWhvbGRlcj1cIiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkucGxheWVyU2VsZWN0aW9uLnNlYXJjaFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0PVwicGxheWVyLWxpc3RcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNoYW5nZT1cIm9uUGxheWVyU2VsZWN0ZWQoJGV2ZW50LnRhcmdldC52YWx1ZSlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDogMTAwJVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkYXRhbGlzdCBpZD1cInBsYXllci1saXN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHYtZm9yPVwiKG5hbWUsIGkpIGluIHBsYXllck5hbWVzXCIgOmtleT1cImlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBuYW1lIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kYXRhbGlzdD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHYtZWxzZSBjbGFzcz1cImxpc3QtaXRlbVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1kaSBtZGktZGVsZXRlXCIgQGNsaWNrPVwicmVtb3ZlUGxheWVyKHBsYXllci5pZClcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LXRleHQ9XCJwbGF5ZXIubmFtZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICA8L2dyaWQtdGFibGU+XHJcblxyXG4gICAgICAgICAgICA8dGFicyA6dGFicz1cInRhYnNcIj5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWZvcj1cImtleSBpbiBrZXlzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlIDpzbG90PVwiYHRhYi1jb250ZW50LSR7a2V5fWBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1pZj1cInBsYXllclNjb3Jlc0xvYWRpbmdcIiA6a2V5PVwiYHNjb3JlLSR7a2V5fS1sb2FkaW5nYFwiIGNsYXNzPVwibG9hZGluZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzY3JvbGxhYmxlLWNoYXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LWVsc2UtaWY9XCJwbGF5ZXJJZHMubGVuZ3RoID4gMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6a2V5PVwiYHNjb3JlLSR7a2V5fWBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOmRhdGFzZXRzPVwic2NvcmVEYXRhc2V0c1trZXldXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlLWxhc3QtdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3cteC12YWx1ZXMtaW4tZ3JpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOnRpY2staW50ZXJ2YWw9XCIxMDAwICogNjAgKiA2MCAqIDI0XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp0aWNrcz1cIjMwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp0aWNrLWxpc3Q9XCJkYXlzXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDptaW4tdGljaz1cImZpcnN0RGF5XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDptYXgtdGljaz1cIm5leHREYXlcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOngtbGFiZWwtZm9ybWF0dGVyPVwiKHgpID0+ICRpMThuLiRkKHgsICdkYXRlJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOngtbGFiZWwtdG9vbHRpcC1mb3JtYXR0ZXI9XCIoeCkgPT4gJGkxOG4uJGQoeCwgJ2RhdGV0aW1lJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICA8L3RhYnM+XHJcbiAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IFNlcnZlclNldHRpbmdzTW9kdWxlIH0gZnJvbSAnQC9zZXJ2aWNlLXdvcmtlci9zZXJ2ZXItc2V0dGluZ3MvU2VydmVyU2V0dGluZ3NNb2R1bGUnO1xyXG4gICAgaW1wb3J0IHsgRGJVbml2ZXJzZUhpc3RvcnlTY29yZVR5cGUgfSBmcm9tICdAL3NoYXJlZC9kYi9zY2hlbWEvdW5pdmVyc2UtaGlzdG9yeSc7XHJcbiAgICBpbXBvcnQgeyBIaWdoc2NvcmVUeXBlTmFtZXMgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvaGlnaHNjb3JlJztcclxuICAgIGltcG9ydCB7IGNyZWF0ZVJlY29yZCB9IGZyb20gJ0Avc2hhcmVkL3V0aWxzL2NyZWF0ZVJlY29yZCc7XHJcbiAgICBpbXBvcnQgeyBtZXJnZURlZXAgfSBmcm9tICdAL3NoYXJlZC91dGlscy9tZXJnZURlZXAnO1xyXG4gICAgaW1wb3J0IHsgcGFyc2VJbnRTYWZlIH0gZnJvbSAnQC9zaGFyZWQvdXRpbHMvcGFyc2VOdW1iZXJzJztcclxuICAgIGltcG9ydCB7IF90aHJvdyB9IGZyb20gJ0Avc2hhcmVkL3V0aWxzL190aHJvdyc7XHJcbiAgICBpbXBvcnQgeyBHcmlkVGFibGVDb2x1bW4gfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvY29tbW9uL0dyaWRUYWJsZS52dWUnO1xyXG4gICAgaW1wb3J0IHsgU2Nyb2xsYWJsZUNoYXJ0RGF0YXNldCB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvY29tcG9uZW50cy9jb21tb24vc2Nyb2xsYWJsZS1jaGFydC9TY3JvbGxhYmxlQ2hhcnQudnVlJztcclxuICAgIGltcG9ydCB7IFRhYiB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvY29tcG9uZW50cy9jb21tb24vVGFicy52dWUnO1xyXG4gICAgaW1wb3J0IHsgR2xvYmFsT2dhbWVNZXRhRGF0YSB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvZGF0YS9nbG9iYWwnO1xyXG4gICAgaW1wb3J0IHsgU2VydmVyU2V0dGluZ3NEYXRhTW9kdWxlIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9kYXRhL1NlcnZlclNldHRpbmdzRGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgeyBVbml2ZXJzZUhpc3RvcnlEYXRhTW9kdWxlLCBVbml2ZXJzZUhpc3RvcnlQbGF5ZXIgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvVW5pdmVyc2VIaXN0b3J5RGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgeyBVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NEYXRhTW9kdWxlIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9kYXRhL1VuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUnO1xyXG4gICAgaW1wb3J0IHsgYWRkRGF5cyB9IGZyb20gJ2RhdGUtZm5zJztcclxuICAgIGltcG9ydCBzdGFydE9mRGF5IGZyb20gJ2RhdGUtZm5zL3N0YXJ0T2ZEYXknO1xyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuXHJcbiAgICBAQ29tcG9uZW50KHt9KVxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGlnaHNjb3JlIGV4dGVuZHMgVnVlIHtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGNvbG9ycyA9IFtcclxuICAgICAgICAgICAgJyNGNDhGQjEnLCAvLyBwaW5rIGxpZ2h0ZW4tM1xyXG4gICAgICAgICAgICAnIzY3M0FCNycsIC8vIGRlZXAtcHVycGxlXHJcbiAgICAgICAgICAgICcjRTUzOTM1JywgLy8gcmVkIGRhcmtlbi0xXHJcbiAgICAgICAgICAgICcjM0Y1MUI1JywgLy8gaW5kaWdvXHJcbiAgICAgICAgICAgICcjMDA2MDY0JywgLy8gY3lhbiBkYXJrZW4tNFxyXG4gICAgICAgICAgICAnIzU0NkU3QScsIC8vIGJsdWUtZ3JleSBkYXJrZW4tMVxyXG4gICAgICAgICAgICAnI0VGOUE5QScsIC8vIHJlZCBsaWdodGVuLTNcclxuICAgICAgICAgICAgJyM2NEI1RjYnLCAvLyBibHVlIGxpZ2h0ZW4tMlxyXG4gICAgICAgICAgICAnI0ZGRTA4MicsIC8vIGFtYmVyIGxpZ2h0ZW4tM1xyXG4gICAgICAgICAgICAnI0U5MUU2MycsIC8vIHBpbmtcclxuICAgICAgICAgICAgJyNCQTY4QzgnLCAvLyBwdXJwbGUgbGlnaHRlbi0yXHJcbiAgICAgICAgICAgICcjQkYzNjBDJywgLy8gZGVlcC1vcmFuZ2UgZGFya2VuLTRcclxuICAgICAgICAgICAgJyMwMzlCRTUnLCAvLyBsaWdodC1ibHVlIGRhcmtlbi0xXHJcbiAgICAgICAgICAgICcjOEUyNEFBJywgLy8gcHVycGxlIGRhcmtlbi0xXHJcbiAgICAgICAgICAgICcjOUNDQzY1JywgLy8gbGlnaHQtZ3JlZW4gbGlnaHRlbi0xXHJcbiAgICAgICAgICAgICcjQTE4ODdGJywgLy8gYnJvd24gbGlnaHRlbi0yXHJcbiAgICAgICAgICAgICcjMDA5N0E3JywgLy8gY3lhbiBkYXJrZW4tMlxyXG4gICAgICAgICAgICAnI0ZGQUI5MScsIC8vIGRlZXAtb3JhbmdlIGxpZ2h0ZW4tM1xyXG4gICAgICAgICAgICAnIzAwOTY4OCcsIC8vIHRlYWxcclxuICAgICAgICAgICAgJyM0M0EwNDcnLCAvLyBncmVlbiBkYXJrZW4tMVxyXG4gICAgICAgICAgICAnIzFBMjM3RScsIC8vIGluZGlnbyBkYXJrZW4tNFxyXG4gICAgICAgICAgICAnIzU1OEIyRicsIC8vIGxpZ2h0LWdyZWVuIGRhcmtlbi0zXHJcbiAgICAgICAgICAgICcjMzExQjkyJywgLy8gZGVlcC1wdXJwbGUgZGFya2VuLTRcclxuICAgICAgICAgICAgJyM4ODBFNEYnLCAvLyBwaW5rIGRhcmtlbi00XHJcbiAgICAgICAgICAgICcjMDE1NzlCJywgLy8gbGlnaHQtYmx1ZSBkYXJrZW4tNFxyXG4gICAgICAgICAgICAnI0FGQjQyQicsIC8vIGxpbWUgZGFya2VuLTJcclxuICAgICAgICAgICAgJyMxRTg4RTUnLCAvLyBibHVlIGRhcmtlbi0xXHJcbiAgICAgICAgICAgICcjODI3NzE3JywgLy8gbGltZSBkYXJrZW4tNFxyXG4gICAgICAgICAgICAnI0ZGRjE3NicsIC8vIHllbGxvdyBsaWdodGVuLTJcclxuICAgICAgICAgICAgJyNCREJEQkQnLCAvLyBncmV5IGxpZ2h0ZW4tMVxyXG4gICAgICAgICAgICAnI0ZGQzEwNycsIC8vIGFtYmVyXHJcbiAgICAgICAgICAgICcjRkZBNzI2JywgLy8gb3JhbmdlIGxpZ2h0ZW4tMVxyXG4gICAgICAgICAgICAnI0ZGNTcyMicsIC8vIGRlZXAtb3JhbmdlXHJcbiAgICAgICAgICAgICcjNzk1NTQ4JywgLy8gYnJvd25cclxuICAgICAgICAgICAgJyMwMDRENDAnLCAvLyB0ZWFsIGRhcmtlbi00XHJcbiAgICAgICAgICAgICcjODFDNzg0JywgLy8gZ3JlZW4gbGlnaHRlbi0yXHJcbiAgICAgICAgICAgICcjOTBBNEFFJywgLy8gYmx1ZS1ncmV5IGxpZ2h0ZW4tMlxyXG4gICAgICAgICAgICAnIzc1NzU3NScsIC8vIGdyZXkgZGFya2VuLTFcclxuICAgICAgICAgICAgJyNGREQ4MzUnLCAvLyB5ZWxsb3cgZGFya2VuLTFcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBwcml2YXRlIGxlZnRYID0gMDtcclxuICAgICAgICBwcml2YXRlIHJpZ2h0WCA9IDE7XHJcbiAgICAgICAgcHJpdmF0ZSBkYXRhTW9kdWxlTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgcHJpdmF0ZSBwbGF5ZXJTY29yZXNMb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZWxlY3RlZFBsYXllck5hbWUgPSAnJztcclxuICAgICAgICBwcml2YXRlIHNjb3JlRGF0YXNldHMgPSB7fSBhcyBSZWNvcmQ8RGJVbml2ZXJzZUhpc3RvcnlTY29yZVR5cGUsIFNjcm9sbGFibGVDaGFydERhdGFzZXRbXT47XHJcbiAgICAgICAgcHJpdmF0ZSBmaXJzdERheSA9IDA7XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkga2V5cyA9IEhpZ2hzY29yZVR5cGVOYW1lcztcclxuICAgICAgICBwcml2YXRlIGdldCB0YWJzKCk6IChUYWIgJiB7IGtleTogRGJVbml2ZXJzZUhpc3RvcnlTY29yZVR5cGUgfSlbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYnM6IChUYWIgJiB7IGtleTogRGJVbml2ZXJzZUhpc3RvcnlTY29yZVR5cGUgfSlbXSA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd0b3RhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5oaWdoc2NvcmVUYWJzLnRvdGFsLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdlY29ub215JyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LmhpZ2hzY29yZVRhYnMuZWNvbm9teSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncmVzZWFyY2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5yZXNlYXJjaCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnbWlsaXRhcnknLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5taWxpdGFyeSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnbWlsaXRhcnlCdWlsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5oaWdoc2NvcmVUYWJzLm1pbGl0YXJ5QnVpbHQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ21pbGl0YXJ5RGVzdHJveWVkJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LmhpZ2hzY29yZVRhYnMubWlsaXRhcnlEZXN0cm95ZWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ21pbGl0YXJ5TG9zdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5oaWdoc2NvcmVUYWJzLm1pbGl0YXJ5TG9zdCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnaG9ub3InLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5ob25vcixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnbnVtYmVyT2ZTaGlwcycsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuJGkxOG4uJHQuZXh0ZW5zaW9uLnVuaXZlcnNlSGlzdG9yeS5oaWdoc2NvcmVUYWJzLm51bWJlck9mU2hpcHMsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgaWYgKFNlcnZlclNldHRpbmdzRGF0YU1vZHVsZS5zZXJ2ZXJTZXR0aW5ncy5saWZlZm9ybXMuZW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGFicy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnbGlmZWZvcm0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LmhpZ2hzY29yZVRhYnMubGlmZWZvcm0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2xpZmVmb3JtRWNvbm9teScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5saWZlZm9ybUVjb25vbXksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2xpZmVmb3JtVGVjaG5vbG9neScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi51bml2ZXJzZUhpc3RvcnkuaGlnaHNjb3JlVGFicy5saWZlZm9ybVRlY2hub2xvZ3ksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2xpZmVmb3JtRGlzY292ZXJpZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LmhpZ2hzY29yZVRhYnMubGlmZWZvcm1EaXNjb3ZlcmllcyxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGFicztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHRhYmxlQ29sdW1ucygpOiBHcmlkVGFibGVDb2x1bW48J3BsYXllcic+W10ge1xyXG4gICAgICAgICAgICByZXR1cm4gW3tcclxuICAgICAgICAgICAgICAgIGtleTogJ3BsYXllcicsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24udW5pdmVyc2VIaXN0b3J5LnBsYXllclNlbGVjdGlvbi5oZWFkZXIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJDbGFzczogJ3BsYXllci1zZWxlY3Rpb24tdGFibGUtY2VsbCcsXHJcbiAgICAgICAgICAgICAgICBjbGFzczogJ3BsYXllci1zZWxlY3Rpb24tdGFibGUtY2VsbCcsXHJcbiAgICAgICAgICAgIH1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgdGFibGVJdGVtcygpOiB7IHBsYXllcjogVW5pdmVyc2VIaXN0b3J5UGxheWVyIHwgbnVsbCB9W10ge1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgeyBwbGF5ZXI6IG51bGwgfSxcclxuICAgICAgICAgICAgICAgIC4uLnRoaXMuc2VsZWN0ZWRQbGF5ZXJzLm1hcChwbGF5ZXIgPT4gKHsgcGxheWVyIH0pKSxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBwbGF5ZXJJZHMoKTogbnVtYmVyW10ge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuJHJvdXRlLnF1ZXJ5LnBsYXllcnMgYXMgc3RyaW5nIHwgbnVsbCA/PyAnJylcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLCcpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGlkID0+IGlkLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgICAgICAubWFwKHBsYXllcklkID0+IHBhcnNlSW50U2FmZShwbGF5ZXJJZCwgMTApKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihwbGF5ZXJJZCA9PiB0aGlzLnBsYXllcnMuc29tZShwID0+IHAuaWQgPT0gcGxheWVySWQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYXN5bmMgbW91bnRlZCgpIHtcclxuICAgICAgICAgICAgYXdhaXQgVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZS5yZWFkeTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFRvRGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kYXRhTW9kdWxlTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIGF3YWl0IFVuaXZlcnNlSGlzdG9yeURhdGFNb2R1bGUucmVhZHk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YU1vZHVsZUxvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBsYXllclNjb3JlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyByZWRpcmVjdFRvRGVmYXVsdCgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGxheWVySWRzLmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBkZWZhdWx0UGxheWVySWRzID0gVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncy51bml2ZXJzZUhpc3RvcnkucGxheWVycy5oaWdoc2NvcmU7XHJcbiAgICAgICAgICAgIGlmIChkZWZhdWx0UGxheWVySWRzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGxheWVySWRzID0gW0dsb2JhbE9nYW1lTWV0YURhdGEucGxheWVySWRdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBsYXllcklkUm91dGUoZGVmYXVsdFBsYXllcklkcyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyBsb2FkUGxheWVyU2NvcmVzKCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllclNjb3Jlc0xvYWRpbmcgPSB0cnVlO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmVEYXRhc2V0cyA9IHt9IGFzIFJlY29yZDxEYlVuaXZlcnNlSGlzdG9yeVNjb3JlVHlwZSwgU2Nyb2xsYWJsZUNoYXJ0RGF0YXNldFtdPjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFzZXRzQnlQbGF5ZXI6IFJlY29yZDxudW1iZXIsIFJlY29yZDxEYlVuaXZlcnNlSGlzdG9yeVNjb3JlVHlwZSwgU2Nyb2xsYWJsZUNoYXJ0RGF0YXNldD4+ID0ge307XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVySWRzLmZvckVhY2gocCA9PiBkYXRhc2V0c0J5UGxheWVyW3BdID0ge30gYXMgUmVjb3JkPERiVW5pdmVyc2VIaXN0b3J5U2NvcmVUeXBlLCBTY3JvbGxhYmxlQ2hhcnREYXRhc2V0Pik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmtleXMuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY29yZURhdGFzZXRzW2tleV0gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcklkcy5mb3JFYWNoKChwaWQsIGkpID0+IGRhdGFzZXRzQnlQbGF5ZXJbcGlkXVtrZXldID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogYCR7cGlkfS0ke2tleX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29sb3JzW2kgJSB0aGlzLmNvbG9ycy5sZW5ndGhdLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLnBsYXllcnMuZmluZChwID0+IHAuaWQgPT0gcGlkKT8ubmFtZSA/PyBfdGhyb3coYG5vIHBsYXllciB3aXRoIGlkICcke3BpZH0nIGZvdW5kYCksXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBzdGFjazogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZVBvaW50czogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbWluRGF0ZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2NvcmVzID0gYXdhaXQgVW5pdmVyc2VIaXN0b3J5RGF0YU1vZHVsZS5nZXRQbGF5ZXJTY29yZUhpc3RvcnkodGhpcy5wbGF5ZXJJZHMpO1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlcyA9IEhpZ2hzY29yZVR5cGVOYW1lcztcclxuICAgICAgICAgICAgY29uc3QgbGFzdFNjb3JlcyA9IGNyZWF0ZVJlY29yZCh0aGlzLnBsYXllcklkcywgKCkgPT4gY3JlYXRlUmVjb3JkKHR5cGVzLCBudWxsKSkgYXMgUmVjb3JkPG51bWJlciwgUmVjb3JkPERiVW5pdmVyc2VIaXN0b3J5U2NvcmVUeXBlLCBudW1iZXIgfCBudWxsPj47XHJcblxyXG4gICAgICAgICAgICBzY29yZXMuZm9yRWFjaCgoc2NvcmUsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIG1pbkRhdGUgPSBNYXRoLm1pbihtaW5EYXRlLCBzY29yZS5kYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFNjb3Jlc1tzY29yZS5wbGF5ZXJJZF1bc2NvcmUudHlwZV0gPT0gc2NvcmUuc2NvcmUpIHsgLy9ubyBkdXBsaWNhdGVzIGlmIG9ubHkgcG9zaXRpb24gY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdHlwZXMuaW5jbHVkZXMoc2NvcmUudHlwZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIGhhcHBlbnMgaWYgYmV0YSBkYXRhIGF2YWlsYWJsZVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRhdGFzZXRzQnlQbGF5ZXJbc2NvcmUucGxheWVySWRdW3Njb3JlLnR5cGVdLnZhbHVlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB4OiBzY29yZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHNjb3JlLnNjb3JlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2NvcmVzW3Njb3JlLnBsYXllcklkXVtzY29yZS50eXBlXSA9IHNjb3JlLnNjb3JlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMua2V5cy5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXllcklkcy5mb3JFYWNoKHBpZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29yZURhdGFzZXRzW2tleV0ucHVzaChkYXRhc2V0c0J5UGxheWVyW3BpZF1ba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZpcnN0RGF5ID0gc3RhcnRPZkRheShtaW5EYXRlKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBsYXllclNjb3Jlc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IG5leHREYXkoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhZGREYXlzKHN0YXJ0T2ZEYXkoRGF0ZS5ub3coKSksIDEpLmdldFRpbWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGRheXMoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheXM6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXhEYXkgPSB0aGlzLm5leHREYXk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGRheSA9IHRoaXMuZmlyc3REYXk7IGRheSA8PSBtYXhEYXk7IGRheSA9IGFkZERheXMoZGF5LCAxKS5nZXRUaW1lKCkpIHtcclxuICAgICAgICAgICAgICAgIGRheXMucHVzaChkYXkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF5cztcclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgcGxheWVycygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFVuaXZlcnNlSGlzdG9yeURhdGFNb2R1bGUucGxheWVycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHBsYXllck5hbWVzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXJzXHJcbiAgICAgICAgICAgICAgICAubWFwKHBsYXllciA9PiBwbGF5ZXIubmFtZSlcclxuICAgICAgICAgICAgICAgIC5zb3J0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBzZWxlY3RlZFBsYXllcnMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXllcklkcy5tYXAocGlkID0+IHRoaXMucGxheWVycy5maW5kKHAgPT4gcC5pZCA9PSBwaWQpISk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFzeW5jIG9uUGxheWVyU2VsZWN0ZWQobmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IHRoaXMucGxheWVycy5maW5kKHAgPT4gcC5uYW1lLnRvTG93ZXJDYXNlKCkgPT0gbmFtZS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgaWYgKHBsYXllciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuJG5leHRUaWNrKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQbGF5ZXJOYW1lID0gJyc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwbGF5ZXJJZHMgPSAodGhpcy4kcm91dGUucXVlcnkucGxheWVycyBhcyBzdHJpbmcgfCBudWxsKT8uc3BsaXQoJywnKSA/PyBbXTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVQbGF5ZXJJZFJvdXRlKFtcclxuICAgICAgICAgICAgICAgIC4uLnBsYXllcklkcy5maWx0ZXIocGlkID0+IHBpZCAhPSBwbGF5ZXIuaWQudG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuaWQsXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQbGF5ZXJTY29yZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYXN5bmMgcmVtb3ZlUGxheWVyKGlkOiBudW1iZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVQbGF5ZXJJZFJvdXRlKHRoaXMucGxheWVySWRzLmZpbHRlcihwaWQgPT4gcGlkICE9IGlkKSk7XHJcblxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQbGF5ZXJTY29yZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXBkYXRlU2V0dGluZ3MocGxheWVySWRzOiBudW1iZXJbXSkge1xyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUuc2V0dGluZ3M7XHJcbiAgICAgICAgICAgIFVuaXZlcnNlU3BlY2lmaWNTZXR0aW5nc0RhdGFNb2R1bGUudXBkYXRlU2V0dGluZ3Moe1xyXG4gICAgICAgICAgICAgICAgLi4uc2V0dGluZ3MsXHJcbiAgICAgICAgICAgICAgICB1bml2ZXJzZUhpc3Rvcnk6IHtcclxuICAgICAgICAgICAgICAgICAgICAuLi5zZXR0aW5ncy51bml2ZXJzZUhpc3RvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zZXR0aW5ncy51bml2ZXJzZUhpc3RvcnkucGxheWVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlnaHNjb3JlOiBwbGF5ZXJJZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVQbGF5ZXJJZFJvdXRlKGlkczogKHN0cmluZyB8IG51bWJlcilbXSkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNldHRpbmdzKGlkcy5tYXAoaWQgPT4gdHlwZW9mIGlkID09PSAnc3RyaW5nJyA/IHBhcnNlSW50U2FmZShpZCwgMTApIDogaWQpKTtcclxuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuJHJvdXRlci5yZXBsYWNlKHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyczogaWRzLmpvaW4oJywnKSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0VG9EZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG48L3NjcmlwdD5cclxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxyXG4gICAgLmhpZ2hzY29yZXMge1xyXG4gICAgICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAyMDBweCAxZnI7XHJcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgfVxyXG5cclxuICAgIC5wbGF5ZXItc2VsZWN0aW9uIHtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XHJcblxyXG4gICAgICAgICYtdGFibGUge1xyXG4gICAgICAgICAgICBoZWlnaHQ6IGZpdC1jb250ZW50O1xyXG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XHJcblxyXG4gICAgICAgICAgICAmOjp2LWRlZXAge1xyXG4gICAgICAgICAgICAgICAgLnBsYXllci1zZWxlY3Rpb24tdGFibGUtY2VsbCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKHZhcigtLWNvbG9yKSwgMC41KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAubGlzdCB7XHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cclxuICAgICAgICAmLWl0ZW0ge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IGF1dG8gMWZyO1xyXG4gICAgICAgICAgICBnYXA6IDEycHg7XHJcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblxyXG4gICAgICAgICAgICAubWRpIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS41KTtcclxuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuPC9zdHlsZT4iLCJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vSGlnaHNjb3JlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL0hpZ2hzY29yZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCIiLCJpbXBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IGZyb20gXCIuL0hpZ2hzY29yZS52dWU/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9YjFiNmVjNWUmc2NvcGVkPXRydWUmXCJcbmltcG9ydCBzY3JpcHQgZnJvbSBcIi4vSGlnaHNjb3JlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vSGlnaHNjb3JlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuaW1wb3J0IHN0eWxlMCBmcm9tIFwiLi9IaWdoc2NvcmUudnVlP3Z1ZSZ0eXBlPXN0eWxlJmluZGV4PTAmaWQ9YjFiNmVjNWUmbGFuZz1zY3NzJnNjb3BlZD10cnVlJlwiXG5cblxuLyogbm9ybWFsaXplIGNvbXBvbmVudCAqL1xuaW1wb3J0IG5vcm1hbGl6ZXIgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvcnVudGltZS9jb21wb25lbnROb3JtYWxpemVyLmpzXCJcbnZhciBjb21wb25lbnQgPSBub3JtYWxpemVyKFxuICBzY3JpcHQsXG4gIHJlbmRlcixcbiAgc3RhdGljUmVuZGVyRm5zLFxuICBmYWxzZSxcbiAgbnVsbCxcbiAgXCJiMWI2ZWM1ZVwiLFxuICBudWxsXG4gIFxuKVxuXG5leHBvcnQgZGVmYXVsdCBjb21wb25lbnQuZXhwb3J0cyIsImltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGFkZERheXNcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQWRkIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGRheXMgdG8gdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBZGQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZGF5cyB0byB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBiZSBjaGFuZ2VkXG4gKiBAcGFyYW0ge051bWJlcn0gYW1vdW50IC0gdGhlIGFtb3VudCBvZiBkYXlzIHRvIGJlIGFkZGVkLiBQb3NpdGl2ZSBkZWNpbWFscyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguZmxvb3JgLCBkZWNpbWFscyBsZXNzIHRoYW4gemVybyB3aWxsIGJlIHJvdW5kZWQgdXNpbmcgYE1hdGguY2VpbGAuXG4gKiBAcmV0dXJucyB7RGF0ZX0gLSB0aGUgbmV3IGRhdGUgd2l0aCB0aGUgZGF5cyBhZGRlZFxuICogQHRocm93cyB7VHlwZUVycm9yfSAtIDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFkZCAxMCBkYXlzIHRvIDEgU2VwdGVtYmVyIDIwMTQ6XG4gKiBjb25zdCByZXN1bHQgPSBhZGREYXlzKG5ldyBEYXRlKDIwMTQsIDgsIDEpLCAxMClcbiAqIC8vPT4gVGh1IFNlcCAxMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gYWRkRGF5cyhkaXJ0eURhdGUsIGRpcnR5QW1vdW50KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgYW1vdW50ID0gdG9JbnRlZ2VyKGRpcnR5QW1vdW50KTtcblxuICBpZiAoaXNOYU4oYW1vdW50KSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG5cbiAgaWYgKCFhbW91bnQpIHtcbiAgICAvLyBJZiAwIGRheXMsIG5vLW9wIHRvIGF2b2lkIGNoYW5naW5nIHRpbWVzIGluIHRoZSBob3VyIGJlZm9yZSBlbmQgb2YgRFNUXG4gICAgcmV0dXJuIGRhdGU7XG4gIH1cblxuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyBhbW91bnQpO1xuICByZXR1cm4gZGF0ZTtcbn0iXSwibmFtZXMiOlsiSGlnaHNjb3JlVHlwZSIsIkhpZ2hzY29yZVR5cGVOYW1lcyIsIm1lcmdlRGVlcCIsImEiLCJiIiwicmVzdWx0IiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJiS2V5IiwidGFyZ2V0IiwiY3VyIiwiQXJyYXkiLCJkZWZhdWx0U2V0dGluZ3MiLCJ1bml2ZXJzZUhpc3RvcnkiLCJhbGxpYW5jZXMiLCJoaWdoc2NvcmUiLCJwbGF5ZXJzIiwiYXN5bmMiLCJsb2FkVW5pdmVyc2VTcGVjaWZpY1NldHRpbmdzIiwibWV0YSIsImRiIiwic2V0dGluZ3MiLCJnZXQiLCJVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NEYXRhTW9kdWxlQ2xhc3MiLCJfcmVhZHkiLCJfcmVzb2x2ZVJlYWR5IiwidXBkYXRlU2V0dGluZ3MiLCJjb25zb2xlIiwiZGVidWciLCJ0aGlzIiwicHV0IiwibXNnIiwib2dhbWVNZXRhIiwic2VuZGVyVXVpZCIsInR5cGUiLCJNZXNzYWdlVHlwZSIsImJyb2FkY2FzdE1lc3NhZ2UiLCJyZWFkeSIsIlByb21pc2UiLCJyZXNvbHZlIiwiaW5pdENvbW11bmljYXRpb24iLCJsb2FkRGF0YSIsImNocm9tZSIsInJ1bnRpbWUiLCJvbk1lc3NhZ2UiLCJhZGRMaXN0ZW5lciIsIm1lc3NhZ2UiLCJvZ2FtZU1ldGFzRXF1YWwiLCJVbml2ZXJzZVNwZWNpZmljU2V0dGluZ3NEYXRhTW9kdWxlIiwicmVuZGVyIiwiX3ZtIiwiX2giLCIkY3JlYXRlRWxlbWVudCIsIl9jIiwiX3NlbGYiLCJzdGF0aWNDbGFzcyIsImF0dHJzIiwidGFibGVDb2x1bW5zIiwidGFibGVJdGVtcyIsInNjb3BlZFNsb3RzIiwiX3UiLCJrZXkiLCJmbiIsInJlZiIsInBsYXllciIsInZhbHVlIiwiZGlyZWN0aXZlcyIsIm5hbWUiLCJyYXdOYW1lIiwiZXhwcmVzc2lvbiIsInN0YXRpY1N0eWxlIiwiJGkxOG4iLCIkdCIsImV4dGVuc2lvbiIsInBsYXllclNlbGVjdGlvbiIsInNlYXJjaCIsImRvbVByb3BzIiwib24iLCIkZXZlbnQiLCJvblBsYXllclNlbGVjdGVkIiwiY29tcG9zaW5nIiwic2VsZWN0ZWRQbGF5ZXJOYW1lIiwiX2wiLCJpIiwiX3YiLCJfcyIsInJlbW92ZVBsYXllciIsImlkIiwidGFicyIsInNsb3QiLCJwbGF5ZXJJZHMiLCJsZW5ndGgiLCJzY29yZURhdGFzZXRzIiwiZGF5cyIsImZpcnN0RGF5IiwibmV4dERheSIsIngiLCIkZCIsIl9lIiwic3RhdGljUmVuZGVyRm5zIiwiY29tcG9uZW50IiwiYWRkRGF5cyIsImRpcnR5RGF0ZSIsImRpcnR5QW1vdW50IiwiYXJndW1lbnRzIiwiZGF0ZSIsImFtb3VudCIsImlzTmFOIiwiRGF0ZSIsIk5hTiIsInNldERhdGUiLCJnZXREYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==