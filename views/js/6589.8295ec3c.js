"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[6589],{4310:(e,t,a)=>{a.d(t,{Z:()=>b});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("grid-table",{staticClass:"ranged-stats-table",attrs:{columns:e.columns,items:e.rows,"footer-items":e.footerRows,"cell-class-provider":function(t){return e.getCellClass(t)}},scopedSlots:e._u([e._l(e.columns,(function(t,s){return{key:"cell-"+t.key,fn:function(n){var r=n.value,o=n.item;return[a("span",{key:t.key,staticClass:"ranged-stats-table-cell"},["label"==t.key?[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:r}):a("span",{key:s,domProps:{textContent:e._s(r)}})]:"subLabel"==t.key?e._l(o.items,(function(s,n){return a("span",{key:n,class:s.labelClass},[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:s.label}):a("span",{domProps:{textContent:e._s(s.label)}})],2)})):e._l(o.items||[o],(function(s,n){return a("span",{key:n,class:[e.getCellClass(s[t.key]),s.class]},[null!=t.formatter?a("span",{domProps:{textContent:e._s(t.formatter(s[t.key]))}}):a("span",{domProps:{textContent:e._s(s[t.key])}})])}))],2)]}}})),e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}}))],null,!0)})},n=[],r=a(655),o=a(4028),l=a(9858),i=a(6538),u=a(4749),m=a.n(u),c=a(917);let g=class extends o.w3{showPercentage;showAverage;items;footerItems;numberFormatOptions;averageNumberFormatOptions;dataItems;get hasGroupedItems(){return this.items.some((e=>"items"in e))}get dateRanges(){return c.V.settings.dateRanges}get dataItemsByRange(){const e=this.dataItems,t=this.dateRanges.map((()=>[]));return e.forEach((e=>{this.dateRanges.forEach(((a,s)=>{(0,l.m)(e.date,a)&&t[s].push(e)}))})),t}get firstDay(){return this.dataItemsByRange.reduce(((e,t)=>Math.min(e,Math.min(...t.map((e=>e.date))))),Date.now())}get columns(){const e=[{key:"label",label:"",slotName:"label"}];return this.hasGroupedItems&&e.push({key:"subLabel",label:"",slotName:"subLabel"}),e.push(...this.dateRanges.map(((e,t)=>({key:t,label:e.label??this.$i18n.$t.extension.settings.dateRanges.since(this.$i18n.$d(this.firstDay,"date")),formatter:e=>this.$i18n.$n(e,this.numberFormatOptions)})))),this.showAverage&&e.push({key:"average",label:this.$i18n.$t.extension.common.averagePerDay,formatter:e=>this.$i18n.$n(e,this.averageNumberFormatOptions??this.numberFormatOptions)}),this.showPercentage&&e.push({key:"percentage",label:"%",formatter:e=>""!=e?this.$i18n.$n(e,{minimumFractionDigits:3,maximumFractionDigits:3}):e}),e}get rows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,i.A)("failed to find range 'all'"),a=e[t].map((e=>m()(e.date).getTime())),s=new Set(a).size,n=Math.max(1,this.items.map((a=>"getValue"in a?a.getValue(e[t]):a.items.reduce(((a,s)=>a+s.getValue(e[t])),0))).reduce(((e,t)=>e+t),0));return this.items.map((a=>this.mapItemToRow(a,e,t,s,n)))}mapItemToRow(e,t,a,s,n){if("getValue"in e){const r={label:e.label,class:e.class,labelClass:e.labelClass,...this.dateRanges.map(((a,s)=>e.getValue(t[s])))},o=r[a];return this.showAverage&&(r.average=o/Math.max(1,s)),this.showPercentage&&(r.percentage=100*o/n),r}return{label:e.label,items:e.items.map((e=>this.mapItemToRow(e,t,a,s,n)))}}get footerRows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,i.A)("failed to find range 'all'"),a=e[t].map((e=>m()(e.date).getTime())),s=new Set(a).size;return this.footerItems.map((a=>{const n={label:a.label,...this.dateRanges.map(((t,s)=>"getValue"in a?a.getValue(e[s]):a.items.reduce(((t,a)=>t+a.getValue(e[s])),0))),percentage:""};if(this.showAverage){const e=n[t];n.average=e/Math.max(1,s)}return n}))}getCellClass(e){return 0==e?"fade-value":""}};(0,r.gn)([(0,o.fI)({required:!1,type:Boolean})],g.prototype,"showPercentage",void 0),(0,r.gn)([(0,o.fI)({required:!1,type:Boolean})],g.prototype,"showAverage",void 0),(0,r.gn)([(0,o.fI)({required:!0,type:Array})],g.prototype,"items",void 0),(0,r.gn)([(0,o.fI)({required:!1,type:Array,default:()=>[]})],g.prototype,"footerItems",void 0),(0,r.gn)([(0,o.fI)({required:!1,type:Object,default:void 0})],g.prototype,"numberFormatOptions",void 0),(0,r.gn)([(0,o.fI)({required:!1,type:Object,default:void 0})],g.prototype,"averageNumberFormatOptions",void 0),(0,r.gn)([(0,o.fI)({required:!0,type:Array})],g.prototype,"dataItems",void 0),g=(0,r.gn)([(0,o.wA)({})],g);const d=g,f=d;var p=a(1001),h=(0,p.Z)(f,s,n,!1,null,"1526beca",null);const b=h.exports},5906:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container"},[a("ranged-stats-table",{attrs:{dataItems:e.discoveries,items:e.items,footerItems:e.footerItems,"show-average":"","show-percentage":"",averageNumberFormatOptions:e.avgNumberFormat},scopedSlots:e._u([{key:"cell-label",fn:function(t){var s=t.value;return[a("span",{staticClass:"mr-2",domProps:{textContent:e._s(s)}}),a("o-lifeform",{attrs:{lifeform:e.lifeformTypes[s],size:"24px"}})]}}])}),a("floating-menu",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("button",{on:{click:function(t){e.showSettings=!e.showSettings}}},[a("span",{staticClass:"mdi mdi-cog"})])]},proxy:!0}]),model:{value:e.showSettings,callback:function(t){e.showSettings=t},expression:"showSettings"}},[a("date-range-settings")],1)],1)},n=[],r=a(655),o=a(4028),l=a(4310),i=a(4329),u=a(6903),m=a(917),c=a(3418);let g=class extends o.w3{showSettings=!1;avgNumberFormat={minimumFractionDigits:1,maximumFractionDigits:1};get discoveries(){return u.F.dailyResultsArray}get colors(){return m.V.settings.colors.lifeforms}get lifeformTypes(){return{[this.$i18n.$t.ogame.lifeforms.humans]:c.e5.humans,[this.$i18n.$t.ogame.lifeforms.rocktal]:c.e5.rocktal,[this.$i18n.$t.ogame.lifeforms.mechas]:c.e5.mechas,[this.$i18n.$t.ogame.lifeforms.kaelesh]:c.e5.kaelesh}}get items(){return c.p3.map((e=>({label:this.$i18n.$t.ogame.lifeforms[e],getValue:t=>t.reduce(((t,a)=>t+a.lifeformExperience[e]),0)})))}get footerItems(){return[{label:this.$i18n.$t.extension.common.sum,getValue:e=>e.reduce(((e,t)=>e+Object.values(t.lifeformExperience).reduce(((e,t)=>e+t),0)),0)}]}};g=(0,r.gn)([(0,o.wA)({components:{RangedStatsTable:l.Z,DateRangeSettings:i.Z}})],g);const d=g,f=d;var p=a(1001),h=(0,p.Z)(f,s,n,!1,null,"63ecd770",null);const b=h.exports},8734:(e,t)=>{function a(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a,e.exports=t.default},4749:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var s=r(a(1171)),n=r(a(8734));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){(0,n.default)(1,arguments);var t=(0,s.default)(e);return t.setHours(0,0,0,0),t}e.exports=t.default},1171:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var s=n(a(8734));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){(0,s.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}e.exports=t.default}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFFbEIsSUFBSUMsRUFBU0MsRUFBdUIsRUFBUSxPQUV4Q0MsRUFBVUQsRUFBdUIsRUFBUSxPQUU3QyxTQUFTQSxFQUF1QkUsR0FBTyxPQUFPQSxHQUFPQSxFQUFJQyxXQUFhRCxFQUFNLENBQUVMLFFBQVNLLEdBd0J2RixTQUFTSixFQUFXTSxJQUNsQixFQUFJSCxFQUFRSixTQUFTLEVBQUdRLFdBQ3hCLElBQUlDLEdBQU8sRUFBSVAsRUFBT0YsU0FBU08sR0FFL0IsT0FEQUUsRUFBS0MsU0FBUyxFQUFHLEVBQUcsRUFBRyxHQUNoQkQsRUFHVFYsRUFBT0QsUUFBVUEsRUFBUUUsUyxlQ3hDekJKLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUMzQzdDLE9BQU8sSUFFVDZDLEVBQUEsV0FBa0JhLEVBRWxCLElBQUlULEVBQVNDLEVBQXVCLEVBQVEsT0FFNUMsU0FBU0EsRUFBdUJFLEdBQU8sT0FBT0EsR0FBT0EsRUFBSUMsV0FBYUQsRUFBTSxDQUFFTCxRQUFTSyxHQWdDdkYsU0FBU00sRUFBT0MsSUFDZCxFQUFJVixFQUFPRixTQUFTLEVBQUdRLFdBQ3ZCLElBQUlLLEVBQVNqQixPQUFPa0IsVUFBVUMsU0FBU0MsS0FBS0osR0FFNUMsT0FBSUEsYUFBb0JLLE1BQTRCLGtCQUFiTCxHQUFvQyxrQkFBWEMsRUFFdkQsSUFBSUksS0FBS0wsRUFBU00sV0FDSSxrQkFBYk4sR0FBb0Msb0JBQVhDLEVBQ2xDLElBQUlJLEtBQUtMLElBRVMsa0JBQWJBLEdBQW9DLG9CQUFYQyxHQUFvRCxxQkFBWk0sVUFFM0VBLFFBQVFDLEtBQUssb0pBRWJELFFBQVFDLE1BQUssSUFBSUMsT0FBUUMsUUFHcEIsSUFBSUwsS0FBS00sTUFJcEJ4QixFQUFPRCxRQUFVQSxFQUFRRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlPzgxZGMiLCJ3ZWJwYWNrOi8vL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlPzU3OTciLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWU/Zjc1YSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zdGF0cy9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT83MGFjIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy9saWZlZm9ybXMvZGlzY292ZXJpZXMvZXhwZXJpZW5jZS9UYWJsZS52dWU/ZDFmZiIsIndlYnBhY2s6Ly8vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2xpZmVmb3Jtcy9kaXNjb3Zlcmllcy9leHBlcmllbmNlL1RhYmxlLnZ1ZT8wYWQxIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy9saWZlZm9ybXMvZGlzY292ZXJpZXMvZXhwZXJpZW5jZS9UYWJsZS52dWU/MWUyMiIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvdmlld3MvbGlmZWZvcm1zL2Rpc2NvdmVyaWVzL2V4cGVyaWVuY2UvVGFibGUudnVlPzliNDAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzPzI5NWIiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL3N0YXJ0T2ZEYXkvaW5kZXguanM/OTFhMSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvdG9EYXRlL2luZGV4LmpzP2FkNmQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2dyaWQtdGFibGUnLHtzdGF0aWNDbGFzczpcInJhbmdlZC1zdGF0cy10YWJsZVwiLGF0dHJzOntcImNvbHVtbnNcIjpfdm0uY29sdW1ucyxcIml0ZW1zXCI6X3ZtLnJvd3MsXCJmb290ZXItaXRlbXNcIjpfdm0uZm9vdGVyUm93cyxcImNlbGwtY2xhc3MtcHJvdmlkZXJcIjpmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIF92bS5nZXRDZWxsQ2xhc3ModmFsdWUpOyB9fSxzY29wZWRTbG90czpfdm0uX3UoW192bS5fbCgoX3ZtLmNvbHVtbnMpLGZ1bmN0aW9uKGNvbHVtbixpKXtyZXR1cm4ge2tleTooXCJjZWxsLVwiICsgKGNvbHVtbi5rZXkpKSxmbjpmdW5jdGlvbihyZWYpe1xudmFyIHZhbHVlID0gcmVmLnZhbHVlO1xudmFyIGl0ZW0gPSByZWYuaXRlbTtcbnJldHVybiBbX2MoJ3NwYW4nLHtrZXk6Y29sdW1uLmtleSxzdGF0aWNDbGFzczpcInJhbmdlZC1zdGF0cy10YWJsZS1jZWxsXCJ9LFsoY29sdW1uLmtleSA9PSAnbGFiZWwnKT9bKGNvbHVtbi5zbG90TmFtZSAhPSBudWxsICYmIF92bS4kc2NvcGVkU2xvdHNbY29sdW1uLnNsb3ROYW1lXSAhPSBudWxsKT9fdm0uX3QoY29sdW1uLnNsb3ROYW1lLG51bGwse1widmFsdWVcIjp2YWx1ZX0pOl9jKCdzcGFuJyx7a2V5OmksZG9tUHJvcHM6e1widGV4dENvbnRlbnRcIjpfdm0uX3ModmFsdWUpfX0pXTooY29sdW1uLmtleSA9PSAnc3ViTGFiZWwnKT9fdm0uX2woKGl0ZW0uaXRlbXMpLGZ1bmN0aW9uKGl0ZW0saSl7cmV0dXJuIF9jKCdzcGFuJyx7a2V5OmksY2xhc3M6aXRlbS5sYWJlbENsYXNzfSxbKGNvbHVtbi5zbG90TmFtZSAhPSBudWxsICYmIF92bS4kc2NvcGVkU2xvdHNbY29sdW1uLnNsb3ROYW1lXSAhPSBudWxsKT9fdm0uX3QoY29sdW1uLnNsb3ROYW1lLG51bGwse1widmFsdWVcIjppdGVtLmxhYmVsfSk6X2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhpdGVtLmxhYmVsKX19KV0sMil9KTpfdm0uX2woKGl0ZW0uaXRlbXMgfHwgW2l0ZW1dKSxmdW5jdGlvbihpdGVtLGkpe3JldHVybiBfYygnc3Bhbicse2tleTppLGNsYXNzOltfdm0uZ2V0Q2VsbENsYXNzKGl0ZW1bY29sdW1uLmtleV0pLCBpdGVtLmNsYXNzXX0sWyhjb2x1bW4uZm9ybWF0dGVyICE9IG51bGwpP19jKCdzcGFuJyx7ZG9tUHJvcHM6e1widGV4dENvbnRlbnRcIjpfdm0uX3MoY29sdW1uLmZvcm1hdHRlcihpdGVtW2NvbHVtbi5rZXldKSl9fSk6X2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhpdGVtW2NvbHVtbi5rZXldKX19KV0pfSldLDIpXX19fSksX3ZtLl9sKChfdm0uJHNjb3BlZFNsb3RzKSxmdW5jdGlvbihpbmRleCxuYW1lKXtyZXR1cm4ge2tleTpuYW1lLGZuOmZ1bmN0aW9uKGRhdGEpe3JldHVybiBbX3ZtLl90KG5hbWUsbnVsbCxudWxsLGRhdGEpXX19fSldLG51bGwsdHJ1ZSl9KX1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiPHRlbXBsYXRlPlxyXG4gICAgPGdyaWQtdGFibGUgOmNvbHVtbnM9XCJjb2x1bW5zXCIgOml0ZW1zPVwicm93c1wiIDpmb290ZXItaXRlbXM9XCJmb290ZXJSb3dzXCIgOmNlbGwtY2xhc3MtcHJvdmlkZXI9XCIodmFsdWUpID0+IGdldENlbGxDbGFzcyh2YWx1ZSlcIiBjbGFzcz1cInJhbmdlZC1zdGF0cy10YWJsZVwiPlxyXG4gICAgICAgIDwhLS0gb2ggZ29kIHRoaXMgaXMgdWdseSAtLT5cclxuICAgICAgICA8dGVtcGxhdGUgdi1mb3I9XCIoY29sdW1uLCBpKSBpbiBjb2x1bW5zXCIgdi1zbG90OltgY2VsbC0ke2NvbHVtbi5rZXl9YF09XCJ7IHZhbHVlLCBpdGVtIH1cIj5cclxuICAgICAgICAgICAgPHNwYW4gOmtleT1cImNvbHVtbi5rZXlcIiBjbGFzcz1cInJhbmdlZC1zdGF0cy10YWJsZS1jZWxsXCI+XHJcbiAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cImNvbHVtbi5rZXkgPT0gJ2xhYmVsJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzbG90IHYtaWY9XCJjb2x1bW4uc2xvdE5hbWUgIT0gbnVsbCAmJiAkc2NvcGVkU2xvdHNbY29sdW1uLnNsb3ROYW1lXSAhPSBudWxsXCIgOm5hbWU9XCJjb2x1bW4uc2xvdE5hbWVcIiA6dmFsdWU9XCJ2YWx1ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1lbHNlIDprZXk9XCJpXCIgdi10ZXh0PVwidmFsdWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWVsc2UtaWY9XCJjb2x1bW4ua2V5ID09ICdzdWJMYWJlbCdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWZvcj1cIihpdGVtLCBpKSBpbiBpdGVtLml0ZW1zXCIgOmtleT1cImlcIiA6Y2xhc3M9XCJpdGVtLmxhYmVsQ2xhc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNsb3Qgdi1pZj1cImNvbHVtbi5zbG90TmFtZSAhPSBudWxsICYmICRzY29wZWRTbG90c1tjb2x1bW4uc2xvdE5hbWVdICE9IG51bGxcIiA6bmFtZT1cImNvbHVtbi5zbG90TmFtZVwiIDp2YWx1ZT1cIml0ZW0ubGFiZWxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWVsc2Ugdi10ZXh0PVwiaXRlbS5sYWJlbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWVsc2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1mb3I9XCIoaXRlbSwgaSkgaW4gaXRlbS5pdGVtcyB8fCBbaXRlbV1cIiA6a2V5PVwiaVwiIDpjbGFzcz1cIltnZXRDZWxsQ2xhc3MoaXRlbVtjb2x1bW4ua2V5XSksIGl0ZW0uY2xhc3NdXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtaWY9XCJjb2x1bW4uZm9ybWF0dGVyICE9IG51bGxcIiB2LXRleHQ9XCJjb2x1bW4uZm9ybWF0dGVyKGl0ZW1bY29sdW1uLmtleV0pXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1lbHNlIHYtdGV4dD1cIml0ZW1bY29sdW1uLmtleV1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8L3RlbXBsYXRlPlxyXG5cclxuICAgICAgICA8dGVtcGxhdGUgdi1mb3I9XCIoaW5kZXgsIG5hbWUpIGluICRzY29wZWRTbG90c1wiIHYtc2xvdDpbbmFtZV09XCJkYXRhXCI+XHJcbiAgICAgICAgICAgIDxzbG90IDpuYW1lPVwibmFtZVwiIHYtYmluZD1cImRhdGFcIiAvPlxyXG4gICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICA8L2dyaWQtdGFibGU+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgUHJvcFR5cGUgfSBmcm9tICd2dWUnO1xyXG4gICAgaW1wb3J0IHsgUHJvcCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InO1xyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuICAgIGltcG9ydCB7IEdyaWRUYWJsZUNvbHVtbiB9IGZyb20gJ0BzdGF0cy9jb21wb25lbnRzL2NvbW1vbi9HcmlkVGFibGUudnVlJztcclxuICAgIGltcG9ydCB7IGlzSW5SYW5nZSB9IGZyb20gJ0BzdGF0cy91dGlscy9kYXRlUmFuZ2VzJztcclxuICAgIGltcG9ydCB7IF90aHJvdyB9IGZyb20gJ0Avc2hhcmVkL3V0aWxzL190aHJvdyc7XHJcbiAgICBpbXBvcnQgc3RhcnRPZkRheSBmcm9tICdkYXRlLWZucy9zdGFydE9mRGF5L2luZGV4JztcclxuICAgIGltcG9ydCB7IFNldHRpbmdzRGF0YU1vZHVsZSB9IGZyb20gJy4uLy4uL2RhdGEvU2V0dGluZ3NEYXRhTW9kdWxlJztcclxuXHJcbiAgICBpbnRlcmZhY2UgUmFuZ2VTdGF0c1RhYmxlSXRlbVdpdGhEYXRlIHtcclxuICAgICAgICBkYXRlOiBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJmYWNlIFNpbmdsZVJhbmdlZFN0YXRzVGFibGVJdGVtPFQgZXh0ZW5kcyBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGU+IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIGdldFZhbHVlOiAoaXRlbXM6IFRbXSkgPT4gbnVtYmVyO1xyXG4gICAgICAgIGNsYXNzPzogc3RyaW5nO1xyXG4gICAgICAgIGxhYmVsQ2xhc3M/OiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJmYWNlIEdyb3VwZWRSYW5nZWRTdGF0c1RhYmxlSXRlbTxUIGV4dGVuZHMgUmFuZ2VTdGF0c1RhYmxlSXRlbVdpdGhEYXRlPiB7XHJcbiAgICAgICAgbGFiZWw6IHN0cmluZztcclxuICAgICAgICBpdGVtczogU2luZ2xlUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgdHlwZSBSYW5nZWRTdGF0c1RhYmxlSXRlbTxUIGV4dGVuZHMgUmFuZ2VTdGF0c1RhYmxlSXRlbVdpdGhEYXRlPiA9IFNpbmdsZVJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+IHwgR3JvdXBlZFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+O1xyXG5cclxuICAgIGludGVyZmFjZSBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIHBlcmNlbnRhZ2U/OiBudW1iZXIgfCAnJztcclxuICAgICAgICBhdmVyYWdlPzogbnVtYmVyO1xyXG5cclxuICAgICAgICBbaW5kZXg6IG51bWJlcl06IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmZhY2UgR3JvdXBlZFJhbmdlZFN0YXRzVGFibGVSb3cge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgaXRlbXM6IFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3dbXTtcclxuICAgIH1cclxuXHJcbiAgICB0eXBlIFJhbmdlZFN0YXRzVGFibGVSb3cgPSBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93IHwgR3JvdXBlZFJhbmdlZFN0YXRzVGFibGVSb3c7XHJcblxyXG4gICAgaW50ZXJmYWNlIFJhbmdlU3RhdHNUYWJsZUNvbHVtbiBleHRlbmRzIEdyaWRUYWJsZUNvbHVtbjxrZXlvZiBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93IHwgJ3N1YkxhYmVsJyB8IG51bWJlcj4ge1xyXG4gICAgICAgIHNsb3ROYW1lPzogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIEBDb21wb25lbnQoe30pXHJcbiAgICBleHBvcnQgZGVmYXVsdCBjbGFzcyBSYW5nZWRTdGF0c1RhYmxlPFQgZXh0ZW5kcyBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGU+IGV4dGVuZHMgVnVlIHtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IEJvb2xlYW4gfSlcclxuICAgICAgICBwcml2YXRlIHNob3dQZXJjZW50YWdlITogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IEJvb2xlYW4gfSlcclxuICAgICAgICBwcml2YXRlIHNob3dBdmVyYWdlITogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogQXJyYXkgYXMgUHJvcFR5cGU8UmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXT4gfSlcclxuICAgICAgICBwcml2YXRlIGl0ZW1zITogUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXTtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IEFycmF5IGFzIFByb3BUeXBlPFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+W10+LCBkZWZhdWx0OiAoKSA9PiBbXSB9KVxyXG4gICAgICAgIHByaXZhdGUgZm9vdGVySXRlbXMhOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogT2JqZWN0IGFzIFByb3BUeXBlPEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucz4sIGRlZmF1bHQ6IHVuZGVmaW5lZCB9KVxyXG4gICAgICAgIHByaXZhdGUgbnVtYmVyRm9ybWF0T3B0aW9uczogSW50bC5OdW1iZXJGb3JtYXRPcHRpb25zIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogT2JqZWN0IGFzIFByb3BUeXBlPEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucz4sIGRlZmF1bHQ6IHVuZGVmaW5lZCB9KVxyXG4gICAgICAgIHByaXZhdGUgYXZlcmFnZU51bWJlckZvcm1hdE9wdGlvbnM6IEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucyB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogQXJyYXkgYXMgUHJvcFR5cGU8VFtdPiB9KVxyXG4gICAgICAgIHByaXZhdGUgZGF0YUl0ZW1zITogVFtdO1xyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBoYXNHcm91cGVkSXRlbXMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zLnNvbWUoaXRlbSA9PiAnaXRlbXMnIGluIGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZGF0ZVJhbmdlcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncy5kYXRlUmFuZ2VzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZGF0YUl0ZW1zQnlSYW5nZSgpOiBUW11bXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtcyA9IHRoaXMuZGF0YUl0ZW1zO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbXNCeVJhbmdlOiBUW11bXSA9IHRoaXMuZGF0ZVJhbmdlcy5tYXAoKCkgPT4gW10pO1xyXG5cclxuICAgICAgICAgICAgZGF0YUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVSYW5nZXMuZm9yRWFjaCgocmFuZ2UsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJblJhbmdlKGl0ZW0uZGF0ZSwgcmFuZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFJdGVtc0J5UmFuZ2VbaV0ucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YUl0ZW1zQnlSYW5nZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGZpcnN0RGF5KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhSXRlbXNCeVJhbmdlLnJlZHVjZSgoYWNjLCBjdXIpID0+IE1hdGgubWluKFxyXG4gICAgICAgICAgICAgICAgYWNjLFxyXG4gICAgICAgICAgICAgICAgTWF0aC5taW4oLi4uY3VyLm1hcCh0ID0+IHQuZGF0ZSkpLFxyXG4gICAgICAgICAgICApLCBEYXRlLm5vdygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGNvbHVtbnMoKTogUmFuZ2VTdGF0c1RhYmxlQ29sdW1uW10ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2x1bW5zOiBSYW5nZVN0YXRzVGFibGVDb2x1bW5bXSA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdsYWJlbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsb3ROYW1lOiAnbGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNHcm91cGVkSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnc3ViTGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzbG90TmFtZTogJ3N1YkxhYmVsJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb2x1bW5zLnB1c2goLi4udGhpcy5kYXRlUmFuZ2VzLm1hcCgocmFuZ2UsIGkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBrZXk6IGksXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogcmFuZ2UubGFiZWwgPz8gdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uc2V0dGluZ3MuZGF0ZVJhbmdlcy5zaW5jZSh0aGlzLiRpMThuLiRkKHRoaXMuZmlyc3REYXksICdkYXRlJykpLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAodmFsdWU6IG51bWJlcikgPT4gdGhpcy4kaTE4bi4kbih2YWx1ZSwgdGhpcy5udW1iZXJGb3JtYXRPcHRpb25zKSxcclxuICAgICAgICAgICAgfSkpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dBdmVyYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2F2ZXJhZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5jb21tb24uYXZlcmFnZVBlckRheSxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICh2YWx1ZTogbnVtYmVyKSA9PiB0aGlzLiRpMThuLiRuKHZhbHVlLCB0aGlzLmF2ZXJhZ2VOdW1iZXJGb3JtYXRPcHRpb25zID8/IHRoaXMubnVtYmVyRm9ybWF0T3B0aW9ucylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93UGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwZXJjZW50YWdlJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJyUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogKHZhbHVlOiBudW1iZXIgfCAnJykgPT4gdmFsdWUgIT0gJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLiRpMThuLiRuKHZhbHVlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdmFsdWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHJvd3MoKTogKFJhbmdlZFN0YXRzVGFibGVSb3cgJiB7IGNsYXNzPzogc3RyaW5nIH0pW10ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbXNCeVJhbmdlID0gdGhpcy5kYXRhSXRlbXNCeVJhbmdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWxsUmFuZ2VJbmRleCA9IHRoaXMuZGF0ZVJhbmdlcy5maW5kSW5kZXgocmFuZ2UgPT4gcmFuZ2UudHlwZSA9PSAnYWxsJylcclxuICAgICAgICAgICAgICAgID8/IF90aHJvdyhgZmFpbGVkIHRvIGZpbmQgcmFuZ2UgJ2FsbCdgKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1EYXlzID0gZGF0YUl0ZW1zQnlSYW5nZVthbGxSYW5nZUluZGV4XS5tYXAoZXhwbyA9PiBzdGFydE9mRGF5KGV4cG8uZGF0ZSkuZ2V0VGltZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgZGF5c1dpdGhEYXRhSXRlbXMgPSBuZXcgU2V0KGRhdGFJdGVtRGF5cykuc2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBNYXRoLm1heCgxLCB0aGlzLml0ZW1zXHJcbiAgICAgICAgICAgICAgICAubWFwKGl0ZW0gPT4gJ2dldFZhbHVlJyBpbiBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgPyBpdGVtLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbYWxsUmFuZ2VJbmRleF0pXHJcbiAgICAgICAgICAgICAgICAgICAgOiBpdGVtLml0ZW1zLnJlZHVjZSgoYWNjLCBpKSA9PiBhY2MgKyBpLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbYWxsUmFuZ2VJbmRleF0pLCAwKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCBjdXIpID0+IGFjYyArIGN1ciwgMClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zLm1hcChpdGVtID0+IHRoaXMubWFwSXRlbVRvUm93KGl0ZW0sIGRhdGFJdGVtc0J5UmFuZ2UsIGFsbFJhbmdlSW5kZXgsIGRheXNXaXRoRGF0YUl0ZW1zLCB0b3RhbFZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG1hcEl0ZW1Ub1JvdyhpdGVtOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPiwgZGF0YUl0ZW1zQnlSYW5nZTogVFtdW10sIGFsbFJhbmdlSW5kZXg6IG51bWJlciwgZGF5c1dpdGhEYXRhSXRlbXM6IG51bWJlciwgdG90YWxWYWx1ZTogbnVtYmVyKTogKFJhbmdlZFN0YXRzVGFibGVSb3cgJiB7IGNsYXNzPzogc3RyaW5nOyBsYWJlbENsYXNzPzogc3RyaW5nIH0pIHtcclxuICAgICAgICAgICAgaWYgKCdnZXRWYWx1ZScgaW4gaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93OiBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93ICYgeyBjbGFzcz86IHN0cmluZzsgbGFiZWxDbGFzcz86IHN0cmluZyB9ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBpdGVtLmNsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsQ2xhc3M6IGl0ZW0ubGFiZWxDbGFzcyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5kYXRlUmFuZ2VzLm1hcCgoXywgcmFuZ2VJbmRleCkgPT4gaXRlbS5nZXRWYWx1ZShkYXRhSXRlbXNCeVJhbmdlW3JhbmdlSW5kZXhdKSksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhbmdlVmFsdWUgPSByb3dbYWxsUmFuZ2VJbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0F2ZXJhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3cuYXZlcmFnZSA9IGFsbFJhbmdlVmFsdWUgLyBNYXRoLm1heCgxLCBkYXlzV2l0aERhdGFJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1BlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3cucGVyY2VudGFnZSA9IDEwMCAqIGFsbFJhbmdlVmFsdWUgLyB0b3RhbFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6IGl0ZW0uaXRlbXMubWFwKHN1Yml0ZW0gPT4gdGhpcy5tYXBJdGVtVG9Sb3coc3ViaXRlbSwgZGF0YUl0ZW1zQnlSYW5nZSwgYWxsUmFuZ2VJbmRleCwgZGF5c1dpdGhEYXRhSXRlbXMsIHRvdGFsVmFsdWUpIGFzIFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cgJiB7IGNsYXNzPzogc3RyaW5nOyBsYWJlbENsYXNzPzogc3RyaW5nIH0pLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZm9vdGVyUm93cygpOiBSYW5nZWRTdGF0c1RhYmxlUm93W10ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbXNCeVJhbmdlID0gdGhpcy5kYXRhSXRlbXNCeVJhbmdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWxsUmFuZ2VJbmRleCA9IHRoaXMuZGF0ZVJhbmdlcy5maW5kSW5kZXgocmFuZ2UgPT4gcmFuZ2UudHlwZSA9PSAnYWxsJylcclxuICAgICAgICAgICAgICAgID8/IF90aHJvdyhgZmFpbGVkIHRvIGZpbmQgcmFuZ2UgJ2FsbCdgKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1EYXlzID0gZGF0YUl0ZW1zQnlSYW5nZVthbGxSYW5nZUluZGV4XS5tYXAoZXhwbyA9PiBzdGFydE9mRGF5KGV4cG8uZGF0ZSkuZ2V0VGltZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgZGF5c1dpdGhEYXRhSXRlbXMgPSBuZXcgU2V0KGRhdGFJdGVtRGF5cykuc2l6ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvb3Rlckl0ZW1zLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdzogUmFuZ2VkU3RhdHNUYWJsZVJvdyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmRhdGVSYW5nZXMubWFwKChfLCByYW5nZUluZGV4KSA9PiAnZ2V0VmFsdWUnIGluIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBpdGVtLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbcmFuZ2VJbmRleF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaXRlbS5pdGVtcy5yZWR1Y2UoKGFjYywgaSkgPT4gYWNjICsgaS5nZXRWYWx1ZShkYXRhSXRlbXNCeVJhbmdlW3JhbmdlSW5kZXhdKSwgMClcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6ICcnLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93QXZlcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhbmdlVmFsdWUgPSByb3dbYWxsUmFuZ2VJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LmF2ZXJhZ2UgPSBhbGxSYW5nZVZhbHVlIC8gTWF0aC5tYXgoMSwgZGF5c1dpdGhEYXRhSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRDZWxsQ2xhc3ModmFsdWU6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2ZhZGUtdmFsdWUnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG48L3NjcmlwdD5cclxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxyXG4gICAgLmdyaWQtdGFibGUge1xyXG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG5cclxuICAgICAgICAmOjp2LWRlZXAgLmZhZGUtdmFsdWUge1xyXG4gICAgICAgICAgICBjb2xvcjogcmdiYSh3aGl0ZSwgMC4xKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLnJhbmdlZC1zdGF0cy10YWJsZS1jZWxsIHtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgfVxyXG48L3N0eWxlPiIsImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RocmVhZC1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiIiwiaW1wb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSBmcm9tIFwiLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD0xNTI2YmVjYSZzY29wZWQ9dHJ1ZSZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCJcbmltcG9ydCBzdHlsZTAgZnJvbSBcIi4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0xNTI2YmVjYSZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBcIjE1MjZiZWNhXCIsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwidGFibGUtY29udGFpbmVyXCJ9LFtfYygncmFuZ2VkLXN0YXRzLXRhYmxlJyx7YXR0cnM6e1wiZGF0YUl0ZW1zXCI6X3ZtLmRpc2NvdmVyaWVzLFwiaXRlbXNcIjpfdm0uaXRlbXMsXCJmb290ZXJJdGVtc1wiOl92bS5mb290ZXJJdGVtcyxcInNob3ctYXZlcmFnZVwiOlwiXCIsXCJzaG93LXBlcmNlbnRhZ2VcIjpcIlwiLFwiYXZlcmFnZU51bWJlckZvcm1hdE9wdGlvbnNcIjpfdm0uYXZnTnVtYmVyRm9ybWF0fSxzY29wZWRTbG90czpfdm0uX3UoW3trZXk6XCJjZWxsLWxhYmVsXCIsZm46ZnVuY3Rpb24ocmVmKXtcbnZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcbnJldHVybiBbX2MoJ3NwYW4nLHtzdGF0aWNDbGFzczpcIm1yLTJcIixkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyh2YWx1ZSl9fSksX2MoJ28tbGlmZWZvcm0nLHthdHRyczp7XCJsaWZlZm9ybVwiOl92bS5saWZlZm9ybVR5cGVzW3ZhbHVlXSxcInNpemVcIjpcIjI0cHhcIn19KV19fV0pfSksX2MoJ2Zsb2F0aW5nLW1lbnUnLHthdHRyczp7XCJsZWZ0XCI6XCJcIn0sc2NvcGVkU2xvdHM6X3ZtLl91KFt7a2V5OlwiYWN0aXZhdG9yXCIsZm46ZnVuY3Rpb24oKXtyZXR1cm4gW19jKCdidXR0b24nLHtvbjp7XCJjbGlja1wiOmZ1bmN0aW9uKCRldmVudCl7X3ZtLnNob3dTZXR0aW5ncyA9ICFfdm0uc2hvd1NldHRpbmdzfX19LFtfYygnc3Bhbicse3N0YXRpY0NsYXNzOlwibWRpIG1kaS1jb2dcIn0pXSldfSxwcm94eTp0cnVlfV0pLG1vZGVsOnt2YWx1ZTooX3ZtLnNob3dTZXR0aW5ncyksY2FsbGJhY2s6ZnVuY3Rpb24gKCQkdikge192bS5zaG93U2V0dGluZ3M9JCR2fSxleHByZXNzaW9uOlwic2hvd1NldHRpbmdzXCJ9fSxbX2MoJ2RhdGUtcmFuZ2Utc2V0dGluZ3MnKV0sMSldLDEpfVxudmFyIHN0YXRpY1JlbmRlckZucyA9IFtdXG5cbmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0iLCI8dGVtcGxhdGU+XHJcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtY29udGFpbmVyXCI+XHJcbiAgICAgICAgPHJhbmdlZC1zdGF0cy10YWJsZVxyXG4gICAgICAgICAgICA6ZGF0YUl0ZW1zPVwiZGlzY292ZXJpZXNcIlxyXG4gICAgICAgICAgICA6aXRlbXM9XCJpdGVtc1wiXHJcbiAgICAgICAgICAgIDpmb290ZXJJdGVtcz1cImZvb3Rlckl0ZW1zXCJcclxuICAgICAgICAgICAgc2hvdy1hdmVyYWdlXHJcbiAgICAgICAgICAgIHNob3ctcGVyY2VudGFnZVxyXG4gICAgICAgICAgICA6YXZlcmFnZU51bWJlckZvcm1hdE9wdGlvbnM9XCJhdmdOdW1iZXJGb3JtYXRcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgICAgPHRlbXBsYXRlICNjZWxsLWxhYmVsPVwieyB2YWx1ZSB9XCI+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiB2LXRleHQ9XCJ2YWx1ZVwiIGNsYXNzPVwibXItMlwiIC8+XHJcblxyXG4gICAgICAgICAgICAgICAgPG8tbGlmZWZvcm0gOmxpZmVmb3JtPVwibGlmZWZvcm1UeXBlc1t2YWx1ZV1cIiBzaXplPVwiMjRweFwiIC8+XHJcbiAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgPC9yYW5nZWQtc3RhdHMtdGFibGU+XHJcblxyXG4gICAgICAgIDxmbG9hdGluZy1tZW51IHYtbW9kZWw9XCJzaG93U2V0dGluZ3NcIiBsZWZ0PlxyXG4gICAgICAgICAgICA8dGVtcGxhdGUgI2FjdGl2YXRvcj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gQGNsaWNrPVwic2hvd1NldHRpbmdzID0gIXNob3dTZXR0aW5nc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWRpIG1kaS1jb2dcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcblxyXG4gICAgICAgICAgICA8ZGF0ZS1yYW5nZS1zZXR0aW5ncyAvPlxyXG4gICAgICAgIDwvZmxvYXRpbmctbWVudT5cclxuICAgIDwvZGl2PlxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdCBsYW5nPVwidHNcIj5cclxuICAgIGltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7XHJcbiAgICBpbXBvcnQgUmFuZ2VkU3RhdHNUYWJsZSwgeyBSYW5nZWRTdGF0c1RhYmxlSXRlbSB9IGZyb20gJ0BzdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlJztcclxuICAgIGltcG9ydCBEYXRlUmFuZ2VTZXR0aW5ncyBmcm9tICdAc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9EYXRlUmFuZ2VTZXR0aW5ncy52dWUnO1xyXG4gICAgaW1wb3J0IHsgRGFpbHlMaWZlZm9ybURpc2NvdmVyeVJlc3VsdCwgTGlmZWZvcm1EaXNjb3ZlcnlEYXRhTW9kdWxlIH0gZnJvbSAnQC92aWV3cy9zdGF0cy9kYXRhL0xpZmVmb3JtRGlzY292ZXJ5RGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgeyBTZXR0aW5nc0RhdGFNb2R1bGUgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvU2V0dGluZ3NEYXRhTW9kdWxlJztcclxuICAgIGltcG9ydCB7IExpZmVmb3JtVHlwZSwgVmFsaWRMaWZlZm9ybVR5cGVzIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2xpZmVmb3Jtcy9MaWZlZm9ybVR5cGUnO1xyXG5cclxuICAgIEBDb21wb25lbnQoe1xyXG4gICAgICAgIGNvbXBvbmVudHM6IHtcclxuICAgICAgICAgICAgUmFuZ2VkU3RhdHNUYWJsZSxcclxuICAgICAgICAgICAgRGF0ZVJhbmdlU2V0dGluZ3MsXHJcbiAgICAgICAgfSxcclxuICAgIH0pXHJcbiAgICBleHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJsZSBleHRlbmRzIFZ1ZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBzaG93U2V0dGluZ3MgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBhdmdOdW1iZXJGb3JtYXQ6IEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAxLFxyXG4gICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDEsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZGlzY292ZXJpZXMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBMaWZlZm9ybURpc2NvdmVyeURhdGFNb2R1bGUuZGFpbHlSZXN1bHRzQXJyYXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBjb2xvcnMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTZXR0aW5nc0RhdGFNb2R1bGUuc2V0dGluZ3MuY29sb3JzLmxpZmVmb3JtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGxpZmVmb3JtVHlwZXMoKTogUmVjb3JkPHN0cmluZywgTGlmZWZvcm1UeXBlPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBbdGhpcy4kaTE4bi4kdC5vZ2FtZS5saWZlZm9ybXMuaHVtYW5zXTogTGlmZWZvcm1UeXBlLmh1bWFucyxcclxuICAgICAgICAgICAgICAgIFt0aGlzLiRpMThuLiR0Lm9nYW1lLmxpZmVmb3Jtcy5yb2NrdGFsXTogTGlmZWZvcm1UeXBlLnJvY2t0YWwsXHJcbiAgICAgICAgICAgICAgICBbdGhpcy4kaTE4bi4kdC5vZ2FtZS5saWZlZm9ybXMubWVjaGFzXTogTGlmZWZvcm1UeXBlLm1lY2hhcyxcclxuICAgICAgICAgICAgICAgIFt0aGlzLiRpMThuLiR0Lm9nYW1lLmxpZmVmb3Jtcy5rYWVsZXNoXTogTGlmZWZvcm1UeXBlLmthZWxlc2gsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBpdGVtcygpOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxEYWlseUxpZmVmb3JtRGlzY292ZXJ5UmVzdWx0PltdIHtcclxuICAgICAgICAgICAgcmV0dXJuIFZhbGlkTGlmZWZvcm1UeXBlcy5tYXAobGlmZWZvcm0gPT4gKHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0Lm9nYW1lLmxpZmVmb3Jtc1tsaWZlZm9ybV0sXHJcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogZGlzY292ZXJpZXMgPT4gZGlzY292ZXJpZXMucmVkdWNlKFxyXG4gICAgICAgICAgICAgICAgICAgIChhY2MsIGRpc2MpID0+IGFjYyArIGRpc2MubGlmZWZvcm1FeHBlcmllbmNlW2xpZmVmb3JtXSxcclxuICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBmb290ZXJJdGVtcygpOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxEYWlseUxpZmVmb3JtRGlzY292ZXJ5UmVzdWx0PltdIHtcclxuICAgICAgICAgICAgcmV0dXJuIFt7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uY29tbW9uLnN1bSxcclxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiBkaXNjb3ZlcmllcyA9PiBkaXNjb3Zlcmllcy5yZWR1Y2UoXHJcbiAgICAgICAgICAgICAgICAgICAgKGFjYywgZGlzYykgPT4gYWNjICsgT2JqZWN0LnZhbHVlcyhkaXNjLmxpZmVmb3JtRXhwZXJpZW5jZSkucmVkdWNlKChhY2MsIGN1cikgPT4gYWNjICsgY3VyLCAwKSxcclxuICAgICAgICAgICAgICAgICAgICAwXHJcbiAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICB9XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc2NyaXB0PlxyXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XHJcbiAgICAudGFibGUtY29udGFpbmVyIHtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGNvbHVtbi1nYXA6IDRweDtcclxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciBhdXRvO1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBzdGFydDtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTYzZWNkNzcwJnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTYzZWNkNzcwJmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiNjNlY2Q3NzBcIixcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHJlcXVpcmVkQXJncztcblxuZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gc3RhcnRPZkRheTtcblxudmFyIF9pbmRleCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL3RvRGF0ZS9pbmRleC5qc1wiKSk7XG5cbnZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIHN0YXJ0T2ZEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgc3RhcnQgb2YgYSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSBkYXkgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCkpXG4gKiAvLz0+IFR1ZSBTZXAgMDIgMjAxNCAwMDowMDowMFxuICovXG5mdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICAoMCwgX2luZGV4Mi5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZSA9ICgwLCBfaW5kZXguZGVmYXVsdCkoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdG9EYXRlO1xuXG52YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50KSB7XG4gICgwLCBfaW5kZXguZGVmYXVsdCkoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdLCJuYW1lcyI6WyJyZW5kZXIiLCJfdm0iLCJ0aGlzIiwiX2giLCIkY3JlYXRlRWxlbWVudCIsIl9jIiwiX3NlbGYiLCJzdGF0aWNDbGFzcyIsImF0dHJzIiwiY29sdW1ucyIsInJvd3MiLCJmb290ZXJSb3dzIiwidmFsdWUiLCJnZXRDZWxsQ2xhc3MiLCJzY29wZWRTbG90cyIsIl91IiwiX2wiLCJjb2x1bW4iLCJpIiwia2V5IiwiZm4iLCJyZWYiLCJpdGVtIiwic2xvdE5hbWUiLCIkc2NvcGVkU2xvdHMiLCJfdCIsImRvbVByb3BzIiwiX3MiLCJjbGFzcyIsImxhYmVsQ2xhc3MiLCJsYWJlbCIsIml0ZW1zIiwiZm9ybWF0dGVyIiwiaW5kZXgiLCJuYW1lIiwiZGF0YSIsInN0YXRpY1JlbmRlckZucyIsImNvbXBvbmVudCIsImRpc2NvdmVyaWVzIiwiZm9vdGVySXRlbXMiLCJhdmdOdW1iZXJGb3JtYXQiLCJsaWZlZm9ybVR5cGVzIiwib24iLCIkZXZlbnQiLCJzaG93U2V0dGluZ3MiLCJwcm94eSIsIm1vZGVsIiwiY2FsbGJhY2siLCIkJHYiLCJleHByZXNzaW9uIiwicmVxdWlyZWRBcmdzIiwicmVxdWlyZWQiLCJhcmdzIiwibGVuZ3RoIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmYXVsdCIsInN0YXJ0T2ZEYXkiLCJfaW5kZXgiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2luZGV4MiIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkaXJ0eURhdGUiLCJhcmd1bWVudHMiLCJkYXRlIiwic2V0SG91cnMiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ1N0ciIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIkRhdGUiLCJnZXRUaW1lIiwiY29uc29sZSIsIndhcm4iLCJFcnJvciIsInN0YWNrIiwiTmFOIl0sInNvdXJjZVJvb3QiOiIifQ==