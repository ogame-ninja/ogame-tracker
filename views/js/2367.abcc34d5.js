"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[2367],{6055:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("select",{directives:[{name:"model",rawName:"v-model.number",value:e.building,expression:"building",modifiers:{number:!0}}],staticStyle:{display:"block","margin-bottom":"4px"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(t){var i="_value"in t?t._value:t.value;return e._n(i)}));e.building=t.target.multiple?i:i[0]}}},e._l(e.Buildings,(function(t){return i("option",{key:t,domProps:{value:t,textContent:e._s(e.$i18n.$t.ogame.buildings[t])}})})),0),i("lifeform-bonuses-breakdown",{attrs:{types:e.bonusTypes,technologies:e.techs,planets:e.planets,limits:e.limits},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"start"}},[i("span",[i("o-building",{staticClass:"mr-2",attrs:{building:e.building}}),i("span",{domProps:{textContent:e._s(e.$i18n.$t.ogame.buildings[e.building])}})],1)])]},proxy:!0}])})],1)},s=[],o=i(655),l=i(147),r=i(3418),a=i(4846),u=i(9751),c=i(8395),m=i(1786),p=i(4028),g=i(7385),d=i(6864),b=i(1913),f=i(7848),h=i(7377);let y=class extends p.w3{bonusTypes=[{key:"cost",label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.buildingCostTime.cost},{key:"time",label:this.$i18n.$t.extension.empire.lifeforms.researchBonuses.buildingCostTime.time}];technologies=a.zd;get techs(){return this.technologies.filter((e=>e.appliesTo(this.building))).map((e=>e.type))}get limits(){const e=(0,f.K)({type:h.f.TechCostReduction,tech:this.building}),t=(0,f.K)({type:h.f.TechTimeReduction,tech:this.building});return{cost:t=>null!=e?Math.max(t,-e):t,time:e=>null!=t?Math.max(e,-t):e}}building=d.A.allianceDepot;Buildings=b.a7.filter((e=>this.technologies.some((t=>t.appliesTo(e)))));get planets(){return(0,u.r)(c.p.empire.planetOrder.map((e=>c.p.empire.planets[e])).filter((e=>!e.isMoon)),(e=>e.id),(e=>this.technologies.map((t=>{const i=this.getPlanetBonus(t,e);return{planet:e,technologyType:t.type,bonuses:(0,u.a)(["cost","time"],(e=>({base:i.base[e],buildings:i.buildings[e],level:i.level[e],total:i.total[e]})))}}))))}get experience(){return c.p.lifeformExperience}getPlanetBonus(e,t){const i={base:{cost:0,time:0},level:{cost:0,time:0},buildings:{cost:0,time:0},buildingsBoost:0,total:{cost:0,time:0}};if(t.activeLifeform==r.e5.none||!t.activeLifeformTechnologies.includes(e.type)||!e.appliesTo(this.building))return i;const n=Math.min((0,m.io)(t)[e.type],(0,f.K)({type:h.f.LifeformResearchBonusBoost})??Number.MAX_SAFE_INTEGER);i.buildingsBoost+=n;const s=e.getBuildingCostAndTimeReduction(this.building,t.lifeformTechnologies[e.type]),o={cost:"cost",time:"time"};return Object.entries(o).forEach((e=>{const[o,r]=e,a=-1*s[r],u=a*(0,l.g1)(this.experience[t.activeLifeform]),c=a*n,m=a+u+c;i.base[o]+=a,i.level[o]+=u,i.buildings[o]+=c,i.total[o]+=m})),i}};y=(0,o.gn)([(0,p.wA)({components:{LifeformBonusesBreakdown:g.Z}})],y);const v=y,T=v;var x=i(1001),k=(0,x.Z)(T,n,s,!1,null,null,null);const B=k.exports}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvMjM2Ny5hYmNjMzRkNS5qcyIsIm1hcHBpbmdzIjoiOEpBQUEsSUFBSUEsRUFBUyxXQUFhLElBQUlDLEVBQUlDLEtBQVNDLEVBQUdGLEVBQUlHLGVBQW1CQyxFQUFHSixFQUFJSyxNQUFNRCxJQUFJRixFQUFHLE9BQU9FLEVBQUcsTUFBTSxDQUFDQSxFQUFHLFNBQVMsQ0FBQ0UsV0FBVyxDQUFDLENBQUNDLEtBQUssUUFBUUMsUUFBUSxpQkFBaUJDLE1BQU9ULEVBQVksU0FBRVUsV0FBVyxXQUFXQyxVQUFVLENBQUMsUUFBUyxLQUFRQyxZQUFZLENBQUMsUUFBVSxRQUFRLGdCQUFnQixPQUFPQyxHQUFHLENBQUMsT0FBUyxTQUFTQyxHQUFRLElBQUlDLEVBQWdCQyxNQUFNQyxVQUFVQyxPQUFPQyxLQUFLTCxFQUFPTSxPQUFPQyxTQUFRLFNBQVNDLEdBQUcsT0FBT0EsRUFBRUMsWUFBV0MsS0FBSSxTQUFTRixHQUFHLElBQUlHLEVBQU0sV0FBWUgsRUFBSUEsRUFBRUksT0FBU0osRUFBRWIsTUFBTSxPQUFPVCxFQUFJMkIsR0FBR0YsTUFBUXpCLEVBQUk0QixTQUFTZCxFQUFPTSxPQUFPUyxTQUFXZCxFQUFnQkEsRUFBYyxNQUFNZixFQUFJOEIsR0FBSTlCLEVBQWEsV0FBRSxTQUFTNEIsR0FBVSxPQUFPeEIsRUFBRyxTQUFTLENBQUMyQixJQUFJSCxFQUFTSSxTQUFTLENBQUMsTUFBUUosRUFBUyxZQUFjNUIsRUFBSWlDLEdBQUdqQyxFQUFJa0MsTUFBTUMsR0FBR0MsTUFBTUMsVUFBVVQsVUFBZ0IsR0FBR3hCLEVBQUcsNkJBQTZCLENBQUNrQyxNQUFNLENBQUMsTUFBUXRDLEVBQUl1QyxXQUFXLGFBQWV2QyxFQUFJd0MsTUFBTSxRQUFVeEMsRUFBSXlDLFFBQVEsT0FBU3pDLEVBQUkwQyxRQUFRQyxZQUFZM0MsRUFBSTRDLEdBQUcsQ0FBQyxDQUFDYixJQUFJLFNBQVNjLEdBQUcsV0FBVyxNQUFPLENBQUN6QyxFQUFHLE1BQU0sQ0FBQ1EsWUFBWSxDQUFDLFFBQVUsT0FBTyxpQkFBaUIsU0FBUyxjQUFjLFVBQVUsQ0FBQ1IsRUFBRyxPQUFPLENBQUNBLEVBQUcsYUFBYSxDQUFDMEMsWUFBWSxPQUFPUixNQUFNLENBQUMsU0FBV3RDLEVBQUk0QixZQUFZeEIsRUFBRyxPQUFPLENBQUM0QixTQUFTLENBQUMsWUFBY2hDLEVBQUlpQyxHQUFHakMsRUFBSWtDLE1BQU1DLEdBQUdDLE1BQU1DLFVBQVVyQyxFQUFJNEIsZUFBZSxPQUFPbUIsT0FBTSxRQUFXLElBQ3hzQ0MsRUFBa0IsRyxnSUNzRHRCLHlCQUVBLFlBQ0EsQ0FDQSxXQUNBLHNGQUVBLENBQ0EsV0FDQSx1RkFJQSxrQkFFQSxZQUNBLHlCQUNBLHdDQUNBLGlCQUdBLGFBQ0EsaUVBQ0EsMkRBRUEsT0FDQSxpQ0FDQSxrQ0FJQSwyQkFDQSx3RUFFQSxjQUNBLGNBQ0EsNEJBQ0EsMkJBQ0Esd0JBQ0EsVUFDQSxxQkFDQSxTQUNBLGlDQUVBLE9BQ0EsU0FDQSxzQkFDQSxnQkFDQSxpQkFDQSxLQUNBLGVBQ0EseUJBQ0EsaUJBQ0EsMkJBT0EsaUJBQ0EsOEJBR0Esb0JBQ0EsU0FDQSxxQkFDQSxzQkFDQSwwQkFDQSxpQkFDQSx1QkFHQSxpQ0FDQSxnREFDQSwyQkFFQSxTQUlBLGtCQUNBLG9CQUNBLHdFQUVBLG9CQUVBLHdGQUVBLEdBQ0EsWUFDQSxhQWlCQSxPQWZBLCtCQUNBLGFBRUEsVUFDQSxnREFDQSxNQUVBLFFBRUEsYUFDQSxjQUNBLGtCQUNBLGlCQUdBLElBNUdBLGFBTEEsU0FDQSxZQUNBLGlDQUdBLEcsVUN2RDRkLEksY0NPeGRDLEdBQVksT0FDZCxFQUNBbEQsRUFDQWlELEdBQ0EsRUFDQSxLQUNBLEtBQ0EsTUFJRixRQUFlQyxFQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy9saWZlZm9ybXMvYm9udXMtYnJlYWtkb3duL0J1aWxkaW5nLUNvc3QtVGltZS52dWU/NzU1MCIsIndlYnBhY2s6Ly8vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2xpZmVmb3Jtcy9ib251cy1icmVha2Rvd24vQnVpbGRpbmctQ29zdC1UaW1lLnZ1ZT9iNmM5Iiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy9saWZlZm9ybXMvYm9udXMtYnJlYWtkb3duL0J1aWxkaW5nLUNvc3QtVGltZS52dWU/YTFiMCIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvdmlld3MvbGlmZWZvcm1zL2JvbnVzLWJyZWFrZG93bi9CdWlsZGluZy1Db3N0LVRpbWUudnVlP2U4ZmIiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2RpdicsW19jKCdzZWxlY3QnLHtkaXJlY3RpdmVzOlt7bmFtZTpcIm1vZGVsXCIscmF3TmFtZTpcInYtbW9kZWwubnVtYmVyXCIsdmFsdWU6KF92bS5idWlsZGluZyksZXhwcmVzc2lvbjpcImJ1aWxkaW5nXCIsbW9kaWZpZXJzOntcIm51bWJlclwiOnRydWV9fV0sc3RhdGljU3R5bGU6e1wiZGlzcGxheVwiOlwiYmxvY2tcIixcIm1hcmdpbi1ib3R0b21cIjpcIjRweFwifSxvbjp7XCJjaGFuZ2VcIjpmdW5jdGlvbigkZXZlbnQpe3ZhciAkJHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKCRldmVudC50YXJnZXQub3B0aW9ucyxmdW5jdGlvbihvKXtyZXR1cm4gby5zZWxlY3RlZH0pLm1hcChmdW5jdGlvbihvKXt2YXIgdmFsID0gXCJfdmFsdWVcIiBpbiBvID8gby5fdmFsdWUgOiBvLnZhbHVlO3JldHVybiBfdm0uX24odmFsKX0pOyBfdm0uYnVpbGRpbmc9JGV2ZW50LnRhcmdldC5tdWx0aXBsZSA/ICQkc2VsZWN0ZWRWYWwgOiAkJHNlbGVjdGVkVmFsWzBdfX19LF92bS5fbCgoX3ZtLkJ1aWxkaW5ncyksZnVuY3Rpb24oYnVpbGRpbmcpe3JldHVybiBfYygnb3B0aW9uJyx7a2V5OmJ1aWxkaW5nLGRvbVByb3BzOntcInZhbHVlXCI6YnVpbGRpbmcsXCJ0ZXh0Q29udGVudFwiOl92bS5fcyhfdm0uJGkxOG4uJHQub2dhbWUuYnVpbGRpbmdzW2J1aWxkaW5nXSl9fSl9KSwwKSxfYygnbGlmZWZvcm0tYm9udXNlcy1icmVha2Rvd24nLHthdHRyczp7XCJ0eXBlc1wiOl92bS5ib251c1R5cGVzLFwidGVjaG5vbG9naWVzXCI6X3ZtLnRlY2hzLFwicGxhbmV0c1wiOl92bS5wbGFuZXRzLFwibGltaXRzXCI6X3ZtLmxpbWl0c30sc2NvcGVkU2xvdHM6X3ZtLl91KFt7a2V5OlwiaGVhZGVyXCIsZm46ZnVuY3Rpb24oKXtyZXR1cm4gW19jKCdkaXYnLHtzdGF0aWNTdHlsZTp7XCJkaXNwbGF5XCI6XCJmbGV4XCIsXCJmbGV4LWRpcmVjdGlvblwiOlwiY29sdW1uXCIsXCJhbGlnbi1pdGVtc1wiOlwic3RhcnRcIn19LFtfYygnc3BhbicsW19jKCdvLWJ1aWxkaW5nJyx7c3RhdGljQ2xhc3M6XCJtci0yXCIsYXR0cnM6e1wiYnVpbGRpbmdcIjpfdm0uYnVpbGRpbmd9fSksX2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhfdm0uJGkxOG4uJHQub2dhbWUuYnVpbGRpbmdzW192bS5idWlsZGluZ10pfX0pXSwxKV0pXX0scHJveHk6dHJ1ZX1dKX0pXSwxKX1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiPHRlbXBsYXRlPlxyXG4gICAgPGRpdj5cclxuICAgICAgICA8c2VsZWN0IHYtbW9kZWwubnVtYmVyPVwiYnVpbGRpbmdcIiBzdHlsZT1cImRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA0cHhcIj5cclxuICAgICAgICAgICAgPG9wdGlvbiB2LWZvcj1cImJ1aWxkaW5nIGluIEJ1aWxkaW5nc1wiIDprZXk9XCJidWlsZGluZ1wiIDp2YWx1ZT1cImJ1aWxkaW5nXCIgdi10ZXh0PVwiJGkxOG4uJHQub2dhbWUuYnVpbGRpbmdzW2J1aWxkaW5nXVwiIC8+XHJcbiAgICAgICAgPC9zZWxlY3Q+XHJcblxyXG4gICAgICAgIDxsaWZlZm9ybS1ib251c2VzLWJyZWFrZG93biA6dHlwZXM9XCJib251c1R5cGVzXCIgOnRlY2hub2xvZ2llcz1cInRlY2hzXCIgOnBsYW5ldHM9XCJwbGFuZXRzXCIgOmxpbWl0cz1cImxpbWl0c1wiPlxyXG4gICAgICAgICAgICA8dGVtcGxhdGUgI2hlYWRlcj5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBhbGlnbi1pdGVtczogc3RhcnRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPG8tYnVpbGRpbmcgOmJ1aWxkaW5nPVwiYnVpbGRpbmdcIiBjbGFzcz1cIm1yLTJcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LXRleHQ9XCIkaTE4bi4kdC5vZ2FtZS5idWlsZGluZ3NbYnVpbGRpbmddXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICA8L2xpZmVmb3JtLWJvbnVzZXMtYnJlYWtkb3duPlxyXG4gICAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgUGxhbmV0RGF0YSB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9lbXBpcmUvUGxhbmV0RGF0YSc7XHJcbiAgICBpbXBvcnQgeyBnZXRMaWZlZm9ybUxldmVsVGVjaG5vbG9neUJvbnVzIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2xpZmVmb3Jtcy9leHBlcmllbmNlJztcclxuICAgIGltcG9ydCB7IExpZmVmb3JtVGVjaG5vbG9neVR5cGUgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL0xpZmVmb3JtVGVjaG5vbG9neVR5cGUnO1xyXG4gICAgaW1wb3J0IHsgTGlmZWZvcm1UeXBlLCBWYWxpZExpZmVmb3JtVHlwZSB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvTGlmZWZvcm1UeXBlJztcclxuICAgIGltcG9ydCB7IEJ1aWxkaW5nQ29zdEFuZFRpbWVSZWR1Y3Rpb25MaWZlZm9ybVRlY2hub2xvZ3kgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL3RlY2hub2xvZ2llcy9pbnRlcmZhY2VzJztcclxuICAgIGltcG9ydCB7IEJ1aWxkaW5nQ29zdEFuZFRpbWVSZWR1Y3Rpb25MaWZlZm9ybVRlY2hub2xvZ2llcyB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvdGVjaG5vbG9naWVzL0xpZmVmb3JtVGVjaG5vbG9naWVzJztcclxuICAgIGltcG9ydCB7IGNyZWF0ZU1hcHBlZFJlY29yZCwgY3JlYXRlUmVjb3JkIH0gZnJvbSAnQC9zaGFyZWQvdXRpbHMvY3JlYXRlUmVjb3JkJztcclxuICAgIGltcG9ydCB7IEVtcGlyZURhdGFNb2R1bGUgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvRW1waXJlRGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgeyBnZXRQbGFuZXRMaWZlZm9ybVRlY2hub2xvZ3lCb29zdCB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvbW9kZWxzL2xpZmVmb3Jtcyc7XHJcbiAgICBpbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InO1xyXG4gICAgaW1wb3J0IExpZmVmb3JtQm9udXNlc0JyZWFrZG93biwgeyBMaWZlZm9ybUJvbnVzZXNCcmVha2Rvd25UeXBlLCBMaWZlZm9ybUJvbnVzZXNQbGFuZXRCcmVha2Rvd24gfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvbGlmZWZvcm1zL0xpZmVmb3JtQm9udXNlc0JyZWFrZG93bi52dWUnO1xyXG4gICAgaW1wb3J0IHsgQnVpbGRpbmdUeXBlIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2J1aWxkaW5ncy9CdWlsZGluZ1R5cGUnO1xyXG4gICAgaW1wb3J0IHsgQnVpbGRpbmdUeXBlcyB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9idWlsZGluZ3MvQnVpbGRpbmdUeXBlcyc7XHJcbiAgICBpbXBvcnQgeyBDb3N0QW5kVGltZVJlZHVjdGlvbiB9IGZyb20gJ0Avc2hhcmVkL21vZGVscy9vZ2FtZS9saWZlZm9ybXMvY29tbW9uLWludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBnZXRMaWZlZm9ybUJvbnVzTGltaXQgfSBmcm9tICdAL3NoYXJlZC9tb2RlbHMvb2dhbWUvbGlmZWZvcm1zL0xpZmVmb3JtQm9udXNMaW1pdHMnO1xyXG5pbXBvcnQgeyBMaWZlZm9ybUJvbnVzVHlwZUlkIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL29nYW1lL2xpZmVmb3Jtcy9MaWZlZm9ybUJvbnVzVHlwZSc7XHJcblxyXG4gICAgdHlwZSBCb251c2VzID0ge1xyXG4gICAgICAgIGNvc3Q6IG51bWJlcjtcclxuICAgICAgICB0aW1lOiBudW1iZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIHR5cGUgQm9udXNCcmVha2Rvd24gPSB7XHJcbiAgICAgICAgYmFzZTogQm9udXNlcztcclxuICAgICAgICBsZXZlbDogQm9udXNlcztcclxuICAgICAgICBidWlsZGluZ3M6IEJvbnVzZXM7XHJcbiAgICAgICAgYnVpbGRpbmdzQm9vc3Q6IG51bWJlcjtcclxuICAgICAgICB0b3RhbDogQm9udXNlcztcclxuICAgIH07XHJcblxyXG4gICAgQENvbXBvbmVudCh7XHJcbiAgICAgICAgY29tcG9uZW50czoge1xyXG4gICAgICAgICAgICBMaWZlZm9ybUJvbnVzZXNCcmVha2Rvd24sXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIGV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1aWxkaW5nQ29zdFRpbWUgZXh0ZW5kcyBWdWUge1xyXG5cclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGJvbnVzVHlwZXM6IExpZmVmb3JtQm9udXNlc0JyZWFrZG93blR5cGU8a2V5b2YgQm9udXNlcz5bXSA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAga2V5OiAnY29zdCcsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZW1waXJlLmxpZmVmb3Jtcy5yZXNlYXJjaEJvbnVzZXMuYnVpbGRpbmdDb3N0VGltZS5jb3N0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBrZXk6ICd0aW1lJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5lbXBpcmUubGlmZWZvcm1zLnJlc2VhcmNoQm9udXNlcy5idWlsZGluZ0Nvc3RUaW1lLnRpbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB0ZWNobm9sb2dpZXMgPSBCdWlsZGluZ0Nvc3RBbmRUaW1lUmVkdWN0aW9uTGlmZWZvcm1UZWNobm9sb2dpZXM7XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHRlY2hzKCk6IExpZmVmb3JtVGVjaG5vbG9neVR5cGVbXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRlY2hub2xvZ2llc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcih0ZWNoID0+IHRlY2guYXBwbGllc1RvKHRoaXMuYnVpbGRpbmcpKVxyXG4gICAgICAgICAgICAgICAgLm1hcCh0ID0+IHQudHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBsaW1pdHMoKTogUmVjb3JkPGtleW9mIEJvbnVzZXMsICh2YWx1ZTogbnVtYmVyKSA9PiBudW1iZXI+IHtcclxuICAgICAgICAgICAgY29uc3QgY29zdExpbWl0ID0gZ2V0TGlmZWZvcm1Cb251c0xpbWl0KHsgdHlwZTogTGlmZWZvcm1Cb251c1R5cGVJZC5UZWNoQ29zdFJlZHVjdGlvbiwgdGVjaDogdGhpcy5idWlsZGluZyB9KTtcclxuICAgICAgICAgICAgY29uc3QgdGltZUxpbWl0ID0gZ2V0TGlmZWZvcm1Cb251c0xpbWl0KHsgdHlwZTogTGlmZWZvcm1Cb251c1R5cGVJZC5UZWNoVGltZVJlZHVjdGlvbiwgdGVjaDogdGhpcy5idWlsZGluZyB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb3N0OiB2YWx1ZSA9PiBjb3N0TGltaXQgIT0gbnVsbCA/IE1hdGgubWF4KHZhbHVlLCAtY29zdExpbWl0KSA6IHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgdGltZTogdmFsdWUgPT4gdGltZUxpbWl0ICE9IG51bGwgPyBNYXRoLm1heCh2YWx1ZSwgLXRpbWVMaW1pdCkgOiB2YWx1ZSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYnVpbGRpbmcgPSBCdWlsZGluZ1R5cGUuYWxsaWFuY2VEZXBvdDtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IEJ1aWxkaW5ncyA9IEJ1aWxkaW5nVHlwZXMuZmlsdGVyKGIgPT4gdGhpcy50ZWNobm9sb2dpZXMuc29tZSh0ZWNoID0+IHRlY2guYXBwbGllc1RvKGIpKSk7XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHBsYW5ldHMoKTogUmVjb3JkPG51bWJlciwgTGlmZWZvcm1Cb251c2VzUGxhbmV0QnJlYWtkb3duPGtleW9mIEJvbnVzZXM+W10+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU1hcHBlZFJlY29yZChcclxuICAgICAgICAgICAgICAgIEVtcGlyZURhdGFNb2R1bGUuZW1waXJlLnBsYW5ldE9yZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChpZCA9PiBFbXBpcmVEYXRhTW9kdWxlLmVtcGlyZS5wbGFuZXRzW2lkXSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHBsYW5ldCA9PiAhcGxhbmV0LmlzTW9vbikgYXMgUGxhbmV0RGF0YVtdLFxyXG4gICAgICAgICAgICAgICAgcGxhbmV0ID0+IHBsYW5ldC5pZCxcclxuICAgICAgICAgICAgICAgIHBsYW5ldCA9PiB0aGlzLnRlY2hub2xvZ2llc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXA8TGlmZWZvcm1Cb251c2VzUGxhbmV0QnJlYWtkb3duPGtleW9mIEJvbnVzZXM+Pih0ZWNoID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxhbmV0Qm9udXNlcyA9IHRoaXMuZ2V0UGxhbmV0Qm9udXModGVjaCwgcGxhbmV0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFuZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZWNobm9sb2d5VHlwZTogdGVjaC50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9udXNlczogY3JlYXRlUmVjb3JkPGtleW9mIEJvbnVzZXMsIExpZmVmb3JtQm9udXNlc1BsYW5ldEJyZWFrZG93blsnYm9udXNlcyddW3N0cmluZ10+KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnY29zdCcsICd0aW1lJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2U6IHBsYW5ldEJvbnVzZXMuYmFzZVtrZXldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGluZ3M6IHBsYW5ldEJvbnVzZXMuYnVpbGRpbmdzW2tleV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBwbGFuZXRCb251c2VzLmxldmVsW2tleV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiBwbGFuZXRCb251c2VzLnRvdGFsW2tleV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBleHBlcmllbmNlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gRW1waXJlRGF0YU1vZHVsZS5saWZlZm9ybUV4cGVyaWVuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFBsYW5ldEJvbnVzKHRlY2g6IEJ1aWxkaW5nQ29zdEFuZFRpbWVSZWR1Y3Rpb25MaWZlZm9ybVRlY2hub2xvZ3ksIHBsYW5ldDogUGxhbmV0RGF0YSk6IEJvbnVzQnJlYWtkb3duIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0OiBCb251c0JyZWFrZG93biA9IHtcclxuICAgICAgICAgICAgICAgIGJhc2U6IHsgY29zdDogMCwgdGltZTogMCB9LFxyXG4gICAgICAgICAgICAgICAgbGV2ZWw6IHsgY29zdDogMCwgdGltZTogMCB9LFxyXG4gICAgICAgICAgICAgICAgYnVpbGRpbmdzOiB7IGNvc3Q6IDAsIHRpbWU6IDAgfSxcclxuICAgICAgICAgICAgICAgIGJ1aWxkaW5nc0Jvb3N0OiAwLFxyXG4gICAgICAgICAgICAgICAgdG90YWw6IHsgY29zdDogMCwgdGltZTogMCB9LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHBsYW5ldC5hY3RpdmVMaWZlZm9ybSA9PSBMaWZlZm9ybVR5cGUubm9uZVxyXG4gICAgICAgICAgICAgICAgfHwgIXBsYW5ldC5hY3RpdmVMaWZlZm9ybVRlY2hub2xvZ2llcy5pbmNsdWRlcyh0ZWNoLnR5cGUpXHJcbiAgICAgICAgICAgICAgICB8fCAhdGVjaC5hcHBsaWVzVG8odGhpcy5idWlsZGluZylcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgY29uc3QgYnVpbGRpbmdzQm9vc3QgPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgICAgIGdldFBsYW5ldExpZmVmb3JtVGVjaG5vbG9neUJvb3N0KHBsYW5ldClbdGVjaC50eXBlXSxcclxuICAgICAgICAgICAgICAgIGdldExpZmVmb3JtQm9udXNMaW1pdCh7IHR5cGU6IExpZmVmb3JtQm9udXNUeXBlSWQuTGlmZWZvcm1SZXNlYXJjaEJvbnVzQm9vc3QgfSkgPz8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5idWlsZGluZ3NCb29zdCArPSBidWlsZGluZ3NCb29zdDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJvbnVzZXMgPSB0ZWNoLmdldEJ1aWxkaW5nQ29zdEFuZFRpbWVSZWR1Y3Rpb24odGhpcy5idWlsZGluZywgcGxhbmV0LmxpZmVmb3JtVGVjaG5vbG9naWVzW3RlY2gudHlwZV0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWFwcGluZzogUmVjb3JkPGtleW9mIEJvbnVzZXMsIGtleW9mIENvc3RBbmRUaW1lUmVkdWN0aW9uPiA9IHtcclxuICAgICAgICAgICAgICAgIGNvc3Q6ICdjb3N0JyxcclxuICAgICAgICAgICAgICAgIHRpbWU6ICd0aW1lJyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgKE9iamVjdC5lbnRyaWVzKG1hcHBpbmcpIGFzIFtrZXlvZiBCb251c2VzLCBrZXlvZiBDb3N0QW5kVGltZVJlZHVjdGlvbl1bXSkuZm9yRWFjaChwYWlyID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFtib251c1R5cGUsIHN0YXRzVHlwZV0gPSBwYWlyO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VCb251cyA9IC0xICogYm9udXNlc1tzdGF0c1R5cGVdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlmZWZvcm1MZXZlbEJvbnVzID0gYmFzZUJvbnVzICogZ2V0TGlmZWZvcm1MZXZlbFRlY2hub2xvZ3lCb251cyh0aGlzLmV4cGVyaWVuY2VbcGxhbmV0LmFjdGl2ZUxpZmVmb3JtIGFzIFZhbGlkTGlmZWZvcm1UeXBlXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaWZlZm9ybUJ1aWxkaW5nQm9udXMgPSBiYXNlQm9udXMgKiBidWlsZGluZ3NCb29zdDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbCA9IGJhc2VCb251cyArIGxpZmVmb3JtTGV2ZWxCb251cyArIGxpZmVmb3JtQnVpbGRpbmdCb251cztcclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHQuYmFzZVtib251c1R5cGVdICs9IGJhc2VCb251cztcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5sZXZlbFtib251c1R5cGVdICs9IGxpZmVmb3JtTGV2ZWxCb251cztcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5idWlsZGluZ3NbYm9udXNUeXBlXSArPSBsaWZlZm9ybUJ1aWxkaW5nQm9udXM7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQudG90YWxbYm9udXNUeXBlXSArPSB0b3RhbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuPC9zY3JpcHQ+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL0J1aWxkaW5nLUNvc3QtVGltZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCI7IGV4cG9ydCBkZWZhdWx0IG1vZDsgZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RocmVhZC1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9CdWlsZGluZy1Db3N0LVRpbWUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiIiwiaW1wb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSBmcm9tIFwiLi9CdWlsZGluZy1Db3N0LVRpbWUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTg5MjdhYzY2JlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL0J1aWxkaW5nLUNvc3QtVGltZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCJcbmV4cG9ydCAqIGZyb20gXCIuL0J1aWxkaW5nLUNvc3QtVGltZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBudWxsLFxuICBudWxsXG4gIFxuKVxuXG5leHBvcnQgZGVmYXVsdCBjb21wb25lbnQuZXhwb3J0cyJdLCJuYW1lcyI6WyJyZW5kZXIiLCJfdm0iLCJ0aGlzIiwiX2giLCIkY3JlYXRlRWxlbWVudCIsIl9jIiwiX3NlbGYiLCJkaXJlY3RpdmVzIiwibmFtZSIsInJhd05hbWUiLCJ2YWx1ZSIsImV4cHJlc3Npb24iLCJtb2RpZmllcnMiLCJzdGF0aWNTdHlsZSIsIm9uIiwiJGV2ZW50IiwiJCRzZWxlY3RlZFZhbCIsIkFycmF5IiwicHJvdG90eXBlIiwiZmlsdGVyIiwiY2FsbCIsInRhcmdldCIsIm9wdGlvbnMiLCJvIiwic2VsZWN0ZWQiLCJtYXAiLCJ2YWwiLCJfdmFsdWUiLCJfbiIsImJ1aWxkaW5nIiwibXVsdGlwbGUiLCJfbCIsImtleSIsImRvbVByb3BzIiwiX3MiLCIkaTE4biIsIiR0Iiwib2dhbWUiLCJidWlsZGluZ3MiLCJhdHRycyIsImJvbnVzVHlwZXMiLCJ0ZWNocyIsInBsYW5ldHMiLCJsaW1pdHMiLCJzY29wZWRTbG90cyIsIl91IiwiZm4iLCJzdGF0aWNDbGFzcyIsInByb3h5Iiwic3RhdGljUmVuZGVyRm5zIiwiY29tcG9uZW50Il0sInNvdXJjZVJvb3QiOiIifQ==