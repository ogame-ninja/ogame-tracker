"use strict";(globalThis["webpackChunkogame_tracker"]=globalThis["webpackChunkogame_tracker"]||[]).push([[8038],{7622:()=>{},4840:(e,t,s)=>{s(7622)},7238:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(2528);const n=a.Z},2528:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(655),n=s(4028);let o=class extends n.w3{size};(0,a.gn)([(0,n.fI)({required:!1,type:String,default:"32px"})],o.prototype,"size",void 0),o=(0,a.gn)([(0,n.wA)({})],o);const r=o},8958:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(1120),n=s(7238),o=(s(4840),s(1001)),r=(0,o.Z)(n.Z,a.s,a.x,!1,null,"058bdb72",null);const l=r.exports},4310:(e,t,s)=>{s.d(t,{Z:()=>b});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("grid-table",{staticClass:"ranged-stats-table",attrs:{columns:e.columns,items:e.rows,"footer-items":e.footerRows,"cell-class-provider":function(t){return e.getCellClass(t)}},scopedSlots:e._u([e._l(e.columns,(function(t,a){return{key:"cell-"+t.key,fn:function(n){var o=n.value,r=n.item;return[s("span",{key:t.key,staticClass:"ranged-stats-table-cell"},["label"==t.key?[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:o}):s("span",{key:a,domProps:{textContent:e._s(o)}})]:"subLabel"==t.key?e._l(r.items,(function(a,n){return s("span",{key:n,class:a.labelClass},[null!=t.slotName&&null!=e.$scopedSlots[t.slotName]?e._t(t.slotName,null,{value:a.label}):s("span",{domProps:{textContent:e._s(a.label)}})],2)})):e._l(r.items||[r],(function(a,n){return s("span",{key:n,class:[e.getCellClass(a[t.key]),a.class]},[null!=t.formatter?s("span",{domProps:{textContent:e._s(t.formatter(a[t.key]))}}):s("span",{domProps:{textContent:e._s(a[t.key])}})])}))],2)]}}})),e._l(e.$scopedSlots,(function(t,s){return{key:s,fn:function(t){return[e._t(s,null,null,t)]}}}))],null,!0)})},n=[],o=s(655),r=s(4028),l=s(9858),i=s(6538),u=s(4749),d=s.n(u),m=s(917);let c=class extends r.w3{showPercentage;showAverage;items;footerItems;numberFormatOptions;averageNumberFormatOptions;dataItems;get hasGroupedItems(){return this.items.some((e=>"items"in e))}get dateRanges(){return m.V.settings.dateRanges}get dataItemsByRange(){const e=this.dataItems,t=this.dateRanges.map((()=>[]));return e.forEach((e=>{this.dateRanges.forEach(((s,a)=>{(0,l.m)(e.date,s)&&t[a].push(e)}))})),t}get firstDay(){return this.dataItemsByRange.reduce(((e,t)=>Math.min(e,Math.min(...t.map((e=>e.date))))),Date.now())}get columns(){const e=[{key:"label",label:"",slotName:"label"}];return this.hasGroupedItems&&e.push({key:"subLabel",label:"",slotName:"subLabel"}),e.push(...this.dateRanges.map(((e,t)=>({key:t,label:e.label??this.$i18n.$t.extension.settings.dateRanges.since(this.$i18n.$d(this.firstDay,"date")),formatter:e=>this.$i18n.$n(e,this.numberFormatOptions)})))),this.showAverage&&e.push({key:"average",label:this.$i18n.$t.extension.common.averagePerDay,formatter:e=>this.$i18n.$n(e,this.averageNumberFormatOptions??this.numberFormatOptions)}),this.showPercentage&&e.push({key:"percentage",label:"%",formatter:e=>""!=e?this.$i18n.$n(e,{minimumFractionDigits:3,maximumFractionDigits:3}):e}),e}get rows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,i.A)("failed to find range 'all'"),s=e[t].map((e=>d()(e.date).getTime())),a=new Set(s).size,n=Math.max(1,this.items.map((s=>"getValue"in s?s.getValue(e[t]):s.items.reduce(((s,a)=>s+a.getValue(e[t])),0))).reduce(((e,t)=>e+t),0));return this.items.map((s=>this.mapItemToRow(s,e,t,a,n)))}mapItemToRow(e,t,s,a,n){if("getValue"in e){const o={label:e.label,class:e.class,labelClass:e.labelClass,...this.dateRanges.map(((s,a)=>e.getValue(t[a])))},r=o[s];return this.showAverage&&(o.average=r/Math.max(1,a)),this.showPercentage&&(o.percentage=100*r/n),o}return{label:e.label,items:e.items.map((e=>this.mapItemToRow(e,t,s,a,n)))}}get footerRows(){const e=this.dataItemsByRange,t=this.dateRanges.findIndex((e=>"all"==e.type))??(0,i.A)("failed to find range 'all'"),s=e[t].map((e=>d()(e.date).getTime())),a=new Set(s).size;return this.footerItems.map((s=>{const n={label:s.label,...this.dateRanges.map(((t,a)=>"getValue"in s?s.getValue(e[a]):s.items.reduce(((t,s)=>t+s.getValue(e[a])),0))),percentage:""};if(this.showAverage){const e=n[t];n.average=e/Math.max(1,a)}return n}))}getCellClass(e){return 0==e?"fade-value":""}};(0,o.gn)([(0,r.fI)({required:!1,type:Boolean})],c.prototype,"showPercentage",void 0),(0,o.gn)([(0,r.fI)({required:!1,type:Boolean})],c.prototype,"showAverage",void 0),(0,o.gn)([(0,r.fI)({required:!0,type:Array})],c.prototype,"items",void 0),(0,o.gn)([(0,r.fI)({required:!1,type:Array,default:()=>[]})],c.prototype,"footerItems",void 0),(0,o.gn)([(0,r.fI)({required:!1,type:Object,default:void 0})],c.prototype,"numberFormatOptions",void 0),(0,o.gn)([(0,r.fI)({required:!1,type:Object,default:void 0})],c.prototype,"averageNumberFormatOptions",void 0),(0,o.gn)([(0,r.fI)({required:!0,type:Array})],c.prototype,"dataItems",void 0),c=(0,o.gn)([(0,r.wA)({})],c);const p=c,g=p;var f=s(1001),h=(0,f.Z)(g,a,n,!1,null,"1526beca",null);const b=h.exports},1233:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table-container"},[s("ranged-stats-table",{attrs:{dataItems:e.expos,items:e.items,footerItems:e.footerItems,"show-percentage":"","show-average":"",averageNumberFormatOptions:e.avgFormat},scopedSlots:e._u([{key:"cell-label",fn:function(t){var a=t.value;return[s("span",{staticClass:"mr-2",domProps:{textContent:e._s(a)}}),s("span",{staticClass:"mdi",class:{unknown:"mdi-help",none:"mdi-signal-cellular-outline",low:"mdi-signal-cellular-1",medium:"mdi-signal-cellular-2",high:"mdi-signal-cellular-3"}[e.depletionLevelsByLabel[a]],style:{color:e.colors[e.depletionLevelsByLabel[a]]}})]}}])}),s("floating-menu",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(){return[s("button",{on:{click:function(t){e.showSettings=!e.showSettings}}},[s("span",{staticClass:"mdi mdi-cog"})])]},proxy:!0}]),model:{value:e.showSettings,callback:function(t){e.showSettings=t},expression:"showSettings"}},[s("date-range-settings")],1)],1)},n=[],o=s(655),r=s(4028),l=s(4310),i=s(7090),u=s(917),d=s(4329),m=s(8958),c=s(1745),p=s(9751),g=s(6538);let f=class extends r.w3{showSettings=!1;avgFormat={minimumFractionDigits:1,maximumFractionDigits:1};get colors(){return u.V.settings.colors.expeditions.depletion}get expos(){return i.m.dailyResultsArray}depletionLevels=[...c.R,"unknown"];get items(){return this.depletionLevels.map((e=>({label:this.$i18n.$t.extension.expeditions.depletionLevels[e],getValue:t=>t.reduce(((t,s)=>t+s.depletion[e]),0)})))}get footerItems(){return[{label:this.$i18n.$t.extension.common.sum,getValue:e=>this.depletionLevels.reduce(((t,s)=>t+e.reduce(((e,t)=>e+t.depletion[s]),0)),0)}]}get depletionLevelsByLabel(){return(0,p.a)(this.depletionLevels.map((e=>this.$i18n.$t.extension.expeditions.depletionLevels[e])),(e=>this.depletionLevels.find((t=>e==this.$i18n.$t.extension.expeditions.depletionLevels[t]))??(0,g.A)(`failed to find depletion level for label '${e}'`)))}};f=(0,o.gn)([(0,r.wA)({components:{RangedStatsTable:l.Z,DateRangeSettings:d.Z,ExpeditionEventResourcesIcon:m.Z}})],f);const h=f,b=h;var v=s(1001),y=(0,v.Z)(b,a,n,!1,null,"4d087f94",null);const w=y.exports},1120:(e,t,s)=>{s.d(t,{s:()=>a,x:()=>n});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"tri-resource"},[s("o-resource",{attrs:{resource:"metal",size:e.size}}),s("o-resource",{attrs:{resource:"crystal",size:e.size}}),s("o-resource",{attrs:{resource:"deuterium",size:e.size}})],1)},n=[]},8734:(e,t)=>{function s(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=s,e.exports=t.default},4749:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var a=o(s(1171)),n=o(s(8734));function o(e){return e&&e.__esModule?e:{default:e}}function r(e){(0,n.default)(1,arguments);var t=(0,a.default)(e);return t.setHours(0,0,0,0),t}e.exports=t.default},1171:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var a=n(s(8734));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){(0,a.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}e.exports=t.default}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxPQUU1QyxTQUFTQSxFQUF1QkUsR0FBTyxPQUFPQSxHQUFPQSxFQUFJQyxXQUFhRCxFQUFNLENBQUVMLFFBQVNLLEdBZ0N2RixTQUFTTSxFQUFPQyxJQUNkLEVBQUlWLEVBQU9GLFNBQVMsRUFBR1EsV0FDdkIsSUFBSUssRUFBU2pCLE9BQU9rQixVQUFVQyxTQUFTQyxLQUFLSixHQUU1QyxPQUFJQSxhQUFvQkssTUFBNEIsa0JBQWJMLEdBQW9DLGtCQUFYQyxFQUV2RCxJQUFJSSxLQUFLTCxFQUFTTSxXQUNJLGtCQUFiTixHQUFvQyxvQkFBWEMsRUFDbEMsSUFBSUksS0FBS0wsSUFFUyxrQkFBYkEsR0FBb0Msb0JBQVhDLEdBQW9ELHFCQUFaTSxVQUUzRUEsUUFBUUMsS0FBSyxvSkFFYkQsUUFBUUMsTUFBSyxJQUFJQyxPQUFRQyxRQUdwQixJQUFJTCxLQUFLTSxNQUlwQnhCLEVBQU9ELFFBQVVBLEVBQVFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL19zaGFyZWQvY29tcG9uZW50cy9FeHBlZGl0aW9uRXZlbnRSZXNvdXJjZXNJY29uLnZ1ZT8wNjFiIiwid2VicGFjazovLy9zcmMvdmlld3MvX3NoYXJlZC9jb21wb25lbnRzL0V4cGVkaXRpb25FdmVudFJlc291cmNlc0ljb24udnVlPzI1MTgiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL19zaGFyZWQvY29tcG9uZW50cy9FeHBlZGl0aW9uRXZlbnRSZXNvdXJjZXNJY29uLnZ1ZT9iZGIyIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlPzgxZGMiLCJ3ZWJwYWNrOi8vL3NyYy92aWV3cy9zdGF0cy9jb21wb25lbnRzL3N0YXRzL1JhbmdlZFN0YXRzVGFibGUudnVlPzU3OTciLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWU/Zjc1YSIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvY29tcG9uZW50cy9zdGF0cy9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT83MGFjIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9zdGF0cy92aWV3cy9leHBlZGl0aW9ucy9kZXBsZXRpb24vVGFibGUudnVlP2ZkNjIiLCJ3ZWJwYWNrOi8vL3NyYy92aWV3cy9zdGF0cy92aWV3cy9leHBlZGl0aW9ucy9kZXBsZXRpb24vVGFibGUudnVlP2NiMTkiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXdzL3N0YXRzL3ZpZXdzL2V4cGVkaXRpb25zL2RlcGxldGlvbi9UYWJsZS52dWU/N2Q4YiIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld3Mvc3RhdHMvdmlld3MvZXhwZWRpdGlvbnMvZGVwbGV0aW9uL1RhYmxlLnZ1ZT83MWFmIiwid2VicGFjazovLy8uL3NyYy92aWV3cy9fc2hhcmVkL2NvbXBvbmVudHMvRXhwZWRpdGlvbkV2ZW50UmVzb3VyY2VzSWNvbi52dWU/NTI1NiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanM/Mjk1YiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvc3RhcnRPZkRheS9pbmRleC5qcz85MWExIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy90b0RhdGUvaW5kZXguanM/YWQ2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9kIGZyb20gXCItIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90aHJlYWQtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy90cy1sb2FkZXIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtNDBbMF0ucnVsZXNbMF0udXNlWzJdIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jYWNoZS1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMF0ucnVsZXNbMF0udXNlWzBdIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vRXhwZWRpdGlvbkV2ZW50UmVzb3VyY2VzSWNvbi52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCI7IGV4cG9ydCBkZWZhdWx0IG1vZDsgZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RocmVhZC1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9FeHBlZGl0aW9uRXZlbnRSZXNvdXJjZXNJY29uLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsIjx0ZW1wbGF0ZT5cclxuICAgIDxzcGFuIGNsYXNzPVwidHJpLXJlc291cmNlXCI+XHJcbiAgICAgICAgPG8tcmVzb3VyY2UgcmVzb3VyY2U9XCJtZXRhbFwiIDpzaXplPVwic2l6ZVwiIC8+XHJcbiAgICAgICAgPG8tcmVzb3VyY2UgcmVzb3VyY2U9XCJjcnlzdGFsXCIgOnNpemU9XCJzaXplXCIgLz5cclxuICAgICAgICA8by1yZXNvdXJjZSByZXNvdXJjZT1cImRldXRlcml1bVwiIDpzaXplPVwic2l6ZVwiIC8+XHJcbiAgICA8L3NwYW4+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuXHJcbiAgICBAQ29tcG9uZW50KHt9KVxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXhwZWRpdGlvbkV2ZW50UmVzb3VyY2VzSWNvbiBleHRlbmRzIFZ1ZSB7XHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IFN0cmluZywgZGVmYXVsdDogJzMycHgnIH0pXHJcbiAgICAgICAgcHJpdmF0ZSBzaXplITogc3RyaW5nO1xyXG4gICAgfVxyXG48L3NjcmlwdD5cclxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxyXG4gICAgLnRyaS1yZXNvdXJjZSB7XHJcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcblxyXG4gICAgICAgID4gLm8tcmVzb3VyY2U6bm90KDpsYXN0LW9mLXR5cGUpIHtcclxuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICA+IC5vLXJlc291cmNlW3Jlc291cmNlPVwibWV0YWxcIl0ge1xyXG4gICAgICAgICAgICBjbGlwLXBhdGg6IHBvbHlnb24oMCAwLCAxMDAlIDAsIDEwMCUgMjUlLCA1MCUgNjAlLCAwIDI1JSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICA+IC5vLXJlc291cmNlW3Jlc291cmNlPVwiY3J5c3RhbFwiXSB7XHJcbiAgICAgICAgICAgIGNsaXAtcGF0aDogcG9seWdvbigwIDI1JSwgNTAlIDYwJSwgNTAlIDEwMCUsIDAgMTAwJSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICA+IC5vLXJlc291cmNlW3Jlc291cmNlPVwiZGV1dGVyaXVtXCJdIHtcclxuICAgICAgICAgICAgY2xpcC1wYXRoOiBwb2x5Z29uKDEwMCUgMjUlLCAxMDAlIDEwMCUsIDUwJSAxMDAlLCA1MCUgNjAlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSBmcm9tIFwiLi9FeHBlZGl0aW9uRXZlbnRSZXNvdXJjZXNJY29uLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD0wNThiZGI3MiZzY29wZWQ9dHJ1ZSZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9FeHBlZGl0aW9uRXZlbnRSZXNvdXJjZXNJY29uLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vRXhwZWRpdGlvbkV2ZW50UmVzb3VyY2VzSWNvbi52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCJcbmltcG9ydCBzdHlsZTAgZnJvbSBcIi4vRXhwZWRpdGlvbkV2ZW50UmVzb3VyY2VzSWNvbi52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0wNThiZGI3MiZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBcIjA1OGJkYjcyXCIsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2dyaWQtdGFibGUnLHtzdGF0aWNDbGFzczpcInJhbmdlZC1zdGF0cy10YWJsZVwiLGF0dHJzOntcImNvbHVtbnNcIjpfdm0uY29sdW1ucyxcIml0ZW1zXCI6X3ZtLnJvd3MsXCJmb290ZXItaXRlbXNcIjpfdm0uZm9vdGVyUm93cyxcImNlbGwtY2xhc3MtcHJvdmlkZXJcIjpmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIF92bS5nZXRDZWxsQ2xhc3ModmFsdWUpOyB9fSxzY29wZWRTbG90czpfdm0uX3UoW192bS5fbCgoX3ZtLmNvbHVtbnMpLGZ1bmN0aW9uKGNvbHVtbixpKXtyZXR1cm4ge2tleTooXCJjZWxsLVwiICsgKGNvbHVtbi5rZXkpKSxmbjpmdW5jdGlvbihyZWYpe1xudmFyIHZhbHVlID0gcmVmLnZhbHVlO1xudmFyIGl0ZW0gPSByZWYuaXRlbTtcbnJldHVybiBbX2MoJ3NwYW4nLHtrZXk6Y29sdW1uLmtleSxzdGF0aWNDbGFzczpcInJhbmdlZC1zdGF0cy10YWJsZS1jZWxsXCJ9LFsoY29sdW1uLmtleSA9PSAnbGFiZWwnKT9bKGNvbHVtbi5zbG90TmFtZSAhPSBudWxsICYmIF92bS4kc2NvcGVkU2xvdHNbY29sdW1uLnNsb3ROYW1lXSAhPSBudWxsKT9fdm0uX3QoY29sdW1uLnNsb3ROYW1lLG51bGwse1widmFsdWVcIjp2YWx1ZX0pOl9jKCdzcGFuJyx7a2V5OmksZG9tUHJvcHM6e1widGV4dENvbnRlbnRcIjpfdm0uX3ModmFsdWUpfX0pXTooY29sdW1uLmtleSA9PSAnc3ViTGFiZWwnKT9fdm0uX2woKGl0ZW0uaXRlbXMpLGZ1bmN0aW9uKGl0ZW0saSl7cmV0dXJuIF9jKCdzcGFuJyx7a2V5OmksY2xhc3M6aXRlbS5sYWJlbENsYXNzfSxbKGNvbHVtbi5zbG90TmFtZSAhPSBudWxsICYmIF92bS4kc2NvcGVkU2xvdHNbY29sdW1uLnNsb3ROYW1lXSAhPSBudWxsKT9fdm0uX3QoY29sdW1uLnNsb3ROYW1lLG51bGwse1widmFsdWVcIjppdGVtLmxhYmVsfSk6X2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhpdGVtLmxhYmVsKX19KV0sMil9KTpfdm0uX2woKGl0ZW0uaXRlbXMgfHwgW2l0ZW1dKSxmdW5jdGlvbihpdGVtLGkpe3JldHVybiBfYygnc3Bhbicse2tleTppLGNsYXNzOltfdm0uZ2V0Q2VsbENsYXNzKGl0ZW1bY29sdW1uLmtleV0pLCBpdGVtLmNsYXNzXX0sWyhjb2x1bW4uZm9ybWF0dGVyICE9IG51bGwpP19jKCdzcGFuJyx7ZG9tUHJvcHM6e1widGV4dENvbnRlbnRcIjpfdm0uX3MoY29sdW1uLmZvcm1hdHRlcihpdGVtW2NvbHVtbi5rZXldKSl9fSk6X2MoJ3NwYW4nLHtkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyhpdGVtW2NvbHVtbi5rZXldKX19KV0pfSldLDIpXX19fSksX3ZtLl9sKChfdm0uJHNjb3BlZFNsb3RzKSxmdW5jdGlvbihpbmRleCxuYW1lKXtyZXR1cm4ge2tleTpuYW1lLGZuOmZ1bmN0aW9uKGRhdGEpe3JldHVybiBbX3ZtLl90KG5hbWUsbnVsbCxudWxsLGRhdGEpXX19fSldLG51bGwsdHJ1ZSl9KX1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiPHRlbXBsYXRlPlxyXG4gICAgPGdyaWQtdGFibGUgOmNvbHVtbnM9XCJjb2x1bW5zXCIgOml0ZW1zPVwicm93c1wiIDpmb290ZXItaXRlbXM9XCJmb290ZXJSb3dzXCIgOmNlbGwtY2xhc3MtcHJvdmlkZXI9XCIodmFsdWUpID0+IGdldENlbGxDbGFzcyh2YWx1ZSlcIiBjbGFzcz1cInJhbmdlZC1zdGF0cy10YWJsZVwiPlxyXG4gICAgICAgIDwhLS0gb2ggZ29kIHRoaXMgaXMgdWdseSAtLT5cclxuICAgICAgICA8dGVtcGxhdGUgdi1mb3I9XCIoY29sdW1uLCBpKSBpbiBjb2x1bW5zXCIgdi1zbG90OltgY2VsbC0ke2NvbHVtbi5rZXl9YF09XCJ7IHZhbHVlLCBpdGVtIH1cIj5cclxuICAgICAgICAgICAgPHNwYW4gOmtleT1cImNvbHVtbi5rZXlcIiBjbGFzcz1cInJhbmdlZC1zdGF0cy10YWJsZS1jZWxsXCI+XHJcbiAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cImNvbHVtbi5rZXkgPT0gJ2xhYmVsJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzbG90IHYtaWY9XCJjb2x1bW4uc2xvdE5hbWUgIT0gbnVsbCAmJiAkc2NvcGVkU2xvdHNbY29sdW1uLnNsb3ROYW1lXSAhPSBudWxsXCIgOm5hbWU9XCJjb2x1bW4uc2xvdE5hbWVcIiA6dmFsdWU9XCJ2YWx1ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1lbHNlIDprZXk9XCJpXCIgdi10ZXh0PVwidmFsdWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWVsc2UtaWY9XCJjb2x1bW4ua2V5ID09ICdzdWJMYWJlbCdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWZvcj1cIihpdGVtLCBpKSBpbiBpdGVtLml0ZW1zXCIgOmtleT1cImlcIiA6Y2xhc3M9XCJpdGVtLmxhYmVsQ2xhc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNsb3Qgdi1pZj1cImNvbHVtbi5zbG90TmFtZSAhPSBudWxsICYmICRzY29wZWRTbG90c1tjb2x1bW4uc2xvdE5hbWVdICE9IG51bGxcIiA6bmFtZT1cImNvbHVtbi5zbG90TmFtZVwiIDp2YWx1ZT1cIml0ZW0ubGFiZWxcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiB2LWVsc2Ugdi10ZXh0PVwiaXRlbS5sYWJlbFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWVsc2U+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1mb3I9XCIoaXRlbSwgaSkgaW4gaXRlbS5pdGVtcyB8fCBbaXRlbV1cIiA6a2V5PVwiaVwiIDpjbGFzcz1cIltnZXRDZWxsQ2xhc3MoaXRlbVtjb2x1bW4ua2V5XSksIGl0ZW0uY2xhc3NdXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHYtaWY9XCJjb2x1bW4uZm9ybWF0dGVyICE9IG51bGxcIiB2LXRleHQ9XCJjb2x1bW4uZm9ybWF0dGVyKGl0ZW1bY29sdW1uLmtleV0pXCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gdi1lbHNlIHYtdGV4dD1cIml0ZW1bY29sdW1uLmtleV1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICA8L3RlbXBsYXRlPlxyXG5cclxuICAgICAgICA8dGVtcGxhdGUgdi1mb3I9XCIoaW5kZXgsIG5hbWUpIGluICRzY29wZWRTbG90c1wiIHYtc2xvdDpbbmFtZV09XCJkYXRhXCI+XHJcbiAgICAgICAgICAgIDxzbG90IDpuYW1lPVwibmFtZVwiIHYtYmluZD1cImRhdGFcIiAvPlxyXG4gICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICA8L2dyaWQtdGFibGU+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgUHJvcFR5cGUgfSBmcm9tICd2dWUnO1xyXG4gICAgaW1wb3J0IHsgUHJvcCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InO1xyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuICAgIGltcG9ydCB7IEdyaWRUYWJsZUNvbHVtbiB9IGZyb20gJ0BzdGF0cy9jb21wb25lbnRzL2NvbW1vbi9HcmlkVGFibGUudnVlJztcclxuICAgIGltcG9ydCB7IGlzSW5SYW5nZSB9IGZyb20gJ0BzdGF0cy91dGlscy9kYXRlUmFuZ2VzJztcclxuICAgIGltcG9ydCB7IF90aHJvdyB9IGZyb20gJ0Avc2hhcmVkL3V0aWxzL190aHJvdyc7XHJcbiAgICBpbXBvcnQgc3RhcnRPZkRheSBmcm9tICdkYXRlLWZucy9zdGFydE9mRGF5L2luZGV4JztcclxuICAgIGltcG9ydCB7IFNldHRpbmdzRGF0YU1vZHVsZSB9IGZyb20gJy4uLy4uL2RhdGEvU2V0dGluZ3NEYXRhTW9kdWxlJztcclxuXHJcbiAgICBpbnRlcmZhY2UgUmFuZ2VTdGF0c1RhYmxlSXRlbVdpdGhEYXRlIHtcclxuICAgICAgICBkYXRlOiBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJmYWNlIFNpbmdsZVJhbmdlZFN0YXRzVGFibGVJdGVtPFQgZXh0ZW5kcyBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGU+IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIGdldFZhbHVlOiAoaXRlbXM6IFRbXSkgPT4gbnVtYmVyO1xyXG4gICAgICAgIGNsYXNzPzogc3RyaW5nO1xyXG4gICAgICAgIGxhYmVsQ2xhc3M/OiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJmYWNlIEdyb3VwZWRSYW5nZWRTdGF0c1RhYmxlSXRlbTxUIGV4dGVuZHMgUmFuZ2VTdGF0c1RhYmxlSXRlbVdpdGhEYXRlPiB7XHJcbiAgICAgICAgbGFiZWw6IHN0cmluZztcclxuICAgICAgICBpdGVtczogU2luZ2xlUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgdHlwZSBSYW5nZWRTdGF0c1RhYmxlSXRlbTxUIGV4dGVuZHMgUmFuZ2VTdGF0c1RhYmxlSXRlbVdpdGhEYXRlPiA9IFNpbmdsZVJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+IHwgR3JvdXBlZFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+O1xyXG5cclxuICAgIGludGVyZmFjZSBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIHBlcmNlbnRhZ2U/OiBudW1iZXIgfCAnJztcclxuICAgICAgICBhdmVyYWdlPzogbnVtYmVyO1xyXG5cclxuICAgICAgICBbaW5kZXg6IG51bWJlcl06IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmZhY2UgR3JvdXBlZFJhbmdlZFN0YXRzVGFibGVSb3cge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgaXRlbXM6IFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3dbXTtcclxuICAgIH1cclxuXHJcbiAgICB0eXBlIFJhbmdlZFN0YXRzVGFibGVSb3cgPSBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93IHwgR3JvdXBlZFJhbmdlZFN0YXRzVGFibGVSb3c7XHJcblxyXG4gICAgaW50ZXJmYWNlIFJhbmdlU3RhdHNUYWJsZUNvbHVtbiBleHRlbmRzIEdyaWRUYWJsZUNvbHVtbjxrZXlvZiBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93IHwgJ3N1YkxhYmVsJyB8IG51bWJlcj4ge1xyXG4gICAgICAgIHNsb3ROYW1lPzogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIEBDb21wb25lbnQoe30pXHJcbiAgICBleHBvcnQgZGVmYXVsdCBjbGFzcyBSYW5nZWRTdGF0c1RhYmxlPFQgZXh0ZW5kcyBSYW5nZVN0YXRzVGFibGVJdGVtV2l0aERhdGU+IGV4dGVuZHMgVnVlIHtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IEJvb2xlYW4gfSlcclxuICAgICAgICBwcml2YXRlIHNob3dQZXJjZW50YWdlITogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IEJvb2xlYW4gfSlcclxuICAgICAgICBwcml2YXRlIHNob3dBdmVyYWdlITogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogQXJyYXkgYXMgUHJvcFR5cGU8UmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXT4gfSlcclxuICAgICAgICBwcml2YXRlIGl0ZW1zITogUmFuZ2VkU3RhdHNUYWJsZUl0ZW08VD5bXTtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogZmFsc2UsIHR5cGU6IEFycmF5IGFzIFByb3BUeXBlPFJhbmdlZFN0YXRzVGFibGVJdGVtPFQ+W10+LCBkZWZhdWx0OiAoKSA9PiBbXSB9KVxyXG4gICAgICAgIHByaXZhdGUgZm9vdGVySXRlbXMhOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPltdO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogT2JqZWN0IGFzIFByb3BUeXBlPEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucz4sIGRlZmF1bHQ6IHVuZGVmaW5lZCB9KVxyXG4gICAgICAgIHByaXZhdGUgbnVtYmVyRm9ybWF0T3B0aW9uczogSW50bC5OdW1iZXJGb3JtYXRPcHRpb25zIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBAUHJvcCh7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZTogT2JqZWN0IGFzIFByb3BUeXBlPEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucz4sIGRlZmF1bHQ6IHVuZGVmaW5lZCB9KVxyXG4gICAgICAgIHByaXZhdGUgYXZlcmFnZU51bWJlckZvcm1hdE9wdGlvbnM6IEludGwuTnVtYmVyRm9ybWF0T3B0aW9ucyB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgQFByb3AoeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogQXJyYXkgYXMgUHJvcFR5cGU8VFtdPiB9KVxyXG4gICAgICAgIHByaXZhdGUgZGF0YUl0ZW1zITogVFtdO1xyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBoYXNHcm91cGVkSXRlbXMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zLnNvbWUoaXRlbSA9PiAnaXRlbXMnIGluIGl0ZW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZGF0ZVJhbmdlcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncy5kYXRlUmFuZ2VzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZGF0YUl0ZW1zQnlSYW5nZSgpOiBUW11bXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJdGVtcyA9IHRoaXMuZGF0YUl0ZW1zO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbXNCeVJhbmdlOiBUW11bXSA9IHRoaXMuZGF0ZVJhbmdlcy5tYXAoKCkgPT4gW10pO1xyXG5cclxuICAgICAgICAgICAgZGF0YUl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVSYW5nZXMuZm9yRWFjaCgocmFuZ2UsIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJblJhbmdlKGl0ZW0uZGF0ZSwgcmFuZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFJdGVtc0J5UmFuZ2VbaV0ucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YUl0ZW1zQnlSYW5nZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGZpcnN0RGF5KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhSXRlbXNCeVJhbmdlLnJlZHVjZSgoYWNjLCBjdXIpID0+IE1hdGgubWluKFxyXG4gICAgICAgICAgICAgICAgYWNjLFxyXG4gICAgICAgICAgICAgICAgTWF0aC5taW4oLi4uY3VyLm1hcCh0ID0+IHQuZGF0ZSkpLFxyXG4gICAgICAgICAgICApLCBEYXRlLm5vdygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGNvbHVtbnMoKTogUmFuZ2VTdGF0c1RhYmxlQ29sdW1uW10ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2x1bW5zOiBSYW5nZVN0YXRzVGFibGVDb2x1bW5bXSA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdsYWJlbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsb3ROYW1lOiAnbGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNHcm91cGVkSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnc3ViTGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBzbG90TmFtZTogJ3N1YkxhYmVsJyxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb2x1bW5zLnB1c2goLi4udGhpcy5kYXRlUmFuZ2VzLm1hcCgocmFuZ2UsIGkpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBrZXk6IGksXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogcmFuZ2UubGFiZWwgPz8gdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uc2V0dGluZ3MuZGF0ZVJhbmdlcy5zaW5jZSh0aGlzLiRpMThuLiRkKHRoaXMuZmlyc3REYXksICdkYXRlJykpLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiAodmFsdWU6IG51bWJlcikgPT4gdGhpcy4kaTE4bi4kbih2YWx1ZSwgdGhpcy5udW1iZXJGb3JtYXRPcHRpb25zKSxcclxuICAgICAgICAgICAgfSkpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dBdmVyYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2F2ZXJhZ2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5jb21tb24uYXZlcmFnZVBlckRheSxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICh2YWx1ZTogbnVtYmVyKSA9PiB0aGlzLiRpMThuLiRuKHZhbHVlLCB0aGlzLmF2ZXJhZ2VOdW1iZXJGb3JtYXRPcHRpb25zID8/IHRoaXMubnVtYmVyRm9ybWF0T3B0aW9ucylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93UGVyY2VudGFnZSkge1xyXG4gICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwZXJjZW50YWdlJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJyUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogKHZhbHVlOiBudW1iZXIgfCAnJykgPT4gdmFsdWUgIT0gJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLiRpMThuLiRuKHZhbHVlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdmFsdWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29sdW1ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IHJvd3MoKTogKFJhbmdlZFN0YXRzVGFibGVSb3cgJiB7IGNsYXNzPzogc3RyaW5nIH0pW10ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbXNCeVJhbmdlID0gdGhpcy5kYXRhSXRlbXNCeVJhbmdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWxsUmFuZ2VJbmRleCA9IHRoaXMuZGF0ZVJhbmdlcy5maW5kSW5kZXgocmFuZ2UgPT4gcmFuZ2UudHlwZSA9PSAnYWxsJylcclxuICAgICAgICAgICAgICAgID8/IF90aHJvdyhgZmFpbGVkIHRvIGZpbmQgcmFuZ2UgJ2FsbCdgKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1EYXlzID0gZGF0YUl0ZW1zQnlSYW5nZVthbGxSYW5nZUluZGV4XS5tYXAoZXhwbyA9PiBzdGFydE9mRGF5KGV4cG8uZGF0ZSkuZ2V0VGltZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgZGF5c1dpdGhEYXRhSXRlbXMgPSBuZXcgU2V0KGRhdGFJdGVtRGF5cykuc2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBNYXRoLm1heCgxLCB0aGlzLml0ZW1zXHJcbiAgICAgICAgICAgICAgICAubWFwKGl0ZW0gPT4gJ2dldFZhbHVlJyBpbiBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgPyBpdGVtLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbYWxsUmFuZ2VJbmRleF0pXHJcbiAgICAgICAgICAgICAgICAgICAgOiBpdGVtLml0ZW1zLnJlZHVjZSgoYWNjLCBpKSA9PiBhY2MgKyBpLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbYWxsUmFuZ2VJbmRleF0pLCAwKVxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCBjdXIpID0+IGFjYyArIGN1ciwgMClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zLm1hcChpdGVtID0+IHRoaXMubWFwSXRlbVRvUm93KGl0ZW0sIGRhdGFJdGVtc0J5UmFuZ2UsIGFsbFJhbmdlSW5kZXgsIGRheXNXaXRoRGF0YUl0ZW1zLCB0b3RhbFZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG1hcEl0ZW1Ub1JvdyhpdGVtOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxUPiwgZGF0YUl0ZW1zQnlSYW5nZTogVFtdW10sIGFsbFJhbmdlSW5kZXg6IG51bWJlciwgZGF5c1dpdGhEYXRhSXRlbXM6IG51bWJlciwgdG90YWxWYWx1ZTogbnVtYmVyKTogKFJhbmdlZFN0YXRzVGFibGVSb3cgJiB7IGNsYXNzPzogc3RyaW5nOyBsYWJlbENsYXNzPzogc3RyaW5nIH0pIHtcclxuICAgICAgICAgICAgaWYgKCdnZXRWYWx1ZScgaW4gaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93OiBTaW1wbGVSYW5nZWRTdGF0c1RhYmxlUm93ICYgeyBjbGFzcz86IHN0cmluZzsgbGFiZWxDbGFzcz86IHN0cmluZyB9ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBpdGVtLmNsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsQ2xhc3M6IGl0ZW0ubGFiZWxDbGFzcyxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5kYXRlUmFuZ2VzLm1hcCgoXywgcmFuZ2VJbmRleCkgPT4gaXRlbS5nZXRWYWx1ZShkYXRhSXRlbXNCeVJhbmdlW3JhbmdlSW5kZXhdKSksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhbmdlVmFsdWUgPSByb3dbYWxsUmFuZ2VJbmRleF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0F2ZXJhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3cuYXZlcmFnZSA9IGFsbFJhbmdlVmFsdWUgLyBNYXRoLm1heCgxLCBkYXlzV2l0aERhdGFJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1BlcmNlbnRhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3cucGVyY2VudGFnZSA9IDEwMCAqIGFsbFJhbmdlVmFsdWUgLyB0b3RhbFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6IGl0ZW0uaXRlbXMubWFwKHN1Yml0ZW0gPT4gdGhpcy5tYXBJdGVtVG9Sb3coc3ViaXRlbSwgZGF0YUl0ZW1zQnlSYW5nZSwgYWxsUmFuZ2VJbmRleCwgZGF5c1dpdGhEYXRhSXRlbXMsIHRvdGFsVmFsdWUpIGFzIFNpbXBsZVJhbmdlZFN0YXRzVGFibGVSb3cgJiB7IGNsYXNzPzogc3RyaW5nOyBsYWJlbENsYXNzPzogc3RyaW5nIH0pLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZm9vdGVyUm93cygpOiBSYW5nZWRTdGF0c1RhYmxlUm93W10ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSXRlbXNCeVJhbmdlID0gdGhpcy5kYXRhSXRlbXNCeVJhbmdlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYWxsUmFuZ2VJbmRleCA9IHRoaXMuZGF0ZVJhbmdlcy5maW5kSW5kZXgocmFuZ2UgPT4gcmFuZ2UudHlwZSA9PSAnYWxsJylcclxuICAgICAgICAgICAgICAgID8/IF90aHJvdyhgZmFpbGVkIHRvIGZpbmQgcmFuZ2UgJ2FsbCdgKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YUl0ZW1EYXlzID0gZGF0YUl0ZW1zQnlSYW5nZVthbGxSYW5nZUluZGV4XS5tYXAoZXhwbyA9PiBzdGFydE9mRGF5KGV4cG8uZGF0ZSkuZ2V0VGltZSgpKTtcclxuICAgICAgICAgICAgY29uc3QgZGF5c1dpdGhEYXRhSXRlbXMgPSBuZXcgU2V0KGRhdGFJdGVtRGF5cykuc2l6ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvb3Rlckl0ZW1zLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdzogUmFuZ2VkU3RhdHNUYWJsZVJvdyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmRhdGVSYW5nZXMubWFwKChfLCByYW5nZUluZGV4KSA9PiAnZ2V0VmFsdWUnIGluIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBpdGVtLmdldFZhbHVlKGRhdGFJdGVtc0J5UmFuZ2VbcmFuZ2VJbmRleF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogaXRlbS5pdGVtcy5yZWR1Y2UoKGFjYywgaSkgPT4gYWNjICsgaS5nZXRWYWx1ZShkYXRhSXRlbXNCeVJhbmdlW3JhbmdlSW5kZXhdKSwgMClcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2U6ICcnLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93QXZlcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJhbmdlVmFsdWUgPSByb3dbYWxsUmFuZ2VJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgcm93LmF2ZXJhZ2UgPSBhbGxSYW5nZVZhbHVlIC8gTWF0aC5tYXgoMSwgZGF5c1dpdGhEYXRhSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByb3c7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRDZWxsQ2xhc3ModmFsdWU6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2ZhZGUtdmFsdWUnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG48L3NjcmlwdD5cclxuPHN0eWxlIGxhbmc9XCJzY3NzXCIgc2NvcGVkPlxyXG4gICAgLmdyaWQtdGFibGUge1xyXG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG5cclxuICAgICAgICAmOjp2LWRlZXAgLmZhZGUtdmFsdWUge1xyXG4gICAgICAgICAgICBjb2xvcjogcmdiYSh3aGl0ZSwgMC4xKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLnJhbmdlZC1zdGF0cy10YWJsZS1jZWxsIHtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgfVxyXG48L3N0eWxlPiIsImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RocmVhZC1sb2FkZXIvZGlzdC9janMuanMhLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3RzLWxvYWRlci9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC00MFswXS5ydWxlc1swXS51c2VbMl0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2NhY2hlLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFswXS5ydWxlc1swXS51c2VbMF0hLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1JhbmdlZFN0YXRzVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiIiwiaW1wb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSBmcm9tIFwiLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD0xNTI2YmVjYSZzY29wZWQ9dHJ1ZSZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9SYW5nZWRTdGF0c1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9dHMmXCJcbmltcG9ydCBzdHlsZTAgZnJvbSBcIi4vUmFuZ2VkU3RhdHNUYWJsZS52dWU/dnVlJnR5cGU9c3R5bGUmaW5kZXg9MCZpZD0xNTI2YmVjYSZsYW5nPXNjc3Mmc2NvcGVkPXRydWUmXCJcblxuXG4vKiBub3JtYWxpemUgY29tcG9uZW50ICovXG5pbXBvcnQgbm9ybWFsaXplciBmcm9tIFwiIS4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3Z1ZS1sb2FkZXItdjE1L2xpYi9ydW50aW1lL2NvbXBvbmVudE5vcm1hbGl6ZXIuanNcIlxudmFyIGNvbXBvbmVudCA9IG5vcm1hbGl6ZXIoXG4gIHNjcmlwdCxcbiAgcmVuZGVyLFxuICBzdGF0aWNSZW5kZXJGbnMsXG4gIGZhbHNlLFxuICBudWxsLFxuICBcIjE1MjZiZWNhXCIsXG4gIG51bGxcbiAgXG4pXG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudC5leHBvcnRzIiwidmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHt2YXIgX3ZtPXRoaXM7dmFyIF9oPV92bS4kY3JlYXRlRWxlbWVudDt2YXIgX2M9X3ZtLl9zZWxmLl9jfHxfaDtyZXR1cm4gX2MoJ2Rpdicse3N0YXRpY0NsYXNzOlwidGFibGUtY29udGFpbmVyXCJ9LFtfYygncmFuZ2VkLXN0YXRzLXRhYmxlJyx7YXR0cnM6e1wiZGF0YUl0ZW1zXCI6X3ZtLmV4cG9zLFwiaXRlbXNcIjpfdm0uaXRlbXMsXCJmb290ZXJJdGVtc1wiOl92bS5mb290ZXJJdGVtcyxcInNob3ctcGVyY2VudGFnZVwiOlwiXCIsXCJzaG93LWF2ZXJhZ2VcIjpcIlwiLFwiYXZlcmFnZU51bWJlckZvcm1hdE9wdGlvbnNcIjpfdm0uYXZnRm9ybWF0fSxzY29wZWRTbG90czpfdm0uX3UoW3trZXk6XCJjZWxsLWxhYmVsXCIsZm46ZnVuY3Rpb24ocmVmKXtcbnZhciB2YWx1ZSA9IHJlZi52YWx1ZTtcbnJldHVybiBbX2MoJ3NwYW4nLHtzdGF0aWNDbGFzczpcIm1yLTJcIixkb21Qcm9wczp7XCJ0ZXh0Q29udGVudFwiOl92bS5fcyh2YWx1ZSl9fSksX2MoJ3NwYW4nLHtzdGF0aWNDbGFzczpcIm1kaVwiLGNsYXNzOntcbiAgICAgICAgICAgICAgICAgICAgdW5rbm93bjogJ21kaS1oZWxwJyxcbiAgICAgICAgICAgICAgICAgICAgbm9uZTogJ21kaS1zaWduYWwtY2VsbHVsYXItb3V0bGluZScsXG4gICAgICAgICAgICAgICAgICAgIGxvdzogJ21kaS1zaWduYWwtY2VsbHVsYXItMScsXG4gICAgICAgICAgICAgICAgICAgIG1lZGl1bTogJ21kaS1zaWduYWwtY2VsbHVsYXItMicsXG4gICAgICAgICAgICAgICAgICAgIGhpZ2g6ICdtZGktc2lnbmFsLWNlbGx1bGFyLTMnLFxuICAgICAgICAgICAgICAgIH1bX3ZtLmRlcGxldGlvbkxldmVsc0J5TGFiZWxbdmFsdWVdXSxzdHlsZTooeyBjb2xvcjogX3ZtLmNvbG9yc1tfdm0uZGVwbGV0aW9uTGV2ZWxzQnlMYWJlbFt2YWx1ZV1dIH0pfSldfX1dKX0pLF9jKCdmbG9hdGluZy1tZW51Jyx7YXR0cnM6e1wibGVmdFwiOlwiXCJ9LHNjb3BlZFNsb3RzOl92bS5fdShbe2tleTpcImFjdGl2YXRvclwiLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIFtfYygnYnV0dG9uJyx7b246e1wiY2xpY2tcIjpmdW5jdGlvbigkZXZlbnQpe192bS5zaG93U2V0dGluZ3MgPSAhX3ZtLnNob3dTZXR0aW5nc319fSxbX2MoJ3NwYW4nLHtzdGF0aWNDbGFzczpcIm1kaSBtZGktY29nXCJ9KV0pXX0scHJveHk6dHJ1ZX1dKSxtb2RlbDp7dmFsdWU6KF92bS5zaG93U2V0dGluZ3MpLGNhbGxiYWNrOmZ1bmN0aW9uICgkJHYpIHtfdm0uc2hvd1NldHRpbmdzPSQkdn0sZXhwcmVzc2lvbjpcInNob3dTZXR0aW5nc1wifX0sW19jKCdkYXRlLXJhbmdlLXNldHRpbmdzJyldLDEpXSwxKX1cbnZhciBzdGF0aWNSZW5kZXJGbnMgPSBbXVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiPHRlbXBsYXRlPlxyXG4gICAgPGRpdiBjbGFzcz1cInRhYmxlLWNvbnRhaW5lclwiPlxyXG4gICAgICAgIDxyYW5nZWQtc3RhdHMtdGFibGUgOmRhdGFJdGVtcz1cImV4cG9zXCIgOml0ZW1zPVwiaXRlbXNcIiA6Zm9vdGVySXRlbXM9XCJmb290ZXJJdGVtc1wiIHNob3ctcGVyY2VudGFnZSBzaG93LWF2ZXJhZ2UgOmF2ZXJhZ2VOdW1iZXJGb3JtYXRPcHRpb25zPVwiYXZnRm9ybWF0XCI+XHJcbiAgICAgICAgICAgIDx0ZW1wbGF0ZSAjY2VsbC1sYWJlbD1cInsgdmFsdWUgfVwiPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gdi10ZXh0PVwidmFsdWVcIiBjbGFzcz1cIm1yLTJcIiAvPlxyXG5cclxuICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJtZGlcIlxyXG4gICAgICAgICAgICAgICAgICAgIDpjbGFzcz1cIntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5rbm93bjogJ21kaS1oZWxwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9uZTogJ21kaS1zaWduYWwtY2VsbHVsYXItb3V0bGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvdzogJ21kaS1zaWduYWwtY2VsbHVsYXItMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGl1bTogJ21kaS1zaWduYWwtY2VsbHVsYXItMicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2g6ICdtZGktc2lnbmFsLWNlbGx1bGFyLTMnLFxyXG4gICAgICAgICAgICAgICAgICAgIH1bZGVwbGV0aW9uTGV2ZWxzQnlMYWJlbFt2YWx1ZV1dXCJcclxuICAgICAgICAgICAgICAgICAgICA6c3R5bGU9XCJ7IGNvbG9yOiBjb2xvcnNbZGVwbGV0aW9uTGV2ZWxzQnlMYWJlbFt2YWx1ZV1dIH1cIlxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICA8L3JhbmdlZC1zdGF0cy10YWJsZT5cclxuXHJcbiAgICAgICAgPGZsb2F0aW5nLW1lbnUgdi1tb2RlbD1cInNob3dTZXR0aW5nc1wiIGxlZnQ+XHJcbiAgICAgICAgICAgIDx0ZW1wbGF0ZSAjYWN0aXZhdG9yPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9XCJzaG93U2V0dGluZ3MgPSAhc2hvd1NldHRpbmdzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZGkgbWRpLWNvZ1wiIC8+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuXHJcbiAgICAgICAgICAgIDxkYXRlLXJhbmdlLXNldHRpbmdzIC8+XHJcbiAgICAgICAgPC9mbG9hdGluZy1tZW51PlxyXG4gICAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0IGxhbmc9XCJ0c1wiPlxyXG4gICAgaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJztcclxuICAgIGltcG9ydCBSYW5nZWRTdGF0c1RhYmxlLCB7IFJhbmdlZFN0YXRzVGFibGVJdGVtIH0gZnJvbSAnQHN0YXRzL2NvbXBvbmVudHMvc3RhdHMvUmFuZ2VkU3RhdHNUYWJsZS52dWUnO1xyXG4gICAgaW1wb3J0IHsgRGFpbHlFeHBlZGl0aW9uUmVzdWx0LCBFeHBlZGl0aW9uRGF0YU1vZHVsZSB9IGZyb20gJ0Avdmlld3Mvc3RhdHMvZGF0YS9FeHBlZGl0aW9uRGF0YU1vZHVsZSc7XHJcbiAgICBpbXBvcnQgeyBTZXR0aW5nc0RhdGFNb2R1bGUgfSBmcm9tICdAL3ZpZXdzL3N0YXRzL2RhdGEvU2V0dGluZ3NEYXRhTW9kdWxlJztcclxuICAgIGltcG9ydCBEYXRlUmFuZ2VTZXR0aW5ncyBmcm9tICdAc3RhdHMvY29tcG9uZW50cy9zZXR0aW5ncy9EYXRlUmFuZ2VTZXR0aW5ncy52dWUnO1xyXG4gICAgaW1wb3J0IEV4cGVkaXRpb25FdmVudFJlc291cmNlc0ljb24gZnJvbSAnQC92aWV3cy9fc2hhcmVkL2NvbXBvbmVudHMvRXhwZWRpdGlvbkV2ZW50UmVzb3VyY2VzSWNvbi52dWUnO1xyXG4gICAgaW1wb3J0IHsgRXhwZWRpdGlvbkRlcGxldGlvbkxldmVsLCBFeHBlZGl0aW9uRGVwbGV0aW9uTGV2ZWxzIH0gZnJvbSAnQC9zaGFyZWQvbW9kZWxzL2V4cGVkaXRpb25zL0V4cGVkaXRpb25EZXBsZXRpb25MZXZlbCc7XHJcbiAgICBpbXBvcnQgeyBjcmVhdGVSZWNvcmQgfSBmcm9tICdAL3NoYXJlZC91dGlscy9jcmVhdGVSZWNvcmQnO1xyXG4gICAgaW1wb3J0IHsgX3Rocm93IH0gZnJvbSAnQC9zaGFyZWQvdXRpbHMvX3Rocm93JztcclxuXHJcbiAgICBAQ29tcG9uZW50KHtcclxuICAgICAgICBjb21wb25lbnRzOiB7XHJcbiAgICAgICAgICAgIFJhbmdlZFN0YXRzVGFibGUsXHJcbiAgICAgICAgICAgIERhdGVSYW5nZVNldHRpbmdzLFxyXG4gICAgICAgICAgICBFeHBlZGl0aW9uRXZlbnRSZXNvdXJjZXNJY29uLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFibGUgZXh0ZW5kcyBWdWUge1xyXG4gICAgICAgIHByaXZhdGUgc2hvd1NldHRpbmdzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHByaXZhdGUgYXZnRm9ybWF0OiBJbnRsLk51bWJlckZvcm1hdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMSxcclxuICAgICAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAxLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGNvbG9ycygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNldHRpbmdzRGF0YU1vZHVsZS5zZXR0aW5ncy5jb2xvcnMuZXhwZWRpdGlvbnMuZGVwbGV0aW9uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZXhwb3MoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBFeHBlZGl0aW9uRGF0YU1vZHVsZS5kYWlseVJlc3VsdHNBcnJheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgZGVwbGV0aW9uTGV2ZWxzOiAoRXhwZWRpdGlvbkRlcGxldGlvbkxldmVsIHwgJ3Vua25vd24nKVtdID0gWy4uLkV4cGVkaXRpb25EZXBsZXRpb25MZXZlbHMsICd1bmtub3duJ107XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0IGl0ZW1zKCk6IFJhbmdlZFN0YXRzVGFibGVJdGVtPERhaWx5RXhwZWRpdGlvblJlc3VsdD5bXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlcGxldGlvbkxldmVscy5tYXA8UmFuZ2VkU3RhdHNUYWJsZUl0ZW08RGFpbHlFeHBlZGl0aW9uUmVzdWx0Pj4obGV2ZWwgPT4gKHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5leHBlZGl0aW9ucy5kZXBsZXRpb25MZXZlbHNbbGV2ZWxdLFxyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGV4cG9zID0+IGV4cG9zLnJlZHVjZSgoYWNjLCBleHBvKSA9PiBhY2MgKyBleHBvLmRlcGxldGlvbltsZXZlbF0sIDApLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldCBmb290ZXJJdGVtcygpOiBSYW5nZWRTdGF0c1RhYmxlSXRlbTxEYWlseUV4cGVkaXRpb25SZXN1bHQ+W10ge1xyXG4gICAgICAgICAgICByZXR1cm4gW3tcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5jb21tb24uc3VtLFxyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGV4cG9zID0+IHRoaXMuZGVwbGV0aW9uTGV2ZWxzLnJlZHVjZShcclxuICAgICAgICAgICAgICAgICAgICAoYWNjLCB0eXBlKSA9PiBhY2MgKyBleHBvcy5yZWR1Y2UoKGFjYywgZXhwbykgPT4gYWNjICsgZXhwby5kZXBsZXRpb25bdHlwZV0sIDApLFxyXG4gICAgICAgICAgICAgICAgICAgIDBcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIH1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgZGVwbGV0aW9uTGV2ZWxzQnlMYWJlbCgpOiBSZWNvcmQ8c3RyaW5nLCBFeHBlZGl0aW9uRGVwbGV0aW9uTGV2ZWwgfCAndW5rbm93bic+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJlY29yZChcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVwbGV0aW9uTGV2ZWxzLm1hcChsZXZlbCA9PiB0aGlzLiRpMThuLiR0LmV4dGVuc2lvbi5leHBlZGl0aW9ucy5kZXBsZXRpb25MZXZlbHNbbGV2ZWxdKSxcclxuICAgICAgICAgICAgICAgIGxhYmVsID0+IHRoaXMuZGVwbGV0aW9uTGV2ZWxzLmZpbmQobGV2ZWwgPT4gbGFiZWwgPT0gdGhpcy4kaTE4bi4kdC5leHRlbnNpb24uZXhwZWRpdGlvbnMuZGVwbGV0aW9uTGV2ZWxzW2xldmVsXSkgPz8gX3Rocm93KGBmYWlsZWQgdG8gZmluZCBkZXBsZXRpb24gbGV2ZWwgZm9yIGxhYmVsICcke2xhYmVsfSdgKSxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbjwvc2NyaXB0PlxyXG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XHJcbiAgICAucmFuZ2VkLXN0YXRzLXRhYmxlIC5tZGkge1xyXG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMzAlKSBzY2FsZSgxLjYpO1xyXG4gICAgICAgIHdpZHRoOiAyNHB4O1xyXG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIH1cclxuXHJcbiAgICAudGFibGUtY29udGFpbmVyIHtcclxuICAgICAgICBkaXNwbGF5OiBncmlkO1xyXG4gICAgICAgIGNvbHVtbi1nYXA6IDRweDtcclxuICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciBhdXRvO1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBzdGFydDtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB9XHJcbjwvc3R5bGU+IiwiaW1wb3J0IG1vZCBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIjsgZXhwb3J0IGRlZmF1bHQgbW9kOyBleHBvcnQgKiBmcm9tIFwiLSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdGhyZWFkLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdHMtbG9hZGVyL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTQwWzBdLnJ1bGVzWzBdLnVzZVsyXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzBdLnJ1bGVzWzBdLnVzZVswXSEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTRkMDg3Zjk0JnNjb3BlZD10cnVlJlwiXG5pbXBvcnQgc2NyaXB0IGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz10cyZcIlxuZXhwb3J0ICogZnJvbSBcIi4vVGFibGUudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPXRzJlwiXG5pbXBvcnQgc3R5bGUwIGZyb20gXCIuL1RhYmxlLnZ1ZT92dWUmdHlwZT1zdHlsZSZpbmRleD0wJmlkPTRkMDg3Zjk0Jmxhbmc9c2NzcyZzY29wZWQ9dHJ1ZSZcIlxuXG5cbi8qIG5vcm1hbGl6ZSBjb21wb25lbnQgKi9cbmltcG9ydCBub3JtYWxpemVyIGZyb20gXCIhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B2dWUvdnVlLWxvYWRlci12MTUvbGliL3J1bnRpbWUvY29tcG9uZW50Tm9ybWFsaXplci5qc1wiXG52YXIgY29tcG9uZW50ID0gbm9ybWFsaXplcihcbiAgc2NyaXB0LFxuICByZW5kZXIsXG4gIHN0YXRpY1JlbmRlckZucyxcbiAgZmFsc2UsXG4gIG51bGwsXG4gIFwiNGQwODdmOTRcIixcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiLCJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gKCkge3ZhciBfdm09dGhpczt2YXIgX2g9X3ZtLiRjcmVhdGVFbGVtZW50O3ZhciBfYz1fdm0uX3NlbGYuX2N8fF9oO3JldHVybiBfYygnc3Bhbicse3N0YXRpY0NsYXNzOlwidHJpLXJlc291cmNlXCJ9LFtfYygnby1yZXNvdXJjZScse2F0dHJzOntcInJlc291cmNlXCI6XCJtZXRhbFwiLFwic2l6ZVwiOl92bS5zaXplfX0pLF9jKCdvLXJlc291cmNlJyx7YXR0cnM6e1wicmVzb3VyY2VcIjpcImNyeXN0YWxcIixcInNpemVcIjpfdm0uc2l6ZX19KSxfYygnby1yZXNvdXJjZScse2F0dHJzOntcInJlc291cmNlXCI6XCJkZXV0ZXJpdW1cIixcInNpemVcIjpfdm0uc2l6ZX19KV0sMSl9XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cblxuZXhwb3J0IHsgcmVuZGVyLCBzdGF0aWNSZW5kZXJGbnMgfSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gcmVxdWlyZWRBcmdzO1xuXG5mdW5jdGlvbiByZXF1aXJlZEFyZ3MocmVxdWlyZWQsIGFyZ3MpIHtcbiAgaWYgKGFyZ3MubGVuZ3RoIDwgcmVxdWlyZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHJlcXVpcmVkICsgJyBhcmd1bWVudCcgKyAocmVxdWlyZWQgPiAxID8gJ3MnIDogJycpICsgJyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3MubGVuZ3RoICsgJyBwcmVzZW50Jyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBzdGFydE9mRGF5O1xuXG52YXIgX2luZGV4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vdG9EYXRlL2luZGV4LmpzXCIpKTtcblxudmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIGRheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0T2ZEYXkoZGlydHlEYXRlKSB7XG4gICgwLCBfaW5kZXgyLmRlZmF1bHQpKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gKDAsIF9pbmRleC5kZWZhdWx0KShkaXJ0eURhdGUpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB0b0RhdGU7XG5cbnZhciBfaW5kZXggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5mdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgKDAsIF9pbmRleC5kZWZhdWx0KSgxLCBhcmd1bWVudHMpO1xuICB2YXIgYXJnU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50KTsgLy8gQ2xvbmUgdGhlIGRhdGVcblxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBhcmd1bWVudCA9PT0gJ29iamVjdCcgJiYgYXJnU3RyID09PSAnW29iamVjdCBEYXRlXScpIHtcbiAgICAvLyBQcmV2ZW50IHRoZSBkYXRlIHRvIGxvc2UgdGhlIG1pbGxpc2Vjb25kcyB3aGVuIHBhc3NlZCB0byBuZXcgRGF0ZSgpIGluIElFMTBcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQuZ2V0VGltZSgpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgTnVtYmVyXScpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGlmICgodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IFN0cmluZ10nKSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJTdGFydGluZyB3aXRoIHYyLjAuMC1iZXRhLjEgZGF0ZS1mbnMgZG9lc24ndCBhY2NlcHQgc3RyaW5ncyBhcyBkYXRlIGFyZ3VtZW50cy4gUGxlYXNlIHVzZSBgcGFyc2VJU09gIHRvIHBhcnNlIHN0cmluZ3MuIFNlZTogaHR0cHM6Ly9naXQuaW8vZmp1bGVcIik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5cbiAgICAgIGNvbnNvbGUud2FybihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7Il0sIm5hbWVzIjpbImNvbXBvbmVudCIsInJlbmRlciIsIl92bSIsInRoaXMiLCJfaCIsIiRjcmVhdGVFbGVtZW50IiwiX2MiLCJfc2VsZiIsInN0YXRpY0NsYXNzIiwiYXR0cnMiLCJjb2x1bW5zIiwicm93cyIsImZvb3RlclJvd3MiLCJ2YWx1ZSIsImdldENlbGxDbGFzcyIsInNjb3BlZFNsb3RzIiwiX3UiLCJfbCIsImNvbHVtbiIsImkiLCJrZXkiLCJmbiIsInJlZiIsIml0ZW0iLCJzbG90TmFtZSIsIiRzY29wZWRTbG90cyIsIl90IiwiZG9tUHJvcHMiLCJfcyIsImNsYXNzIiwibGFiZWxDbGFzcyIsImxhYmVsIiwiaXRlbXMiLCJmb3JtYXR0ZXIiLCJpbmRleCIsIm5hbWUiLCJkYXRhIiwic3RhdGljUmVuZGVyRm5zIiwiZXhwb3MiLCJmb290ZXJJdGVtcyIsImF2Z0Zvcm1hdCIsInVua25vd24iLCJub25lIiwibG93IiwibWVkaXVtIiwiaGlnaCIsImRlcGxldGlvbkxldmVsc0J5TGFiZWwiLCJzdHlsZSIsImNvbG9yIiwiY29sb3JzIiwib24iLCIkZXZlbnQiLCJzaG93U2V0dGluZ3MiLCJwcm94eSIsIm1vZGVsIiwiY2FsbGJhY2siLCIkJHYiLCJleHByZXNzaW9uIiwic2l6ZSIsInJlcXVpcmVkQXJncyIsInJlcXVpcmVkIiwiYXJncyIsImxlbmd0aCIsIlR5cGVFcnJvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmF1bHQiLCJzdGFydE9mRGF5IiwiX2luZGV4IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9pbmRleDIiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGlydHlEYXRlIiwiYXJndW1lbnRzIiwiZGF0ZSIsInNldEhvdXJzIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmdTdHIiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiJdLCJzb3VyY2VSb290IjoiIn0=